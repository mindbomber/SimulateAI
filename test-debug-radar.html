<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Radar Chart - SimulateAI</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .chart-container {
            width: 500px;
            height: 500px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .debug-info {
            background: #fff;
            padding: 15px;
            margin: 10px;
            border-radius: 8px;
            border-left: 4px solid #007acc;
        }
    </style>
</head>
<body>
    <h1>Radar Chart Debug Test</h1>
    
    <div class="debug-info">
        <h3>Debug Information</h3>
        <div id="debug-output"></div>
    </div>
    
    <div class="chart-container">
        <canvas id="radarChart" width="400" height="400"></canvas>
    </div>
    
    <div class="debug-info">
        <h3>Controls</h3>
        <button onclick="updateChart()">Update Chart</button>
        <button onclick="logChartInfo()">Log Chart Info</button>
    </div>

    <script>
        const debugOutput = document.getElementById('debug-output');
        
        function log(message) {
            console.log(message);
            debugOutput.innerHTML += `<p>${message}</p>`;
        }
        
        log('Starting radar chart debug test...');
        
        // Check if Chart.js is loaded
        if (typeof Chart !== 'undefined') {
            log(`✅ Chart.js is loaded: Version ${Chart.version || 'unknown'}`);
        } else {
            log('❌ Chart.js is NOT loaded');
        }
        
        // Ethical axes data
        const ethicalAxes = {
            fairness: { label: 'Fairness', color: '#3498db' },
            sustainability: { label: 'Sustainability', color: '#27ae60' },
            autonomy: { label: 'Autonomy', color: '#9b59b6' },
            beneficence: { label: 'Beneficence', color: '#e74c3c' },
            transparency: { label: 'Transparency', color: '#f39c12' },
            accountability: { label: 'Accountability', color: '#34495e' },
            privacy: { label: 'Privacy', color: '#e67e22' },
            proportionality: { label: 'Proportionality', color: '#1abc9c' }
        };
        
        const defaultScores = [3, 3, 3, 3, 3, 3, 3, 3]; // All neutral
        
        let chart;
        
        function createChart() {
            log('Creating radar chart...');
            
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            const config = {
                type: 'radar',
                data: {
                    labels: Object.values(ethicalAxes).map(axis => axis.label),
                    datasets: [{
                        label: 'Ethical Impact Analysis',
                        data: defaultScores,
                        backgroundColor: 'rgba(59, 130, 246, 0.15)',
                        borderColor: 'rgba(59, 130, 246, 0.8)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        tension: 0.2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            min: 0,
                            max: 5,
                            ticks: {
                                stepSize: 1,
                                display: true,
                                backdropColor: 'rgba(255, 255, 255, 0.8)',
                                backdropPadding: 4,
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                },
                                color: '#333'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                lineWidth: 1
                            },
                            angleLines: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                lineWidth: 1
                            },
                            pointLabels: {
                                display: true,
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                color: '#333',
                                padding: 10
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: 'Ethical Impact Radar Chart',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        }
                    }
                }
            };
            
            try {
                chart = new Chart(ctx, config);
                log('✅ Chart created successfully!');
                log(`Chart type: ${chart.config.type}`);
                log(`Data labels: ${chart.data.labels.join(', ')}`);
                log(`Data values: ${chart.data.datasets[0].data.join(', ')}`);
            } catch (error) {
                log(`❌ Error creating chart: ${error.message}`);
                console.error(error);
            }
        }
        
        function updateChart() {
            if (chart) {
                // Update with random values
                const newData = Array.from({length: 8}, () => Math.floor(Math.random() * 6));
                chart.data.datasets[0].data = newData;
                chart.update();
                log(`📊 Chart updated with new data: ${newData.join(', ')}`);
            } else {
                log('❌ No chart to update');
            }
        }
        
        function logChartInfo() {
            if (chart) {
                log('📊 Chart Information:');
                log(`- Type: ${chart.config.type}`);
                log(`- Canvas dimensions: ${chart.canvas.width}x${chart.canvas.height}`);
                log(`- Scale options: ${JSON.stringify(chart.options.scales.r.pointLabels, null, 2)}`);
            } else {
                log('❌ No chart available');
            }
        }
        
        // Create chart when page loads
        window.addEventListener('load', () => {
            log('Page loaded, creating chart...');
            setTimeout(createChart, 100);
        });
    </script>
</body>
</html>
