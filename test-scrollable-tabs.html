<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollable Tabs Test - SimulateAI</title>
    <link rel="stylesheet" href="src/styles/base.css">
    <link rel="stylesheet" href="src/styles/modal.css">
    <link rel="stylesheet" href="src/styles/pre-launch-modal.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .demo-modal {
            border: 2px solid #ddd;
            border-radius: 12px;
            overflow: hidden;
            margin: 2rem 0;
            background: white;
        }
        
        .demo-header {
            background: #667eea;
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
        }
        
        .width-controls {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            align-items: center;
        }
        
        .width-control {
            background: #f0f2ff;
            border: 1px solid #667eea;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .width-control.active {
            background: #667eea;
            color: white;
        }
        
        .demo-content {
            padding: 1rem;
            background: #f8f9fa;
            min-height: 200px;
        }
        
        .instructions {
            background: rgba(102, 126, 234, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        
        /* Demo container width controls */
        .demo-modal.width-400 { max-width: 400px; margin: 2rem auto; }
        .demo-modal.width-600 { max-width: 600px; margin: 2rem auto; }
        .demo-modal.width-800 { max-width: 800px; margin: 2rem auto; }
        .demo-modal.width-full { max-width: 100%; margin: 2rem 0; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üìú Scrollable Tabs Test</h1>
        
        <div class="instructions">
            <h3>Testing Scrollable Tab Behavior:</h3>
            <ul>
                <li><strong>Desktop:</strong> Tabs will show horizontal scrollbar when container is too narrow</li>
                <li><strong>Mobile (‚â§768px):</strong> Uses hamburger menu (no scrolling needed)</li>
                <li><strong>Scroll indicators:</strong> Subtle fade effects show when content is scrollable</li>
                <li><strong>Auto-scroll:</strong> Clicking a tab scrolls it into view smoothly</li>
                <li><strong>Keyboard:</strong> Tab navigation with arrow keys and focus indicators</li>
            </ul>
        </div>
        
        <div class="width-controls">
            <strong>Test container width:</strong>
            <button class="width-control" onclick="setWidth('400')">400px (Cramped)</button>
            <button class="width-control" onclick="setWidth('600')">600px (Tight)</button>
            <button class="width-control active" onclick="setWidth('800')">800px (Normal)</button>
            <button class="width-control" onclick="setWidth('full')">Full Width</button>
        </div>
        
        <div class="demo-modal width-800" id="demo-modal">
            <div class="demo-header">Pre-Launch Modal - Tab Navigation</div>
            
            <nav class="pre-launch-tabs" role="tablist">
                <!-- Mobile Hamburger Menu -->
                <div class="tab-mobile-menu">
                    <button class="tab-hamburger" aria-label="Toggle navigation menu" aria-expanded="false" onclick="toggleMenu()">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                    <span class="tab-current-label">Overview</span>
                </div>
                
                <!-- Tab Buttons Container with Scrolling -->
                <div class="tab-buttons-container" id="tab-container">
                    <button class="tab-button active" data-tab="overview" onclick="selectTab(this, 'Overview')">
                        <span class="tab-icon">üéØ</span>
                        Overview
                    </button>
                    <button class="tab-button" data-tab="objectives" onclick="selectTab(this, 'Learning Goals')">
                        <span class="tab-icon">üìö</span>
                        Learning Goals
                    </button>
                    <button class="tab-button" data-tab="ethics" onclick="selectTab(this, 'Ethics Guide')">
                        <span class="tab-icon">‚öñÔ∏è</span>
                        Ethics Guide
                    </button>
                    <button class="tab-button" data-tab="preparation" onclick="selectTab(this, 'Get Ready')">
                        <span class="tab-icon">üöÄ</span>
                        Get Ready
                    </button>
                    <button class="tab-button" data-tab="resources" onclick="selectTab(this, 'Resources')">
                        <span class="tab-icon">üìñ</span>
                        Resources
                    </button>
                    <button class="tab-button" data-tab="educator" onclick="selectTab(this, 'For Educators')">
                        <span class="tab-icon">üë®‚Äçüè´</span>
                        For Educators
                    </button>
                </div>
            </nav>
            
            <div class="demo-content">
                <h4>Current Tab: <span id="current-tab">Overview</span></h4>
                <p>Try clicking the tabs above to see the smooth scrolling behavior when tabs overflow the container width.</p>
                <p><strong>Features demonstrated:</strong></p>
                <ul>
                    <li>‚úÖ Horizontal scrolling when tabs don't fit</li>
                    <li>‚úÖ Smooth auto-scroll to clicked tab</li>
                    <li>‚úÖ Scroll indicators (fade effects)</li>
                    <li>‚úÖ Responsive hamburger menu on mobile</li>
                    <li>‚úÖ Keyboard navigation support</li>
                </ul>
            </div>
        </div>
        
        <div style="margin-top: 2rem; padding: 1rem; background: #f0f2ff; border-radius: 8px;">
            <h4>Test Instructions:</h4>
            <ol>
                <li><strong>Test cramped width:</strong> Click "400px" to see horizontal scrolling in action</li>
                <li><strong>Test mobile view:</strong> Resize browser to ‚â§768px or use dev tools mobile simulation</li>
                <li><strong>Test tab overflow:</strong> Click rightmost tabs to see auto-scroll behavior</li>
                <li><strong>Test real modal:</strong> <button onclick="openRealModal()" style="background: #667eea; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer;">Open Pre-Launch Modal</button></li>
            </ol>
        </div>
    </div>

    <script type="module">
        import PreLaunchModal from './src/js/components/pre-launch-modal.js';
        import { categories } from './src/data/categories.js';
        
        // Width control functions
        window.setWidth = function(width) {
            const modal = document.getElementById('demo-modal');
            modal.className = 'demo-modal width-' + width;
            
            // Update active button
            document.querySelectorAll('.width-control').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update scroll indicators after width change
            setTimeout(updateScrollIndicators, 100);
        };
        
        // Tab selection
        window.selectTab = function(button, tabName) {
            // Update active state
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Update current tab display
            document.getElementById('current-tab').textContent = tabName;
            document.querySelector('.tab-current-label').textContent = tabName;
            
            // Scroll tab into view (desktop only)
            if (window.innerWidth > 768) {
                button.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            }
            
            // Close mobile menu if open
            const hamburger = document.querySelector('.tab-hamburger');
            const container = document.querySelector('.tab-buttons-container');
            hamburger.setAttribute('aria-expanded', 'false');
            container.classList.remove('expanded');
            
            setTimeout(updateScrollIndicators, 300);
        };
        
        // Mobile menu toggle
        window.toggleMenu = function() {
            const hamburger = document.querySelector('.tab-hamburger');
            const container = document.querySelector('.tab-buttons-container');
            const isExpanded = hamburger.getAttribute('aria-expanded') === 'true';
            
            hamburger.setAttribute('aria-expanded', !isExpanded);
            container.classList.toggle('expanded', !isExpanded);
        };
        
        // Scroll indicators
        function updateScrollIndicators() {
            const container = document.getElementById('tab-container');
            const navigation = document.querySelector('.pre-launch-tabs');
            
            if (container && navigation) {
                const { scrollLeft, scrollWidth, clientWidth } = container;
                const canScrollLeft = scrollLeft > 0;
                const canScrollRight = scrollLeft < (scrollWidth - clientWidth - 1);
                
                navigation.classList.toggle('scrollable-left', canScrollLeft);
                navigation.classList.toggle('scrollable-right', canScrollRight);
            }
        }
        
        // Real modal test
        window.openRealModal = function() {
            try {
                const testCategory = categories[0];
                const testScenario = testCategory.scenarios[0];
                
                const modal = new PreLaunchModal(testCategory.id, {
                    categoryData: testCategory,
                    scenarioData: testScenario,
                    showEducatorResources: true,
                    onLaunch: () => modal.close(),
                    onCancel: () => modal.close()
                });
                
                modal.show();
            } catch (error) {
                console.error('Error:', error);
                alert('Error: ' + error.message);
            }
        };
        
        // Setup event listeners
        document.getElementById('tab-container').addEventListener('scroll', updateScrollIndicators);
        window.addEventListener('resize', updateScrollIndicators);
        
        // Initial setup
        updateScrollIndicators();
    </script>
</body>
</html>
