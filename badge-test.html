<!DOCTYPE html>
<html>
<head>
    <title>Badge Progress Test</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .info { background: #f0f8ff; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Badge Progress Test Page</h1>
    
    <div class="test-section">
        <h3>Test Scenarios</h3>
        <button onclick="clearProgress()">Clear All Progress</button>
        <button onclick="setTestScenario1()">Set Test: 0 scenarios (needs 1 for badge)</button>
        <button onclick="setTestScenario2()">Set Test: 2 scenarios (needs 1 for badge)</button>
        <button onclick="setTestScenario3()">Set Test: 5 scenarios (needs 1 for badge)</button>
        <button onclick="checkProgress()">Check Current Progress</button>
    </div>

    <div class="test-section">
        <h3>Navigate to Main App</h3>
        <button onclick="goToMainApp()">Go to Main App (New Tab)</button>
    </div>

    <div class="info" id="output">
        Click buttons above to test different badge progress scenarios.
    </div>

    <script>
        function clearProgress() {
            localStorage.removeItem('simulateai_category_progress');
            document.getElementById('output').innerHTML = 'Progress cleared!';
        }

        function setTestScenario1() {
            // User has 0 scenarios completed - needs 1 more for first badge (tier 1, req: 1)
            const testProgress = {
                'trolley-problem': {},
                'ai-black-box': {},
                'bias-fairness': {}
            };
            localStorage.setItem('simulateai_category_progress', JSON.stringify(testProgress));
            document.getElementById('output').innerHTML = 'Set test scenario: Users need 1 scenario for their first badge. Progress rings should pulse!';
        }

        function setTestScenario2() {
            // User has 2 scenarios completed - needs 1 more for second badge (tier 2, req: 3)
            const testProgress = {
                'trolley-problem': {
                    'autonomous-vehicle-1': true,
                    'autonomous-vehicle-2': true
                },
                'ai-black-box': {
                    'scenario-1': true,
                    'scenario-2': true
                }
            };
            localStorage.setItem('simulateai_category_progress', JSON.stringify(testProgress));
            document.getElementById('output').innerHTML = 'Set test scenario: Users have 2 scenarios, need 1 more for second badge. Progress rings should pulse!';
        }

        function setTestScenario3() {
            // User has 5 scenarios completed - needs 1 more for third badge (tier 3, req: 6)
            const testProgress = {
                'bias-fairness': {
                    'scenario-1': true,
                    'scenario-2': true,
                    'scenario-3': true,
                    'scenario-4': true,
                    'scenario-5': true
                }
            };
            localStorage.setItem('simulateai_category_progress', JSON.stringify(testProgress));
            document.getElementById('output').innerHTML = 'Set test scenario: User has 5 scenarios, needs 1 more for third badge. Progress ring should pulse!';
        }

        function checkProgress() {
            const progress = localStorage.getItem('simulateai_category_progress');
            if (progress) {
                const parsed = JSON.parse(progress);
                let output = '<h4>Current Progress:</h4>';
                for (const [category, scenarios] of Object.entries(parsed)) {
                    const count = Object.keys(scenarios).length;
                    output += `<p>${category}: ${count} scenarios completed</p>`;
                }
                document.getElementById('output').innerHTML = output;
            } else {
                document.getElementById('output').innerHTML = 'No progress found in localStorage.';
            }
        }

        function goToMainApp() {
            window.open('http://localhost:5173', '_blank');
        }
    </script>
</body>
</html>
