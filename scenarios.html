<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="page-id" content="scenarios" />
    <title>Browse Scenarios - SimulateAI</title>
    <meta
      name="description"
      content="Discover and filter through AI ethics scenarios by category, difficulty, and philosophical approach"
    />

    <!-- CSS Files -->
    <link rel="stylesheet" href="src/styles/main.css" />
    <link rel="stylesheet" href="src/styles/accessibility.css" />
    <link rel="stylesheet" href="src/styles/simulations.css" />
    <link rel="stylesheet" href="src/styles/layout-components.css" />
    <link rel="stylesheet" href="src/styles/advanced-ui-components.css" />
    <link rel="stylesheet" href="src/styles/enhanced-objects.css" />
    <link rel="stylesheet" href="src/styles/card-component.css" />
    <link rel="stylesheet" href="src/styles/category-grid.css" />
    <link rel="stylesheet" href="src/styles/scenario-browser.css" />
    <link rel="stylesheet" href="src/styles/input-utility-components.css" />
    <link rel="stylesheet" href="src/styles/scenario-modal.css" />
    <link rel="stylesheet" href="src/styles/loader-spinner.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="src/assets/icons/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="src/assets/icons/favicon.svg" />
  </head>
  <body>
    <!-- Navigation will be injected here -->

    <main class="main-content">
      <!-- Hero Section -->
      <section class="hero scenario-hero">
        <div class="hero-content">
          <h1 class="hero-title">Explore AI Ethics Scenarios</h1>
          <p class="hero-description">
            Filter and discover thought-provoking scenarios by category,
            difficulty, philosophical approach, and ethical themes. Find the
            perfect scenario for your learning journey.
          </p>
        </div>
      </section>

      <!-- Filter Section -->
      <section class="filter-section">
        <div class="filter-container">
          <div class="filter-header">
            <h2>üîç Filter Scenarios</h2>
            <button class="btn btn-secondary" id="clear-filters">
              Clear All
            </button>
          </div>

          <!-- Active Filters Display -->
          <div class="active-filters" id="active-filters">
            <!-- Active filter chips will be displayed here -->
          </div>

          <!-- Filter Controls -->
          <div class="filter-controls">
            <!-- Category Filter -->
            <div class="filter-group">
              <label for="category-filter">Category</label>
              <select id="category-filter" class="filter-select">
                <option value="">All Categories</option>
                <option value="trolley-problem">Trolley Problem</option>
                <option value="ai-black-box">AI Black Box</option>
                <option value="automation-oversight">
                  Automation vs Human Oversight
                </option>
                <option value="consent-surveillance">
                  Consent and Surveillance
                </option>
                <option value="moral-luck">Moral Luck</option>
                <option value="responsibility-blame">
                  Responsibility & Blame
                </option>
                <option value="ship-of-theseus">Ship of Theseus</option>
                <option value="simulation-hypothesis">
                  Simulation Hypothesis
                </option>
                <option value="experience-machine">Experience Machine</option>
                <option value="sorites-paradox">Sorites Paradox</option>
              </select>
            </div>

            <!-- Difficulty Filter -->
            <div class="filter-group">
              <label for="difficulty-filter">Difficulty</label>
              <select id="difficulty-filter" class="filter-select">
                <option value="">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>

            <!-- Philosophical Approach Filter -->
            <div class="filter-group">
              <label for="philosophy-filter">Philosophical Approach</label>
              <select id="philosophy-filter" class="filter-select">
                <option value="">All Approaches</option>
                <option value="utilitarian">Utilitarian</option>
                <option value="deontological">Deontological</option>
                <option value="virtue-ethics">Virtue Ethics</option>
                <option value="existentialist">Existentialist</option>
                <option value="pragmatist">Pragmatist</option>
                <option value="social-contract">Social Contract</option>
              </select>
            </div>

            <!-- Tags Filter -->
            <div class="filter-group filter-group-tags">
              <label>Ethical Themes</label>
              <div class="tag-filter-container">
                <div class="tag-chips" id="tag-chips">
                  <!-- Tag chips will be populated dynamically -->
                </div>
              </div>
            </div>

            <!-- Search Filter -->
            <div class="filter-group filter-group-search">
              <label for="search-filter">Search Keywords</label>
              <input
                type="text"
                id="search-filter"
                class="filter-input"
                placeholder="Search scenario titles, descriptions..."
              />
            </div>
          </div>
        </div>
      </section>

      <!-- Results Section -->
      <section class="results-section">
        <div class="results-container">
          <div class="results-header">
            <h2 id="results-count">Loading scenarios...</h2>
            <div class="sort-controls">
              <label for="sort-by">Sort by:</label>
              <select id="sort-by" class="sort-select">
                <option value="title">Title (A-Z)</option>
                <option value="difficulty">Difficulty</option>
                <option value="category">Category</option>
                <option value="recently-added">Recently Added</option>
              </select>
            </div>
          </div>

          <!-- Loading State -->
          <div class="loading-state" id="loading-state">
            <div class="spinner"></div>
            <p>Loading scenarios...</p>
          </div>

          <!-- No Results State -->
          <div class="no-results" id="no-results" style="display: none">
            <div class="no-results-icon">üîç</div>
            <h3>No scenarios found</h3>
            <p>Try adjusting your filters or search terms</p>
            <button class="btn btn-primary" onclick="clearAllFilters()">
              Clear Filters
            </button>
          </div>

          <!-- Scenario Grid -->
          <div class="scenarios-grid" id="scenarios-grid">
            <!-- Scenario cards will be populated here -->
          </div>

          <!-- Load More Button -->
          <div
            class="load-more-container"
            id="load-more-container"
            style="display: none"
          >
            <button class="btn btn-secondary" id="load-more-btn">
              Load More Scenarios
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer will be injected here -->

    <!-- Firebase Configuration -->
    <script>
      // Firebase configuration for scenarios page
      window.firebaseConfig = {
        apiKey: 'AIzaSyBvOkBwagyLqMsXaQiQUF3lm5IshN_lT_Y',
        authDomain: 'simulateai-research.firebaseapp.com',
        projectId: 'simulateai-research',
        storageBucket: 'simulateai-research.appspot.com',
        messagingSenderId: '123456789012',
        appId: '1:123456789012:web:abcdef123456',
      };
    </script>

    <!-- Firebase -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

      const app = initializeApp(window.firebaseConfig);
      window.db = getFirestore(app);
    </script>
    <!-- Non-module JavaScript - Load first -->
    <script src="src/js/components/shared-navigation.js"></script>

    <!-- JavaScript Modules -->
    <script type="module" src="src/js/components/scenario-browser.js"></script>
    <script type="module">
      import ScenarioBrowser from './src/js/components/scenario-browser.js';

      // Initialize the page
      document.addEventListener('DOMContentLoaded', async () => {
        // Initialize shared navigation first
        const nav = new SharedNavigation();
        await nav.init({ currentPage: 'scenarios' });

        // Then initialize scenario browser
        const browser = new ScenarioBrowser();
        window.scenarioBrowser = browser; // Make available globally for onclick handlers
        await browser.init();
      });
    </script>
  </body>
</html>
