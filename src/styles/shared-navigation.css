/**
 * Shared Navigation Component Styles
 * Organizes navigation into logical groups for better UX
 * Enhanced with media.css responsive integration
 * 
 * CONSOLIDATED UNIVERSAL SELECTORS
 * Contains global resets and accessibility rules for consistent behavior
 * 
 * OPTIMIZATION UPDATES:
 * ✅ Standardized breakpoint system aligned with media.css (360px, 375px, 390px, 428px, 768px, 1024px, 1280px)
 * ✅ Centralized z-index layering system using CSS custom properties
 * ✅ Reduced !important usage where CSS specificity can be used instead
 * ✅ Maintained !important for necessary JavaScript override scenarios
 * ✅ Improved consistency in media query syntax with mobile-first approach
 * ✅ Integrated media.css variables for responsive scaling and padding
 */

/* Import required component styles - moved outside @layer for proper loading */
@import url("./media.css"); /* Import first for responsive variables */
/* Note: settings-menu.css and footer.css should be loaded by their owning components, not via navigation */

@layer components {
  /* ===== MODERN NAVIGATION DESIGN SYSTEM ===== */
  :root {
    /* ===== STANDARDIZED BREAKPOINTS - ALIGNED WITH MEDIA.CSS ===== */
    /* Use media.css breakpoints for consistency */
    --breakpoint-mobile-xs: 360px; /* Samsung Galaxy S21 */
    --breakpoint-mobile-sm: 375px; /* iPhone SE */
    --breakpoint-mobile-md: 390px; /* iPhone 12/13/14 */
    --breakpoint-mobile-lg: 428px; /* iPhone 12 Pro Max */
    --breakpoint-tablet-sm: 768px; /* iPad Mini */
    --breakpoint-tablet-lg: 1024px; /* iPad Pro */
    --breakpoint-laptop-sm: 1280px; /* MacBook Air 13" */
    --breakpoint-desktop-xl: 1920px; /* Full HD Desktop */

    /* ===== Z-INDEX LAYERING SYSTEM ===== */
    --z-base: 100; /* Base content */
    --z-header: 1000; /* Header/navigation */
    --z-header-scrolled: 1001; /* Header when scrolled */
    --z-dropdown: 1050; /* Dropdown menus */
    --z-dropdown-hover: 1051; /* Dropdown hover states */
    --z-backdrop: 9998; /* Navigation backdrop */
    --z-navigation: 9999; /* Mobile navigation */
    --z-modal: 10000; /* Modal dialogs */

    /* Header Dimensions */
    --header-h: 80px;
    --header-padding-y: 1rem;
    --header-padding-x: 1.5rem;

    /* Navigation Colors - Indigo-Purple Theme to match donor cards */
    --nav-bg-primary: rgb(255 255 255 / 85%);
    --nav-bg-hover: rgb(248 250 252 / 80%);
    --nav-bg-active: rgb(238 242 255 / 60%); /* Indigo-50 with transparency */

    --nav-text-color: #6366f1; /* Indigo-500 - matches donor card theme */
    --nav-text-hover: #4f46e5; /* Indigo-600 */
    --nav-text-active: #3730a3; /* Indigo-700 */

    --nav-border-color: rgb(99 102 241 / 20%); /* Indigo with transparency */
    --nav-border-hover: rgb(99 102 241 / 30%);

    /* Shadows & Effects */
    --nav-shadow-sm: 0 1px 3px rgb(0 0 0 / 5%), 0 1px 2px rgb(0 0 0 / 10%);
    --nav-shadow-md:
      0 4px 6px -1px rgb(0 0 0 / 10%), 0 2px 4px -1px rgb(0 0 0 / 6%);
    --nav-shadow-lg:
      0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -2px rgb(0 0 0 / 5%);

    /* Transitions */
    --nav-transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --nav-transition-normal: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --nav-transition-slow: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

    /* Spacing */
    --nav-spacing-xs: 0.25rem;
    --nav-spacing-sm: 0.5rem;
    --nav-spacing-md: 0.75rem;
    --nav-spacing-lg: 1rem;
    --nav-spacing-xl: 1.5rem;
    --nav-spacing-2xl: 2rem;

    /* ===== MOBILE NAVIGATION TYPOGRAPHY DESIGN SYSTEM ===== */
    /**
   * DESIGN PHILOSOPHY: Cognitive Function + Emotional Experience
   * 
   * This typography system prioritizes readability, hierarchy, trust-building, and user comfort
   * while maintaining professional aesthetics and accessibility compliance.
   * 
   * COGNITIVE CONSIDERATIONS:
   * • 18px base (1.125rem) - scientifically optimal for mobile reading comprehension
   * • Weight 550 base - clarity without intimidation or excessive boldness  
   * • Line Height 1.4 - comfortable reading rhythm preventing text cramping
   * • Letter Spacing -0.025em - modern tight tracking for cohesive appearance
   * 
   * EMOTIONAL DESIGN:
   * • Color Progression: #1e293b → #0f172a → #020617 (rest → hover → active)
   *   Creates depth and responsiveness that builds user confidence
   * • Weight Progression: 550 → 600 → 650 provides tactile feedback
   * • System fonts prioritize familiarity and trust
   * 
   * ACCESSIBILITY: High contrast modes, reduced motion support, keyboard navigation
   */

    /* Professional Typography Variables for Cognitive and Emotional Optimization */

    /* Primary Navigation Typography */
    --mobile-nav-font-family:
      system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter",
      "SF Pro Display", sans-serif;
    --mobile-nav-font-size: 1.125rem; /* 18px - optimal for mobile reading */
    --mobile-nav-font-weight: 550; /* Semi-medium for clarity */
    --mobile-nav-line-height: 1.4; /* Comfortable reading */
    --mobile-nav-letter-spacing: -0.025em; /* Modern tight tracking */

    /* Typography Colors */
    --mobile-nav-text-primary: #1e293b; /* Darker for better readability */
    --mobile-nav-text-hover: #0f172a; /* Deepest for interaction */
    --mobile-nav-text-active: #020617; /* Pure dark for pressed state */
    --mobile-nav-text-secondary: #475569; /* Softer for hierarchy */

    /* Typography Weights */
    --mobile-nav-weight-base: 550;
    --mobile-nav-weight-hover: 600;
    --mobile-nav-weight-active: 650;
    --mobile-nav-weight-focus: 575;

    /* Typography Scaling for Small Screens */
    --mobile-nav-font-size-small: 1.0625rem; /* 17px for ≤375px */
    --mobile-nav-font-size-tiny: 1rem; /* 16px for ≤320px */

    /* Authority and Trust Typography for Authentication */
    --mobile-auth-font-weight: 600;
    --mobile-auth-color: #3730a3; /* Indigo-700 for trust */
    --mobile-auth-color-hover: #1e1b4b; /* Darker for authority */
  }

  /* ===== UNIVERSAL SELECTORS - GLOBAL FOUNDATION ===== */
  /* Fundamental CSS reset for consistent box model */
  * {
    box-sizing: border-box;
  }

  /* Accessibility: Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .animated,
    .fade,
    .slide,
    .mega-menu-item:hover,
    .mega-menu-item:focus {
      animation: none !important;
      transition: none !important;
      transform: none !important;
    }
  }

  /* Data saver mode: Remove resource-heavy visual elements */
  @media (prefers-reduced-data: reduce) {
    * {
      background-image: none !important;
    }

    .thumbnail,
    .hero-image,
    .background-image,
    .hero-demo::before {
      display: none;
    }
  }

  /* ===== ELEMENT.STYLE OVERRIDE SYSTEM ===== */
  /* Consolidated force-visible patterns to prevent JavaScript inline style conflicts */
  /* These !important declarations override any element.style properties set by JavaScript */

  /* Navigation Force-Visible States - Master Override System */
  .mega-menu.force-visible,
  .mega-menu.open,
  .mega-menu.js-open {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    transform: translateY(0) !important;
    z-index: var(--z-dropdown) !important;
    position: absolute !important;
  }

  .dropdown.force-visible,
  .dropdown-menu.open,
  .dropdown-menu.js-open,
  .settings-menu.open,
  .settings-menu.js-open {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: absolute !important;
    z-index: var(--z-dropdown) !important;
    transform: translateY(0) !important;
  }

  /* ===== SETTINGS NAVIGATION HOVER LOGIC ===== */
  /* Ensure #settings-nav dropdown stays open on hover and has highest z-index */
  #settings-nav {
    position: relative;
  }

  /* Settings dropdown container with highest z-index */
  .settings-menu {
    z-index: var(--z-dropdown-hover); /* Higher than all other elements */
    transition:
      opacity 0.2s ease,
      visibility 0.2s ease;
  }

  /* Keep settings menu open when hovering over trigger or menu */
  #settings-nav:hover + .settings-menu,
  .nav-item-dropdown:hover .settings-menu {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: var(--z-dropdown-hover);
  }

  /* Ensure the entire nav-item-dropdown container maintains hover state */
  .nav-item-dropdown {
    position: relative;
  }

  .nav-item-dropdown:hover {
    z-index: var(
      --z-dropdown-hover
    ); /* Container gets even higher z-index when hovered */
  }

  /* Settings menu should close when user scrolls away */
  /* This will be handled by JavaScript, but we ensure it has proper positioning */
  .settings-menu {
    position: absolute !important;
    top: calc(100% + 5px) !important;
    right: 0 !important;
    white-space: nowrap;
  }

  /* Force settings menu above floating tabs and other overlay elements */
  .nav-item-dropdown:hover .settings-menu,
  .nav-item-dropdown:focus-within .settings-menu {
    z-index: var(--z-dropdown-hover);
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Generic dropdown parity with settings menu */
  .nav-item-dropdown:hover .dropdown-menu,
  .nav-item-dropdown:focus-within .dropdown-menu {
    z-index: var(--z-dropdown-hover);
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    transform: translateY(0) scale(1) !important;
  }

  /* Mobile Navigation Force-Visible States */
  .main-nav.force-visible,
  .main-nav.open,
  .main-nav.mobile-force-visible,
  .main-nav.js-open {
    right: 0 !important;
    transform: translateX(0) !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: var(--z-navigation) !important;
    position: fixed !important;
    top: 0 !important;
    width: 100% !important;
    /* fallback then dynamic viewport height for mobile browsers */
    height: 100vh !important;
    height: 100dvh !important;
    background: white !important;
  }

  /* Enhanced Mobile Navigation for Smaller Viewports - Aligned with media.css */
  @media only screen and (width <= 428px) {
    .main-nav.force-visible,
    .main-nav.open,
    .main-nav.mobile-force-visible,
    .main-nav.js-open {
      /* Optimize for smaller screens - use slide-in drawer */
      width: 85% !important;
      max-width: 320px !important;
      /* fallback then dynamic viewport height */
      height: 100vh !important;
      height: 100dvh !important;
      right: 0 !important;
      will-change: transform !important;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    .main-nav.force-visible.open,
    .main-nav.open.mobile-force-visible,
    .main-nav.mobile-force-visible.js-open {
      transform: translateX(0) !important;
    }
  }

  /* Extra Small Viewports - Even more compact - Aligned with media.css */
  @media only screen and (width <= 375px) {
    .main-nav.force-visible,
    .main-nav.open,
    .main-nav.mobile-force-visible,
    .main-nav.js-open {
      width: 90% !important;
      max-width: 280px !important;
      padding: 2rem 1rem !important;
    }

    /* Ensure navigation items are more compact */
    .main-nav .nav-group .nav-link {
      padding: 0.75rem !important;
      font-size: calc(0.95rem * var(--font-scale, 1)) !important;
    }
  }

  /* Very Small Viewports - Ultra compact - Aligned with media.css */
  @media only screen and (width <= 360px) {
    .main-nav.force-visible,
    .main-nav.open,
    .main-nav.mobile-force-visible,
    .main-nav.js-open {
      width: 95% !important;
      max-width: 260px !important;
      padding: calc(1.5rem * var(--font-scale, 1))
        calc(0.75rem * var(--font-scale, 1)) !important;
    }

    .main-nav .nav-group .nav-link {
      padding: calc(0.5rem * var(--font-scale, 1)) !important;
      font-size: calc(0.9rem * var(--font-scale, 1)) !important;
    }
  }

  /* Generic Force-Visible Utility Classes */
  .force-visible {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Mobile Navigation Backdrop */
  .nav-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    /* fallback then dynamic viewport height */
    height: 100vh;
    height: 100dvh;
    background: rgb(0 0 0 / 50%);
    z-index: var(--z-backdrop);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    pointer-events: none; /* disabled when hidden */
  }

  /* Explicit open state for JS-controlled backdrop */
  .nav-backdrop.open {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  /* Show backdrop when mobile nav is open */
  /* Backdrop should appear whenever mobile drawer is open */
  .main-nav.open ~ .nav-backdrop,
  .main-nav.mobile-force-visible ~ .nav-backdrop,
  body:has(.main-nav.open) .nav-backdrop,
  body:has(.main-nav.mobile-force-visible) .nav-backdrop {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  /* Enhanced mobile navigation close button */
  .mobile-nav-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--nav-text-color);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 6px;
    transition: background-color 0.2s ease;
    z-index: var(--z-dropdown-hover);
  }

  .mobile-nav-close:hover {
    background-color: rgb(0 0 0 / 10%);
  }

  @media (width <= 375px) {
    .mobile-nav-close {
      top: 0.75rem;
      right: 0.75rem;
      font-size: 1.25rem;
      padding: 0.375rem;
    }
  }

  /* Landscape orientation adjustments for mobile devices */
  @media only screen and (max-height: 500px) and (orientation: landscape) {
    .main-nav {
      width: 60% !important;
      max-width: 400px !important;
      padding: 1rem !important;
    }

    .nav-group .nav-link {
      padding: 0.5rem !important;
      font-size: 0.9rem !important;
      margin-bottom: 0.25rem !important;
    }

    .nav-group {
      gap: 0.5rem !important;
    }
  }

  /* Accessibility: Ensure proper focus states on small screens */
  @media (width <= 428px) {
    .nav-group .nav-link:focus {
      outline: 2px solid var(--nav-text-color);
      outline-offset: 2px;
      background: rgb(99 102 241 / 10%);
    }

    /* Improve touch targets */
    .nav-group .nav-link {
      min-height: 48px; /* Ensure adequate touch target size */
    }
  }

  .force-hidden {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }

  /* Modal and Overlay Override System */
  .modal.force-visible,
  .modal.js-open {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: var(--modal-z, var(--z-modal)) !important;
  }

  .backdrop.force-visible,
  .backdrop.js-open {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Pre-launch modal specific - ensure navigation is behind the backdrop */
  .modal-backdrop:has(.pre-launch-modal) ~ header.header,
  .modal-backdrop:has(.pre-launch-modal) ~ .nav-item-dropdown,
  .modal-backdrop:has(.pre-launch-modal) ~ .settings-menu {
    z-index: 500 !important; /* Well below modal backdrop */
  }

  /* Alternative approach - when pre-launch modal is active, reduce header z-index */
  body:has(.pre-launch-modal.visible) header.header,
  body:has(.pre-launch-modal) header.header {
    z-index: 500 !important; /* Well below modal backdrop */
  }

  body:has(.pre-launch-modal.visible) .nav-item-dropdown,
  body:has(.pre-launch-modal) .nav-item-dropdown,
  body:has(.pre-launch-modal.visible) .settings-menu,
  body:has(.pre-launch-modal) .settings-menu {
    z-index: 500 !important; /* Well below modal backdrop */
  }

  /* Button Override System - Prevents element.style button conflicts */
  .btn.force-visible {
    display: inline-flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  .btn.force-primary {
    background-color: var(--color-primary) !important;
    color: var(--color-white) !important;
    border: 2px solid var(--color-primary) !important;
  }

  /* Header Element - Consolidated Complete Styling with Responsive Integration */
  header.header {
    /* Layout and dimensions - Responsive scaling from media.css */
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: calc(var(--container-padding, 16px) * 0.5);
    height: var(--header-h);
    padding: calc(var(--container-padding, 16px) * 0.5)
      var(--container-padding, 16px);

    /* Positioning and layering */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-header);

    /* Visual styling - Modern glass morphism effect */
    background: rgb(255 255 255 / 85%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgb(226 232 240 / 80%);
    box-shadow:
      0 1px 3px rgb(0 0 0 / 5%),
      0 1px 2px rgb(0 0 0 / 10%);

    /* Animations and effects */
    transform: translateY(0);
    transition:
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      backdrop-filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  /* Header Responsive Adjustments - Mobile First Approach */
  /* Extra small mobile devices (≤360px) - Samsung Galaxy S21 */
  @media only screen and (width <= 360px) {
    header.header {
      height: calc(var(--header-h) * 0.9);
      padding: calc(var(--container-padding, 16px) * 0.375)
        calc(var(--container-padding, 16px) * 0.75);
      gap: calc(var(--container-padding, 16px) * 0.25);
    }
  }

  /* Small mobile devices (375px) - iPhone SE */
  @media only screen and (width >= 375px) and (width <= 428px) {
    header.header {
      height: calc(var(--header-h) * 0.95);
      padding: calc(var(--container-padding, 16px) * 0.4)
        calc(var(--container-padding, 16px) * 0.85);
      gap: calc(var(--container-padding, 16px) * 0.35);
    }
  }

  /* Tablet devices (768px+) - iPad Mini and larger */
  @media only screen and (width >= 768px) {
    header.header {
      height: var(--header-h);
      padding: calc(var(--container-padding, 16px) * 0.6)
        calc(var(--container-padding, 16px) * 1.25);
      gap: calc(var(--container-padding, 16px) * 0.75);
    }
  }

  /* Desktop devices (1280px+) - Optimal header sizing */
  @media only screen and (width >= 375px) {
    header.header {
      /* Align horizontal padding with container while preserving vertical padding set earlier */
      padding-inline: var(--container-padding);
    }

    .header-container {
      padding-inline: var(--container-padding); /* Align with header padding */
    }
  }

  @media only screen and (width >= 768px) {
    header.header {
      /* Keep a single source of truth for horizontal rhythm */
      padding-inline: var(--container-padding);
    }

    .header-container {
      padding-inline: var(--container-padding); /* Match header padding */
    }
  }

  @media only screen and (width >= 1024px) {
    header.header {
      padding-inline: var(--container-padding);
      max-width: var(--container-xl);
      margin: 0 auto;
    }

    .header-container {
      padding-inline: var(--container-padding);
    }
  }
  @media only screen and (width <= 428px) {
    .header-left {
      gap: calc(var(--container-padding, 16px) * 0.5);
    }

    .header-right {
      gap: calc(var(--container-padding, 16px) * 0.375);
    }
  }

  @media only screen and (width >= 768px) {
    .header-left {
      gap: var(--container-padding, 16px);
    }

    .header-right {
      gap: calc(var(--container-padding, 16px) * 0.75);
    }
  }

  /* ===== LOGO COMPONENT STYLES ===== */
  .logo {
    display: flex; /* Flex inside flex container for proper alignment */
    align-items: center;
    gap: var(--spacing-3);
    flex-shrink: 0; /* Prevent logo from shrinking */
    text-decoration: none;
    color: inherit;
    transition:
      opacity 0.3s ease,
      transform 0.2s ease;
    /* Ensure logo aligns properly with siblings in flex container */
    align-self: center;
    /* Ensure logo is positioned first in row */
    order: 1;
  }

  .logo:hover {
    opacity: 0.9;
    transform: translateY(-1px);
  }

  .logo:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
    border-radius: 4px;
  }

  .logo-image {
    width: 60px;
    height: 60px;
    transition: all 0.3s ease;
  }

  /* Responsive Logo System - Flexible Sizing */
  .logo-full {
    height: 60px;
    width: auto;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-right: 1px solid rgb(226 232 240 / 60%);
    padding-right: var(--spacing-4);
    margin-right: var(--spacing-2);
    filter: drop-shadow(0 1px 2px rgb(0 0 0 / 10%));
  }

  .logo-full:hover {
    filter: drop-shadow(0 2px 4px rgb(0 0 0 / 15%));
    transform: scale(1.02);
  }

  .logo-compact {
    height: 44px;
    width: auto;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: none; /* Hidden by default */
    filter: drop-shadow(0 1px 2px rgb(0 0 0 / 10%));
  }

  /* ===== BREADCRUMB NAVIGATION SYSTEM ===== */
  /* Modern breadcrumb navigation for deep page hierarchy */
  .breadcrumb-container {
    background: rgb(248 250 252 / 80%);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid rgb(226 232 240 / 60%);
    padding: var(--nav-spacing-md) 0;
    margin-top: var(--header-h, 80px);
    position: sticky;
    top: var(--header-h, 80px);
    z-index: var(--z-base);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .breadcrumb-wrapper {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--nav-spacing-xl);
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--nav-spacing-xs);
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: 0.875rem;
    line-height: 1.5;
  }

  .breadcrumb-item {
    display: flex;
    align-items: center;
    color: var(--nav-text-color, #64748b);
    font-weight: 400;
    position: relative;
  }

  .breadcrumb-item:not(:last-child)::after {
    content: "›";
    margin: 0 var(--nav-spacing-sm);
    color: rgb(100 116 139 / 50%);
    font-size: 1rem;
    font-weight: 300;
    transition: color 0.2s ease;
  }

  .breadcrumb-item a {
    color: var(--nav-text-color, #64748b);
    text-decoration: none;
    padding: var(--nav-spacing-xs) var(--nav-spacing-sm);
    border-radius: 6px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: var(--nav-spacing-xs);
    min-height: 32px;
  }

  .breadcrumb-item a:hover {
    color: var(--nav-text-hover, #1e293b);
    background: rgb(248 250 252 / 80%);
    transform: translateY(-1px);
  }

  .breadcrumb-item a:focus {
    outline: 2px solid rgb(99 102 241 / 50%); /* Indigo-500 */
    outline-offset: 2px;
  }

  /* Current page styling */
  .breadcrumb-item.active {
    color: var(--nav-text-active, #0f172a);
    font-weight: 600;
    padding: var(--nav-spacing-xs) var(--nav-spacing-sm);
  }

  /* Breadcrumb icons */
  .breadcrumb-icon {
    font-size: 0.875rem;
    opacity: 0.8;
    transition: opacity 0.2s ease;
  }

  .breadcrumb-item:hover .breadcrumb-icon {
    opacity: 1;
  }

  /* Home icon special styling */
  .breadcrumb-home {
    font-size: 1rem;
    color: var(--nav-text-color, #64748b);
  }

  .breadcrumb-item a:hover .breadcrumb-home {
    color: var(--nav-text-hover, #1e293b);
  }

  /* Enhanced breadcrumb with action buttons */
  .breadcrumb-actions {
    display: flex;
    align-items: center;
    gap: var(--nav-spacing-sm);
    margin-left: auto;
  }

  .breadcrumb-action {
    background: rgb(255 255 255 / 80%);
    border: 1px solid rgb(226 232 240 / 60%);
    border-radius: 6px;
    padding: var(--nav-spacing-xs) var(--nav-spacing-md);
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--nav-text-color, #64748b);
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    min-height: 32px;
    display: flex;
    align-items: center;
    gap: var(--nav-spacing-xs);
  }

  .breadcrumb-action:hover {
    background: rgb(255 255 255);
    border-color: rgb(99 102 241 / 50%); /* Indigo-500 */
    color: var(--nav-text-hover, #1e293b);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgb(0 0 0 / 10%);
  }

  /* Breadcrumb with search integration */
  .breadcrumb-search {
    display: flex;
    align-items: center;
    background: rgb(255 255 255 / 90%);
    border: 1px solid rgb(226 232 240 / 60%);
    border-radius: 8px;
    padding: var(--nav-spacing-xs) var(--nav-spacing-md);
    margin-left: var(--nav-spacing-lg);
    min-width: 200px;
    max-width: 300px;
    transition: all 0.2s ease;
  }

  .breadcrumb-search:focus-within {
    border-color: rgb(99 102 241 / 50%); /* Indigo-500 */
    box-shadow: 0 0 0 3px rgb(99 102 241 / 10%); /* Indigo-500 */
  }

  .breadcrumb-search input {
    background: transparent;
    border: none;
    outline: none;
    flex: 1;
    font-size: 0.875rem;
    color: var(--nav-text-active, #0f172a);
    padding: var(--nav-spacing-xs) 0;
  }

  .breadcrumb-search input::placeholder {
    color: var(--nav-text-color, #64748b);
  }

  .breadcrumb-search-icon {
    color: var(--nav-text-color, #64748b);
    font-size: 0.875rem;
    margin-right: var(--nav-spacing-xs);
  }

  /* Responsive breadcrumb behavior */
  @media (width < 768px) {
    .breadcrumb-container {
      padding: var(--nav-spacing-sm) 0;
      position: static;
      margin-top: 0;
    }

    .breadcrumb-wrapper {
      padding: 0 var(--nav-spacing-lg);
    }

    .breadcrumb {
      font-size: 0.8rem;
      gap: var(--nav-spacing-xs);
    }

    .breadcrumb-item a {
      padding: var(--nav-spacing-xs);
      min-height: 28px;
    }

    .breadcrumb-search {
      display: none;
    }

    .breadcrumb-actions {
      flex-wrap: wrap;
      gap: var(--nav-spacing-xs);
    }

    .breadcrumb-action {
      font-size: 0.8rem;
      padding: var(--nav-spacing-xs) var(--nav-spacing-sm);
      min-height: 28px;
    }
  }

  /* Mobile breadcrumb overflow handling */
  @media (width <= 428px) {
    .breadcrumb {
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding-bottom: var(--nav-spacing-xs);
    }

    .breadcrumb::-webkit-scrollbar {
      display: none;
    }

    .breadcrumb-item {
      flex-shrink: 0;
      white-space: nowrap;
    }

    .breadcrumb-actions {
      display: none;
    }
  }

  /* Breadcrumb animation states */
  .breadcrumb-container.hidden {
    transform: translateY(-100%);
    opacity: 0;
  }

  .breadcrumb-container.visible {
    transform: translateY(0);
    opacity: 1;
  }

  /* Enhanced breadcrumb with progress indicator */
  .breadcrumb-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 2px;
    background: linear-gradient(
      90deg,
      #6366f1 0%,
      #4f46e5 100%
    ); /* Indigo-500 to Indigo-600 */
    transition: width 0.3s ease;
    border-radius: 1px;
  }

  /* Breadcrumb variants */
  .breadcrumb-compact .breadcrumb-item:not(:last-child):not(:first-child) {
    display: none;
  }

  .breadcrumb-compact .breadcrumb-item:nth-last-child(2)::before {
    content: "...";
    margin: 0 var(--nav-spacing-sm);
    color: var(--nav-text-color, #64748b);
  }

  /* ===== HEADER ACTIONS AND USER ELEMENTS ===== */
  .header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-shrink: 0;
  }

  .search-toggle {
    background: rgb(255 255 255 / 10%);
    border: none;
    color: #e2e8f0;
    padding: 0.75rem;
    border-radius: var(--radius-md, 6px);
    cursor: pointer;
    transition: var(--transition-fast, all 0.2s ease);
    font-size: 1.125rem;
    min-height: var(--touch-target-min, 44px);
    min-width: var(--touch-target-min, 44px);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .search-toggle:hover {
    background: rgb(255 255 255 / 20%);
    color: white;
  }

  .auth-section {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(
      135deg,
      var(--primary-color, #1a73e8),
      var(--success-color, #34d399)
    );
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    border: 2px solid rgb(255 255 255 / 20%);
    cursor: pointer;
    transition: var(--transition-fast, all 0.2s ease);
    min-height: var(--touch-target-min, 44px);
    min-width: var(--touch-target-min, 44px);
  }

  .user-avatar:hover {
    transform: scale(1.05);
    border-color: var(--accent-color, #f59e0b);
  }

  /* Navigation Search Component */
  .nav-search {
    background: var(--theme-bg-primary, white);
    border: 1px solid var(--theme-border, #e0e0e0);
    border-radius: 6px;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    min-width: 200px;
    transition: all 0.2s ease;
  }

  .nav-search input {
    background: transparent;
    color: var(--theme-text-primary, #333);
    border: none;
    outline: none;
    flex: 1;
    font-size: 0.9rem;
    padding: 0.25rem;
  }

  .nav-search input::placeholder {
    color: var(--theme-text-muted, #666);
  }

  .nav-search-btn {
    color: var(--theme-text-secondary, #666);
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s ease;
  }

  .nav-search-btn:hover {
    color: var(--theme-text-primary, #333);
  }

  /* Header State Classes - Consolidated for proper state management */
  .header.header-hidden {
    transform: translateY(-100%);
  }

  .header.header-visible {
    transform: translateY(0);
  }

  /* Enhanced scroll effects - combines with visibility states */
  .header.scrolled {
    height: var(--header-h); /* Ensure consistent height when scrolled */
    box-shadow: var(--shadow-lg);
    background: rgb(255 255 255 / 95%);
    backdrop-filter: blur(10px);
    padding: var(--spacing-3) var(--spacing-6); /* Maintain consistent padding */
  }

  /* Combined state: scrolled AND visible - ensures proper layering */
  .header.scrolled.header-visible {
    transform: translateY(0);
    height: var(--header-h); /* Ensure consistent height */
    box-shadow: var(--shadow-lg);
    background: rgb(255 255 255 / 95%);
    backdrop-filter: blur(10px);
    padding: var(--spacing-3) var(--spacing-6); /* Maintain consistent padding */
  }

  /* Ensure scroll-aware navbar works properly on mobile */
  @media (width < 768px) {
    header.header {
      transition:
        transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.25s ease,
        background-color 0.25s ease;
    }

    /* Don't hide header when mobile nav is open */
    header.header:has(.main-nav.open) {
      transform: translateY(0) !important;
    }

    /* Enhanced header-visible support for mobile */
    .header.header-visible {
      transform: translateY(0);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Combined mobile states for better scroll behavior */
    .header.scrolled.header-visible {
      transform: translateY(0);
      padding: calc(var(--container-padding, 16px) * 0.35)
        calc(var(--container-padding, 16px) * 0.75); /* Responsive padding for mobile scrolled state */
      backdrop-filter: blur(8px); /* Reduced blur for mobile performance */
    }

    /* Mobile-specific performance optimizations */
    /* Note: .header-hidden behavior inherited from top-level selector */
  }

  /* Enhanced support for very small viewports (480px and below) */
  @media only screen and (width <= 428px) {
    .header.header-visible {
      transform: translateY(0);
      padding: var(--spacing-2) var(--spacing-3); /* Compact padding for small screens */
      height: calc(var(--header-h) - 10px); /* Slightly reduced height */
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .header.scrolled.header-visible {
      transform: translateY(0);
      padding: var(--spacing-1) var(--spacing-3); /* Even more compact when scrolled */
      height: calc(
        var(--header-h) - 15px
      ); /* Further reduced height when scrolled */
      backdrop-filter: blur(6px); /* Minimal blur for performance */
      box-shadow: 0 2px 8px rgb(0 0 0 / 10%); /* Lighter shadow */
    }

    /* Ensure navigation toggle is always accessible */
    .header.header-visible .nav-toggle {
      opacity: 1;
      pointer-events: auto;
      z-index: var(--z-header-scrolled); /* Above header */
    }

    /* Optimize logo sizing for small screens */
    .header.header-visible .logo-full {
      height: 48px; /* Smaller logo */
    }

    .header.header-visible .logo-compact {
      height: 40px; /* Even smaller compact logo */
    }
  }

  /* Support for extra small viewports (375px and below) */
  @media only screen and (width <= 375px) {
    .header.header-visible {
      padding: var(--spacing-1) var(--spacing-2); /* Minimal padding */
      height: calc(var(--header-h) - 15px);
    }

    .header.scrolled.header-visible {
      padding: var(--spacing-1) var(--spacing-2);
      height: calc(var(--header-h) - 20px); /* Maximum compression */
    }

    /* Force compact logo on very small screens */
    .header.header-visible .logo-full {
      display: none;
    }

    .header.header-visible .logo-compact {
      display: block;
      height: 36px; /* Minimal logo size */
    }
  }

  /* Support for small devices in landscape orientation */
  @media only screen and (max-height: 500px) and (orientation: landscape) {
    .header.header-visible {
      height: calc(var(--header-h) - 20px); /* Compact height in landscape */
      padding: var(--spacing-1) var(--spacing-3);
      position: fixed; /* Ensure it stays at top */
      top: 0;
      z-index: 1000;
    }

    .header.scrolled.header-visible {
      height: calc(
        var(--header-h) - 25px
      ); /* Even more compact when scrolled */
      padding: var(--spacing-1) var(--spacing-2);
      backdrop-filter: blur(4px); /* Minimal blur for landscape performance */
    }

    /* Ensure mobile nav toggle is always accessible in landscape */
    .header.header-visible .nav-toggle {
      padding: var(--spacing-1);
      min-height: 36px;
      min-width: 36px;
    }
  }

  /* Accessibility and performance improvements for header-visible */
  @media (prefers-reduced-motion: reduce) {
    .header.header-visible {
      transition: none; /* Remove transitions for users who prefer reduced motion */
    }

    .header.scrolled.header-visible {
      transition: none;
    }
  }

  @media (prefers-contrast: high) {
    .header.header-visible {
      border-bottom: 2px solid currentColor; /* High contrast border */
      backdrop-filter: none; /* Remove blur for better contrast */
      background: rgb(255 255 255 / 100%); /* Solid background for contrast */
    }

    .header.scrolled.header-visible {
      box-shadow: 0 2px 0 currentColor; /* High contrast shadow */
    }
  }

  /* Navigation Group Organization */
  .main-nav {
    display: flex;
    align-items: center;
    gap: calc(0.5rem * var(--font-scale, 1));
    padding: 0;
    /* Base properties that apply to all screen sizes */
    position: static;
    width: auto;
    height: var(--header-h); /* Match header height for consistent alignment */
    background: transparent;
    border: none;
    box-shadow: none;
    z-index: auto;
    transition: none;
    overflow-y: visible;
    /* Ensure navigation doesn't push logo to new line */
    flex-shrink: 1;
    min-width: 0;
    /* Ensure navigation comes after logo */
    order: 2;
  }

  /* Navigation Group Organization - Modern Flexbox Architecture */
  /* Note: .nav-items replaces legacy .nav-list naming for semantic clarity */
  .nav-group {
    display: flex;
    align-items: center;
  }

  .nav-group .nav-items {
    display: flex;
    align-items: center;
    margin: 0;
    padding: 0;
    height: var(
      --header-h
    ); /* Match header and main-nav height for perfect alignment */
    gap: calc(0.5rem * var(--font-scale, 1));
  }

  /* Primary Navigation Group - Override general nav-items styles */
  .nav-group-primary {
    flex: 1;
  }

  .nav-group-primary .nav-items {
    gap: calc(2rem * var(--font-scale, 1));
    /* Override fixed height - use min-height for flexibility */
    height: auto !important;
    min-height: var(--header-h);
  }

  .nav-group-primary .nav-link {
    font-weight: 500;
    font-size: calc(0.95rem * var(--font-scale, 1));
    letter-spacing: -0.01em;
    min-height: var(--touch-target-min, 44px);
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    color: var(--nav-text-color, #64748b);
    text-decoration: none;
  }

  .nav-group-primary .nav-link:hover {
    color: var(--nav-text-hover, #1e293b);
    background: var(--nav-bg-hover, #f8fafc);
    transform: translateY(-1px);
  }

  .nav-group-primary .nav-link.active {
    color: var(--nav-text-active, #0f172a);
    background: var(--nav-bg-active, #e2e8f0);
    font-weight: 600;
  }

  /* Community Navigation Group */
  .nav-group-community {
    position: relative;
  }

  .nav-group-community .nav-items {
    gap: calc(0.75rem * var(--font-scale, 1));
  }

  /* About & Actions Navigation Groups */
  .nav-group-about,
  .nav-group-actions {
    position: relative;
  }

  .nav-group-about .nav-items,
  .nav-group-actions .nav-items {
    gap: calc(0.75rem * var(--font-scale, 1));
  }

  /* Ensure non-primary groups match primary link colors in light mode */
  .nav-group-blog .nav-link,
  .nav-group-community .nav-link,
  .nav-group-about .nav-link,
  .nav-group-actions .nav-link {
    color: var(--nav-text-color, #64748b);
    text-decoration: none;
  }

  .nav-group-blog .nav-link:hover,
  .nav-group-community .nav-link:hover,
  .nav-group-about .nav-link:hover,
  .nav-group-actions .nav-link:hover {
    color: var(--nav-text-hover, #1e293b);
    background: var(--nav-bg-hover, #f8fafc);
    transform: translateY(-1px);
  }

  .nav-group-blog .nav-link.active,
  .nav-group-community .nav-link.active,
  .nav-group-about .nav-link.active,
  .nav-group-actions .nav-link.active {
    color: var(--nav-text-active, #0f172a);
    background: var(--nav-bg-active, #e2e8f0);
    font-weight: 600;
  }

  /* Dropdown navigation links - ensure proper alignment for arrows */
  .nav-item-dropdown .nav-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Specific positioning for actions group */
  .nav-group-actions {
    margin-left: auto;
  }

  /* Specific spacing override for actions items */
  .nav-group-actions .nav-items {
    gap: calc(0.5rem * var(--font-scale, 1));
  }

  .nav-group-actions .nav-link {
    padding: calc(0.5rem * var(--font-scale, 1))
      calc(1rem * var(--font-scale, 1));
    border-radius: 6px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s ease;
    min-height: var(--touch-target-min, 44px);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Authentication Group */
  .nav-group-auth {
    margin-left: calc(1.5rem * var(--font-scale, 1));
    padding-left: calc(1.5rem * var(--font-scale, 1));
    border-left: 1px solid rgb(226 232 240 / 60%);
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .nav-group-auth .nav-link {
    padding: 0.625rem 1.25rem;
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.9rem;
    letter-spacing: -0.01em;
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    min-height: var(--touch-target-min, 44px);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid transparent;
  }

  /* Sign In Button - Subtle */
  .nav-group-auth .nav-link:first-child {
    color: var(--nav-text-color, #64748b);
    background: transparent;
  }

  .nav-group-auth .nav-link:first-child:hover {
    color: var(--nav-text-hover, #1e293b);
    background: var(--nav-bg-hover, #f8fafc);
  }

  /* Sign Up Button - Primary CTA */
  .nav-group-auth .nav-link:last-child {
    color: white;
    background: linear-gradient(
      135deg,
      #6366f1 0%,
      #4f46e5 100%
    ); /* Indigo-500 to Indigo-600 */
    box-shadow: 0 1px 3px rgb(99 102 241 / 40%); /* Indigo-500 */
  }

  .nav-group-auth .nav-link:last-child:hover {
    background: linear-gradient(
      135deg,
      #4f46e5 0%,
      #3730a3 100%
    ); /* Indigo-600 to Indigo-700 */
    box-shadow: 0 2px 8px rgb(99 102 241 / 40%); /* Indigo-500 */
    transform: translateY(-1px);
  }

  /* Navigation-specific Button Styles - Namespaced to avoid conflicts */
  /* High specificity to override global button styles */
  .nav-auth-btn {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.625rem 1.25rem !important;
    border-radius: 8px !important;
    font-weight: 500 !important;
    font-size: 0.9rem !important;
    letter-spacing: -0.01em !important;
    text-decoration: none !important;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
    min-height: var(--touch-target-min, 44px) !important;
    border: 1px solid transparent;
    cursor: pointer !important;
    line-height: 1.4 !important;
    box-sizing: border-box !important;
  }

  /* Navigation Outline Button Variant - Higher specificity */
  .nav-group-auth .nav-auth-btn.nav-btn-outline,
  .auth-section .nav-auth-btn.nav-btn-outline,
  .nav-auth-btn.nav-btn-outline {
    color: var(--nav-text-color, #64748b) !important;
    background: transparent !important;
    border-color: var(--nav-border-color, rgb(148 163 184 / 30%)) !important;
  }

  .nav-group-auth .nav-auth-btn.nav-btn-outline:hover,
  .auth-section .nav-auth-btn.nav-btn-outline:hover,
  .nav-auth-btn.nav-btn-outline:hover {
    color: var(--nav-text-hover, #1e293b) !important;
    background: var(--nav-bg-hover, #f8fafc) !important;
    border-color: var(--nav-border-hover, rgb(148 163 184 / 50%)) !important;
  }

  .nav-group-auth .nav-auth-btn.nav-btn-outline:focus,
  .auth-section .nav-auth-btn.nav-btn-outline:focus,
  .nav-auth-btn.nav-btn-outline:focus {
    outline: 2px solid var(--color-primary, #4f46e5) !important;
    outline-offset: 2px !important;
  }

  /* Navigation Primary Button Variant - Higher specificity */
  .nav-group-auth .nav-auth-btn.nav-btn-primary,
  .auth-section .nav-auth-btn.nav-btn-primary,
  .nav-auth-btn.nav-btn-primary {
    color: white !important;
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%) !important;
    box-shadow: 0 1px 3px rgb(99 102 241 / 40%) !important;
  }

  .nav-group-auth .nav-auth-btn.nav-btn-primary:hover,
  .auth-section .nav-auth-btn.nav-btn-primary:hover,
  .nav-auth-btn.nav-btn-primary:hover {
    background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%) !important;
    box-shadow: 0 2px 8px rgb(99 102 241 / 40%) !important;
    transform: translateY(-1px) !important;
  }

  .nav-group-auth .nav-auth-btn.nav-btn-primary:focus,
  .auth-section .nav-auth-btn.nav-btn-primary:focus,
  .nav-auth-btn.nav-btn-primary:focus {
    outline: 2px solid var(--color-primary, #4f46e5) !important;
    outline-offset: 2px !important;
  }

  /* Dark mode support for navigation buttons - Enhanced specificity */
  body.dark-mode .nav-group-auth .nav-auth-btn.nav-btn-outline,
  body.dark-mode .auth-section .nav-auth-btn.nav-btn-outline,
  body.dark-mode .nav-auth-btn.nav-btn-outline {
    color: var(--theme-text-primary, #f0f6fc) !important;
    border-color: var(--theme-border, rgb(255 255 255 / 20%)) !important;
    background: transparent !important;
  }

  body.dark-mode .nav-group-auth .nav-auth-btn.nav-btn-outline:hover,
  body.dark-mode .auth-section .nav-auth-btn.nav-btn-outline:hover,
  body.dark-mode .nav-auth-btn.nav-btn-outline:hover {
    color: var(--theme-text-primary, #f0f6fc) !important;
    background: var(--theme-bg-secondary, rgb(255 255 255 / 10%)) !important;
    border-color: var(--theme-border-hover, rgb(255 255 255 / 30%)) !important;
  }

  body.dark-mode .nav-group-auth .nav-auth-btn.nav-btn-primary,
  body.dark-mode .auth-section .nav-auth-btn.nav-btn-primary,
  body.dark-mode .nav-auth-btn.nav-btn-primary {
    color: white !important;
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%) !important;
  }

  body.dark-mode .nav-group-auth .nav-auth-btn.nav-btn-primary:hover,
  body.dark-mode .auth-section .nav-auth-btn.nav-btn-primary:hover,
  body.dark-mode .nav-auth-btn.nav-btn-primary:hover {
    background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%) !important;
  }

  /* Dropdown Menu Styles */
  .dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    background: rgb(255 255 255 / 95%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgb(226 232 240 / 50%);
    border-radius: 12px;
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 10%),
      0 2px 4px -1px rgb(0 0 0 / 6%),
      0 0 0 1px rgb(255 255 255 / 5%);
    padding: 0.5rem 0;
    min-width: 220px;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px) scale(0.95);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 0.5rem;
  }

  .dropdown-menu.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }

  /* Hover functionality for nav-group-about dropdown */
  .nav-group-about .nav-item-dropdown:hover .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
    z-index: var(--z-dropdown-hover, 1051);
  }

  /* Keep dropdown open when hovering over the dropdown itself */
  .nav-group-about .dropdown-menu:hover {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }

  /* Ensure smooth transition when moving between trigger and dropdown */
  .nav-group-about .nav-item-dropdown {
    position: relative;
  }

  .nav-group-about .nav-item-dropdown:hover {
    z-index: var(--z-dropdown-hover, 1051);
  }

  .dropdown-item {
    padding: calc(0.75rem * var(--font-scale, 1))
      calc(1rem * var(--font-scale, 1));
    color: var(--text-color, #333);
    text-decoration: none;
    font-size: calc(0.9rem * var(--font-scale, 1));
    transition: background-color 0.2s ease;
    min-height: var(--touch-target-min, 44px);
    display: flex;
    align-items: center;
  }

  .dropdown-item:hover,
  .dropdown-item:focus {
    background-color: var(--hover-bg, #f5f5f5);
    color: var(--text-color, #333);
  }

  /* Responsive Navigation - Using media.css breakpoints */
  @media (width < 768px) {
    /* Hide inline nav groups only when the mobile menu is closed */
    .main-nav:not(.open) .nav-group {
      display: none;
    }

    /* Auth group spacing adjustments remain */
    .nav-group-auth {
      margin-left: auto;
      border-left: none;
      padding-left: 0;
    }
  }

  /* ===== RESPONSIVE LOGO SIZING (Canonical breakpoints) ===== */
  /* Desktop/Laptop XL (≥1280px) */
  @media (width >= 1280px) {
    .logo-image,
    .logo-full {
      height: 60px;
      width: auto;
    }
    .logo-compact {
      height: 52px;
      width: auto;
    }
  }

  /* Desktop/Tablet L (≥1024px and <1280px) */
  @media (width >= 1024px) and (width < 1280px) {
    .logo-image,
    .logo-full {
      height: 56px;
      width: auto;
    }
    .logo-compact {
      height: 48px;
      width: auto;
    }
  }

  /* Tablet (≥768px and <1024px) */
  @media (width >= 768px) and (width < 1024px) {
    .logo-image,
    .logo-full {
      height: 50px;
      width: auto;
    }
    .logo-compact {
      height: 44px;
      width: auto;
    }
  }

  /* Mobile (<768px) - use compact logo */
  @media (width < 768px) {
    .logo-full {
      display: none;
    }
    .logo-compact {
      display: block;
    }
  }

  /* Small Mobile (≤428px) - compact size */
  @media (width <= 428px) {
    .logo-image,
    .logo-compact {
      height: 38px;
      width: auto;
    }
  }

  /* Fill the gap between mobile and tablet for header-container */
  @media only screen and (width > 428px) and (width < 768px) {
    .header-container {
      padding: 0 1.25rem; /* Between mobile and desktop padding */
      height: var(--header-h); /* Maintain consistent height */
      min-height: var(--header-h);
    }
  }

  @media only screen and (width <= 428px) {
    .header-container {
      position: relative;
      height: var(--header-h); /* Maintain consistent height on mobile */
      min-height: var(--header-h);
      padding: 0 1rem; /* Adjust padding for mobile */
    }

    /* Header Actions Mobile Adjustments */
    .header-actions {
      gap: 0.5rem;
    }

    .search-toggle {
      padding: 0.5rem;
      font-size: 1rem;
    }

    .nav-search {
      min-width: 150px;
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      font-size: 0.9rem;
    }

    .main-nav {
      position: fixed;
      top: 0;
      right: 0;
      width: 85%;
      max-width: 320px;
      /* fallback then dynamic viewport height */
      height: 100vh;
      height: 100dvh;
      background: rgb(255 255 255 / 95%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      flex-direction: column;
      align-items: stretch;
      padding-top: calc(
        env(safe-area-inset-top, 0px) + 3rem * var(--font-scale, 1)
      );
      padding-right: calc(2rem * var(--font-scale, 1));
      padding-bottom: calc(
        env(safe-area-inset-bottom, 0px) + 2rem * var(--font-scale, 1)
      );
      padding-left: calc(2rem * var(--font-scale, 1));
      gap: calc(2rem * var(--font-scale, 1));
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 9999; /* Higher than backdrop */
      overflow-y: auto;
      overscroll-behavior: contain;
      transform: translate3d(100%, 0, 0);
      will-change: transform;
      border-left: 1px solid rgb(226 232 240 / 30%);
      box-shadow: -8px 0 32px rgb(0 0 0 / 10%);
    }

    /* When navigation is open, slide it in */
    .main-nav.open {
      transform: translate3d(0, 0, 0);
    }

    /* Responsive adjustments for smaller mobile devices */
    @media only screen and (width <= 375px) {
      .main-nav {
        width: 90%;
        max-width: 280px;
        padding-top: calc(env(safe-area-inset-top, 0px) + 2rem);
        padding-right: 1rem;
        padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1.5rem);
        padding-left: 1rem;
      }
    }

    @media only screen and (width <= 320px) {
      .main-nav {
        width: 95%;
        max-width: 260px;
        padding-top: calc(env(safe-area-inset-top, 0px) + 1.5rem);
        padding-right: 0.75rem;
        padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1rem);
        padding-left: 0.75rem;
      }
    }

    /* Mobile navigation open state handled by consolidated override system above */
    /* .main-nav.open inherits from .main-nav.open in the element.style override system */

    .nav-group {
      flex-direction: column;
      align-items: stretch;
      width: 100%;
    }

    .nav-group .nav-items {
      flex-direction: column;
      width: 100%;
      gap: 0;
    }

    .nav-group .nav-item {
      width: 100%;
    }

    /* ===== MOBILE NAVIGATION TYPOGRAPHY SYSTEM ===== */
    /* Design Intent: Create a hierarchical, trustworthy, and cognitively optimized navigation experience */
    .nav-group .nav-link {
      /* Advanced Typography Foundation */
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        "Inter",
        "SF Pro Display",
        sans-serif;
      font-size: 1.125rem; /* 18px - optimal for mobile reading and finger navigation */
      font-weight: 550; /* Semi-medium weight for clarity without heaviness */
      line-height: 1.4; /* Comfortable line height for multi-line labels */
      letter-spacing: -0.025em; /* Tight tracking for modern, cohesive feel */

      /* Typography Optimization */
      font-feature-settings:
        "kern" 1,
        "liga" 1,
        "calt" 1; /* Enable kerning, ligatures, contextual alternates */
      text-rendering: optimizeLegibility; /* Better text rendering */
      -webkit-font-smoothing: antialiased; /* Smooth font rendering on WebKit */
      -moz-osx-font-smoothing: grayscale; /* Smooth font rendering on Firefox/macOS */

      /* Spacing and Layout */
      padding: calc(1.25rem * var(--font-scale, 1));
      border-bottom: 1px solid rgb(226 232 240 / 50%);
      text-align: left;
      min-height: var(--touch-target-min, 44px);
      display: flex;
      align-items: center;
      /* Ensure labels can wrap on small screens */
      white-space: normal;
      word-break: break-word;

      /* Visual Polish */
      color: #1e293b; /* Darker color for better readability and trust */
      border-radius: 12px;
      margin-bottom: 0.5rem;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;

      /* Cognitive Enhancement */
      word-spacing: 0.05em; /* Slight word spacing for better scanning */
      text-decoration: none;
      text-transform: none; /* Natural case for approachability */
    }

    /* ===== RESPONSIVE TYPOGRAPHY OPTIMIZATION ===== */
    /* Design Intent: Maintain readability and cognitive comfort while adapting to screen constraints */

    /* Small Mobile Devices (375px and below) - Focus on legibility over size */
    @media only screen and (width <= 375px) {
      .nav-group .nav-link {
        /* Optimized Typography for Small Screens */
        font-size: 1.0625rem; /* 17px - maintains readability without feeling cramped */
        font-weight: 575; /* Slightly heavier weight to compensate for smaller size */
        line-height: 1.35; /* Tighter line height for space efficiency */
        letter-spacing: -0.02em; /* Slightly tighter tracking */

        /* Adjusted Spacing */
        padding: 0.875rem; /* Reduced but still comfortable padding */
        margin-bottom: 0.375rem; /* Tighter vertical rhythm */

        /* Enhanced Touch Experience */
        min-height: 48px; /* Maintain touch target standards */
      }
    }

    /* Very Small Mobile Devices (320px and below) - Compact but readable */
    @media only screen and (width <= 320px) {
      .nav-group .nav-link {
        /* Minimal but Readable Typography */
        font-size: 1rem; /* 16px - minimum recommended for mobile readability */
        font-weight: 600; /* Medium-bold to maintain presence at smaller size */
        line-height: 1.3; /* Compact line height for space efficiency */
        letter-spacing: -0.015em; /* Minimal tracking adjustment */

        /* Compact Spacing */
        padding: 0.75rem; /* Reduced padding while maintaining usability */
        margin-bottom: 0.25rem; /* Tighter spacing for compact layout */

        /* Optimized Touch Targets */
        min-height: 44px; /* Minimum recommended touch target */
      }
    }

    /* ===== ENHANCED INTERACTION STATES ===== */
    /* Design Intent: Typography that responds meaningfully to user interaction */

    .nav-group .nav-link:hover {
      /* Enhanced Typography for Hover State */
      color: #0f172a; /* Deeper color for increased focus and attention */
      font-weight: 600; /* Slightly heavier weight to signal interactivity */
      letter-spacing: -0.03em; /* Tighter tracking for focused attention */

      /* Visual Enhancement */
      background: rgb(248 250 252 / 95%);
      transform: translateX(6px); /* Slightly more pronounced movement */
      border-bottom-color: transparent;

      /* Text Shadow for Depth and Polish */
      text-shadow: 0 1px 2px rgb(15 23 42 / 10%); /* Subtle depth */
    }

    .nav-group .nav-link:active {
      /* Typography for Active/Pressed State */
      color: #020617; /* Darkest color for maximum contrast during press */
      font-weight: 650; /* Heaviest weight for tactile feedback */
      letter-spacing: -0.035em; /* Tightest tracking for compression feel */

      /* Compressed Visual State */
      background: rgb(226 232 240 / 80%);
      transform: translateX(3px) scale(0.98); /* Slight scale reduction for press feedback */

      /* Enhanced Text Shadow for Pressed State */
      text-shadow: 0 0.5px 1px rgb(2 6 23 / 20%);
    }

    /* ===== FOCUS STATE TYPOGRAPHY ===== */
    /* Design Intent: Clear, accessible focus indication with typographic enhancement */

    .nav-group .nav-link:focus {
      /* Enhanced Typography for Focus */
      color: #0f172a;
      font-weight: 575; /* Balanced weight for focus without overwhelming */
      letter-spacing: -0.025em;

      /* Accessibility-First Focus Ring */
      outline: 2px solid #3b82f6; /* Blue focus ring for accessibility */
      outline-offset: 2px;
      background: rgb(59 130 246 / 5%); /* Subtle blue background */

      /* Text Clarity Enhancement */
      text-shadow: none; /* Remove shadow for maximum clarity during focus */
    }

    /* ===== HIGH CONTRAST AND ACCESSIBILITY MODES ===== */
    /* Design Intent: Ensure typography remains effective in accessibility modes */

    @media (prefers-contrast: high) {
      .nav-group .nav-link {
        font-weight: 600; /* Heavier weight for high contrast environments */
        color: #000000; /* Pure black for maximum contrast */
        text-shadow: none; /* Remove effects that might reduce contrast */
      }

      .nav-group .nav-link:hover {
        color: #000000;
        font-weight: 700; /* Bold for high contrast hover */
        background: #f0f0f0; /* High contrast background */
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .nav-group .nav-link {
        transition: color 0.1s ease; /* Minimal transition for reduced motion users */
      }

      .nav-group .nav-link:hover,
      .nav-group .nav-link:active {
        transform: none; /* Remove movement for motion-sensitive users */
      }
    }

    /* ===== OVERRIDE NAV-ITEM CONFLICTS FROM ADVANCED-UI-COMPONENTS ===== */
    /* Design Intent: Prevent conflicts with advanced-ui-components.css nav-item styles */
    /* Ensure mobile navigation takes precedence over generic nav-item styles */

    .main-nav .nav-group .nav-item,
    .main-nav .nav-item {
      /* Reset any conflicting styles from advanced-ui-components.css */
      padding: 0 !important; /* Let nav-link handle padding */
      margin: 0 !important;
      border: none !important;
      background: transparent !important;
      transform: none !important;
      transition: none !important;

      /* Ensure nav-item wrapper doesn't interfere */
      display: block;
      width: 100%;
      position: relative;

      /* Override any hover states from advanced-ui-components */
      cursor: default;
    }

    .main-nav .nav-group .nav-item:hover,
    .main-nav .nav-item:hover {
      /* Disable hover effects on wrapper - let nav-link handle interactions */
      background: transparent !important;
      color: inherit !important;
      transform: none !important;
    }

    /* Ensure nav-link gets proper styling even inside nav-item */
    .main-nav .nav-group .nav-item .nav-link,
    .main-nav .nav-item .nav-link {
      /* Use higher specificity to override any generic nav-item styles */
      display: flex !important;
      align-items: center !important;
      width: 100% !important;
      text-decoration: none !important;
      cursor: pointer !important;

      /* Ensure our typography system takes precedence */
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        "Inter",
        "SF Pro Display",
        sans-serif !important;
      font-size: 1.125rem !important;
      font-weight: 550 !important;
      line-height: 1.4 !important;
      letter-spacing: -0.025em !important;
    }

    /* Show all groups in mobile */
    .nav-group-community,
    .nav-group-about,
    .nav-group-actions {
      display: flex;
    }

    /* ===== NAVIGATION GROUP HIERARCHY TYPOGRAPHY ===== */
    /* Design Intent: Create visual hierarchy through typography to guide user attention */

    /* Authentication Group - Special Emphasis */
    .nav-group-auth {
      margin-left: 0;
      border-left: none;
      padding-left: 0;
      border-top: 2px solid var(--border-color, #e0e0e0);
      padding-top: calc(1rem * var(--font-scale, 1));
    }

    /* Authentication Links - Enhanced Typography for Important Actions */
    .nav-group-auth .nav-link {
      /* Special Typography for Auth Actions */
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        "Inter",
        sans-serif;
      font-size: 1.0625rem; /* Slightly smaller than main nav for hierarchy */
      font-weight: 600; /* Medium-bold to emphasize importance */
      line-height: 1.3; /* Tighter for action-oriented text */
      letter-spacing: -0.02em; /* Tight tracking for urgency and focus */

      /* Action-Oriented Styling */
      color: #3730a3; /* Indigo-700 for authority and trust */
      background: rgb(255 255 255 / 80%);
      border: 1px solid rgb(99 102 241 / 20%);
      border-radius: 8px;
      text-align: center;

      /* Enhanced Spacing for Actions */
      padding: 0.875rem 1.25rem;
      margin: 0.25rem 0;

      /* Action Button Typography Enhancement */
      text-transform: none; /* Natural case for accessibility */
      font-feature-settings:
        "kern" 1,
        "liga" 1; /* Professional typography */
    }

    .nav-group-auth .nav-link:hover {
      /* Enhanced Hover State for Auth Actions */
      color: #1e1b4b; /* Darker indigo for hover */
      font-weight: 650; /* Slightly heavier on hover */
      background: rgb(238 242 255 / 90%);
      border-color: rgb(99 102 241 / 40%);
      transform: translateY(-1px); /* Upward movement instead of sideways */

      /* Premium Feel with Subtle Shadow */
      box-shadow: 0 2px 8px rgb(99 102 241 / 15%);
      text-shadow: 0 1px 2px rgb(55 48 163 / 10%);
    }

    /* Primary Action Button (e.g., "Sign Up") */
    .nav-group-auth .nav-link.btn-primary {
      /* Primary Action Typography */
      color: #ffffff;
      background: linear-gradient(135deg, #6366f1, #4f46e5);
      border: none;
      font-weight: 650; /* Strong weight for primary actions */
      letter-spacing: -0.025em; /* Tighter for impact */

      /* Premium Typography Enhancement */
      text-shadow: 0 1px 2px rgb(0 0 0 / 10%);
    }

    .nav-group-auth .nav-link.btn-primary:hover {
      background: linear-gradient(135deg, #4f46e5, #3730a3);
      color: #ffffff;
      font-weight: 700; /* Bold for primary hover */
      text-shadow: 0 1px 3px rgb(0 0 0 / 20%);
    }

    /* ===== MOBILE DROPDOWN TYPOGRAPHY ENHANCEMENT ===== */
    /* Design Intent: Consistent typography hierarchy within dropdowns */

    /* Mobile dropdown adjustments */
    .dropdown-menu {
      position: static;
      opacity: 1;
      visibility: visible;
      transform: none;
      box-shadow: none;
      border: none;
      background: var(--bg-secondary, #f8f9fa);
      margin-left: calc(1rem * var(--font-scale, 1));
    }

    /* Dropdown Menu Items - Subdued Typography */
    .dropdown-menu .nav-link {
      /* Hierarchical Typography for Dropdown Items */
      font-family:
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        sans-serif;
      font-size: 1rem; /* Smaller than main nav to show hierarchy */
      font-weight: 500; /* Medium weight for secondary items */
      line-height: 1.4; /* Comfortable reading */
      letter-spacing: -0.015em; /* Slightly looser for secondary content */

      /* Subdued Styling */
      color: #475569; /* Softer color for secondary hierarchy */
      padding: 0.75rem 1rem 0.75rem 2rem; /* Extra left padding for indentation */

      /* Typography Enhancement */
      font-feature-settings: "kern" 1; /* Basic kerning for clean appearance */
      text-rendering: optimizeLegibility;
    }

    .dropdown-menu .nav-link:hover {
      /* Subtle Enhancement for Dropdown Hover */
      color: #1e293b; /* Darker on hover but not as dark as main nav */
      font-weight: 550; /* Slightly heavier */
      background: rgb(248 250 252 / 70%);
      transform: translateX(2px); /* Subtle movement for hierarchy */
    }

    .dropdown-menu.open {
      opacity: 1;
      visibility: visible;
    }

    .dropdown-menu:not(.open),
    .settings-menu:not(.open) {
      display: none;
    }

    /* Mobile mega menu styling */
    .mega-menu {
      position: static !important;
      display: none;
      width: 100% !important;
      max-width: none !important;
      left: auto !important;
      right: auto !important;
      top: auto !important;
      transform: none !important;
      box-shadow: none !important;
      border: none !important;
      border-radius: 0 !important;
      margin: calc(0.5rem * var(--font-scale, 1)) 0 !important;
      padding: calc(1rem * var(--font-scale, 1)) !important;
      background: var(--bg-secondary, #f8f9fa) !important;
    }

    .mega-menu.open {
      visibility: visible;
      opacity: 1;
    }

    /* Make scenarios link functional in mobile */
    .nav-item-dropdown .nav-link[href="scenarios.html"] {
      pointer-events: auto !important;
    }

    /* Make other dropdown navigation links simple */
    .nav-item-dropdown .nav-link:not([href]) {
      pointer-events: auto;
    }
  }

  /* Navigation Toggle Button (Mobile) */
  .nav-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: calc(0.75rem * var(--font-scale, 1));
    width: calc(2.5rem * var(--font-scale, 1));
    height: calc(2.5rem * var(--font-scale, 1));
    justify-content: center;
    gap: 4px;
    min-height: var(--touch-target-min, 44px);
    min-width: var(--touch-target-min, 44px);
    border-radius: 8px;
    transition: background-color 0.2s ease;
  }

  .nav-toggle:hover {
    background: rgb(248 250 252 / 80%);
  }

  .nav-toggle span {
    display: block;
    width: 20px;
    height: 2px;
    background: var(--nav-text-color, #64748b);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 1px;
  }

  .nav-toggle[aria-expanded="true"] span:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
    background: var(--nav-text-hover, #1e293b);
  }

  .nav-toggle[aria-expanded="true"] span:nth-child(2) {
    opacity: 0;
    transform: scale(0);
  }

  .nav-toggle[aria-expanded="true"] span:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
    background: var(--nav-text-hover, #1e293b);
  }

  @media (width < 768px) {
    .nav-toggle {
      display: flex;
    }
    /* Responsive toggle button for smaller screens */
    @media only screen and (width <= 375px) {
      .nav-toggle {
        padding: 0.5rem;
        width: 2rem;
        height: 2rem;
        min-width: 40px;
        min-height: 40px;
      }
      .nav-toggle span {
        width: 16px;
        height: 1.5px;
      }
    }
    @media only screen and (width <= 320px) {
      .nav-toggle {
        padding: 0.375rem;
        width: 1.75rem;
        height: 1.75rem;
        min-width: 36px;
        min-height: 36px;
      }
      .nav-toggle span {
        width: 14px;
        height: 1px;
      }
    }
  }

  /* (Removed duplicate Navigation Backdrop block — consolidated earlier in file) */

  /* Mega Menu Enhanced Styles */
  .mega-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgb(0 0 0 / 10%);
    padding: calc(2rem * var(--font-scale, 1));
    z-index: 1001;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-20px);
    transition: all 0.3s ease;
    min-width: 600px;
    max-width: 800px;
  }

  .mega-menu.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .mega-menu-content {
    display: flex;
    flex-direction: column;
    gap: calc(1.5rem * var(--font-scale, 1));
  }

  .mega-menu-header {
    text-align: center;
    border-bottom: 1px solid var(--border-color, #e0e0e0);
    padding-bottom: calc(1rem * var(--font-scale, 1));
  }

  .mega-menu-header h3 {
    margin: 0 0 calc(0.5rem * var(--font-scale, 1));
    font-size: calc(1.25rem * var(--font-scale, 1));
    color: var(--primary-color, #1a73e8);
  }

  .mega-menu-header p {
    margin: 0;
    color: var(--text-secondary, #666);
    font-size: calc(0.9rem * var(--font-scale, 1));
  }

  .mega-menu-filter {
    margin-bottom: calc(1rem * var(--font-scale, 1));
  }

  .mega-menu-search {
    width: 100%;
    padding: calc(0.75rem * var(--font-scale, 1))
      calc(1rem * var(--font-scale, 1));
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 6px;
    font-size: calc(0.9rem * var(--font-scale, 1));
    min-height: var(--touch-target-min, 44px);
  }

  .mega-menu-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: calc(1rem * var(--font-scale, 1));
  }

  .mega-menu-item {
    display: flex;
    align-items: center;
    gap: calc(1rem * var(--font-scale, 1));
    padding: calc(1rem * var(--font-scale, 1));
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    color: inherit;
    min-height: var(--touch-target-min, 44px);
  }

  .mega-menu-item:hover,
  .mega-menu-item:focus {
    border-color: var(--primary-color, #1a73e8);
    box-shadow: 0 2px 8px rgb(26 115 232 / 10%);
    transform: translateY(-1px);
  }

  .mega-menu-icon {
    font-size: calc(2rem * var(--font-scale, 1));
    flex-shrink: 0;
  }

  .mega-menu-text h4 {
    margin: 0 0 calc(0.25rem * var(--font-scale, 1));
    font-size: calc(1rem * var(--font-scale, 1));
    font-weight: 600;
  }

  .mega-menu-text p {
    margin: 0;
    font-size: calc(0.85rem * var(--font-scale, 1));
    color: var(--text-secondary, #666);
    line-height: 1.4;
  }

  /* ===== ADDITIONAL MEGA MENU COMPONENTS FROM MAIN.CSS ===== */
  /* Mega menu dropdown trigger behavior */
  .nav-item-dropdown:hover .mega-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Mega menu search filter functionality */
  .mega-menu-filter {
    margin-top: calc(0.75rem * var(--font-scale, 1));
    display: none; /* Hidden by default, shown on mobile */
  }

  .mega-menu-search {
    width: 100%;
    padding: calc(0.5rem * var(--font-scale, 1))
      calc(0.75rem * var(--font-scale, 1));
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 6px;
    font-size: calc(0.9rem * var(--font-scale, 1));
    background: white;
    transition: border-color 0.2s ease;
    min-height: var(--touch-target-min, 44px);
  }

  .mega-menu-search:focus {
    outline: none;
    border-color: var(--primary-color, #1a73e8);
    box-shadow: 0 0 0 3px rgb(26 115 232 / 10%);
  }

  .mega-menu-search::placeholder {
    color: var(--text-secondary, #666);
  }

  /* Show search filter on mobile */
  @media only screen and (width < 768px) {
    .mega-menu-filter {
      display: block;
    }

    /* Detailed mobile mega menu responsive styles */
    .mega-menu {
      position: absolute;
      top: 100%;
      left: calc(0.75rem * var(--font-scale, 1));
      right: calc(0.75rem * var(--font-scale, 1));
      width: calc(280px - 2 * calc(0.75rem * var(--font-scale, 1)));
      max-width: calc(280px - 2 * calc(0.75rem * var(--font-scale, 1)));
      margin-left: calc(-1 * calc(0.75rem * var(--font-scale, 1)));

      background: white;
      border: 1px solid var(--border-color, #e0e0e0);
      border-radius: 6px;
      box-shadow: 0 8px 32px rgb(0 0 0 / 10%);
      z-index: 1002; /* Above mobile nav */
      margin-top: calc(0.25rem * var(--font-scale, 1));
      display: block;
      max-height: 60vh;
      overflow: hidden auto;
      -webkit-overflow-scrolling: touch;
      box-sizing: border-box;

      /* Mobile visibility */
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    /* Override desktop hover behavior on mobile */
    .nav-item-dropdown:hover .mega-menu {
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
    }

    /* Mobile open state */
    .nav-item-dropdown[aria-expanded="true"] .mega-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .mega-menu-content {
      padding: 0;
      display: block;
      box-sizing: border-box;
      overflow-x: hidden;
    }

    .mega-menu-header {
      padding: calc(1rem * var(--font-scale, 1))
        calc(0.75rem * var(--font-scale, 1))
        calc(0.75rem * var(--font-scale, 1))
        calc(0.75rem * var(--font-scale, 1));
      border-bottom: 1px solid var(--border-color, #e0e0e0);
      margin-bottom: calc(0.75rem * var(--font-scale, 1));
      box-sizing: border-box;
      text-align: left;
    }

    .mega-menu-header h3 {
      font-size: calc(1.125rem * var(--font-scale, 1));
      margin: 0 0 calc(0.5rem * var(--font-scale, 1)) 0;
      color: var(--text-color, #333);
      font-weight: 600;
    }

    .mega-menu-header p {
      font-size: calc(0.9rem * var(--font-scale, 1));
      margin: 0;
      color: var(--text-secondary, #666);
      line-height: 1.4;
    }

    .mega-menu-grid {
      display: block;
      max-height: none;
      overflow: visible;
      padding: 0;
    }

    .mega-menu-item {
      display: block;
      padding: calc(0.75rem * var(--font-scale, 1));
      border: none;
      border-bottom: 1px solid var(--border-color, #e0e0e0);
      margin: 0;
      border-radius: 0;
      background: white;
      transition: background-color 0.2s ease;
      text-decoration: none;
      color: var(--text-color, #333);
      min-height: var(--touch-target-min, 44px);
      display: flex;
      align-items: center;
    }

    .mega-menu-item:last-child {
      border-bottom: none;
    }

    .mega-menu-item:hover,
    .mega-menu-item:focus {
      background: var(--hover-bg, #f5f5f5);
      color: var(--primary-color, #1a73e8);
    }

    .mega-menu-item:active {
      background: var(--active-bg, #e8e8e8);
    }

    .mega-menu-icon {
      display: inline-block;
      font-size: 1.2em;
      margin-right: calc(0.75rem * var(--font-scale, 1));
      vertical-align: middle;
      flex-shrink: 0;
    }

    .mega-menu-text {
      display: inline-block;
      vertical-align: middle;
      flex: 1;
    }

    .mega-menu-text h4 {
      font-size: calc(0.9rem * var(--font-scale, 1));
      margin: 0;
      font-weight: 500;
      color: inherit;
    }

    .mega-menu-text p {
      font-size: calc(0.8rem * var(--font-scale, 1));
      margin: 0;
      color: var(--text-secondary, #666);
      line-height: 1.3;
    }

    /* Ensure dropdown arrow is visible and rotates when open */
    .dropdown-arrow {
      transition: transform 0.2s ease;
    }

    .nav-item-dropdown[aria-expanded="true"] .dropdown-arrow {
      transform: rotate(180deg);
    }
  }

  /* Mega menu footer styles consolidated to footer.css for component ownership */
  /* .mega-menu-footer styles moved to footer.css */
  /* .mega-menu-view-all styles moved to footer.css */

  /* Mobile Mega Menu */
  @media only screen and (width <= 428px) {
    .mega-menu {
      position: static;
      opacity: 1;
      visibility: visible;
      transform: none;
      box-shadow: none;
      border: none;
      border-radius: 0;
      padding: calc(1rem * var(--font-scale, 1));
      min-width: auto;
      max-width: none;
      margin-left: calc(1rem * var(--font-scale, 1));
      background: var(--bg-secondary, #f8f9fa);
    }

    .mega-menu-grid {
      grid-template-columns: 1fr;
      gap: calc(0.5rem * var(--font-scale, 1));
    }

    .mega-menu-item {
      padding: calc(0.75rem * var(--font-scale, 1));
    }

    .mega-menu-icon {
      font-size: calc(1.5rem * var(--font-scale, 1));
    }
  }

  /* Tablet Navigation Enhancements */
  @media only screen and (width >= 768px) and (width < 1280px) {
    .main-nav {
      /* avoid double horizontal spacing; rely on header/header-container padding */
      padding-inline: 0;
      flex: 1;
      min-width: 0; /* allow nav to shrink within header-left */
      max-width: 100%;
      overflow-x: auto; /* allow scroll instead of off-screen overflow */
      overflow-y: hidden;
      white-space: nowrap; /* keep nav in one row */
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE/Edge */
    }

    .main-nav::-webkit-scrollbar {
      /* WebKit */
      display: none;
    }

    .nav-group-primary {
      flex: 1;
      min-width: 0; /* allow inner scroller to size properly */
    }

    .nav-group-primary .nav-items {
      /* tighter gaps only; scroller handled by .main-nav */
      gap: calc(0.5rem * var(--font-scale));
    }

    .nav-group-primary .nav-link {
      /* reduce padding and font size slightly to prevent overflow */
      padding: 0.5rem 0.75rem;
      font-size: 0.9rem;
    }

    .nav-group-about .nav-items,
    .nav-group-actions .nav-items {
      gap: calc(0.5rem * var(--font-scale));
    }

    .mega-menu {
      max-width: calc(90vw);
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
    }

    .mega-menu.open {
      transform: translateX(-50%) translateY(0);
    }
  }

  /* Small Desktop refinement: 1024–<1280px — balanced spacing */
  @media only screen and (width >= 1024px) and (width < 1280px) {
    .nav-group-primary .nav-items {
      gap: calc(0.625rem * var(--font-scale));
    }

    .nav-group-primary .nav-link {
      padding: 0.625rem 0.875rem;
      font-size: 0.95rem;
    }

    /* Hide secondary groups at small desktop to preserve fit */
    .nav-group-community,
    .nav-group-about {
      display: none;
    }

    /* Compact logo divider/padding */
    .logo-full {
      border-right: 0;
      padding-right: 0;
      margin-right: 0;
    }
  }

  /* Compact header spacing and logo for tablets */
  @media only screen and (width >= 768px) and (width < 1024px) {
    .header-left {
      gap: calc(var(--container-padding, 16px) * 0.5);
    }
    .header-right {
      gap: calc(var(--container-padding, 16px) * 0.5);
    }

    /* Hide secondary groups to ensure fit on narrow tablets */
    .nav-group-community,
    .nav-group-about {
      display: none;
    }

    /* Keep actions minimal spacing */
    .nav-group-actions .nav-link {
      padding: 0.5rem 0.75rem;
      font-size: 0.9rem;
    }

    /* Hide actions and auth to prioritize primary links */
    .nav-group-actions,
    .nav-group-auth {
      display: none;
    }

    /* Tighter primary links to avoid overflow */
    .nav-group-primary .nav-items {
      gap: 0.375rem;
    }
    .nav-group-primary .nav-link {
      padding: 0.5rem 0.625rem;
      font-size: 0.875rem;
    }

    /* Remove logo divider to free horizontal space */
    .logo-full {
      border-right: 0;
      padding-right: 0;
      margin-right: 0;
    }
  }

  /* Use compact logo below 1024px to free horizontal space */
  @media (width < 1024px) {
    .logo-full {
      display: none;
    }
    .logo-compact {
      display: block;
    }
  }

  /* Laptop/Desktop Navigation Enhancements */
  @media only screen and (width >= 1280px) {
    .main-nav {
      flex: 1;
      justify-content: center;
      padding: 0 var(--container-padding);
    }

    .nav-items {
      padding: 0;
      flex-direction: row;
      gap: var(--spacing-1, calc(1.5rem * var(--font-scale)));
      align-items: center;
    }

    .nav-backdrop {
      display: none; /* No backdrop needed on desktop */
    }

    .nav-link {
      padding: var(--spacing-2, calc(0.5rem * var(--font-scale)))
        var(--spacing-4, calc(1rem * var(--font-scale)));
    }

    .nav-link.active::before {
      display: none; /* Remove mobile indicator */
    }

    .nav-link.active {
      background-color: rgb(0 124 186 / 10%);
      border-bottom: 2px solid var(--color-primary);
    }

    .nav-group-primary .nav-items {
      gap: calc(1.5rem * var(--font-scale));
    }

    .nav-group-about .nav-items,
    .nav-group-actions .nav-items {
      gap: calc(1rem * var(--font-scale));
    }

    .mega-menu {
      max-width: min(1200px, calc(95vw));
    }
  }

  /* High Contrast Mode Support */
  @media (prefers-contrast: high) {
    .dropdown-menu,
    .settings-menu,
    .mega-menu {
      border-color: #000;
      box-shadow: 0 4px 20px rgb(0 0 0 / 30%);
    }

    .mega-menu-item {
      border-color: #000;
    }

    .mega-menu-item:hover,
    .mega-menu-item:focus {
      border-color: #000;
      background-color: #f0f0f0;
    }
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    .dropdown-menu,
    .settings-menu,
    .mega-menu,
    .mega-menu-item,
    .nav-toggle span,
    .main-nav,
    .nav-backdrop {
      transition: none;
    }

    .mega-menu-item:hover,
    .mega-menu-item:focus {
      transform: none;
    }
  }

  /* ===== ENHANCED PROFILE NAVIGATION COMPONENTS ===== */
  /* Profile-specific header and navigation patterns */
  .header-container {
    display: flex;
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
    height: var(--header-h); /* Ensure consistent height with main header */
    min-height: var(--header-h); /* Prevent collapsing */
  }

  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 80px;
    gap: 2rem;
  }

  .logo-section {
    display: flex;
    align-items: center;
    flex-shrink: 0;
  }

  .logo-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .logo-link:hover {
    transform: translateY(-1px);
  }

  .logo-icon {
    width: 48px;
    height: 48px;
    font-size: 1.5rem;
    background: linear-gradient(
      135deg,
      var(--primary-color, #1a73e8),
      var(--accent-color, #f59e0b)
    );
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 4px 6px rgb(0 0 0 / 10%);
  }

  .logo-text {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .logo-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: white;
    margin: 0;
  }

  .logo-subtitle {
    font-size: 0.875rem;
    color: #94a3b8;
    font-weight: 500;
    margin: 0;
  }

  .header-nav {
    display: flex;
    align-items: center;
    flex: 1;
    justify-content: center;
  }

  .nav-links {
    display: flex;
    gap: 2rem;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  /* Enhanced nav-link styles for profile pages */
  .nav-links .nav-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #e2e8f0;
    text-decoration: none;
    font-weight: 500;
    padding: 0.75rem 1rem;
    border-radius: 6px;
    transition: all 0.2s ease;
    position: relative;
    min-height: var(--touch-target-min, 44px);
  }

  .nav-links .nav-link:hover,
  .nav-links .nav-link.active {
    color: white;
    background: rgb(255 255 255 / 10%);
    transform: translateY(-1px);
  }

  .nav-links .nav-link::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 50%;
    width: 0;
    height: 2px;
    background: var(--accent-color, #f59e0b);
    transition: all 0.2s ease;
    transform: translateX(-50%);
  }

  .nav-links .nav-link:hover::after,
  .nav-links .nav-link.active::after {
    width: 80%;
  }

  .nav-icon {
    font-size: 1rem;
  }

  /* ===== DARK MODE SUPPORT ===== */
  /* Header Dark Mode - Consolidated */
  body.dark-mode header.header {
    background: #2d2d2d !important;
    border-bottom-color: #444 !important;
    color: #fff !important;
  }

  /* Logo Dark Mode */
  body.dark-mode .logo {
    color: var(--theme-text-primary, #fff);
  }

  /* Header Actions Dark Mode */
  body.dark-mode .search-toggle {
    background: rgb(255 255 255 / 10%);
    color: #e2e8f0;
    border: 1px solid var(--theme-border, #444);
  }

  body.dark-mode .search-toggle:hover {
    background: rgb(255 255 255 / 20%);
    color: white;
  }

  body.dark-mode .user-avatar {
    border-color: var(--theme-border, #444);
  }

  body.dark-mode .auth-section {
    color: var(--theme-text-primary, #fff);
  }

  body.dark-mode .main-nav {
    background: var(--theme-bg-primary);
    border-bottom: 1px solid var(--theme-border);
  }

  /* Dark mode override for force-visible navigation states */
  body.dark-mode .main-nav.force-visible,
  body.dark-mode .main-nav.open,
  body.dark-mode .main-nav.mobile-force-visible,
  body.dark-mode .main-nav.js-open {
    background: #2d2d2d !important;
  }

  body.dark-mode .nav-link {
    color: var(--theme-text-primary);
  }

  body.dark-mode .nav-link:hover {
    color: var(--color-primary);
    background: var(--theme-bg-secondary);
  }

  body.dark-mode .nav-link.active {
    color: var(--color-primary);
    background: rgb(74 158 255 / 10%);
  }

  /* Dropdown menus */
  body.dark-mode .dropdown-menu,
  body.dark-mode .settings-menu {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border);
    box-shadow: 0 8px 20px var(--theme-shadow-hover);
  }

  body.dark-mode .dropdown-item {
    color: var(--theme-text-primary);
  }

  body.dark-mode .dropdown-item:hover {
    background: var(--theme-bg-primary);
    color: var(--theme-text-primary);
  }

  body.dark-mode .dropdown-divider {
    border-color: var(--theme-border);
  }

  /* Mega menu */
  body.dark-mode .mega-menu {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border);
    box-shadow: 0 12px 28px var(--theme-shadow-hover);
  }

  body.dark-mode .mega-menu-section {
    border-right: 1px solid var(--theme-border);
  }

  body.dark-mode .mega-menu-header {
    color: var(--theme-text-primary);
    border-bottom: 1px solid var(--theme-border);
  }

  body.dark-mode .mega-menu-item {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border);
    color: var(--theme-text-primary);
  }

  body.dark-mode .mega-menu-item:hover {
    background: var(--theme-bg-secondary);
    border-color: var(--theme-border-hover);
    box-shadow: 0 4px 12px var(--theme-shadow-hover);
  }

  body.dark-mode .mega-menu-title {
    color: var(--theme-text-primary);
  }

  body.dark-mode .mega-menu-description {
    color: var(--theme-text-secondary);
  }

  body.dark-mode .mega-menu-icon {
    color: var(--color-primary);
  }

  /* Mobile navigation */
  body.dark-mode .nav-toggle {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border);
  }

  body.dark-mode .nav-toggle:hover {
    background: var(--theme-bg-primary);
    border-color: var(--theme-border-hover);
  }

  body.dark-mode .nav-toggle span {
    background: var(--theme-text-primary);
  }

  body.dark-mode .nav-backdrop {
    background: rgb(0 0 0 / 80%);
  }

  /* Mobile menu */
  body.dark-mode .mobile-nav {
    background: var(--theme-bg-secondary);
    border-right: 1px solid var(--theme-border);
  }

  body.dark-mode .mobile-nav .nav-link {
    color: var(--theme-text-primary);
    border-bottom: 1px solid var(--theme-border);
  }

  body.dark-mode .mobile-nav .nav-link:hover {
    background: var(--theme-bg-primary);
  }

  /* Breadcrumbs */
  body.dark-mode .breadcrumb-container {
    background: rgb(45 45 45 / 90%);
    backdrop-filter: blur(12px);
    border-bottom-color: rgb(68 68 68 / 80%);
  }

  body.dark-mode .breadcrumb-item {
    color: var(--theme-text-secondary, #94a3b8);
  }

  body.dark-mode .breadcrumb-item:not(:last-child)::after {
    color: rgb(148 163 184 / 50%);
  }

  body.dark-mode .breadcrumb-item a {
    color: var(--theme-text-secondary, #94a3b8);
  }

  body.dark-mode .breadcrumb-item a:hover {
    color: var(--theme-text-primary, #fff);
    background: rgb(68 68 68 / 60%);
  }

  body.dark-mode .breadcrumb-item.active {
    color: var(--theme-text-primary, #fff);
  }

  body.dark-mode .breadcrumb-action {
    background: rgb(68 68 68 / 80%);
    border-color: rgb(68 68 68 / 60%);
    color: var(--theme-text-secondary, #94a3b8);
  }

  body.dark-mode .breadcrumb-action:hover {
    background: rgb(68 68 68);
    border-color: rgb(99 102 241 / 50%); /* Indigo-500 */
    color: var(--theme-text-primary, #fff);
    box-shadow: 0 2px 8px rgb(0 0 0 / 30%);
  }

  body.dark-mode .breadcrumb-search {
    background: rgb(68 68 68 / 90%);
    border-color: rgb(68 68 68 / 60%);
  }

  body.dark-mode .breadcrumb-search:focus-within {
    border-color: rgb(99 102 241 / 50%); /* Indigo-500 */
    box-shadow: 0 0 0 3px rgb(99 102 241 / 20%); /* Indigo-500 */
  }

  body.dark-mode .breadcrumb-search input {
    color: var(--theme-text-primary, #fff);
  }

  body.dark-mode .breadcrumb-search input::placeholder {
    color: var(--theme-text-muted, #6b7280);
  }

  body.dark-mode .breadcrumb-search-icon {
    color: var(--theme-text-secondary, #94a3b8);
  }

  body.dark-mode .breadcrumb-home {
    color: var(--theme-text-secondary, #94a3b8);
  }

  body.dark-mode .breadcrumb-item a:hover .breadcrumb-home {
    color: var(--theme-text-primary, #fff);
  }

  /* Search in navigation */
  body.dark-mode .nav-search {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border);
  }

  body.dark-mode .nav-search input {
    background: transparent;
    color: var(--theme-text-primary);
    border: none;
  }

  body.dark-mode .nav-search input::placeholder {
    color: var(--theme-text-muted);
  }

  /* ===============================================
   Header Responsive Styles - Consolidated
   =============================================== */

  /* Mobile and up - responsive padding */
  @media only screen and (width >= 375px) {
    header.header {
      padding-inline: var(--container-padding);
    }

    .header-container {
      padding-inline: var(--container-padding); /* Align with header padding */
    }
  }

  @media only screen and (width >= 768px) {
    header.header {
      padding-inline: var(--container-padding);
    }

    .header-container {
      padding-inline: var(--container-padding); /* Match header padding */
    }
  }

  @media only screen and (width >= 1024px) {
    header.header {
      padding-inline: var(--container-padding);
      max-width: var(--container-xl);
      margin: 0 auto;
    }

    .header-container {
      padding-inline: var(--container-padding);
      max-width: var(--container-xl); /* Match header max-width constraint */
      margin: 0 auto;
    }
  }

  body.dark-mode .nav-search-btn {
    color: var(--theme-text-secondary);
  }

  body.dark-mode .nav-search-btn:hover {
    color: var(--theme-text-primary);
  }

  /* ===== ENHANCED PROFILE DARK MODE ===== */
  /* Enhanced Profile Header Dark Mode */
  body.dark-mode .header-container {
    background: transparent;
    color: var(--theme-text-primary, #fff);
    border-bottom-color: var(--theme-border, rgb(255 255 255 / 10%));
  }

  body.dark-mode .header-content {
    background: transparent !important;
    color: #fff !important;
  }

  body.dark-mode .header-nav {
    background: transparent !important;
    color: #fff !important;
  }

  body.dark-mode .nav-links {
    background: transparent !important;
  }

  body.dark-mode .nav-links .nav-link {
    color: #fff !important;
  }

  /* Navigation Dark Mode - Uses Theme Variables */
  body.dark-mode .nav-container {
    background-color: var(--theme-bg-secondary);
    border-bottom-color: var(--theme-border);
  }

  body.dark-mode .nav-brand {
    color: var(--theme-text-primary) !important;
  }

  /* Universal nav-link dark mode enhancement */
  body.dark-mode .nav-link {
    color: var(--theme-text-primary, #fff) !important;
  }

  body.dark-mode .nav-link:hover {
    color: var(--theme-accent, var(--color-primary)) !important;
    background-color: var(
      --theme-bg-tertiary,
      var(--theme-bg-secondary)
    ) !important;
  }

  /* Logo components dark mode */
  body.dark-mode .logo-title {
    color: white;
  }

  body.dark-mode .logo-subtitle {
    color: #94a3b8;
  }

  /* Navigation Toggle Dark Mode */
  body.dark-mode .nav-toggle {
    background: var(--theme-bg-secondary, #2d2d2d);
    border: 1px solid var(--theme-border, #444);
  }

  body.dark-mode .nav-toggle:hover {
    background: var(--theme-bg-primary, #1a1a1a);
    border-color: var(--theme-border-hover, #666);
    color: var(--primary-color, #4a9eff) !important;
  }

  body.dark-mode .nav-toggle span {
    background: var(--theme-text-primary, #fff);
  }

  body.dark-mode .nav-toggle:hover span {
    background-color: var(--primary-color, #4a9eff) !important;
  }

  /* Enhanced dropdown and mega menu dark mode */
  body.dark-mode .dropdown-menu,
  body.dark-mode .settings-menu {
    background: var(--theme-bg-secondary, #2d2d2d);
    border: 1px solid var(--theme-border, #444);
    color: #fff !important;
  }

  body.dark-mode .dropdown-item {
    color: var(--theme-text-primary, #fff);
    background-color: transparent !important;
  }

  body.dark-mode .dropdown-item:hover {
    background: var(--theme-bg-primary, #3d3d3d);
    color: var(--theme-text-primary, #fff);
  }

  body.dark-mode .mega-menu-search {
    background: var(--theme-bg-primary, #1a1a1a);
    border: 1px solid var(--theme-border, #444);
    color: var(--theme-text-primary, #fff);
  }

  body.dark-mode .mega-menu-search::placeholder {
    color: var(--theme-text-muted, #888);
  }

  /* ===== HIGH CONTRAST MODE SUPPORT ===== */
  /* High contrast navigation styles for accessibility */
  body.high-contrast {
    background-color: #fff !important;
    color: #000 !important;
  }

  body.high-contrast .nav-container {
    background-color: #fff !important;
    color: #000 !important;
    border-color: #000 !important;
  }

  body.high-contrast .nav-link {
    color: #000 !important;
    text-decoration: underline;
    background-color: transparent !important;
  }

  body.high-contrast .nav-link:hover,
  body.high-contrast .nav-link:focus {
    background-color: #000 !important;
    color: #fff !important;
  }

  body.high-contrast .dropdown-menu,
  body.high-contrast .settings-menu,
  body.high-contrast .mega-menu {
    border-color: #000;
    box-shadow: 0 4px 20px rgb(0 0 0 / 30%);
  }

  body.high-contrast .mega-menu-item {
    border-color: #000;
  }

  body.high-contrast .mega-menu-item:hover,
  body.high-contrast .mega-menu-item:focus {
    border-color: #000;
    background-color: #f0f0f0;
  }

  /* High contrast breadcrumb support */
  body.high-contrast .breadcrumb-container {
    background: #fff !important;
    border-color: #000 !important;
  }

  body.high-contrast .breadcrumb-item {
    color: #000 !important;
  }

  body.high-contrast .breadcrumb-item a {
    color: #000 !important;
    text-decoration: underline;
    border: 2px solid transparent;
  }

  body.high-contrast .breadcrumb-item a:hover,
  body.high-contrast .breadcrumb-item a:focus {
    background-color: #000 !important;
    color: #fff !important;
    border-color: #000;
  }

  body.high-contrast .breadcrumb-item.active {
    color: #000 !important;
    font-weight: 700;
  }

  body.high-contrast .breadcrumb-action {
    background: #fff !important;
    border: 2px solid #000 !important;
    color: #000 !important;
  }

  body.high-contrast .breadcrumb-action:hover {
    background: #000 !important;
    color: #fff !important;
  }

  body.high-contrast .breadcrumb-search {
    background: #fff !important;
    border: 2px solid #000 !important;
  }

  body.high-contrast .breadcrumb-search input {
    color: #000 !important;
  }

  /* Navigation Toggle Positioning for Desktop */
  @media only screen and (width >= 768px) {
    .nav-toggle {
      /* Hide toggle on desktop since nav is always visible */
      display: none;
    }
  }

  /* ===============================================
   SHARED NAVIGATION CONSOLIDATION COMPLETE
   ===============================================
   
   This file now contains ALL navigation-related styles:
   
   ✅ Main navigation (.header, .main-nav, .nav-link, etc.)
   ✅ Logo components (.logo, .logo-image, .logo-text, etc.)
   ✅ Mega menu system (.mega-menu, .mega-menu-item, etc.)
   ✅ Dropdown menus (.dropdown-menu, .dropdown-item, etc.)
   ✅ Mobile navigation (.nav-toggle, .nav-backdrop, etc.)
   ✅ Enhanced profile navigation (.header-content, .nav-links, etc.)
   ✅ Search components (.nav-search, .search-toggle, etc.)
   ✅ Dark mode support for all navigation elements
   ✅ High contrast mode support
   ✅ Mobile responsive patterns
   ✅ Force-visible override system
   ✅ Accessibility features
   
   Source consolidation from:
   - main.css (mega menu components, mobile styles)
   - enhanced-profile.css (profile navigation patterns)
   - appearance-settings.css (dark mode & high contrast styles)
   
   This establishes shared-navigation.css as the single source
   of truth for all navigation-related styling across the application.
*/
} /* End @layer components */
