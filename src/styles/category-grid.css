/**
 * Copyright 2025 Armando Sori
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Category Grid Styles - Restructured Layout
 * 10 category sections, each with header + 3 scenario cards
 * Part of the SimulateAI Ethics Platform Revamp - Phase 1.1
 * 
 * NOTE: Category header styles have been extracted to src/styles/category-header.css
 * This file now focuses on grid layout, scenario cards, and view controls.
 */

/* View Toggle Controls */
.view-toggle-controls {
  display: flex;
  gap: var(--spacing-2);
  margin-top: var(--spacing-6);
  justify-content: center;
  align-items: center;
  background: var(--color-gray-100);
  border-radius: var(--radius-lg);
  padding: var(--spacing-1);
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
}

.view-toggle-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  padding: var(--spacing-3) var(--spacing-4);
  border: none;
  background: transparent;
  border-radius: var(--radius-base);
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-gray-600);
  white-space: nowrap;
}

.view-toggle-btn:hover {
  background: var(--color-white);
  color: var(--color-gray-800);
  box-shadow: var(--shadow-sm);
}

.view-toggle-btn.active {
  background: var(--color-white);
  color: var(--color-primary);
  box-shadow: var(--shadow-base);
  font-weight: var(--font-weight-semibold);
}

.view-toggle-btn:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.toggle-icon {
  font-size: var(--font-size-base);
  line-height: 1;
}

.toggle-text {
  line-height: 1;
}

.keyboard-hint {
  display: flex;
  align-items: center;
  margin-left: var(--spacing-4);
  padding: var(--spacing-2) var(--spacing-3);
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-base);
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  cursor: help;
}

.keyboard-hint .hint-text {
  line-height: 1;
}

.keyboard-hint kbd {
  background: var(--color-white);
  border: 1px solid var(--color-gray-300);
  border-radius: 3px;
  padding: 2px 6px;
  margin: 0 2px;
  font-family: var(--font-family-mono);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  color: var(--color-gray-700);
  box-shadow: 0 1px 2px rgb(0 0 0 / 10%);
}

/* Mobile view toggle adjustments - Now handled by media.css utilities */
/* Use classes: mobile:padding-sm mobile:text-sm instead */

/* View content elements can use .mobile-hide/.mobile-show classes */

/* View Content Container */
.view-content {
  transition: opacity var(--transition-base);
}

.view-content:not(.active) {
  display: none;
}

/* ===== COMPONENT STYLES EXTRACTED =====
   
   Scenario browser component styles moved to:
   ðŸ“ src/styles/scenario-browser-component.css
   
   Scenario card component styles moved to:
   ðŸ“ src/styles/scenario-card.css
   
   This extraction includes:
   âœ… Scenario Browser Component:
   - .scenarios-grid layout and data-view modes
   - .scenario-card-wrapper with hover effects
   - .scenario-hover-category-header animations
   - .scenario-controls-toolbar
   - Search, filter, sort, and pagination controls
   - Dark theme and responsive design
   
   âœ… Scenario Card Component:
   - .scenario-card base styles and states
   - .scenario-header, .scenario-icon, .scenario-difficulty
   - .scenario-content, .scenario-title, .scenario-description
   - .scenario-footer, .scenario-start-btn, .scenario-quick-start-btn
   - .scenario-completed-badge and accessibility features
   - Context-specific overrides and responsive design
   ============================================= */

/* Category Sections */

/* Category Section Layout */

/* Category Grid Container */

/* Category Grid Styles */

/* Main Container - Category grid styles (supports both legacy and new class names) */
.categories-grid,
.simulations-grid {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-12);
  margin-bottom: var(--spacing-12);
  padding: 0 var(--spacing-4);
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;

  /* CRITICAL: Prevent horizontal overflow from escaping */
  overflow-x: hidden;
}

/* Desktop layout improvements - Consider using .container-responsive utility */
/* These specific responsive breakpoints are kept for precise layout control */
@media (width >= 769px) {
  .categories-grid,
  .simulations-grid {
    padding: 0 var(--spacing-8);
    margin: 0 auto var(--spacing-12);
    max-width: 1200px; /* Reduced max width for better scrolling experience */
  }
}

@media (width >= 1024px) {
  .categories-grid,
  .simulations-grid {
    padding: 0 var(--spacing-12);
    margin: 0 var(--spacing-16) var(--spacing-12); /* Added horizontal margins */
    max-width: 1300px;
  }
}

@media (width >= 1280px) {
  .categories-grid,
  .simulations-grid {
    padding: 0 var(--spacing-16);
    margin: 0 var(--spacing-20) var(--spacing-12); /* Larger horizontal margins */
    max-width: 1400px;
  }
}

@media (width >= 1600px) {
  .categories-grid,
  .simulations-grid {
    padding: 0 var(--spacing-20);
    margin: 0 var(--spacing-20) var(--spacing-12); /* Use available spacing variable */
    max-width: 1500px;
  }
}

/* Category Section */
.category-section {
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden; /* CRITICAL: Hide any overflow from children */
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-base);
  position: relative;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.category-section:hover {
  box-shadow: var(--shadow-md);
}

[data-theme="dark"] .category-section {
  background: var(--color-gray-800);
  border-color: var(--color-gray-700);
}

.category-section::after {
  content: "";
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 60px;
  background: linear-gradient(to right, transparent, rgb(255 255 255 / 80%));
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-base);
  z-index: 1;
}

.category-section:hover::after {
  opacity: 1;
}

/* Category Header */
/* ===== CATEGORY HEADER STYLES EXTRACTED =====
   Category header component styles have been moved to:
   src/styles/category-header.css
   
   This includes:
   - .category-header container and layout
   - .category-title-group, .category-icon-large, .category-info
   - .category-title, .category-description, .category-meta
   - .category-difficulty badges and variants
   - .category-time, .category-progress-text
   - .category-progress-ring with hover/focus states
   - .progress-percentage with pulse animations
   - Badge pulse animations and indicators
   - .progress-ring-tooltip with responsive behavior
   - Dark theme and accessibility support
   ============================================= */

/* ===== SCENARIO CARD STYLES MOVED =====
   All scenario card styles have been consolidated to:
   scenario-card.css for complete component organization
   
   This includes:
   - .scenario-header
   - .scenario-icon
   - .scenario-difficulty
   - .scenario-content
   - .scenario-title
   - .scenario-description
   - .scenario-footer
   - .scenario-start-btn
   - .scenario-quick-start-btn
   - .scenario-completed-badge
   
   Context-specific overrides remain in scenario-card.css
   ============================================= */

/* Category Grid Styles */

/* Main Container - Category grid styles (supports both legacy and new class names) */

/* Highlighted States */
.category-section-highlighted {
  animation: section-highlight-pulse 2s ease-in-out;
}

.scenario-card-highlighted {
  animation: card-highlight-pulse 2s ease-in-out;
}

@keyframes section-highlight-pulse {
  0%,
  100% {
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary);
  }

  50% {
    box-shadow:
      var(--shadow-xl),
      0 0 0 4px rgb(26 115 232 / 20%);
    border-color: var(--color-primary);
  }
}

@keyframes card-highlight-pulse {
  0%,
  100% {
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary);
  }

  50% {
    box-shadow:
      var(--shadow-lg),
      0 0 0 3px rgb(26 115 232 / 20%);
    border-color: var(--color-primary);
    transform: translateY(-4px);
  }
}

/* Responsive Design */
@media (width <= 1200px) {
  /* .scenarios-grid styles moved to scenario-browser.css for consolidation */
}

@media (width <= 768px) {
  .simulations-grid {
    gap: var(--spacing-8);
    padding: 0 var(--spacing-3);
  }

  .category-header {
    padding: var(--spacing-6);
    flex-direction: column;
    gap: var(--spacing-4);
    text-align: center;
    position: relative; /* Ensure absolute positioning context */
  }

  .category-title-group {
    flex-direction: column;
    text-align: center;
    gap: var(--spacing-4);
    position: static; /* Remove relative positioning from title group */
  }

  .category-icon-large {
    width: 60px;
    height: 60px;
    font-size: 30px;
    margin: 0 auto; /* Center the icon */
  }

  .category-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-2);
    margin-top: var(--spacing-2);
  }

  .category-meta-items {
    align-self: center;
    justify-content: center;
  }

  .category-title {
    font-size: var(--font-size-xl);
  }

  .category-section .scenario-card,
  .simulations-grid .scenario-card {
    flex: 0 0 280px; /* Smaller cards on mobile */
    min-height: 260px;
  }

  .scenario-card {
    min-height: 250px;
  }
}

/* Ensure scenario cards don't cause overflow on mobile */
@media (width <= 768px) {
  .category-section .scenario-card,
  .simulations-grid .scenario-card {
    max-width: 280px; /* Ensure cards don't exceed reasonable width */
    min-width: 250px; /* Prevent cards from becoming too narrow */
  }
}

@media (width <= 480px) {
  .category-section .scenario-card,
  .simulations-grid .scenario-card {
    max-width: 240px;
    min-width: 220px;
  }
}

/* Mobile-specific scenarios grid fixes */
@media (width <= 768px) {
  /* Remove overly restrictive containment from sections */
  .simulations-section {
    overflow-x: hidden; /* Only prevent horizontal overflow */

    /* Remove contain: strict - it was hiding content */
  }

  .simulations-grid {
    overflow-x: hidden; /* Only prevent horizontal overflow */

    /* Remove contain: strict - it was hiding content */
    padding: 0 var(--spacing-3); /* Reduce padding on mobile */
  }

  .category-section {
    overflow-x: hidden; /* Only prevent horizontal overflow, allow vertical */

    /* Remove contain: strict - it was hiding content */
  }

  /* .scenarios-grid styles moved to scenario-browser.css for consolidation */
}

@media (width <= 480px) {
  .simulations-grid {
    padding: 0 var(--spacing-2); /* Further reduce padding */
  }

  /* .scenarios-grid styles moved to scenario-browser.css for consolidation */
}

/* Desktop responsive adjustments for scenarios grid - moved to scenario-browser.css */
@media (width >= 1200px) {
  /* .scenarios-grid styles moved to scenario-browser.css for consolidation */

  .category-section .scenario-card,
  .simulations-grid .scenario-card {
    flex: 0 0 380px; /* Larger cards on large screens */
    min-height: 300px;
  }
}

@media (width >= 1400px) {
  .category-section .scenario-card,
  .simulations-grid .scenario-card {
    flex: 0 0 400px; /* Even larger cards on extra large screens */
  }
}

/* Accessibility Enhancements - Now handled by media.css utilities */
/* Use class: .no-motion for elements that should respect reduced motion */

/* High contrast mode support - Now handled by media.css utilities */
/* Use class: .high-contrast-border for elements that need enhanced borders */

/* Print styles - Now handled by media.css utilities */
/* Use classes: .print-hide, .print-show, .print-no-break as needed */

/* Scenario Controls Toolbar - moved to scenario-browser.css for consolidation */

/* Search Input Styles - moved to scenario-browser.css for consolidation */

/* Controls Group */
.controls-group {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
}

/* Filter and Sort Containers - moved to scenario-browser.css for consolidation */

/* Clear All Container */
.clear-all-container {
  position: relative;
  margin-left: var(--spacing-2);
}

/* Clear All Button */
.clear-all-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  padding: var(--spacing-2) var(--spacing-4);
  border: 1px solid var(--color-red-300);
  border-radius: var(--radius-md);
  background: var(--color-white);
  color: var(--color-red-600);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-base);
  white-space: nowrap;
}

.clear-all-btn:hover {
  border-color: var(--color-red-400);
  background: var(--color-red-50);
  color: var(--color-red-700);
}

.clear-all-btn:focus {
  outline: none;
  border-color: var(--color-red-500);
  box-shadow: 0 0 0 3px var(--color-red-100);
}

.clear-all-btn:active {
  background: var(--color-red-100);
  transform: translateY(1px);
}

/* Clear All Icon */
.clear-all-icon {
  width: 16px;
  height: 16px;
  color: var(--color-red-500);
  transition: color var(--transition-fast);
}

.clear-all-btn:hover .clear-all-icon {
  color: var(--color-red-600);
}

/* Clear All Text */
.clear-all-text {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  line-height: 1;
}

/* Filter and Sort Buttons - moved to scenario-browser.css for consolidation */

/* Search Autocomplete Dropdown - moved to scenario-browser.css for consolidation */

/* Mobile responsive scenario toolbar styles moved to scenario-browser.css for consolidation */

/* ===== DARK MODE SUPPORT ===== */
body.dark-mode .categories-grid {
  background: var(--theme-bg-primary);
}

/* .scenarios-grid dark mode styles moved to scenario-browser.css */

/* Category sections */
body.dark-mode .category-section {
  background: var(--theme-bg-secondary);
  border: 1px solid var(--theme-border);
}

body.dark-mode .category-header {
  background: var(--theme-bg-secondary);
  border-bottom: 1px solid var(--theme-border);
}

body.dark-mode .category-title {
  color: var(--theme-text-primary);
}

body.dark-mode .category-description {
  color: var(--theme-text-secondary);
}

/* Scenario cards */
body.dark-mode .scenario-card {
  background: var(--theme-bg-secondary);
  border: 1px solid var(--theme-border);
  color: var(--theme-text-primary);
}

body.dark-mode .scenario-card:hover {
  border-color: var(--theme-border-hover);
  box-shadow: 0 4px 12px var(--theme-shadow-hover);
}

body.dark-mode .scenario-title {
  color: var(--theme-text-primary);
}

body.dark-mode .scenario-description {
  color: var(--theme-text-secondary);
}

/* Scenario controls toolbar - moved to scenario-browser.css for consolidation */

/* Dark mode search input styles - moved to scenario-browser.css for consolidation */

/* Filter and sort styles moved to scenario-browser.css for consolidation */

/* Search autocomplete styles - moved to scenario-browser.css for consolidation */

/* Clear all button */
body.dark-mode .clear-all-btn {
  background: var(--theme-bg-primary);
  color: var(--theme-text-primary);
  border: 1px solid var(--theme-border);
}

body.dark-mode .clear-all-btn:hover {
  background: var(--theme-bg-secondary);
  border-color: var(--theme-border-hover);
}

/* View toggle buttons */
body.dark-mode .view-toggle-btn {
  background: var(--theme-bg-primary);
  color: var(--theme-text-primary);
  border: 1px solid var(--theme-border);
}

body.dark-mode .view-toggle-btn.active {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

body.dark-mode .view-toggle-btn:hover:not(.active) {
  background: var(--theme-bg-secondary);
  border-color: var(--theme-border-hover);
}
