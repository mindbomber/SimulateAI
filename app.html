<!--
Copyright 2025 Armando Sori

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#1a73e8" />
    <meta name="color-scheme" content="light dark" />
    <meta name="page-id" content="home" />
    <title>
      SimulateAI - AI Ethics Education Through Interactive Simulations
    </title>
    <meta
      name="description"
      content="Empower educators and learners to explore AI ethics, robotics, and emerging technologies through open-ended, consequence-driven simulations that mirror real-world scenarios"
    />
    <meta
      name="keywords"
      content="AI ethics education, robotics ethics, ISTE standards, interactive simulations, educator resources, PhET-inspired learning, consequence-driven education, open-ended exploration"
    />
    <meta name="author" content="SimulateAI Educational Platform" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="SimulateAI - AI Ethics Education Through Interactive Simulations"
    />
    <meta
      property="og:description"
      content="Empower educators and learners to explore AI ethics, robotics, and emerging technologies through open-ended, consequence-driven simulations that mirror real-world scenarios"
    />
    <meta property="og:url" content="https://www.SimulateAI.io" />

    <!-- Accessibility -->
    <meta
      name="accessibility-features"
      content="keyboard-navigation,skip-links,high-contrast,large-text,screen-reader-support"
    />

    <!-- Critical CSS - Inline for FOUC prevention -->
    <style>
      :root {
        --primary: #1a73e8;
        --bg: #ffffff;
        --text: #333333;
        --font: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        --header-h: 60px;
        --modal-z: 9999;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: var(--font);
        color: var(--text);
        background: var(--bg);
        margin: 0;
        line-height: 1.6;
        font-size: 16px;
      }
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: var(--modal-z);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }
      .modal-backdrop.visible {
        opacity: 1;
        pointer-events: auto;
      }
      .modal-dialog {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--bg);
        border-radius: 8px;
        max-width: 90vw;
        max-height: 90vh;
        width: 600px;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .header {
        height: var(--header-h);
        background: var(--bg);
        border-bottom: 1px solid #e5e7eb;
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 4px;
        background: var(--primary);
        color: white;
        text-decoration: none;
        cursor: pointer;
        transition: opacity 0.2s ease;
      }
      .btn:hover {
        opacity: 0.9;
      }
      input,
      select,
      textarea {
        font-family: inherit;
        font-size: inherit;
      }
      .sr-only {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        padding: 0 !important;
        margin: -1px !important;
        overflow: hidden !important;
        clip: rect(0, 0, 0, 0) !important;
        white-space: nowrap !important;
        border: 0 !important;
      }
      .loading {
        opacity: 0.7;
        pointer-events: none;
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0d1117;
          --text: #f0f6fc;
        }
      }
      body.dark-mode {
        --bg: #0d1117;
        --text: #f0f6fc;
      }
    </style>

    <!-- Styles - Optimized load order for CSS architecture -->
    <!-- 1. Design tokens foundation - MUST LOAD FIRST -->
    <link rel="stylesheet" href="src/styles/design-tokens.css" />

    <!-- 2. Media queries foundation -->
    <link rel="stylesheet" href="src/styles/media.css" />

    <!-- 3. Base styles -->
    <link rel="stylesheet" href="src/styles/main.css" />
    <link rel="stylesheet" href="src/styles/accessibility.css" />
    <link rel="stylesheet" href="src/styles/navigation-highlight-fix.css" />
    <link rel="stylesheet" href="src/styles/footer.css" />

    <!-- 4. Base component styles -->
    <link rel="stylesheet" href="src/styles/simulations.css" />
    <link rel="stylesheet" href="src/styles/layout-components.css" />

    <!-- 5. Advanced component systems -->
    <link rel="stylesheet" href="src/styles/advanced-ui-components.css" />
    <link rel="stylesheet" href="src/styles/enhanced-objects.css" />

    <!-- 6. Utility components -->
    <link rel="stylesheet" href="src/styles/input-utility-components.css" />
    <link rel="stylesheet" href="src/styles/form-input-components.css" />

    <!-- 7. UI utility components -->
    <link rel="stylesheet" href="src/styles/notification-toast.css" />
    <link rel="stylesheet" href="src/styles/onboarding-tour.css" />
    <link rel="stylesheet" href="src/styles/scenario-modal.css" />
    <link rel="stylesheet" href="src/styles/radar-chart.css" />
    <link rel="stylesheet" href="src/styles/session-settings.css" />
    <link rel="stylesheet" href="src/styles/profile-customization.css" />

    <link rel="stylesheet" href="src/styles/card-component.css" />
    <link rel="stylesheet" href="src/styles/loader-spinner.css" />

    <!-- 8. Page-specific and theme styles -->
    <link rel="stylesheet" href="src/styles/hero-demo.css" />
    <link rel="stylesheet" href="src/styles/bias-fairness.css" />
    <link rel="stylesheet" href="src/styles/category-grid.css" />

    <!-- 9. Layout fixes and overrides -->
    <link rel="stylesheet" href="src/styles/layout-fixes.css" />

    <!-- 10. Ethics Explorer overrides (moved before consolidated modal) -->
    <link rel="stylesheet" href="src/styles/ethics-explorer.css" />

    <!-- Badge System -->
    <link rel="stylesheet" href="src/styles/badge-modal.css" />

    <!-- Community Features -->
    <link rel="stylesheet" href="src/styles/community-features.css" />

    <!-- 11. Modal system - consolidated architecture (loaded LAST for highest specificity) -->
    <link
      rel="stylesheet"
      href="src/styles/simulation-modal-consolidated.css"
    />

    <!-- Shared Navigation Component -->
    <link rel="stylesheet" href="src/styles/shared-navigation.css" />

    <!-- Back to Top Component -->
    <link rel="stylesheet" href="src/styles/back-to-top.css" />

    <!-- Floating Action Tab Component -->
    <link rel="stylesheet" href="src/styles/floating-action-tab.css" />
    <link rel="stylesheet" href="src/styles/floating-surprise-tab.css" />
    <link rel="stylesheet" href="src/styles/floating-tour-tab.css" />

    <!-- Settings Menu Component -->
    <link rel="stylesheet" href="src/styles/settings-menu.css" />
    <link rel="stylesheet" href="src/styles/appearance-settings.css" />

    <!-- Icons and Favicons -->
    <link rel="icon" type="image/svg+xml" href="src/assets/icons/favicon.svg" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="SimulateAI" />
    <!-- Preload critical resources -->
    <link rel="preload" href="src/styles/main.css" as="style" />
    <link rel="preload" href="src/styles/accessibility.css" as="style" />
    <link rel="preload" href="src/js/app.js" as="script" crossorigin />

    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="//unpkg.com" />

    <!-- Resource hints -->
    <link rel="prefetch" href="src/js/core/engine.js" />
    <link rel="prefetch" href="src/js/core/accessibility.js" />
    <link rel="prefetch" href="src/js/core/animation-manager.js" />

    <!-- Immediate scroll reset to prevent page restoration scrolling -->
    <script>
      // Simple scroll restoration prevention
      if ("scrollRestoration" in history) {
        history.scrollRestoration = "manual";
      }

      // Force scroll to top immediately (synchronous)
      window.scrollTo(0, 0);
    </script>

    <!-- Inert polyfill for older browsers -->
    <script>
      // Check if inert is supported, if not load polyfill
      if (!("inert" in HTMLElement.prototype)) {
        const script = document.createElement("script");
        script.src = "https://unpkg.com/wicg-inert@3.1.2/dist/inert.min.js";
        document.head.appendChild(script);
      }
    </script>
  </head>
  <body>
    <!-- Skip to content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- ARIA live regions for announcements -->
    <div
      id="aria-live-polite"
      aria-live="polite"
      aria-atomic="true"
      class="sr-only"
    ></div>
    <div
      id="aria-live-assertive"
      aria-live="assertive"
      aria-atomic="true"
      class="sr-only"
    ></div>

    <!-- Status and notification area -->
    <div
      id="status-region"
      role="status"
      aria-live="polite"
      class="sr-only"
    ></div>

    <!-- Navigation will be injected here by SharedNavigation component -->

    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
      <!-- Hero Section -->
      <section class="hero container-responsive" id="home">
        <div class="hero-content">
          <h2 class="hero-title">Welcome to SimulateAI</h2>
          <p class="hero-description">
            Ready to explore ethical decision-making in AI? Choose from
            interactive simulations below that let you experience real-world
            scenarios, see the consequences of different choices, and discover
            how ethical frameworks apply to emerging technologies. Each
            simulation adapts to your decisions and provides insights into the
            complex balance between innovation and responsibility.
          </p>
          <div class="hero-actions">
            <button
              class="btn btn-primary touch-target"
              id="start-learning"
              aria-describedby="start-learning-description"
              title="Navigate to Ethics Categories section"
            >
              Start Exploring
            </button>
            <span id="start-learning-description" class="sr-only">
              Navigate to the Ethics Categories section to explore thematic
              categories of ethical dilemmas
            </span>
            <!-- Debug: Test scenario modal button -->
            <button id="test-scenario-modal">Test Scenario</button>
          </div>

          <!-- Support Research Donation Button -->
          <div class="support-research-section">
            <div id="homepage-donation-button"></div>
          </div>
        </div>

        <!-- Interactive Radar Chart Demo moved to hero -->
        <div class="hero-radar-demo">
          <h3>Interactive Ethics Radar Chart</h3>
          <p>
            Experience how ethical decisions affect multiple dimensions
            simultaneously. Click the buttons to see different decision
            patterns:
          </p>

          <div class="hero-demo-controls">
            <!-- Feedback popover positioned above controls -->
            <div id="hero-demo-feedback" class="demo-feedback-popover">
              <div class="popover-content"></div>
              <div class="popover-arrow"></div>
            </div>

            <div class="demo-controls-grid">
              <button
                class="demo-btn"
                data-pattern="utilitarian"
                onclick="simulateEthicsPattern('utilitarian', this)"
              >
                Utilitarian
              </button>
              <button
                class="demo-btn"
                data-pattern="deontological"
                onclick="simulateEthicsPattern('deontological', this)"
              >
                Rights-Based
              </button>
              <button
                class="demo-btn"
                data-pattern="virtue"
                onclick="simulateEthicsPattern('virtue', this)"
              >
                Virtue Ethics
              </button>
              <button
                class="demo-btn balanced-btn"
                data-pattern="balanced"
                onclick="simulateEthicsPattern('balanced', this)"
              >
                Balanced
              </button>
            </div>
          </div>

          <div id="hero-ethics-chart" class="radar-chart-wrapper"></div>

          <!-- Accordion for instructions -->
          <div class="radar-instructions-accordion">
            <div class="accordion-item">
              <div
                class="accordion-header"
                role="button"
                tabindex="0"
                aria-expanded="false"
                onclick="toggleRadarInstructions()"
              >
                <span class="accordion-icon">▶</span>
                <span class="accordion-title">💡 How to Read the Chart</span>
              </div>
              <div class="accordion-content collapsed">
                <div class="accordion-content-inner">
                  <p>
                    <strong>Hover over any point</strong> on the radar chart to
                    see detailed information about that ethical dimension. Each
                    point shows:
                  </p>
                  <ul>
                    <li>
                      <strong>Axis Name:</strong> The specific ethical principle
                      (e.g., Fairness, Sustainability)
                    </li>
                    <li>
                      <strong>Score Value:</strong> How strongly this approach
                      emphasizes that principle (1-5 scale)
                    </li>
                    <li>
                      <strong>Description:</strong> What this principle means
                      and why it matters
                    </li>
                    <li>
                      <strong>Impact Level:</strong> Whether the emphasis is
                      low, moderate, or high
                    </li>
                  </ul>
                  <p>
                    The <strong>shape and size</strong> of the radar pattern
                    shows the overall ethical "signature" of each approach. A
                    larger, more balanced shape indicates consideration of
                    multiple principles, while a smaller or skewed shape shows
                    focused emphasis on specific values.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Accordion for ethics glossary -->
          <div class="ethics-glossary-accordion">
            <div class="accordion-item">
              <div
                class="accordion-header"
                role="button"
                tabindex="0"
                aria-expanded="false"
                onclick="toggleEthicsGlossary()"
              >
                <span class="accordion-icon">▶</span>
                <span class="accordion-title"
                  >📚 Ethical Dimensions Glossary</span
                >
              </div>
              <div class="accordion-content collapsed">
                <div class="accordion-content-inner">
                  <div class="glossary-grid">
                    <div class="glossary-item">
                      <h4>Fairness</h4>
                      <p>
                        Treats all individuals and groups equitably, ensuring
                        unbiased and just outcomes for everyone involved.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Sustainability</h4>
                      <p>
                        Supports long-term ecological and social well-being,
                        considering environmental and societal impacts.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Autonomy</h4>
                      <p>
                        Respects individual control and self-determination,
                        preserving people's ability to make their own choices.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Beneficence</h4>
                      <p>
                        Promotes well-being and prevents harm, actively working
                        to benefit individuals and communities.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Transparency</h4>
                      <p>
                        Provides openness in decision-making processes, ensuring
                        clarity about how and why decisions are made.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Accountability</h4>
                      <p>
                        Ensures clear responsibility for decisions, with
                        mechanisms for oversight and consequences for actions.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Privacy</h4>
                      <p>
                        Protects personal information and data rights,
                        safeguarding individual confidentiality and control over
                        personal data.
                      </p>
                    </div>
                    <div class="glossary-item">
                      <h4>Proportionality</h4>
                      <p>
                        Balances benefits against severity of impact, ensuring
                        responses are appropriate to the situation's scale and
                        context.
                      </p>
                    </div>
                  </div>

                  <div class="glossary-note">
                    <p>
                      <strong>Remember:</strong> These dimensions often interact
                      and sometimes conflict with each other. Real ethical
                      decision-making involves thoughtfully balancing these
                      competing values based on context, stakeholder needs, and
                      long-term consequences.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Categories Grid -->
      <section class="categories-section container-responsive" id="categories">
        <div class="section-header">
          <h2 class="section-title">Ethics Categories</h2>
          <p class="section-description">
            Explore thematic categories of ethical dilemmas. Each category
            contains multiple scenarios that become interactive
            simulations—discover consequences, perspectives, and solutions
            through guided exploration.
          </p>

          <!-- View Toggle Controls -->
          <div
            class="view-toggle-controls"
            role="radiogroup"
            aria-label="Choose view type"
          >
            <button
              type="button"
              class="view-toggle-btn active touch-target"
              data-view="category"
              role="radio"
              aria-checked="true"
              aria-label="Category view - show scenarios grouped by category"
              title="Category view - show scenarios grouped by category"
            >
              <span class="toggle-icon">📂</span>
              <span class="toggle-text">Category View</span>
            </button>
            <button
              type="button"
              class="view-toggle-btn touch-target"
              data-view="scenario"
              role="radio"
              aria-checked="false"
              aria-label="Scenario view - show all scenarios as individual cards"
              title="Scenario view - show all scenarios as individual cards"
            >
              <span class="toggle-icon">🎯</span>
              <span class="toggle-text">Scenario View</span>
            </button>
            <div class="keyboard-hint" title="Press 'V' key to toggle views">
              <span class="hint-text">Press <kbd>V</kbd> to toggle</span>
            </div>
          </div>
        </div>

        <!-- Category Grid View (current) -->
        <div
          class="categories-grid view-content active"
          data-view="category"
          role="grid"
          aria-label="Available ethics categories"
        >
          <!-- Category cards will be dynamically generated -->
        </div>

        <!-- Scenario Grid View (new) -->
        <div
          class="scenarios-grid view-content"
          data-view="scenario"
          role="grid"
          aria-label="All available scenarios"
          style="display: none"
        >
          <!-- Scenario Controls Toolbar -->
          <div
            class="scenario-controls-toolbar"
            role="toolbar"
            aria-label="Scenario filtering and search controls"
          >
            <!-- Search -->
            <div class="search-container">
              <div class="search-input-wrapper">
                <svg
                  class="search-icon"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
                    clip-rule="evenodd"
                  />
                </svg>
                <input
                  type="search"
                  class="search-input"
                  placeholder="Search scenarios, titles, and tags..."
                  aria-label="Search scenarios by title, description, or tags"
                  autocomplete="off"
                  spellcheck="false"
                  aria-expanded="false"
                  aria-haspopup="listbox"
                  role="combobox"
                />
                <button
                  type="button"
                  class="search-clear"
                  aria-label="Clear search"
                  style="display: none"
                >
                  <svg
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"
                    />
                  </svg>
                </button>

                <!-- Autocomplete Dropdown -->
                <div
                  class="search-autocomplete-dropdown"
                  role="listbox"
                  aria-label="Search suggestions"
                  style="display: none"
                >
                  <div class="autocomplete-section">
                    <div class="autocomplete-section-header">Scenarios</div>
                    <div class="autocomplete-scenarios"></div>
                  </div>
                  <div class="autocomplete-section">
                    <div class="autocomplete-section-header">Tags</div>
                    <div class="autocomplete-tags"></div>
                  </div>
                  <div class="autocomplete-no-results" style="display: none">
                    <div class="no-results-text">No matches found</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Filters and Sort -->
            <div class="controls-group">
              <!-- Category Filter -->
              <div class="filter-container">
                <button
                  type="button"
                  class="filter-btn"
                  aria-label="Filter by category"
                  aria-expanded="false"
                  aria-haspopup="listbox"
                >
                  <svg
                    class="filter-icon"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span class="filter-text">All Categories</span>
                  <svg
                    class="chevron-icon"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
                <div
                  class="filter-dropdown"
                  role="listbox"
                  aria-label="Select category filter"
                >
                  <button
                    type="button"
                    class="filter-option active"
                    data-category="all"
                    role="option"
                    aria-selected="true"
                  >
                    <span class="option-text">All Categories</span>
                    <svg
                      class="check-icon"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </button>
                  <!-- Category options will be dynamically populated -->
                </div>
              </div>

              <!-- Sort -->
              <div class="sort-container">
                <button
                  type="button"
                  class="sort-btn"
                  aria-label="Sort scenarios"
                  aria-expanded="false"
                  aria-haspopup="listbox"
                >
                  <svg
                    class="sort-icon"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span class="sort-text">Alphabetical</span>
                  <svg
                    class="chevron-icon"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
                <div
                  class="sort-dropdown"
                  role="listbox"
                  aria-label="Select sorting method"
                >
                  <button
                    type="button"
                    class="sort-option active"
                    data-sort="alphabetical"
                    role="option"
                    aria-selected="true"
                  >
                    <span class="option-text">Alphabetical</span>
                    <svg
                      class="check-icon"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </button>
                  <button
                    type="button"
                    class="sort-option"
                    data-sort="category"
                    role="option"
                    aria-selected="false"
                  >
                    <span class="option-text">By Category</span>
                    <svg
                      class="check-icon"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </button>
                  <button
                    type="button"
                    class="sort-option"
                    data-sort="difficulty"
                    role="option"
                    aria-selected="false"
                  >
                    <span class="option-text">By Difficulty</span>
                    <svg
                      class="check-icon"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </button>
                  <button
                    type="button"
                    class="sort-option"
                    data-sort="newest"
                    role="option"
                    aria-selected="false"
                  >
                    <span class="option-text">Newest First</span>
                    <svg
                      class="check-icon"
                      viewBox="0 0 20 20"
                      fill="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Scenario count will be displayed here -->
          <div class="scenario-count" style="display: none">
            <p class="count-text">
              Showing <span class="count-number">0</span> scenarios
            </p>
          </div>
          <!-- Individual scenario cards will be dynamically generated -->
        </div>
      </section>

      <!-- Donor Appreciation Section -->
      <section
        class="donor-appreciation-section container-responsive"
        id="donor-appreciation"
      >
        <div class="section-header">
          <h2 class="section-title">🙏 Thank You to Our Contributors</h2>
          <p class="section-description">
            Your support makes ethical AI education accessible to everyone
          </p>
        </div>

        <!-- Donor Wall -->
        <div class="donor-wall-container">
          <div class="donor-wall-header">
            <h3 class="donor-wall-title">Our Amazing Community</h3>
            <p class="donor-wall-subtitle">
              Every contribution, big or small, helps us democratize ethical AI
              education and reach learners worldwide. Meet the incredible people
              who believe in our mission and make this work possible.
            </p>

            <!-- Donor Wall Filters -->
            <div
              class="donor-wall-filters"
              role="tablist"
              aria-label="Donor display filters"
            >
              <button
                class="filter-btn active"
                data-filter="recent"
                role="tab"
                aria-selected="true"
                aria-controls="donor-carousel"
              >
                Most Recent
              </button>
              <button
                class="filter-btn"
                data-filter="top"
                role="tab"
                aria-selected="false"
                aria-controls="donor-carousel"
              >
                Top Contributors
              </button>
              <button
                class="filter-btn"
                data-filter="messages"
                role="tab"
                aria-selected="false"
                aria-controls="donor-carousel"
              >
                With Messages
              </button>
            </div>
          </div>

          <!-- Donor Carousel -->
          <div
            class="donor-carousel-container"
            id="donor-carousel"
            role="tabpanel"
          >
            <div class="donor-carousel">
              <button
                class="carousel-nav carousel-prev"
                aria-label="Previous donors"
                disabled
              >
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
              </button>

              <div class="donor-cards-track">
                <div class="donor-cards-container">
                  <!-- Donor cards will be dynamically populated here -->

                  <!-- Example donor card structure (will be generated by JS) -->
                  <div class="donor-card" data-visibility="username">
                    <div class="donor-avatar">
                      <img
                        src="src/assets/avatars/default-avatar.svg"
                        alt="Donor avatar"
                      />
                      <div
                        class="donor-badge gold-tier"
                        aria-label="Gold tier contributor"
                      ></div>
                    </div>
                    <div class="donor-info">
                      <h4 class="donor-name">Alex Chen</h4>
                      <p class="donor-since">Supporting since Nov 2024</p>
                      <div class="donor-reflection">
                        <p>
                          "Ethical AI education is the foundation of our digital
                          future."
                        </p>
                      </div>
                    </div>
                  </div>

                  <!-- Anonymous donor card example -->
                  <div class="donor-card" data-visibility="anonymous">
                    <div class="donor-avatar">
                      <div
                        class="anonymous-avatar"
                        aria-label="Anonymous contributor"
                      ></div>
                      <div
                        class="donor-badge silver-tier"
                        aria-label="Silver tier contributor"
                      ></div>
                    </div>
                    <div class="donor-info">
                      <h4 class="donor-name">Anonymous Supporter</h4>
                      <p class="donor-since">Recent contributor</p>
                    </div>
                  </div>
                </div>
              </div>

              <button
                class="carousel-nav carousel-next"
                aria-label="Next donors"
              >
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z" />
                </svg>
              </button>
            </div>

            <!-- Carousel Indicators -->
            <div
              class="carousel-indicators"
              role="tablist"
              aria-label="Donor page indicators"
            >
              <button
                class="indicator active"
                data-slide="0"
                role="tab"
                aria-selected="true"
                aria-label="Page 1"
              ></button>
              <button
                class="indicator"
                data-slide="1"
                role="tab"
                aria-selected="false"
                aria-label="Page 2"
              ></button>
              <button
                class="indicator"
                data-slide="2"
                role="tab"
                aria-selected="false"
                aria-label="Page 3"
              ></button>
            </div>
          </div>

          <!-- Donor Stats Summary -->
          <div class="donor-stats-summary">
            <div class="stat-item">
              <span class="stat-number" data-stat="total-donors">127</span>
              <span class="stat-label">Contributors</span>
            </div>
            <div class="stat-item">
              <span class="stat-number" data-stat="this-month">23</span>
              <span class="stat-label">This Month</span>
            </div>
            <div class="stat-item">
              <span class="stat-number" data-stat="countries">12</span>
              <span class="stat-label">Countries</span>
            </div>
          </div>
        </div>

        <!-- Support CTA -->
        <div class="support-cta">
          <h3>Join Our Mission</h3>
          <p>
            Ready to support ethical AI education? Even a small contribution of
            $5 demonstrates your commitment to building a more ethical future
            with artificial intelligence.
          </p>
          <div class="cta-buttons">
            <a href="donate.html" class="btn btn-primary"
              >💖 Support Our Mission</a
            >
            <a href="about.html" class="btn btn-outline">Learn More About Us</a>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer will be inserted by professional-footer.js -->
    <div id="footer-placeholder"></div>

    <!-- Simulation Modal - Updated to use advanced-ui-components.css modal system -->
    <div
      id="simulation-modal"
      class="modal-backdrop"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      aria-labelledby="modal-title"
      inert
    >
      <div class="modal-dialog">
        <div class="modal-header">
          <h2 id="modal-title" class="modal-title"></h2>
          <button
            class="modal-close"
            aria-label="Close simulation"
            type="button"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div
            id="simulation-container"
            class="simulation-container"
            role="main"
            aria-label="Interactive simulation"
          >
            <!-- Active simulation will be loaded here -->
          </div>

          <div
            class="simulation-controls"
            role="complementary"
            aria-label="Simulation controls and metrics"
          >
            <div class="ethics-meters">
              <!-- Enhanced ethics meters with visual engine will be loaded here -->
              <div class="ethics-meters-header">
                <h3>Ethics Monitoring</h3>
                <p>
                  Track how your decisions affect different ethical dimensions
                </p>
              </div>
              <div
                class="meters-container"
                role="group"
                aria-label="Ethics meters"
              >
                <!-- Enhanced meters will be dynamically created here -->
              </div>
            </div>

            <div class="simulation-actions">
              <div class="actions-header">
                <h3>Simulation Controls</h3>
              </div>
              <div
                class="actions-container"
                role="group"
                aria-label="Simulation action buttons"
              >
                <!-- Enhanced interactive buttons will be created here -->
                <button
                  class="btn btn-secondary"
                  id="reset-simulation"
                  style="display: none"
                  type="button"
                >
                  <span class="btn-text">Reset</span>
                  <span class="btn-description sr-only"
                    >Reset the current simulation to start over</span
                  >
                </button>
                <button
                  class="btn btn-primary"
                  id="next-scenario"
                  style="display: none"
                  type="button"
                >
                  <span class="btn-text">Next Scenario</span>
                  <span class="btn-description sr-only"
                    >Continue to the next scenario</span
                  >
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Loading indicator -->
    <div id="loading" class="loading" aria-hidden="true" role="status">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p class="loading-text">Loading simulation...</p>
      <div
        class="loading-progress"
        role="progressbar"
        aria-label="Loading progress"
        aria-valuenow="0"
        aria-valuemin="0"
        aria-valuemax="100"
      >
        <div class="progress-bar"></div>
      </div>
    </div>

    <!-- Error boundary -->
    <div
      id="error-boundary"
      class="error-boundary"
      role="alert"
      aria-hidden="true"
    >
      <div class="error-content">
        <h2>Something went wrong</h2>
        <p class="error-message"></p>
        <div class="error-actions">
          <button class="btn btn-primary" id="retry-action" type="button">
            Try Again
          </button>
          <button class="btn btn-secondary" id="report-error" type="button">
            Report Issue
          </button>
        </div>
      </div>
    </div>

    <!-- Firebase SDK Scripts -->
    <!-- Note: Firebase SDK is imported via ES modules in firebase-service.js -->

    <!-- Scripts -->
    <script type="module" src="src/js/services/firebase-service.js"></script>
    <script
      type="module"
      src="src/js/components/notification-toast.js"
    ></script>
    <script type="module" src="src/js/components/modal-utility.js"></script>

    <!-- JSON SSOT Configuration System - Initialize before app.js -->
    <script type="module" src="src/js/app-startup.js"></script>

    <script type="module" src="src/js/app.js"></script>
    <script type="module" src="src/js/utils/env-config.js"></script>
    <script
      type="module"
      src="src/js/components/enhanced-donation-widget.js"
    ></script>
    <script
      type="module"
      src="src/js/components/donor-flair-display.js"
    ></script>
    <link rel="stylesheet" href="src/styles/enhanced-donation-widget.css" />
    <link rel="stylesheet" href="src/styles/donor-flair-display.css" />

    <!-- Professional Donor Wall -->
    <link rel="stylesheet" href="src/styles/donor-wall.css" />

    <script type="module">
      // Initialize enhanced donation widget and donor flair after DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        if (window.EnhancedDonationWidget) {
          window.EnhancedDonationWidget.init("homepage-donation-button", {
            title: "💖 Support SimulateAI Research",
            subtitle:
              "Help us continue developing open-source AI ethics education resources",
            style: "accordion",
            showBenefits: true,
          });
        }

        // Initialize donor appreciation section
        if (window.DonorFlairDisplay) {
          const flairDisplay = new window.DonorFlairDisplay();

          // Sample donors for demonstration - in production this would come from your backend
          const sampleDonors = [
            {
              displayName: "Alex Chen",
              flair: "gold",
              supportSince: "2024-11-01",
            },
            {
              displayName: "Dr. Sarah Williams",
              flair: "silver",
              supportSince: "2024-12-15",
            },
            {
              displayName: "Mike Rodriguez",
              flair: "bronze",
              supportSince: "2025-01-03",
            },
            {
              displayName: "Emma Thompson",
              flair: "silver",
              supportSince: "2024-10-20",
            },
            {
              displayName: "David Kim",
              flair: "bronze",
              supportSince: "2025-01-10",
            },
          ];

          flairDisplay.createDonorAppreciationSection(
            "#donor-appreciation-container",
            sampleDonors,
          );
        }
      });
    </script>

    <!-- Donation Preferences Component -->
    <script src="src/js/components/donation-preferences.js"></script>

    <!-- Chart.js library for radar charts - UMD version -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <!-- Chart.js loaded successfully - debug logs removed for cleaner console output -->

    <script type="module" src="src/js/components/card-component.js"></script>
    <script type="module" src="src/js/components/loader-spinner.js"></script>
    <script
      type="module"
      src="src/js/components/form-input-components.js"
    ></script>
    <script
      type="module"
      src="src/js/components/modal-footer-manager.js"
    ></script>
    <script type="module" src="src/js/components/main-grid.js"></script>

    <!-- Performance monitoring -->
    <script>
      // Enhanced performance monitoring for our modernized engine
      if ("performance" in window && "mark" in performance) {
        performance.mark("page-start");

        window.addEventListener("load", () => {
          performance.mark("page-loaded");
          performance.measure("page-load-time", "page-start", "page-loaded");

          // Report to our analytics system
          const measure = performance.getEntriesByName("page-load-time")[0];
          if (measure && window.SimpleAnalytics) {
            window.SimpleAnalytics.trackPerformance(
              "page-load",
              measure.duration,
            );
          }
        });
      }

      // Enhanced error handling
      window.addEventListener("error", (event) => {
        // Log error for debugging (console allowed in HTML for error handling)
        if (window.ErrorBoundary) {
          window.ErrorBoundary.handleError(event.error);
        }
      });

      window.addEventListener("unhandledrejection", (event) => {
        // Log promise rejection for debugging (console allowed in HTML for error handling)
        if (window.ErrorBoundary) {
          window.ErrorBoundary.handleError(event.reason);
        }
      });
    </script>

    <!-- Include shared navigation component -->
    <script type="module" src="src/js/components/shared-navigation.js"></script>

    <!-- Back to Top Component -->
    <script type="module" src="src/js/components/back-to-top.js"></script>

    <!-- Settings Manager Component -->
    <script type="module" src="src/js/components/settings-manager.js"></script>

    <!-- Donation Tracker Utility -->
    <script type="module" src="src/js/utils/donation-tracker.js"></script>

    <!-- Floating Action Tab Component -->
    <script
      type="module"
      src="src/js/components/floating-action-tab.js"
    ></script>

    <!-- Floating Surprise Tab Component -->
    <script
      type="module"
      src="src/js/components/floating-surprise-tab.js"
    ></script>
    <script type="module" src="src/js/components/floating-tour-tab.js"></script>

    <!-- Include donor appreciation component -->
    <script
      type="module"
      src="src/js/components/donor-appreciation.js"
    ></script>

    <!-- Professional Donor Wall Component -->
    <script
      type="module"
      src="src/js/components/professional-donor-wall.js"
    ></script>

    <!-- Professional Footer Component -->
    <script
      type="module"
      src="src/js/components/professional-footer.js"
    ></script>
  </body>
</html>
