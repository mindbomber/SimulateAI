<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#667eea" />
    <meta name="color-scheme" content="light" />

    <!-- Base URL for custom domain - will be removed for localhost -->
    <base href="/" id="custom-domain-base" />

    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="SimulateAI" />
    <meta name="msapplication-TileColor" content="#667eea" />
    <meta name="msapplication-config" content="./browserconfig.xml" />

    <title>
      SimulateAI - AI Ethics Education Through Interactive Simulations
    </title>
    <meta
      name="description"
      content="Experience the future of ethical AI education through immersive, consequence-driven simulations. Join educators, students, and researchers in exploring AI ethics."
    />
    <meta
      name="keywords"
      content="AI ethics education, interactive simulations, ethical AI, research study, ISTE standards, digital citizenship"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4SVB78MBHN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4SVB78MBHN");
    </script>
    <meta name="author" content="SimulateAI Educational Platform" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="SimulateAI - AI Ethics Education Through Interactive Simulations"
    />
    <meta
      property="og:description"
      content="Experience the future of ethical AI education through immersive, consequence-driven simulations."
    />
    <meta property="og:url" content="https://simulateai.io/" />
    <meta
      property="og:image"
      content="https://simulateai.io/src/assets/images/og-image.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="SimulateAI" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@SimulateAI" />
    <meta name="twitter:creator" content="@SimulateAI" />
    <meta
      name="twitter:title"
      content="SimulateAI - AI Ethics Education Platform"
    />
    <meta
      name="twitter:description"
      content="Interactive simulations for ethical AI education and research"
    />
    <meta
      name="twitter:image"
      content="https://simulateai.io/src/assets/images/twitter-card.jpg"
    />

    <!-- Additional SEO Meta Tags -->
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />
    <meta name="googlebot" content="index, follow" />
    <link rel="canonical" href="https://simulateai.io/" />

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link rel="icon" type="image/svg+xml" href="src/assets/icons/favicon.svg" />
    <link rel="manifest" href="/manifest.json" />

    <!-- Structured Data - Organization -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "SimulateAI",
        "url": "https://simulateai.io/",
        "logo": "https://simulateai.io/src/assets/icons/favicon.svg",
        "description": "Educational platform providing AI ethics education through interactive simulations",
        "foundingDate": "2024",
        "sameAs": ["https://github.com/mindbomber/SimulateAI"],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "Research",
          "email": "research@simulateai.io"
        }
      }
    </script>

    <!-- Structured Data - WebSite -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "SimulateAI",
        "url": "https://simulateai.io/",
        "description": "AI Ethics Education Through Interactive Simulations",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://simulateai.io/blog.html?search={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <!-- Structured Data - Educational Organization -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "EducationalOrganization",
        "name": "SimulateAI",
        "url": "https://simulateai.io/",
        "description": "Platform for AI ethics education through interactive simulations and research",
        "educationalCredentialAwarded": "Digital Citizenship and AI Ethics Certification",
        "hasCredential": {
          "@type": "EducationalOccupationalCredential",
          "name": "AI Ethics Simulation Completion"
        }
      }
    </script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
          Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        min-height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        opacity: 0.3;
      }

      /* Floating Emojis Animation */
      .floating-emojis {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
        transform: translateZ(
          0
        ); /* Force hardware acceleration for container */
      }

      .floating-emoji {
        position: absolute;
        font-size: 2rem;
        opacity: 0;
        animation: float-up-unique 20s linear forwards;
        pointer-events: none;
        will-change: transform, opacity;
        transform: translateZ(0) scale(var(--scale-variation, 1))
          rotate(var(--start-rotation, 0deg));
        backface-visibility: hidden;
        animation-fill-mode: forwards;
      }

      /* Size variations for bubbling effect */
      .floating-emoji.tiny {
        font-size: 1rem;
      }

      .floating-emoji.small {
        font-size: 1.4rem;
      }

      .floating-emoji.medium {
        font-size: 2rem;
      }

      .floating-emoji.large {
        font-size: 2.8rem;
      }

      .floating-emoji.big {
        font-size: 3.2rem;
      }

      @keyframes float-up-unique {
        0% {
          transform: translateY(100vh) translateX(var(--drift-x, 0px))
            rotate(var(--start-rotation, 0deg)) scale(var(--scale-variation, 1));
          opacity: 0;
        }
        10% {
          opacity: var(--max-opacity, 0.8);
        }
        90% {
          opacity: var(--max-opacity, 0.8);
        }
        100% {
          transform: translateY(-10vh)
            translateX(
              calc(var(--drift-x, 0px) + var(--wiggle-intensity, 20px))
            )
            rotate(
              calc(
                var(--start-rotation, 0deg) + var(--rotation-direction, 360deg)
              )
            )
            scale(calc(var(--scale-variation, 1) * 0.8));
          opacity: 0;
        }
      }

      .hero-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        text-align: center;
        position: relative;
        z-index: 1;
      }

      .hero-logo-container {
        margin-bottom: 2rem;
        animation: fadeInUp 1s ease-out;
        position: relative;
        width: 100%;
        height: auto;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px 0;
      }

      .hero-logo {
        width: auto;
        height: clamp(80px, 12vw, 140px);
        max-width: 600px;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        display: block;
      }

      .hero h1 {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 700;
        margin-bottom: 1.5rem;
        animation: fadeInUp 1s ease-out;
      }

      .hero-subtitle {
        font-size: clamp(1.1rem, 2.5vw, 1.5rem);
        margin-bottom: 3rem;
        opacity: 0.95;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        animation: fadeInUp 1s ease-out 0.3s both;
      }

      .hero-actions {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        animation: fadeInUp 1s ease-out 0.6s both;
      }

      .cta-button {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        padding: 18px 32px;
        font-size: 18px;
        font-weight: 600;
        text-decoration: none;
        border-radius: 12px;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .cta-primary {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        color: white;
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
      }

      .cta-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
      }

      .cta-secondary {
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
      }

      .cta-secondary:hover {
        background: rgba(255, 255, 255, 0.25);
        transform: translateY(-2px);
      }

      /* Main Content Sections */
      .section {
        padding: 80px 20px;
        max-width: 1200px;
        margin: 0 auto;
        width: 100%;
        box-sizing: border-box;
      }

      .section h2 {
        font-size: clamp(2rem, 4vw, 2.5rem);
        color: #1a73e8;
        margin-bottom: 2rem;
        text-align: center;
      }

      .section-intro {
        background: #f8f9fa;
        border-radius: 20px;
        padding: 60px 40px;
        margin: 40px 0;
        width: 100%;
        box-sizing: border-box;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin: 40px 0;
      }

      .feature-card {
        background: white;
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
        border: 1px solid #e0e0e0;
      }

      .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .feature-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        display: block;
      }

      .feature-card h3 {
        color: #333;
        margin-bottom: 1rem;
        font-size: 1.3rem;
      }

      .feature-card p {
        color: #666;
        line-height: 1.6;
      }

      .how-it-works {
        background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
        border-radius: 20px;
        padding: 60px 40px;
        margin: 60px 0;
      }

      .steps-list {
        list-style: none;
        counter-reset: step-counter;
      }

      .steps-list li {
        counter-increment: step-counter;
        margin-bottom: 25px;
        padding: 20px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        position: relative;
        padding-left: 80px;
      }

      .steps-list li::before {
        content: counter(step-counter);
        position: absolute;
        left: 25px;
        top: 50%;
        transform: translateY(-50%);
        background: linear-gradient(135deg, #1a73e8, #4285f4);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 18px;
      }

      .research-highlight {
        background: linear-gradient(135deg, #f3e5f5 0%, #fce4ec 100%);
        border: 2px solid #9c27b0;
        border-radius: 20px;
        padding: 50px 40px;
        margin: 60px 0;
        text-align: center;
      }

      .research-highlight h2 {
        color: #7b1fa2;
        margin-bottom: 1.5rem;
      }

      .research-benefits {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .benefit-item {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(156, 39, 176, 0.1);
      }

      .audience-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin: 40px 0;
      }

      .audience-card {
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        padding: 30px;
        border-radius: 16px;
        text-align: center;
        border: 2px solid #4caf50;
      }

      .audience-card .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .audience-card h3 {
        color: #2e7d32;
        margin-bottom: 1rem;
      }

      .privacy-section {
        background: linear-gradient(135deg, #e8f0fe 0%, #f3e5f5 100%);
        border: 2px solid #1976d2;
        border-radius: 20px;
        padding: 50px 40px;
        margin: 60px 0;
      }

      .privacy-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .privacy-item {
        background: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(25, 118, 210, 0.1);
      }

      .privacy-item .checkmark {
        color: #4caf50;
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .community-section {
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        border-radius: 20px;
        padding: 50px 40px;
        margin: 60px 0;
        text-align: center;
      }

      .community-actions {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 30px;
      }

      .community-button {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 15px 25px;
        background: white;
        color: #1a73e8;
        text-decoration: none;
        border-radius: 10px;
        font-weight: 600;
        border: 2px solid #1a73e8;
        transition: all 0.3s ease;
      }

      .community-button:hover {
        background: #1a73e8;
        color: white;
        transform: translateY(-2px);
      }

      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }

      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .hero-content {
          padding: 0 15px;
          max-width: 100%;
          width: 100%;
        }

        .hero-logo-container {
          padding: 25px 0 15px 0;
          margin-top: 20px;
        }

        .hero-actions {
          flex-direction: column;
          align-items: center;
        }

        .cta-button {
          width: 100%;
          max-width: 300px;
          text-align: center;
        }

        .section {
          padding: 60px 15px;
          max-width: 100%;
        }

        .section-intro,
        .how-it-works,
        .research-highlight,
        .privacy-section,
        .community-section {
          padding: 40px 20px;
          margin: 40px 0;
          border-radius: 15px;
        }

        .features-grid {
          grid-template-columns: 1fr;
          gap: 20px;
          margin: 30px 0;
        }

        .audience-grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .research-benefits,
        .privacy-features {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .steps-list li {
          padding-left: 60px;
          padding-right: 15px;
        }

        .steps-list li::before {
          left: 15px;
          width: 35px;
          height: 35px;
          font-size: 16px;
        }
      }

      @media (max-width: 1024px) {
        .footer-main {
          grid-template-columns: 1fr;
          gap: 40px;
        }

        .footer-sections {
          grid-template-columns: repeat(2, 1fr);
          gap: 30px;
        }

        .footer-bottom-content {
          grid-template-columns: 1fr;
          gap: 25px;
          text-align: center;
        }

        .brand-stats {
          justify-content: center;
        }
      }

      /* Tablet Responsiveness */
      @media (max-width: 1024px) and (min-width: 769px) {
        .hero-content {
          max-width: 100%;
          padding: 0 30px;
        }

        .section {
          padding: 70px 30px;
        }

        .section-intro,
        .how-it-works,
        .research-highlight,
        .privacy-section,
        .community-section {
          padding: 50px 30px;
        }

        .features-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 25px;
        }

        .audience-grid {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
        }
      }

      @media (max-width: 480px) {
        .hero-content {
          padding: 0 10px;
          width: 100%;
        }

        .hero-logo-container {
          padding: 30px 0 20px 0;
          margin-top: 25px;
        }

        .hero-logo {
          height: clamp(60px, 15vw, 100px);
          padding-top: 10px;
        }

        .hero-subtitle {
          font-size: clamp(1rem, 4vw, 1.2rem);
          margin-bottom: 2rem;
          padding: 0 5px;
        }

        .section {
          padding: 40px 10px;
        }

        .section h2 {
          font-size: clamp(1.5rem, 6vw, 2rem);
          padding: 0 5px;
        }

        .section-intro,
        .how-it-works,
        .research-highlight,
        .privacy-section,
        .community-section {
          padding: 30px 15px;
          margin: 30px 0;
          border-radius: 12px;
        }

        .feature-card,
        .audience-card,
        .benefit-item,
        .privacy-item {
          padding: 20px 15px;
          margin: 0;
        }

        .steps-list li {
          padding: 15px 15px 15px 50px;
          font-size: 0.9rem;
        }

        .steps-list li::before {
          left: 10px;
          width: 30px;
          height: 30px;
          font-size: 14px;
        }

        .community-actions {
          flex-direction: column;
          gap: 15px;
        }

        .community-button {
          width: 100%;
          max-width: 280px;
          padding: 12px 20px;
        }

        .cta-button {
          padding: 15px 25px;
          font-size: 16px;
        }

        .footer-wave {
          height: 30px;
          top: -30px;
        }

        .brand-logo {
          justify-content: center;
          text-align: center;
        }

        .footer-brand {
          text-align: center;
        }

        .social-links a {
          padding: 6px 10px;
          font-size: 0.85rem;
        }

        .brand-stats {
          flex-direction: column;
          gap: 10px;
        }
      }

      /* High contrast mode */
      @media (prefers-contrast: high) {
        .feature-card,
        .benefit-item,
        .privacy-item {
          border: 2px solid #333;
        }

        .professional-footer {
          background: #000;
          border-top: 2px solid #fff;
        }

        .section-title {
          border-bottom-color: #fff;
        }

        .section-links a:hover {
          background: rgba(255, 255, 255, 0.1);
        }
      }

      /* Water Droplet Portal Transition */
      .ripple-portal {
        position: fixed;
        top: var(--click-y, 50%);
        left: var(--click-x, 50%);
        transform: translate(-50%, -50%) scale(0);
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(26, 115, 232, 0.8) 0%,
          rgba(102, 126, 234, 0.6) 30%,
          rgba(118, 75, 162, 0.4) 60%,
          transparent 100%
        );
        filter: blur(2px);
        z-index: 10000;
        pointer-events: none;
        animation: rippleExpand 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        box-shadow:
          0 0 20px rgba(26, 115, 232, 0.3),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
      }

      .ripple-portal::before {
        content: "";
        position: absolute;
        top: 10%;
        left: 10%;
        right: 10%;
        bottom: 10%;
        border-radius: 50%;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 255, 255, 0.8) 0%,
          rgba(255, 255, 255, 0.2) 40%,
          transparent 70%
        );
        animation: shimmer 1.2s ease-out forwards;
      }

      .ripple-portal::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.3);
        animation: rippleBorder 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      @keyframes rippleExpand {
        0% {
          transform: translate(-50%, -50%) scale(0);
          opacity: 0;
          filter: blur(2px);
        }
        10% {
          opacity: 1;
          filter: blur(1px);
        }
        50% {
          filter: blur(0px);
        }
        100% {
          transform: translate(-50%, -50%) scale(25);
          opacity: 0;
          filter: blur(4px);
        }
      }

      @keyframes shimmer {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        30% {
          opacity: 1;
          transform: scale(1);
        }
        70% {
          opacity: 0.8;
          transform: scale(1.2);
        }
        100% {
          opacity: 0;
          transform: scale(2);
        }
      }

      @keyframes rippleBorder {
        0% {
          border-width: 2px;
          opacity: 1;
        }
        50% {
          border-width: 1px;
          opacity: 0.6;
        }
        100% {
          border-width: 0px;
          opacity: 0;
        }
      }

      /* Screen distortion overlay */
      .screen-distortion {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: radial-gradient(
          circle at var(--click-x, 50%) var(--click-y, 50%),
          rgba(26, 115, 232, 0.1) 0%,
          rgba(102, 126, 234, 0.05) 30%,
          transparent 70%
        );
        z-index: 9999;
        pointer-events: none;
        opacity: 0;
        animation: distortionWave 1.2s ease-out forwards;
      }

      @keyframes distortionWave {
        0% {
          opacity: 0;
          filter: blur(0px);
        }
        20% {
          opacity: 0.3;
          filter: blur(1px);
        }
        60% {
          opacity: 0.6;
          filter: blur(2px);
        }
        100% {
          opacity: 0;
          filter: blur(0px);
        }
      }

      /* Portal loading effect */
      .portal-loading {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10001;
        pointer-events: none;
        opacity: 0;
      }

      .portal-loading.active {
        opacity: 1;
        animation: portalPulse 0.8s ease-in-out infinite;
      }

      @keyframes portalPulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.8;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.1);
          opacity: 1;
        }
      }

      /* Enhanced button hover for portal effect */
      .cta-primary {
        position: relative;
        overflow: hidden;
      }

      .cta-primary::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.3) 0%,
          transparent 70%
        );
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.3s ease;
        pointer-events: none;
      }

      .cta-primary:hover::before {
        width: 200px;
        height: 200px;
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .cta-button,
        .feature-card,
        .fade-in {
          transition: none;
        }

        .hero h1,
        .hero-subtitle,
        .hero-actions {
          animation: none;
        }

        .floating-emoji {
          display: none;
        }

        .floating-emojis {
          display: none;
        }

        .section-links a,
        .social-links a {
          transition: none;
        }

        .section-links a:hover {
          transform: none;
        }

        .social-links a:hover {
          transform: none;
        }
      }
    </style>

    <!-- PWA Manifest and Icons -->
    <link rel="manifest" href="./manifest.json" />

    <!-- Favicons and App Icons -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="./src/assets/icons/favicon.svg"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="./src/assets/icons/favicon.svg"
    />
    <link
      rel="apple-touch-icon"
      href="./src/assets/icons/Square Icon_192_x_192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="512x512"
      href="./src/assets/icons/Square Icon_512_x_512.png"
    />

    <!-- Windows Tiles -->
    <meta
      name="msapplication-TileImage"
      content="./src/assets/icons/Square Icon_512_x_512.png"
    />

    <!-- Preload critical resources -->
    <!-- Preload only index init (no app bundle to avoid CSS overrides) -->
    <link rel="preload" href="./src/js/index-init.js" as="script" crossorigin />

    <!-- Load CSS Files -->
    <link rel="stylesheet" href="./src/styles/shared-navigation.css" />
    <link rel="stylesheet" href="./src/styles/settings-menu.css" />
    <link rel="stylesheet" href="./src/styles/badge-modal.css" />

    <!-- Early theme initialization - Apply theme immediately to prevent FOUC -->
    <script src="./src/js/utils/early-theme-init.js"></script>

    <!-- Google reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js"></script>
  </head>
  <body>
    <!-- Hero Section -->
    <section class="hero">
      <!-- Floating Emojis Background -->
      <div class="floating-emojis" id="floatingEmojis"></div>

      <div class="hero-content">
        <div class="hero-logo-container">
          <img
            src="src/assets/icons/wordmark-dark-centered.svg"
            alt="SimulateAI"
            class="hero-logo"
          />
        </div>
        <p class="hero-subtitle">
          Experience the future of ethical AI education through immersive,
          consequence-driven simulations that prepare learners for real-world
          ethical challenges.
        </p>
        <div class="hero-actions">
          <a href="#" class="cta-button cta-primary" id="beginSimulationBtn">
            🚀 Begin Simulation
          </a>
          <a href="research-consent.html" class="cta-button cta-secondary">
            🔬 Join Research Study
          </a>
        </div>
      </div>
    </section>

    <!-- What is SimulateAI -->
    <section class="section fade-in">
      <div class="section-intro">
        <h2>🧠 An Interactive Platform for Exploring AI Ethics</h2>
        <p
          style="
            font-size: 1.1rem;
            color: #555;
            text-align: center;
            margin-bottom: 2rem;
          "
        >
          SimulateAI is an educational and research platform that invites
          students, educators, scientists, and lifelong learners to explore the
          ethical challenges of artificial intelligence through dynamic,
          branching narrative simulations.
        </p>

        <div class="features-grid">
          <div class="feature-card">
            <span class="feature-icon">💡</span>
            <h3>No Registration Required</h3>
            <p>
              Jump right into simulations without creating an account.
              Experience ethical dilemmas immediately.
            </p>
          </div>

          <div class="feature-card">
            <span class="feature-icon">🎮</span>
            <h3>25+ Real-World Scenarios</h3>
            <p>
              Explore diverse AI ethics challenges based on real-world
              situations and emerging technologies.
            </p>
          </div>

          <div class="feature-card">
            <span class="feature-icon">🏫</span>
            <h3>ISTE Standards Aligned</h3>
            <p>
              Curriculum-ready content aligned with digital citizenship and
              educational technology standards.
            </p>
          </div>

          <div class="feature-card">
            <span class="feature-icon">📈</span>
            <h3>Research-Powered Learning</h3>
            <p>
              Contributing to groundbreaking research on human ethical
              decision-making in AI contexts.
            </p>
          </div>

          <div class="feature-card">
            <span class="feature-icon">🎯</span>
            <h3>Adaptive Learning Paths</h3>
            <p>
              Personalized simulation experiences that adapt to your ethical
              reasoning patterns and learning objectives.
            </p>
          </div>

          <div class="feature-card">
            <span class="feature-icon">🌐</span>
            <h3>Global Community</h3>
            <p>
              Connect with learners, educators, and researchers worldwide to
              discuss AI ethics and share insights.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="section fade-in">
      <div class="how-it-works">
        <h2>🔍 How It Works</h2>
        <p style="text-align: center; margin-bottom: 2rem; font-size: 1.1rem">
          Our platform provides multiple pathways for engagement, from casual
          exploration to deep research participation.
        </p>

        <ol class="steps-list">
          <li>
            <strong>Open Simulations</strong> – Try scenarios without signing
            in. Explore ethical dilemmas immediately and see how your decisions
            impact AI systems and society.
          </li>
          <li>
            <strong>Profile Creation</strong> – Save your progress, track your
            ethical reasoning patterns, and participate in community
            discussions.
          </li>
          <li>
            <strong>Donations</strong> – Support ethical AI education with
            voluntary contributions and unlock community recognition features.
          </li>
          <li>
            <strong>Research Study</strong> – Opt in with a one-time $5+
            contribution to help shape the future of AI ethics through academic
            research.
          </li>
          <li>
            <strong>Blog & Comments</strong> – Join ongoing conversations,
            access exclusive content, and connect with a global community of
            learners.
          </li>
        </ol>
      </div>
    </section>

    <!-- Research Study Section -->
    <section class="section fade-in">
      <div class="research-highlight">
        <h2>🔬 Ethical AI Research Study</h2>
        <p style="font-size: 1.1rem; margin-bottom: 1.5rem">
          SimulateAI collects anonymized data from participants who choose to
          opt in to a global research study on human reasoning in AI-driven
          systems. With your $5+ donation, you'll gain access to:
        </p>

        <div class="research-benefits">
          <div class="benefit-item">
            <h4>📘 Research-Only Simulations</h4>
            <p>
              Access exclusive scenarios designed specifically for academic
              research on ethical decision-making.
            </p>
          </div>
          <div class="benefit-item">
            <h4>🏅 Visual Recognition</h4>
            <p>
              Earn badges, visual flair, and community recognition for your
              contributions to AI ethics research.
            </p>
          </div>
          <div class="benefit-item">
            <h4>📊 Ethical Data Use</h4>
            <p>
              Your anonymized data powers academic research only – never sold,
              never misused, always transparent.
            </p>
          </div>
        </div>

        <a
          href="research-consent.html"
          class="cta-button cta-primary"
          style="margin-top: 1rem"
        >
          📋 Read the Consent Form
        </a>
      </div>
    </section>

    <!-- Who It's For -->
    <section class="section fade-in">
      <h2>🎯 Who Uses SimulateAI?</h2>
      <p style="text-align: center; margin-bottom: 2rem; font-size: 1.1rem">
        Our platform serves a diverse community of learners, educators, and
        researchers worldwide.
      </p>

      <div class="audience-grid">
        <div class="audience-card">
          <div class="icon">👩‍🏫</div>
          <h3>Educators</h3>
          <p>
            For ethical, standards-aligned classroom discussions and curriculum
            development in AI literacy.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">🧑‍🎓</div>
          <h3>Students</h3>
          <p>
            To build critical AI literacy, explore career implications, and
            develop ethical reasoning skills.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">🔬</div>
          <h3>Researchers</h3>
          <p>
            To access decision-making datasets, design studies, and contribute
            to AI ethics scholarship.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">🧭</div>
          <h3>Lifelong Learners</h3>
          <p>
            To stay informed, engage with emerging technology, and participate
            in shaping AI's future.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">📜</div>
          <h3>Philosophy Enthusiasts</h3>
          <p>
            To engage with fundamental questions about consciousness, moral
            reasoning, and the nature of intelligence through practical
            scenarios.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">🏛️</div>
          <h3>Policy Makers</h3>
          <p>
            To experience the real-world implications of AI governance decisions
            and develop informed approaches to technology regulation.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">💻</div>
          <h3>Tech Professionals</h3>
          <p>
            To understand the ethical implications of their development choices
            and build more responsible technology solutions.
          </p>
        </div>

        <div class="audience-card">
          <div class="icon">🤝</div>
          <h3>Community Builders</h3>
          <p>
            To foster ethical AI discussions and create inclusive spaces for
            technology education and digital citizenship.
          </p>
        </div>
      </div>
    </section>

    <!-- Data & Privacy -->
    <section class="section fade-in">
      <div class="privacy-section">
        <h2>🔐 Your Data, Your Choice</h2>
        <p style="text-align: center; margin-bottom: 1.5rem; font-size: 1.1rem">
          SimulateAI collects
          <strong
            >no personal data unless you choose to create a profile</strong
          >
          or participate in our research. All decision data collected for the
          study is:
        </p>

        <div class="privacy-features">
          <div class="privacy-item">
            <div class="checkmark">✅</div>
            <h4>Voluntary & Consent-Based</h4>
            <p>You control what data you share and can opt out anytime.</p>
          </div>

          <div class="privacy-item">
            <div class="checkmark">✅</div>
            <h4>Anonymized Data</h4>
            <p>
              All research data is anonymized or pseudonymized for privacy
              protection.
            </p>
          </div>

          <div class="privacy-item">
            <div class="checkmark">✅</div>
            <h4>Secure Storage</h4>
            <p>
              Stored securely via Firebase with enterprise-grade encryption and
              security.
            </p>
          </div>

          <div class="privacy-item">
            <div class="checkmark">✅</div>
            <h4>Never Sold</h4>
            <p>
              Never sold or shared with advertisers – research and education
              only.
            </p>
          </div>
        </div>

        <p style="text-align: center; font-style: italic; margin-top: 1.5rem">
          <strong
            >We value transparency and digital ethics – just like we
            teach.</strong
          >
        </p>
      </div>
    </section>

    <!-- Community Section -->
    <section class="section fade-in">
      <div class="community-section">
        <h2>🤝 Get Involved</h2>
        <p style="font-size: 1.1rem; margin-bottom: 1.5rem">
          Create a profile to access exclusive research scenarios, community
          discussions, badges, and recognition based on your level of
          contribution to AI ethics education.
        </p>

        <div class="community-actions">
          <a href="#" class="community-button" id="startExploringBtn">
            🚀 Start Exploring
          </a>
          <a href="research-consent.html" class="community-button">
            💳 Donate & Join Study
          </a>
          <a href="mailto:research@simulateai.io" class="community-button">
            💬 Contact Us
          </a>
        </div>
      </div>
    </section>

    <!-- Footer will be inserted by professional-footer.js -->
    <div id="footer-placeholder"></div>

    <!-- Professional Footer Component -->
    <script
      type="module"
      src="src/js/components/professional-footer.js"
    ></script>

    <!-- Back to Top Component -->
    <script type="module" src="src/js/components/back-to-top.js"></script>

    <!-- Main Application -->
    <!-- Use a lightweight initializer for the landing page to avoid pulling full app CSS -->
    <script type="module" src="src/js/index-init.js"></script>

    <script>
      // Floating Emojis Animation
      function createFloatingEmojis() {
        const container = document.getElementById("floatingEmojis");
        if (!container) return;

        // Performance check - disable on low-end devices or reduced motion preference
        if (
          navigator.hardwareConcurrency < 4 ||
          window.matchMedia("(prefers-reduced-motion: reduce)").matches ||
          navigator.deviceMemory < 4 // Less than 4GB RAM
        ) {
          console.log("🔧 Floating emojis disabled for performance");
          return;
        }

        // AI and tech-themed emojis
        const emojis = [
          "🤖",
          "🧠",
          "💡",
          "🧬",
          "🔬",
          "🚀",
          "💻",
          "📱",
          "🔍",
          "🎮",
          "🌐",
          "📝",
          "⭐",
          "🧪",
          "📡",
          "🛰️",
          "🌍",
          "⚖️",
          "📙",
          "🤔",
          "🧾",
          "🧭",
          "🎓",
          "🌟",
          "✨",
          "🖋️",
          "🖥️",
          "💭",
          "✏️",
          "🌱",
        ];

        // Create floating emojis at intervals
        function spawnEmoji() {
          const emoji = document.createElement("div");
          emoji.className = "floating-emoji";

          // Random emoji from our theme
          emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];

          // Random horizontal starting position (avoid edges)
          const startX = 5 + Math.random() * 90; // 5% to 95%
          emoji.style.left = startX + "%";

          // Simplified randomness for better performance
          const driftAmount = (Math.random() - 0.5) * 60; // -30px to +30px drift
          const wiggleIntensity = 10 + Math.random() * 15; // 10px to 25px wiggle
          const opacityVariation = 0.5 + Math.random() * 0.3; // 0.5 to 0.8 max opacity
          const scaleVariation = 0.9 + Math.random() * 0.2; // 0.9x to 1.1x scale

          // Random rotation direction - some rotate left, some right
          const rotationDirection = Math.random() < 0.5 ? 360 : -360; // 50% chance each direction

          // Set CSS custom properties for animation
          emoji.style.setProperty("--drift-x", `${driftAmount}px`);
          emoji.style.setProperty("--wiggle-intensity", `${wiggleIntensity}px`);
          emoji.style.setProperty("--max-opacity", opacityVariation);
          emoji.style.setProperty("--scale-variation", scaleVariation);
          emoji.style.setProperty(
            "--rotation-direction",
            `${rotationDirection}deg`,
          );

          // Random size for varied bubbling effect
          const sizeRandom = Math.random();
          let animationDuration;
          if (sizeRandom < 0.2) {
            emoji.classList.add("tiny");
            animationDuration = 12; // Fixed duration for performance
          } else if (sizeRandom < 0.4) {
            emoji.classList.add("small");
            animationDuration = 14;
          } else if (sizeRandom < 0.6) {
            emoji.classList.add("medium");
            animationDuration = 16;
          } else if (sizeRandom < 0.8) {
            emoji.classList.add("large");
            animationDuration = 18;
          } else {
            emoji.classList.add("big");
            animationDuration = 20;
          }

          // Set fixed animation duration
          emoji.style.animationDuration = animationDuration + "s";

          // Random animation delay for natural timing
          emoji.style.animationDelay = Math.random() * 2 + "s"; // Reduced delay range

          // Random starting rotation (simplified)
          const startRotation = Math.random() * 360;
          emoji.style.setProperty("--start-rotation", `${startRotation}deg`);

          container.appendChild(emoji);

          // Remove emoji after animation completes
          setTimeout(
            () => {
              if (emoji.parentNode) {
                emoji.parentNode.removeChild(emoji);
              }
            },
            (animationDuration + 2) * 1000, // Duration + smaller delay buffer
          );
        }

        // Remove initial burst - start with consistent spawning immediately
        // Begin regular emoji spawning with consistent intervals
        function scheduleNextEmoji() {
          const nextDelay = 1000 + Math.random() * 1000; // 1s to 2s (more frequent and consistent)
          setTimeout(() => {
            // Limit total number of active emojis to prevent resource overload
            const activeEmojis = container.children.length;
            if (activeEmojis < 8) {
              // Increased from 8 to 15 active emojis at once
              spawnEmoji();
            }
            scheduleNextEmoji();
          }, nextDelay);
        }

        // Start spawning immediately with first emoji
        spawnEmoji();
        scheduleNextEmoji();
      }

      // Start emoji animation when page loads
      document.addEventListener("DOMContentLoaded", createFloatingEmojis);

      // Handle Begin Simulation button click with portal transition
      document
        .getElementById("beginSimulationBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();

          // Create water droplet portal transition
          createPortalTransition(e, () => {
            // Mark that user is coming from home page for first-time experience
            localStorage.setItem("from_home_page", "true");

            // Clear any existing tour completion to ensure tour starts for new users
            if (!localStorage.getItem("has_visited")) {
              localStorage.removeItem("tour_completed");
            }

            // Navigate to main application
            const isDevelopment = window.location.hostname === "localhost";
            const appPath = isDevelopment ? "app.html" : "/app.html";
            window.location.href = appPath;
          });
        });

      // Handle Start Exploring button click (same functionality)
      document
        .getElementById("startExploringBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();

          // Create portal transition for consistency
          createPortalTransition(e, () => {
            // Mark that user is coming from home page
            localStorage.setItem("from_home_page", "true");

            // Clear any existing tour completion to ensure tour starts for new users
            if (!localStorage.getItem("has_visited")) {
              localStorage.removeItem("tour_completed");
            }

            // Navigate to main application
            const isDevelopment = window.location.hostname === "localhost";
            const appPath = isDevelopment ? "app.html" : "/app.html";
            window.location.href = appPath;
          });
        });

      // Water Droplet Portal Transition Function
      function createPortalTransition(event, callback) {
        // Get click coordinates
        const rect = event.target.getBoundingClientRect();
        const clickX = rect.left + rect.width / 2;
        const clickY = rect.top + rect.height / 2;

        // Convert to viewport percentages
        const clickXPercent = (clickX / window.innerWidth) * 100;
        const clickYPercent = (clickY / window.innerHeight) * 100;

        // Create screen distortion overlay
        const distortion = document.createElement("div");
        distortion.className = "screen-distortion";
        distortion.style.setProperty("--click-x", clickXPercent + "%");
        distortion.style.setProperty("--click-y", clickYPercent + "%");
        document.body.appendChild(distortion);

        // Create main ripple portal
        const ripple = document.createElement("div");
        ripple.className = "ripple-portal";
        ripple.style.setProperty("--click-x", clickXPercent + "%");
        ripple.style.setProperty("--click-y", clickYPercent + "%");
        document.body.appendChild(ripple);

        // Portal loading indicator removed per user request
        // const loading = document.createElement('div');
        // loading.className = 'portal-loading';
        // loading.innerHTML = `
        //   <div style="
        //     font-size: 2rem;
        //     color: #1a73e8;
        //     text-shadow: 0 0 10px rgba(26, 115, 232, 0.5);
        //   ">🌊</div>
        //   <div style="
        //     margin-top: 10px;
        //     font-size: 0.9rem;
        //     color: #667eea;
        //     font-weight: 600;
        //     text-align: center;
        //   ">Entering Simulation...</div>
        // `;
        // document.body.appendChild(loading);

        // Add subtle haptic feedback if supported
        if ("vibrate" in navigator) {
          navigator.vibrate([30, 10, 30]);
        }

        // Sound effect removed per user request
        // playPortalSound();

        // Loading animation removed per user request
        // setTimeout(() => {
        //   loading.classList.add('active');
        // }, 300);

        // Execute callback after transition completes
        setTimeout(() => {
          if (callback) callback();
        }, 1200); // Match animation duration

        // Cleanup elements after transition
        setTimeout(() => {
          if (distortion.parentNode)
            distortion.parentNode.removeChild(distortion);
          if (ripple.parentNode) ripple.parentNode.removeChild(ripple);
          // Loading element cleanup removed since element no longer created
        }, 1500);
      }

      // Portal sound function removed per user request

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          const href = this.getAttribute("href");

          // Skip if href is just "#" or empty
          if (!href || href === "#") {
            return;
          }

          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // Intersection Observer for fade-in animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, observerOptions);

      // Observe all fade-in elements
      document.querySelectorAll(".fade-in").forEach((el) => {
        observer.observe(el);
      });

      // Add enhanced interactive feedback with portal preview
      document
        .querySelectorAll(".cta-button, .community-button")
        .forEach((button) => {
          button.addEventListener("mouseenter", function () {
            this.style.transform = this.classList.contains("cta-primary")
              ? "translateY(-3px)"
              : "translateY(-2px)";

            // Add subtle pulse effect for primary buttons
            if (this.classList.contains("cta-primary")) {
              this.style.boxShadow =
                "0 12px 35px rgba(255, 107, 107, 0.4), 0 0 20px rgba(26, 115, 232, 0.2)";
            }
          });

          button.addEventListener("mouseleave", function () {
            this.style.transform = "translateY(0)";

            // Reset shadow
            if (this.classList.contains("cta-primary")) {
              this.style.boxShadow = "0 8px 25px rgba(255, 107, 107, 0.3)";
            }
          });

          // Add ripple effect on click for all buttons (subtle preview of portal)
          button.addEventListener("click", function (e) {
            if (
              !this.id.includes("beginSimulationBtn") &&
              !this.id.includes("startExploringBtn")
            ) {
              // Create a subtle ripple for non-portal buttons
              const rect = this.getBoundingClientRect();
              const size = Math.max(rect.width, rect.height);
              const x = e.clientX - rect.left - size / 2;
              const y = e.clientY - rect.top - size / 2;

              const ripple = document.createElement("div");
              ripple.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                left: ${x}px;
                top: ${y}px;
                background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
                border-radius: 50%;
                transform: scale(0);
                animation: buttonRipple 0.6s ease-out forwards;
                pointer-events: none;
                z-index: 1;
              `;

              this.style.position = "relative";
              this.style.overflow = "hidden";
              this.appendChild(ripple);

              setTimeout(() => {
                if (ripple.parentNode) ripple.parentNode.removeChild(ripple);
              }, 600);
            }
          });
        });

      // Add button ripple animation
      const style = document.createElement("style");
      style.textContent = `
        @keyframes buttonRipple {
          to {
            transform: scale(2);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);

      // Track page engagement for analytics (placeholder)
      let engagementStartTime = Date.now();
      let maxScrollDepth = 0;

      window.addEventListener("scroll", () => {
        const scrollPercent =
          (window.scrollY /
            (document.documentElement.scrollHeight - window.innerHeight)) *
          100;
        maxScrollDepth = Math.max(maxScrollDepth, scrollPercent);
      });

      // Log engagement when user leaves (for future analytics)
      window.addEventListener("beforeunload", () => {
        const timeSpent = Date.now() - engagementStartTime;
        console.log(
          `Page engagement: ${timeSpent}ms, max scroll: ${maxScrollDepth.toFixed(1)}%`,
        );
      });

      // Keyboard navigation enhancement
      document.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && e.target.tagName === "A") {
          e.target.click();
        }
      });
    </script>

    <!-- PWA Service Worker Registration -->
    <script>
      // Remove base URL for localhost development
      if (window.location.hostname === "localhost") {
        const baseTag = document.getElementById("custom-domain-base");
        if (baseTag) {
          baseTag.remove();
        }
      }

      if ("serviceWorker" in navigator) {
        window.addEventListener("load", async () => {
          try {
            // Determine the correct base path for service worker
            const isDevelopment = window.location.hostname === "localhost";
            const basePath = isDevelopment ? "/" : "/";
            const swPath = isDevelopment ? "/sw.js" : "/sw.js";

            const registration = await navigator.serviceWorker.register(
              swPath,
              {
                scope: basePath,
              },
            );

            console.log(
              "🔥 Service Worker registered successfully:",
              registration.scope,
            );

            // Handle service worker updates
            registration.addEventListener("updatefound", () => {
              const newWorker = registration.installing;
              if (newWorker) {
                newWorker.addEventListener("statechange", () => {
                  if (
                    newWorker.state === "installed" &&
                    navigator.serviceWorker.controller
                  ) {
                    // New content is available - just log it instead of showing notification
                    console.log(
                      "🚀 New content is available - refresh to update",
                    );
                  }
                });
              }
            });

            // Check for waiting service worker - just log instead of showing notification
            if (registration.waiting) {
              console.log(
                "🚀 Service worker update is waiting - refresh to activate",
              );
            }
          } catch (error) {
            console.warn("🚨 Service Worker registration failed:", error);
          }
        });
      } // Add missing closing brace for the if statement

      // PWA Install Prompt
      let deferredPrompt;

      window.addEventListener("beforeinstallprompt", (e) => {
        // Prevent the mini-infobar from appearing on mobile
        e.preventDefault();
        deferredPrompt = e;

        // Show custom install button
        showInstallPrompt();
      });

      function showInstallPrompt() {
        // Only show if not already installed
        if (window.matchMedia("(display-mode: standalone)").matches) {
          return; // Already installed
        }

        const installBanner = document.createElement("div");
        installBanner.innerHTML = `
          <div id="pwa-install-banner" style="
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 9999;
            text-align: center;
            border: 2px solid #667eea;
            max-width: 400px;
            margin: 0 auto;
          ">
            <div style="font-size: 1.2em; margin-bottom: 10px;">📱 Install SimulateAI</div>
            <div style="margin-bottom: 15px; color: #666;">Get the full app experience with offline access!</div>
            <button id="install-app-btn" style="
              background: linear-gradient(45deg, #667eea, #764ba2);
              color: white;
              border: none;
              padding: 12px 24px;
              border-radius: 25px;
              margin: 5px;
              cursor: pointer;
              font-weight: bold;
            ">Install App</button>
            <button onclick="document.getElementById('pwa-install-banner').remove()" style="
              background: transparent;
              color: #666;
              border: 1px solid #ddd;
              padding: 12px 24px;
              border-radius: 25px;
              margin: 5px;
              cursor: pointer;
            ">Not Now</button>
          </div>
        `;

        document.body.appendChild(installBanner);

        // Handle install button click
        document
          .getElementById("install-app-btn")
          .addEventListener("click", async () => {
            if (deferredPrompt) {
              deferredPrompt.prompt();
              const { outcome } = await deferredPrompt.userChoice;

              if (outcome === "accepted") {
                console.log("🎉 PWA installed successfully");
                // Track installation
                if (window.gtag) {
                  gtag("event", "pwa_install", {
                    event_category: "PWA",
                    event_label: "install_accepted",
                  });
                }
              }

              deferredPrompt = null;
              document.getElementById("pwa-install-banner").remove();
            }
          });
      }

      // Track PWA usage
      window.addEventListener("appinstalled", () => {
        console.log("🎉 PWA was installed");
        if (window.gtag) {
          gtag("event", "pwa_installed", {
            event_category: "PWA",
            event_label: "app_installed",
          });
        }
      });

      // Detect PWA launch
      if (
        window.matchMedia("(display-mode: standalone)").matches ||
        window.navigator.standalone
      ) {
        console.log("📱 Running as PWA");
        document.body.classList.add("pwa-mode");

        if (window.gtag) {
          gtag("event", "pwa_launch", {
            event_category: "PWA",
            event_label: "standalone_launch",
          });
        }
      }

      // Handle offline/online status
      function updateOnlineStatus() {
        const statusIndicator =
          document.getElementById("connection-status") ||
          createStatusIndicator();

        if (navigator.onLine) {
          statusIndicator.style.display = "none";
        } else {
          statusIndicator.style.display = "block";
          statusIndicator.innerHTML = `
            <div style="
              background: #dc3545;
              color: white;
              padding: 10px;
              text-align: center;
              font-size: 14px;
            ">
              📡 You're offline - Some features may be limited
            </div>
          `;
        }
      }

      function createStatusIndicator() {
        const indicator = document.createElement("div");
        indicator.id = "connection-status";
        indicator.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 9998;
        `;
        document.body.appendChild(indicator);
        return indicator;
      }

      // Listen for online/offline events
      window.addEventListener("online", updateOnlineStatus);
      window.addEventListener("offline", updateOnlineStatus);

      // Initial status check
      updateOnlineStatus();

      // PWA Performance monitoring
      if ("performance" in window && "PerformanceObserver" in window) {
        // Monitor largest contentful paint
        const perfObserver = new PerformanceObserver((entryList) => {
          for (const entry of entryList.getEntries()) {
            if (entry.entryType === "largest-contentful-paint") {
              console.log("📊 LCP:", entry.startTime);

              // Send to service worker for analytics
              if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({
                  type: "PERFORMANCE_MARK",
                  name: "LCP",
                  duration: entry.startTime,
                });
              }
            }
          }
        });

        try {
          perfObserver.observe({ entryTypes: ["largest-contentful-paint"] });
        } catch (e) {
          // LCP not supported in this browser
        }
      }
    </script>
  </body>
</html>
