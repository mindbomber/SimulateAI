<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Progress Ring Functionality Test</title>
    <link rel="stylesheet" href="src/styles/category-header.css" />
    <style>
      body {
        padding: 20px;
        font-family: Arial, sans-serif;
      }
      .test-container {
        margin: 20px 0;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <h1>Category Header Progress Ring Test</h1>

    <div class="test-container">
      <h2>Progress Ring with Tooltip</h2>
      <div
        class="category-progress-ring"
        data-tooltip="Test tooltip: 5 of 10 scenarios completed (50%)"
        data-category-id="test-category"
        role="button"
        tabindex="0"
        aria-label="Category progress: Test tooltip"
      >
        <svg width="60" height="60" viewBox="0 0 60 60">
          <circle
            cx="30"
            cy="30"
            r="26"
            fill="none"
            stroke="#e5e7eb"
            stroke-width="4"
          />
          <circle
            cx="30"
            cy="30"
            r="26"
            fill="none"
            stroke="#3b82f6"
            stroke-width="4"
            stroke-linecap="round"
            stroke-dasharray="163"
            stroke-dashoffset="81.5"
            style="transform: rotate(-90deg); transform-origin: 30px 30px"
          />
        </svg>
        <span class="progress-percentage">50%</span>
      </div>
    </div>

    <div class="test-container">
      <h2>Badge Alert Progress Ring</h2>
      <div
        class="category-progress-ring pulse-for-badge"
        data-tooltip="Badge alert: One scenario away from earning a badge!"
        data-category-id="badge-category"
        role="button"
        tabindex="0"
        aria-label="Badge alert progress"
      >
        <svg width="60" height="60" viewBox="0 0 60 60">
          <circle
            cx="30"
            cy="30"
            r="26"
            fill="none"
            stroke="#e5e7eb"
            stroke-width="4"
          />
          <circle
            cx="30"
            cy="30"
            r="26"
            fill="none"
            stroke="#ef4444"
            stroke-width="4"
            stroke-linecap="round"
            stroke-dasharray="163"
            stroke-dashoffset="32.6"
            style="transform: rotate(-90deg); transform-origin: 30px 30px"
          />
        </svg>
        <span class="progress-percentage">80%</span>
      </div>
    </div>

    <script type="module">
      // Test the CategoryHeader component
      import CategoryHeader from "./src/js/components/category-header.js";

      async function testProgressRings() {
        const categoryHeader = new CategoryHeader();
        await CategoryHeader.loadConfiguration();

        // Attach event listeners to test container
        const container = document.body;
        categoryHeader.attachEventListeners(container);

        console.log("CategoryHeader event listeners attached");

        // Test clicking on progress rings
        const progressRings = document.querySelectorAll(
          ".category-progress-ring",
        );
        progressRings.forEach((ring, index) => {
          console.log(`Progress ring ${index + 1}:`, {
            hasTooltip: ring.hasAttribute("data-tooltip"),
            categoryId: ring.getAttribute("data-category-id"),
            classList: Array.from(ring.classList),
          });
        });
      }

      // Run test when page loads
      window.addEventListener("load", testProgressRings);
    </script>
  </body>
</html>
