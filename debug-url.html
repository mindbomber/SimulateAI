<!DOCTYPE html>
<html>
<head>
    <title>Debug URL</title>
</head>
<body>
    <h1>URL Debug Test</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        
        // Test URL parameter extraction
        function getCategoryIdFromUrl() {
            // Try multiple methods to get the category ID
            const urlParams = new URLSearchParams(window.location.search);
            let categoryId = urlParams.get('id') || urlParams.get('category');
            
            console.log('URLSearchParams result:', categoryId);
            
            // If URLSearchParams didn't work, try manual parsing for both parameter names
            if (!categoryId) {
                const url = window.location.href;
                const match = url.match(/[?&](?:id|category)=([^&]+)/);
                if (match) {
                    categoryId = decodeURIComponent(match[1]);
                    console.log('Manual regex result:', categoryId);
                }
            }
            
            // Also try looking for the hash-based routing
            if (!categoryId) {
                const { hash } = window.location;
                const hashMatch = hash.match(/#category\/([^/?]+)/);
                if (hashMatch) {
                    categoryId = hashMatch[1];
                    console.log('Hash-based result:', categoryId);
                }
            }
            
            return categoryId;
        }
        
        const result = getCategoryIdFromUrl();
        
        output.innerHTML = `
            <p><strong>Current URL:</strong> ${window.location.href}</p>
            <p><strong>Search Params:</strong> ${window.location.search}</p>
            <p><strong>URLSearchParams('category'):</strong> ${new URLSearchParams(window.location.search).get('category')}</p>
            <p><strong>URLSearchParams('id'):</strong> ${new URLSearchParams(window.location.search).get('id')}</p>
            <p><strong>Final Result:</strong> ${result}</p>
        `;
        
        console.log('URL Debug Results:', {
            href: window.location.href,
            search: window.location.search,
            categoryParam: new URLSearchParams(window.location.search).get('category'),
            idParam: new URLSearchParams(window.location.search).get('id'),
            finalResult: result
        });
    </script>
</body>
</html>
