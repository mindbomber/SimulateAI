{"version":3,"file":"visual-engine-CPXCswte.js","sources":["../../src/js/objects/interactive-objects.js","../../src/js/objects/enhanced-objects.js","../../src/js/objects/advanced-ui-components.js","../../src/js/objects/priority-components.js","../../src/js/objects/layout-components.js","../../src/js/objects/input-utility-components.js","../../src/js/core/visual-engine.js"],"sourcesContent":["/**\n * Interactive Objects - Base classes and common UI components for the Visual Engine\n * Provides buttons, sliders, meters, and other interactive elements\n */\n\n// Constants to eliminate magic numbers\nconst INTERACTIVE_OBJECT_CONSTANTS = {\n  // Default dimensions\n  DEFAULT_WIDTH: 100,\n  DEFAULT_HEIGHT: 30,\n\n  // Button defaults\n  BUTTON_DEFAULT_WIDTH: 120,\n  BUTTON_DEFAULT_HEIGHT: 40,\n  BUTTON_DEFAULT_BORDER_RADIUS: 4,\n\n  // Slider defaults\n  SLIDER_DEFAULT_WIDTH: 200,\n  SLIDER_DEFAULT_HEIGHT: 20,\n  SLIDER_DEFAULT_VALUE: 50,\n  SLIDER_DEFAULT_HANDLE_WIDTH: 20,\n  SLIDER_HANDLE_HEIGHT_OFFSET: 4,\n  SLIDER_TRACK_QUARTER_DIVISOR: 4,\n  SLIDER_HANDLE_Y_OFFSET: 2,\n\n  // Meter defaults\n  METER_DEFAULT_WIDTH: 200,\n  METER_DEFAULT_HEIGHT: 30,\n\n  // Label defaults\n  LABEL_DEFAULT_WIDTH: 100,\n  LABEL_DEFAULT_HEIGHT: 20,\n\n  // ID generation\n  RANDOM_BASE: 36,\n  ID_SUBSTRING_START: 2,\n  ID_LENGTH: 9,\n};\n\n// Base class for all interactive objects\nexport class InteractiveObject {\n  constructor(options = {}) {\n    this.id = options.id || this.generateId();\n    this.x = options.x || 0;\n    this.y = options.y || 0;\n    this.width = options.width || INTERACTIVE_OBJECT_CONSTANTS.DEFAULT_WIDTH;\n    this.height = options.height || INTERACTIVE_OBJECT_CONSTANTS.DEFAULT_HEIGHT;\n    this.visible = options.visible !== false;\n    this.interactive = options.interactive !== false;\n    this.zIndex = options.zIndex || 0;\n    this.alpha = options.alpha !== undefined ? options.alpha : 1;\n    this.rotation = options.rotation || 0;\n    this.scale = options.scale || 1;\n\n    // Styling\n    this.fill = options.fill || '#ffffff';\n    this.stroke = options.stroke || '#cccccc';\n    this.strokeWidth = options.strokeWidth || 1;\n\n    // State\n    this.enabled = options.enabled !== false;\n    this.focused = false;\n    this.hovered = false;\n    this.pressed = false;\n\n    // Callbacks\n    this.onClick = options.onClick || null;\n    this.onMouseDown = options.onMouseDown || null;\n    this.onMouseUp = options.onMouseUp || null;\n    this.onMouseMove = options.onMouseMove || null;\n    this.onMouseEnter = options.onMouseEnter || null;\n    this.onMouseLeave = options.onMouseLeave || null;\n    this.onFocus = options.onFocus || null;\n    this.onBlur = options.onBlur || null;\n    this.onChange = options.onChange || null;\n\n    // Scene reference (set when added to scene)\n    this.scene = null;\n\n    // Accessibility\n    this.accessibilityConfig = this.getDefaultAccessibilityConfig();\n    if (options.accessibilityConfig) {\n      Object.assign(this.accessibilityConfig, options.accessibilityConfig);\n    }\n  }\n\n  generateId() {\n    return `obj_${Math.random().toString(INTERACTIVE_OBJECT_CONSTANTS.RANDOM_BASE).substr(INTERACTIVE_OBJECT_CONSTANTS.ID_SUBSTRING_START, INTERACTIVE_OBJECT_CONSTANTS.ID_LENGTH)}`;\n  }\n\n  getDefaultAccessibilityConfig() {\n    return {\n      role: 'button',\n      focusable: true,\n      description: 'Interactive object',\n      keyboardActions: {\n        Enter: 'click',\n        Space: 'click',\n      },\n    };\n  }\n\n  // Bounds checking\n  containsPoint(x, y) {\n    return (\n      x >= this.x &&\n      x <= this.x + this.width &&\n      y >= this.y &&\n      y <= this.y + this.height\n    );\n  }\n\n  getBounds() {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n      right: this.x + this.width,\n      bottom: this.y + this.height,\n    };\n  }\n\n  // Input handling\n  handleInput(eventType, eventData) {\n    if (!this.enabled || !this.visible) return false;\n\n    switch (eventType) {\n      case 'mousedown':\n        if (this.containsPoint(eventData.x, eventData.y)) {\n          this.pressed = true;\n          if (this.onMouseDown) this.onMouseDown(eventData);\n          return true;\n        }\n        break;\n\n      case 'mouseup':\n        if (this.pressed) {\n          this.pressed = false;\n          if (this.onMouseUp) this.onMouseUp(eventData);\n\n          if (this.containsPoint(eventData.x, eventData.y)) {\n            if (this.onClick) this.onClick(eventData);\n          }\n          return true;\n        }\n        break;\n\n      case 'mousemove': {\n        const wasHovered = this.hovered;\n        this.hovered = this.containsPoint(eventData.x, eventData.y);\n\n        if (this.hovered && !wasHovered) {\n          if (this.onMouseEnter) this.onMouseEnter(eventData);\n        } else if (!this.hovered && wasHovered) {\n          if (this.onMouseLeave) this.onMouseLeave(eventData);\n        }\n\n        if (this.hovered && this.onMouseMove) {\n          this.onMouseMove(eventData);\n        }\n        break;\n      }\n\n      case 'keydown':\n        if (this.focused && this.accessibilityConfig.keyboardActions) {\n          const action =\n            this.accessibilityConfig.keyboardActions[eventData.key];\n          if (action === 'click' && this.onClick) {\n            this.onClick(eventData);\n            return true;\n          }\n        }\n        break;\n    }\n\n    return false;\n  }\n\n  // State management\n  setEnabled(enabled) {\n    this.enabled = enabled;\n    this.updateStyle();\n  }\n\n  setFocused(focused) {\n    this.focused = focused;\n    this.updateStyle();\n\n    if (focused && this.onFocus) {\n      this.onFocus();\n    } else if (!focused && this.onBlur) {\n      this.onBlur();\n    }\n  }\n\n  updateStyle() {\n    // Override in subclasses to update visual appearance based on state\n  }\n\n  // Update method (called by scene)\n  update(_deltaTime) {\n    // Override in subclasses for animation or state updates\n  }\n\n  // Render method (override in subclasses)\n  render(renderer) {\n    // Default render - just draw a rectangle\n    renderer.drawRect(this.x, this.y, this.width, this.height, {\n      fill: this.fill,\n      stroke: this.stroke,\n      strokeWidth: this.strokeWidth,\n    });\n  }\n}\n\n// Button component\nexport class Button extends InteractiveObject {\n  constructor(options = {}) {\n    super({\n      width: INTERACTIVE_OBJECT_CONSTANTS.BUTTON_DEFAULT_WIDTH,\n      height: INTERACTIVE_OBJECT_CONSTANTS.BUTTON_DEFAULT_HEIGHT,\n      fill: '#007cba',\n      stroke: '#005a87',\n      ...options,\n    });\n\n    this.type = 'button';\n    this.text = options.text || 'Button';\n    this.textColor = options.textColor || '#ffffff';\n    this.font = options.font || '14px Arial';\n    this.borderRadius =\n      options.borderRadius ||\n      INTERACTIVE_OBJECT_CONSTANTS.BUTTON_DEFAULT_BORDER_RADIUS;\n\n    // Button states\n    this.colors = {\n      normal: { fill: this.fill, stroke: this.stroke },\n      hover: { fill: options.hoverColor || '#0099e6', stroke: this.stroke },\n      pressed: { fill: options.pressedColor || '#004d73', stroke: this.stroke },\n      disabled: { fill: '#cccccc', stroke: '#999999' },\n    };\n\n    this.accessibilityConfig.description = options.text || 'Button';\n  }\n\n  updateStyle() {\n    if (!this.enabled) {\n      this.fill = this.colors.disabled.fill;\n      this.stroke = this.colors.disabled.stroke;\n    } else if (this.pressed) {\n      this.fill = this.colors.pressed.fill;\n      this.stroke = this.colors.pressed.stroke;\n    } else if (this.hovered) {\n      this.fill = this.colors.hover.fill;\n      this.stroke = this.colors.hover.stroke;\n    } else {\n      this.fill = this.colors.normal.fill;\n      this.stroke = this.colors.normal.stroke;\n    }\n  }\n\n  render(renderer) {\n    this.updateStyle();\n\n    // Draw button background\n    if (renderer.type === 'canvas') {\n      renderer.drawRect(this.x, this.y, this.width, this.height, {\n        fill: this.fill,\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n        borderRadius: this.borderRadius,\n      });\n\n      // Draw text\n      renderer.drawText(\n        this.text,\n        this.x + this.width / 2,\n        this.y + this.height / 2,\n        {\n          font: this.font,\n          fill: this.textColor,\n          align: 'center',\n          baseline: 'middle',\n        }\n      );\n      return true;\n    } else if (renderer.type === 'svg') {\n      const group = renderer.createSVGElement('g');\n\n      // Button background\n      const rect = renderer.createSVGElement('rect', {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height,\n        fill: this.fill,\n        stroke: this.stroke,\n        'stroke-width': this.strokeWidth,\n        rx: this.borderRadius,\n      });\n      group.appendChild(rect);\n\n      // Button text\n      const text = renderer.createSVGElement('text', {\n        x: this.x + this.width / 2,\n        y: this.y + this.height / 2,\n        'text-anchor': 'middle',\n        'dominant-baseline': 'central',\n        fill: this.textColor,\n        'font-family': 'Arial',\n        'font-size': '14px',\n      });\n      text.textContent = this.text;\n      group.appendChild(text);\n\n      return group;\n    }\n    return false;\n  }\n}\n\n// Slider component\nexport class Slider extends InteractiveObject {\n  constructor(options = {}) {\n    super({\n      width: INTERACTIVE_OBJECT_CONSTANTS.SLIDER_DEFAULT_WIDTH,\n      height: INTERACTIVE_OBJECT_CONSTANTS.SLIDER_DEFAULT_HEIGHT,\n      fill: '#e0e0e0',\n      stroke: '#cccccc',\n      ...options,\n    });\n\n    this.type = 'slider';\n    this.min = options.min || 0;\n    this.max = options.max || 100;\n    this.value =\n      options.value !== undefined\n        ? options.value\n        : INTERACTIVE_OBJECT_CONSTANTS.SLIDER_DEFAULT_VALUE;\n    this.step = options.step || 1;\n\n    // Handle styling\n    this.handleWidth =\n      options.handleWidth ||\n      INTERACTIVE_OBJECT_CONSTANTS.SLIDER_DEFAULT_HANDLE_WIDTH;\n    this.handleHeight =\n      options.handleHeight ||\n      this.height + INTERACTIVE_OBJECT_CONSTANTS.SLIDER_HANDLE_HEIGHT_OFFSET;\n    this.handleColor = options.handleColor || '#007cba';\n    this.trackColor = options.trackColor || '#f0f0f0';\n    this.fillColor = options.fillColor || '#007cba';\n\n    this.isDragging = false;\n    this.dragOffset = 0;\n\n    this.accessibilityConfig = {\n      role: 'slider',\n      focusable: true,\n      description: `Slider, value ${this.value}`,\n      keyboardActions: {\n        ArrowLeft: 'decrease',\n        ArrowRight: 'increase',\n        ArrowDown: 'decrease',\n        ArrowUp: 'increase',\n      },\n    };\n  }\n\n  getHandlePosition() {\n    const progress = (this.value - this.min) / (this.max - this.min);\n    return this.x + (this.width - this.handleWidth) * progress;\n  }\n\n  setValue(newValue) {\n    const oldValue = this.value;\n    this.value = Math.max(this.min, Math.min(this.max, newValue));\n\n    if (this.value !== oldValue && this.onChange) {\n      this.onChange(this.value, oldValue);\n    }\n\n    this.accessibilityConfig.description = `Slider, value ${this.value}`;\n  }\n\n  handleInput(eventType, eventData) {\n    if (!this.enabled || !this.visible) return false;\n\n    switch (eventType) {\n      case 'mousedown': {\n        const handleX = this.getHandlePosition();\n        const handleBounds = {\n          x: handleX,\n          y: this.y - INTERACTIVE_OBJECT_CONSTANTS.SLIDER_HANDLE_Y_OFFSET,\n          width: this.handleWidth,\n          height: this.handleHeight,\n        };\n\n        if (\n          eventData.x >= handleBounds.x &&\n          eventData.x <= handleBounds.x + handleBounds.width &&\n          eventData.y >= handleBounds.y &&\n          eventData.y <= handleBounds.y + handleBounds.height\n        ) {\n          this.isDragging = true;\n          this.dragOffset = eventData.x - handleX;\n          return true;\n        } else if (this.containsPoint(eventData.x, eventData.y)) {\n          // Click on track - jump to position\n          const progress = (eventData.x - this.x) / this.width;\n          const newValue = this.min + progress * (this.max - this.min);\n          this.setValue(newValue);\n          return true;\n        }\n        break;\n      }\n\n      case 'mousemove':\n        if (this.isDragging) {\n          const newHandleX = eventData.x - this.dragOffset;\n          const progress =\n            (newHandleX - this.x) / (this.width - this.handleWidth);\n          const newValue =\n            this.min +\n            Math.max(0, Math.min(1, progress)) * (this.max - this.min);\n          this.setValue(Math.round(newValue / this.step) * this.step);\n          return true;\n        }\n        break;\n\n      case 'mouseup':\n        if (this.isDragging) {\n          this.isDragging = false;\n          return true;\n        }\n        break;\n\n      case 'keydown':\n        if (this.focused) {\n          let changed = false;\n          const stepSize = this.step;\n\n          switch (eventData.key) {\n            case 'ArrowLeft':\n            case 'ArrowDown':\n              this.setValue(this.value - stepSize);\n              changed = true;\n              break;\n            case 'ArrowRight':\n            case 'ArrowUp':\n              this.setValue(this.value + stepSize);\n              changed = true;\n              break;\n          }\n\n          if (changed) return true;\n        }\n        break;\n    }\n\n    return super.handleInput(eventType, eventData);\n  }\n\n  render(renderer) {\n    const handleX = this.getHandlePosition();\n    const progress = (this.value - this.min) / (this.max - this.min);\n\n    if (renderer.type === 'canvas') {\n      // Draw track\n      renderer.drawRect(\n        this.x,\n        this.y +\n          this.height /\n            INTERACTIVE_OBJECT_CONSTANTS.SLIDER_TRACK_QUARTER_DIVISOR,\n        this.width,\n        this.height / 2,\n        {\n          fill: this.trackColor,\n          stroke: this.stroke,\n          strokeWidth: 1,\n        }\n      );\n\n      // Draw filled portion\n      const fillWidth = this.width * progress;\n      if (fillWidth > 0) {\n        renderer.drawRect(\n          this.x,\n          this.y +\n            this.height /\n              INTERACTIVE_OBJECT_CONSTANTS.SLIDER_TRACK_QUARTER_DIVISOR,\n          fillWidth,\n          this.height / 2,\n          {\n            fill: this.fillColor,\n          }\n        );\n      }\n\n      // Draw handle\n      renderer.drawRect(\n        handleX,\n        this.y - INTERACTIVE_OBJECT_CONSTANTS.SLIDER_HANDLE_Y_OFFSET,\n        this.handleWidth,\n        this.handleHeight,\n        {\n          fill: this.handleColor,\n          stroke: '#005a87',\n          strokeWidth: 2,\n          borderRadius: 2,\n        }\n      );\n\n      return renderer;\n    } else if (renderer.type === 'svg') {\n      const group = renderer.createSVGElement('g');\n\n      // Track\n      const track = renderer.createSVGElement('rect', {\n        x: this.x,\n        y:\n          this.y +\n          this.height /\n            INTERACTIVE_OBJECT_CONSTANTS.SLIDER_TRACK_QUARTER_DIVISOR,\n        width: this.width,\n        height: this.height / 2,\n        fill: this.trackColor,\n        stroke: this.stroke,\n      });\n      group.appendChild(track);\n\n      // Fill\n      if (progress > 0) {\n        const fill = renderer.createSVGElement('rect', {\n          x: this.x,\n          y:\n            this.y +\n            this.height /\n              INTERACTIVE_OBJECT_CONSTANTS.SLIDER_TRACK_QUARTER_DIVISOR,\n          width: this.width * progress,\n          height: this.height / 2,\n          fill: this.fillColor,\n        });\n        group.appendChild(fill);\n      }\n\n      // Handle\n      const handle = renderer.createSVGElement('rect', {\n        x: handleX,\n        y: this.y - INTERACTIVE_OBJECT_CONSTANTS.SLIDER_HANDLE_Y_OFFSET,\n        width: this.handleWidth,\n        height: this.handleHeight,\n        fill: this.handleColor,\n        stroke: '#005a87',\n        'stroke-width': 2,\n        rx: 2,\n      });\n      group.appendChild(handle);\n\n      return group;\n    }\n\n    return null;\n  }\n}\n\n// Meter/Progress component\nexport class Meter extends InteractiveObject {\n  constructor(options = {}) {\n    super({\n      width: INTERACTIVE_OBJECT_CONSTANTS.METER_DEFAULT_WIDTH,\n      height: INTERACTIVE_OBJECT_CONSTANTS.METER_DEFAULT_HEIGHT,\n      fill: '#f0f0f0',\n      stroke: '#cccccc',\n      interactive: false,\n      ...options,\n    });\n\n    this.type = 'meter';\n    this.min = options.min || 0;\n    this.max = options.max || 100;\n    this.value = options.value !== undefined ? options.value : 0;\n    this.label = options.label || '';\n    this.showValue = options.showValue !== false;\n\n    // Styling\n    this.fillColor = options.fillColor || '#4caf50';\n    this.textColor = options.textColor || '#333333';\n    this.font = options.font || '12px Arial';\n\n    this.accessibilityConfig = {\n      role: 'progressbar',\n      focusable: false,\n      description: `${this.label} progress: ${this.value} of ${this.max}`,\n    };\n  }\n\n  setValue(newValue) {\n    this.value = Math.max(this.min, Math.min(this.max, newValue));\n    this.accessibilityConfig.description = `${this.label} progress: ${this.value} of ${this.max}`;\n  }\n\n  render(renderer) {\n    const progress = (this.value - this.min) / (this.max - this.min);\n    const fillWidth = this.width * progress;\n\n    if (renderer.type === 'canvas') {\n      // Draw background\n      renderer.drawRect(this.x, this.y, this.width, this.height, {\n        fill: this.fill,\n        stroke: this.stroke,\n        strokeWidth: this.strokeWidth,\n      });\n\n      // Draw fill\n      if (fillWidth > 0) {\n        renderer.drawRect(this.x, this.y, fillWidth, this.height, {\n          fill: this.fillColor,\n        });\n      }\n\n      // Draw text\n      if (this.label || this.showValue) {\n        const text = this.label + (this.showValue ? ` ${this.value}` : '');\n        renderer.drawText(\n          text,\n          this.x + this.width / 2,\n          this.y + this.height / 2,\n          {\n            font: this.font,\n            fill: this.textColor,\n            align: 'center',\n            baseline: 'middle',\n          }\n        );\n      }\n\n      return renderer;\n    } else if (renderer.type === 'svg') {\n      const group = renderer.createSVGElement('g');\n\n      // Background\n      const bg = renderer.createSVGElement('rect', {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height,\n        fill: this.fill,\n        stroke: this.stroke,\n        'stroke-width': this.strokeWidth,\n      });\n      group.appendChild(bg);\n\n      // Fill\n      if (fillWidth > 0) {\n        const fill = renderer.createSVGElement('rect', {\n          x: this.x,\n          y: this.y,\n          width: fillWidth,\n          height: this.height,\n          fill: this.fillColor,\n        });\n        group.appendChild(fill);\n      }\n\n      // Text\n      if (this.label || this.showValue) {\n        const text = this.label + (this.showValue ? ` ${this.value}` : '');\n        const textElement = renderer.createSVGElement('text', {\n          x: this.x + this.width / 2,\n          y: this.y + this.height / 2,\n          'text-anchor': 'middle',\n          'dominant-baseline': 'central',\n          fill: this.textColor,\n          'font-family': 'Arial',\n          'font-size': '12px',\n        });\n        textElement.textContent = text;\n        group.appendChild(textElement);\n      }\n\n      return group;\n    }\n\n    return null;\n  }\n}\n\n// Text label component\nexport class Label extends InteractiveObject {\n  constructor(options = {}) {\n    super({\n      width: INTERACTIVE_OBJECT_CONSTANTS.LABEL_DEFAULT_WIDTH,\n      height: INTERACTIVE_OBJECT_CONSTANTS.LABEL_DEFAULT_HEIGHT,\n      interactive: false,\n      fill: 'transparent',\n      stroke: 'none',\n      ...options,\n    });\n\n    this.type = 'label';\n    this.text = options.text || 'Label';\n    this.textColor = options.textColor || '#333333';\n    this.font = options.font || '14px Arial';\n    this.align = options.align || 'left';\n\n    this.accessibilityConfig = {\n      role: 'text',\n      focusable: false,\n      description: this.text,\n    };\n  }\n\n  setText(newText) {\n    this.text = newText;\n    this.accessibilityConfig.description = this.text;\n  }\n\n  render(renderer) {\n    if (renderer.type === 'canvas') {\n      renderer.drawText(this.text, this.x, this.y, {\n        font: this.font,\n        fill: this.textColor,\n        align: this.align,\n      });\n\n      return renderer;\n    } else if (renderer.type === 'svg') {\n      return renderer.createSVGElement(\n        'text',\n        {\n          x: this.x,\n          y: this.y,\n          fill: this.textColor,\n          'font-family': 'Arial',\n          'font-size': '14px',\n          'text-anchor': this.align === 'center' ? 'middle' : this.align,\n        },\n        this.text\n      );\n    }\n\n    return null;\n  }\n}\n\nexport { InteractiveObject as default };\n","/**\n * Enhanced Interactive Objects - Complete object system for SimulateAI\n * Provides sophisticated UI components with accessibility and animations\n *\n * @version 2.0.0\n * @author SimulateAI Team\n * @license Apache-2.0\n */\n\nimport logger from '../utils/logger.js';\n\n// Constants for performance and consistency\nconst DEFAULT_ANIMATION_DURATION = 300;\nconst DEFAULT_EASING = 'easeInOut';\nconst TOUCH_TARGET_SIZE = 44;\nconst FOCUS_RING_WIDTH = 2;\n\n// Enhanced Object System Constants\nconst OBJECT_CONSTANTS = {\n  // Base object defaults\n  DEFAULT_WIDTH: 100,\n  DEFAULT_HEIGHT: 50,\n\n  // ID generation\n  ID_BASE: 36,\n  ID_LENGTH: 9,\n  ID_SUBSTRING_START: 2,\n\n  // Animation and timing\n  DOUBLE_CLICK_THRESHOLD: 500,\n  RIPPLE_DURATION: 600,\n  ANIMATION_PRECISION: 0.1,\n  LOADING_SPINNER_SPEED: 2, // Math.PI * 2\n  LOADING_SPINNER_ARC: 1.5, // Math.PI * 1.5\n  SPINNER_RADIUS: 8,\n  SPINNER_LINE_WIDTH: 2,\n  BUTTON_TEXT_OFFSET: 10,\n  BUTTON_SPINNER_OFFSET: 30,\n  FPS_UPDATE_INTERVAL: 1000,\n\n  // UI dimensions and scaling\n  BUTTON_HOVER_SCALE: 1.02,\n  BUTTON_SCALE_DURATION: 150,\n  FOCUS_RING_OFFSET: 2,\n  FOCUS_RING_EXTRA: 3,\n  FOCUS_RING_BUTTON_OFFSET: 4,\n  BORDER_WIDTH: 2,\n  THICK_BORDER_WIDTH: 3,\n\n  // Positioning ratios\n  METER_TRACK_Y_RATIO: 0.4,\n  METER_TRACK_HEIGHT_RATIO: 0.3,\n  METER_LABEL_Y_RATIO: 0.3,\n  METER_VALUE_LABEL_Y_RATIO: 0.9,\n  SLIDER_VALUE_Y_OFFSET: 15,\n  SLIDER_LABEL_Y_OFFSET: -5,\n\n  // Default component dimensions\n  METER_DEFAULT_WIDTH: 200,\n  METER_DEFAULT_HEIGHT: 60,\n  METER_DEFAULT_VALUE: 50,\n  METER_DEFAULT_MAX: 100,\n\n  BUTTON_DEFAULT_WIDTH: 120,\n  BUTTON_DEFAULT_HEIGHT: 40,\n\n  SLIDER_DEFAULT_WIDTH: 200,\n  SLIDER_DEFAULT_HEIGHT: 40,\n  SLIDER_DEFAULT_VALUE: 50,\n  SLIDER_DEFAULT_MAX: 100,\n  SLIDER_DEFAULT_STEP: 1,\n  SLIDER_DEFAULT_TRACK_HEIGHT: 6,\n  SLIDER_DEFAULT_HANDLE_SIZE: 20,\n\n  // Scoring thresholds\n  SCORE_THRESHOLD_EXCELLENT: 90,\n  SCORE_THRESHOLD_GOOD: 70,\n  SCORE_THRESHOLD_FAIR: 50,\n  SCORE_THRESHOLD_POOR: 30,\n\n  // Ripple effect\n  RIPPLE_ALPHA: 0.3,\n};\n\n// Easing function constants\nconst EASING_CONSTANTS = {\n  // Bezier curve control points\n  HALF: 0.5,\n  QUARTER: 0.25,\n  THREE_QUARTERS: 0.75,\n\n  // Cubic easing powers\n  CUBIC_POWER: 3,\n  QUARTIC_POWER: 4,\n\n  // Bounce easing constants\n  BOUNCE_N1: 7.5625,\n  BOUNCE_D1: 2.75,\n  BOUNCE_THRESHOLD_1: 1, // 1 / d1\n  BOUNCE_THRESHOLD_2: 2, // 2 / d1\n  BOUNCE_THRESHOLD_3: 2.5, // 2.5 / d1\n  BOUNCE_OFFSET_1: 1.5, // 1.5 / d1\n  BOUNCE_OFFSET_2: 2.25, // 2.25 / d1\n  BOUNCE_OFFSET_3: 2.625, // 2.625 / d1\n  BOUNCE_VALUE_1: 0.75,\n  BOUNCE_VALUE_2: 0.9375,\n  BOUNCE_VALUE_3: 0.984375,\n\n  // Ease multipliers\n  EASE_IN_OUT_MULTIPLIER: 2,\n  EASE_IN_OUT_CUBIC_MULTIPLIER: 4,\n  EASE_IN_OUT_QUART_MULTIPLIER: 8,\n  EASE_NEGATIVE_MULTIPLIER: -2,\n  EASE_ADDEND: 2,\n  EASE_DIVISOR: 2,\n};\n\n// Animation frame management\nclass AnimationManager {\n  constructor() {\n    this.animations = new Map();\n    this.isRunning = false;\n    this.rafId = null;\n  }\n\n  add(id, callback) {\n    this.animations.set(id, callback);\n    this.start();\n  }\n\n  remove(id) {\n    this.animations.delete(id);\n    if (this.animations.size === 0) {\n      this.stop();\n    }\n  }\n\n  start() {\n    if (!this.isRunning) {\n      this.isRunning = true;\n      this.tick();\n    }\n  }\n\n  stop() {\n    if (this.rafId) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n    this.isRunning = false;\n  }\n\n  tick() {\n    const currentTime = performance.now();\n\n    for (const [id, callback] of this.animations) {\n      try {\n        const shouldContinue = callback(currentTime);\n        if (!shouldContinue) {\n          this.animations.delete(id);\n        }\n      } catch (error) {\n        logger.error(`Animation error for ${id}:`, error);\n        this.animations.delete(id);\n      }\n    }\n\n    if (this.animations.size > 0) {\n      this.rafId = requestAnimationFrame(() => this.tick());\n    } else {\n      this.stop();\n    }\n  }\n\n  clear() {\n    this.animations.clear();\n    this.stop();\n  }\n}\n\n// Global animation manager instance\nconst animationManager = new AnimationManager();\n\n// Utility functions\nconst clamp = (value, min, max) => Math.max(min, Math.min(max, value));\nconst lerp = (start, end, progress) => start + (end - start) * progress;\nconst validateNumber = (value, defaultValue = 0) =>\n  typeof value === 'number' && !isNaN(value) ? value : defaultValue;\nconst validateString = (value, defaultValue = '') =>\n  typeof value === 'string' ? value : defaultValue;\n\n// Enhanced easing functions\nconst EasingFunctions = {\n  linear: t => t,\n  easeIn: t => t * t,\n  easeOut: t => 1 - (1 - t) * (1 - t),\n  easeInOut: t =>\n    t < EASING_CONSTANTS.HALF\n      ? EASING_CONSTANTS.EASE_IN_OUT_MULTIPLIER * t * t\n      : 1 - EASING_CONSTANTS.EASE_IN_OUT_MULTIPLIER * (1 - t) * (1 - t),\n  easeInCubic: t => t * t * t,\n  easeOutCubic: t => 1 - Math.pow(1 - t, EASING_CONSTANTS.CUBIC_POWER),\n  easeInOutCubic: t =>\n    t < EASING_CONSTANTS.HALF\n      ? EASING_CONSTANTS.EASE_IN_OUT_CUBIC_MULTIPLIER * t * t * t\n      : 1 -\n        Math.pow(\n          EASING_CONSTANTS.EASE_NEGATIVE_MULTIPLIER * t +\n            EASING_CONSTANTS.EASE_ADDEND,\n          EASING_CONSTANTS.CUBIC_POWER\n        ) /\n          EASING_CONSTANTS.EASE_DIVISOR,\n  easeInQuart: t => t * t * t * t,\n  easeOutQuart: t => 1 - Math.pow(1 - t, EASING_CONSTANTS.QUARTIC_POWER),\n  easeInOutQuart: t =>\n    t < EASING_CONSTANTS.HALF\n      ? EASING_CONSTANTS.EASE_IN_OUT_QUART_MULTIPLIER * t * t * t * t\n      : 1 -\n        Math.pow(\n          EASING_CONSTANTS.EASE_NEGATIVE_MULTIPLIER * t +\n            EASING_CONSTANTS.EASE_ADDEND,\n          EASING_CONSTANTS.QUARTIC_POWER\n        ) /\n          EASING_CONSTANTS.EASE_DIVISOR,\n  bounce: t => {\n    const n1 = EASING_CONSTANTS.BOUNCE_N1;\n    const d1 = EASING_CONSTANTS.BOUNCE_D1;\n    if (t < EASING_CONSTANTS.BOUNCE_THRESHOLD_1 / d1) return n1 * t * t;\n    if (t < EASING_CONSTANTS.BOUNCE_THRESHOLD_2 / d1)\n      return (\n        n1 * (t -= EASING_CONSTANTS.BOUNCE_OFFSET_1 / d1) * t +\n        EASING_CONSTANTS.BOUNCE_VALUE_1\n      );\n    if (t < EASING_CONSTANTS.BOUNCE_THRESHOLD_3 / d1)\n      return (\n        n1 * (t -= EASING_CONSTANTS.BOUNCE_OFFSET_2 / d1) * t +\n        EASING_CONSTANTS.BOUNCE_VALUE_2\n      );\n    return (\n      n1 * (t -= EASING_CONSTANTS.BOUNCE_OFFSET_3 / d1) * t +\n      EASING_CONSTANTS.BOUNCE_VALUE_3\n    );\n  },\n};\n\n// Base Object Foundation with Enhanced Features\nexport class BaseObject {\n  /**\n   * Creates a new BaseObject instance\n   * @param {Object} options - Configuration options\n   */\n  constructor(options = {}) {\n    // Validate and set core properties\n    this.id = validateString(options.id) || this.generateId();\n    this.x = validateNumber(options.x, 0);\n    this.y = validateNumber(options.y, 0);\n    this.z = validateNumber(options.z, 0);\n    this.width = validateNumber(options.width, OBJECT_CONSTANTS.DEFAULT_WIDTH);\n    this.height = validateNumber(\n      options.height,\n      OBJECT_CONSTANTS.DEFAULT_HEIGHT\n    );\n    this.rotation = validateNumber(options.rotation, 0);\n    this.scaleX = validateNumber(options.scaleX, 1);\n    this.scaleY = validateNumber(options.scaleY, 1);\n    this.alpha = validateNumber(options.alpha, 1);\n    this.visible = options.visible !== false;\n\n    // Interaction states with validation\n    this.isInteractive = options.interactive !== false;\n    this.isDraggable = Boolean(options.draggable);\n    this.isResizable = Boolean(options.resizable);\n    this.isFocusable = options.focusable !== false;\n    this.isSelectable = Boolean(options.selectable);\n\n    // Current states\n    this.isHovered = false;\n    this.isFocused = false;\n    this.isDragging = false;\n    this.isSelected = false;\n    this.isPressed = false;\n    this.isDisabled = Boolean(options.disabled);\n\n    // Styling with validation\n    this.theme = validateString(options.theme, 'default');\n    this.className = validateString(options.className);\n    this.style = { ...options.style };\n\n    // Enhanced accessibility\n    this.ariaLabel = validateString(options.ariaLabel);\n    this.ariaRole = validateString(options.ariaRole, 'generic');\n    this.ariaDescribedBy = validateString(options.ariaDescribedBy);\n    this.ariaExpanded = options.ariaExpanded;\n    this.ariaPressed = options.ariaPressed;\n    this.ariaChecked = options.ariaChecked;\n    this.tabIndex = validateNumber(\n      options.tabIndex,\n      this.isInteractive ? 0 : -1\n    );\n\n    // Enhanced event system\n    this.eventHandlers = new Map();\n    this.setupDefaultHandlers(options);\n\n    // Improved animation support\n    this.animations = new Map();\n    this.transitions = new Map();\n    this.animationQueue = [];\n\n    // Parent/child relationships\n    this.parent = null;\n    this.children = [];\n    this.scene = null;\n\n    // Enhanced layout properties\n    this.layout = {\n      type: validateString(options.layout?.type, 'absolute'),\n      padding: this.validateSpacing(options.layout?.padding),\n      margin: this.validateSpacing(options.layout?.margin),\n      align: validateString(options.layout?.align, 'start'),\n      justify: validateString(options.layout?.justify, 'start'),\n      flexDirection: validateString(options.layout?.flexDirection, 'row'),\n      flexWrap: validateString(options.layout?.flexWrap, 'nowrap'),\n      gap: validateNumber(options.layout?.gap, 0),\n    };\n\n    // Performance tracking\n    this.lastRenderTime = 0;\n    this.renderCount = 0;\n    this.needsRedraw = true;\n\n    // Error handling\n    this.errorHandler = options.errorHandler || this.defaultErrorHandler;\n\n    // Cleanup tracking\n    this.isDestroyed = false;\n    this.cleanupTasks = [];\n  }\n\n  /**\n   * Validates spacing object (margin, padding)\n   * @param {Object|number} spacing\n   * @returns {Object}\n   */\n  validateSpacing(spacing) {\n    if (typeof spacing === 'number') {\n      return { top: spacing, right: spacing, bottom: spacing, left: spacing };\n    }\n    if (spacing && typeof spacing === 'object') {\n      return {\n        top: validateNumber(spacing.top, 0),\n        right: validateNumber(spacing.right, 0),\n        bottom: validateNumber(spacing.bottom, 0),\n        left: validateNumber(spacing.left, 0),\n      };\n    }\n    return { top: 0, right: 0, bottom: 0, left: 0 };\n  }\n\n  /**\n   * Default error handler\n   * @param {Error} error\n   * @param {string} context\n   */\n  defaultErrorHandler(error, context) {\n    logger.error(\n      `Error in ${this.constructor.name} (${this.id}) - ${context}:`,\n      error\n    );\n  }\n\n  /**\n   * Generates a unique ID for the object\n   * @returns {string}\n   */\n  generateId() {\n    return `obj_${Date.now()}_${Math.random().toString(OBJECT_CONSTANTS.ID_BASE).substr(OBJECT_CONSTANTS.ID_SUBSTRING_START, OBJECT_CONSTANTS.ID_LENGTH)}`;\n  } /**\n   * Sets up default event handlers from options\n   * @param {Object} options\n   */\n  setupDefaultHandlers(options) {\n    const events = [\n      'click',\n      'doubleClick',\n      'hover',\n      'hoverEnd',\n      'focus',\n      'blur',\n      'keyDown',\n      'keyUp',\n      'mouseDown',\n      'mouseUp',\n      'mouseMove',\n      'drag',\n      'dragStart',\n      'dragEnd',\n      'drop',\n      'change',\n      'input',\n    ];\n\n    events.forEach(event => {\n      const handlerName = `on${event.charAt(0).toUpperCase()}${event.slice(1)}`;\n      if (typeof options[handlerName] === 'function') {\n        this.on(event, options[handlerName]);\n      }\n    });\n  }\n\n  // Enhanced Event System\n  /**\n   * Adds an event listener\n   * @param {string} event - Event name\n   * @param {Function} handler - Event handler function\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  on(event, handler) {\n    if (typeof handler !== 'function') {\n      this.errorHandler(new Error('Event handler must be a function'), 'on');\n      return this;\n    }\n\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, []);\n    }\n    this.eventHandlers.get(event).push(handler);\n\n    // Add to cleanup tasks\n    this.cleanupTasks.push(() => this.off(event, handler));\n\n    return this;\n  }\n\n  /**\n   * Removes an event listener\n   * @param {string} event - Event name\n   * @param {Function} handler - Event handler function to remove\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  off(event, handler) {\n    if (this.eventHandlers.has(event)) {\n      const handlers = this.eventHandlers.get(event);\n      const index = handlers.indexOf(handler);\n      if (index > -1) {\n        handlers.splice(index, 1);\n        if (handlers.length === 0) {\n          this.eventHandlers.delete(event);\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Emits an event to all registered handlers\n   * @param {string} event - Event name\n   * @param {Object} data - Event data\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  emit(event, data = {}) {\n    if (this.isDestroyed) return this;\n\n    if (this.eventHandlers.has(event)) {\n      const eventData = {\n        ...data,\n        target: this,\n        type: event,\n        timestamp: performance.now(),\n        preventDefault: () => {\n          eventData.defaultPrevented = true;\n        },\n        stopPropagation: () => {\n          eventData.propagationStopped = true;\n        },\n      };\n\n      this.eventHandlers.get(event).forEach(handler => {\n        try {\n          if (!eventData.propagationStopped) {\n            handler.call(this, eventData);\n          }\n        } catch (error) {\n          this.errorHandler(error, `event:${event}`);\n        }\n      });\n    }\n    return this;\n  } // Enhanced Parent/Child Management\n  /**\n   * Adds a child object\n   * @param {BaseObject} child - Child object to add\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  addChild(child) {\n    if (!(child instanceof BaseObject)) {\n      this.errorHandler(\n        new Error('Child must be a BaseObject instance'),\n        'addChild'\n      );\n      return this;\n    }\n\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n\n    child.parent = this;\n    child.scene = this.scene;\n    this.children.push(child);\n\n    this.emit('childAdded', { child });\n    return this;\n  }\n\n  /**\n   * Removes a child object\n   * @param {BaseObject} child - Child object to remove\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  removeChild(child) {\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this.children.splice(index, 1);\n      child.parent = null;\n      child.scene = null;\n      this.emit('childRemoved', { child });\n    }\n    return this;\n  }\n\n  /**\n   * Removes all children\n   * @returns {BaseObject} - Returns this for chaining\n   */\n  removeAllChildren() {\n    while (this.children.length > 0) {\n      this.removeChild(this.children[0]);\n    }\n    return this;\n  }\n\n  /**\n   * Finds a child by ID\n   * @param {string} id - Child ID to find\n   * @returns {BaseObject|null} - Found child or null\n   */\n  findChildById(id) {\n    return this.children.find(child => child.id === id) || null;\n  }\n\n  /**\n   * Finds children by class name\n   * @param {string} className - Class name to search for\n   * @returns {BaseObject[]} - Array of matching children\n   */\n  findChildrenByClass(className) {\n    return this.children.filter(child => child.className.includes(className));\n  }\n\n  // Enhanced Bounds and Collision Detection\n  /**\n   * Checks if a point is within this object's bounds\n   * @param {number} x - X coordinate\n   * @param {number} y - Y coordinate\n   * @param {boolean} useTransform - Whether to apply transformations\n   * @returns {boolean}\n   */\n  containsPoint(x, y, useTransform = false) {\n    if (!this.visible || this.alpha <= 0) return false;\n\n    let bounds = this.getBounds();\n\n    if (\n      useTransform &&\n      (this.rotation !== 0 || this.scaleX !== 1 || this.scaleY !== 1)\n    ) {\n      // For simplicity, use bounding box of transformed object\n      // In a real implementation, you might want more precise collision detection\n      bounds = this.getTransformedBounds();\n    }\n\n    return (\n      x >= bounds.x && x <= bounds.right && y >= bounds.y && y <= bounds.bottom\n    );\n  }\n\n  /**\n   * Gets the bounding box of this object\n   * @returns {Object} - Bounds object with x, y, width, height, right, bottom\n   */\n  getBounds() {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n      right: this.x + this.width,\n      bottom: this.y + this.height,\n      centerX: this.x + this.width / 2,\n      centerY: this.y + this.height / 2,\n    };\n  }\n\n  /**\n   * Gets transformed bounds (approximate)\n   * @returns {Object} - Transformed bounds\n   */\n  getTransformedBounds() {\n    const bounds = this.getBounds();\n\n    // Apply scaling\n    const scaledWidth = bounds.width * Math.abs(this.scaleX);\n    const scaledHeight = bounds.height * Math.abs(this.scaleY);\n\n    // For rotation, use bounding box of rotated rectangle\n    if (this.rotation !== 0) {\n      const cos = Math.abs(Math.cos(this.rotation));\n      const sin = Math.abs(Math.sin(this.rotation));\n      const newWidth = scaledWidth * cos + scaledHeight * sin;\n      const newHeight = scaledWidth * sin + scaledHeight * cos;\n\n      return {\n        x: bounds.centerX - newWidth / 2,\n        y: bounds.centerY - newHeight / 2,\n        width: newWidth,\n        height: newHeight,\n        right: bounds.centerX + newWidth / 2,\n        bottom: bounds.centerY + newHeight / 2,\n        centerX: bounds.centerX,\n        centerY: bounds.centerY,\n      };\n    }\n\n    return {\n      x: bounds.centerX - scaledWidth / 2,\n      y: bounds.centerY - scaledHeight / 2,\n      width: scaledWidth,\n      height: scaledHeight,\n      right: bounds.centerX + scaledWidth / 2,\n      bottom: bounds.centerY + scaledHeight / 2,\n      centerX: bounds.centerX,\n      centerY: bounds.centerY,\n    };\n  }\n\n  /**\n   * Checks if this object intersects with another object\n   * @param {BaseObject} other - Other object to check\n   * @returns {boolean}\n   */\n  intersects(other) {\n    if (!(other instanceof BaseObject)) return false;\n\n    const bounds1 = this.getBounds();\n    const bounds2 = other.getBounds();\n\n    return !(\n      bounds1.right < bounds2.x ||\n      bounds1.x > bounds2.right ||\n      bounds1.bottom < bounds2.y ||\n      bounds1.y > bounds2.bottom\n    );\n  } // Enhanced Input Handling\n  /**\n   * Handles input events with improved error handling and performance\n   * @param {string} eventType - Type of input event\n   * @param {Object} eventData - Event data\n   * @returns {boolean} - Whether the event was handled\n   */\n  handleInput(eventType, eventData) {\n    if (\n      !this.isInteractive ||\n      !this.visible ||\n      this.isDisabled ||\n      this.isDestroyed\n    ) {\n      return false;\n    }\n\n    try {\n      switch (eventType) {\n        case 'mousedown':\n        case 'pointerdown':\n          return this.handlePointerDown(eventData);\n\n        case 'mouseup':\n        case 'pointerup':\n          return this.handlePointerUp(eventData);\n\n        case 'mousemove':\n        case 'pointermove':\n          return this.handlePointerMove(eventData);\n\n        case 'keydown':\n          return this.handleKeyDown(eventData);\n\n        case 'keyup':\n          return this.handleKeyUp(eventData);\n\n        case 'wheel':\n          return this.handleWheel(eventData);\n\n        case 'focus':\n          return this.handleFocus(eventData);\n\n        case 'blur':\n          return this.handleBlur(eventData);\n\n        default:\n          return false;\n      }\n    } catch (error) {\n      this.errorHandler(error, `handleInput:${eventType}`);\n      return false;\n    }\n  }\n\n  handlePointerDown(eventData) {\n    if (this.containsPoint(eventData.x, eventData.y)) {\n      this.isPressed = true;\n      const localData = {\n        ...eventData,\n        localX: eventData.x - this.x,\n        localY: eventData.y - this.y,\n      };\n      this.emit('mouseDown', localData);\n      this.emit('pointerDown', localData);\n      return true;\n    }\n    return false;\n  }\n\n  handlePointerUp(eventData) {\n    if (this.isPressed) {\n      this.isPressed = false;\n      this.emit('mouseUp', eventData);\n      this.emit('pointerUp', eventData);\n\n      if (this.containsPoint(eventData.x, eventData.y)) {\n        this.emit('click', eventData);\n\n        // Double click detection\n        const now = performance.now();\n        if (\n          this.lastClickTime &&\n          now - this.lastClickTime < OBJECT_CONSTANTS.DOUBLE_CLICK_THRESHOLD\n        ) {\n          this.emit('doubleClick', eventData);\n          this.lastClickTime = 0;\n        } else {\n          this.lastClickTime = now;\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  handlePointerMove(eventData) {\n    const wasHovered = this.isHovered;\n    this.isHovered = this.containsPoint(eventData.x, eventData.y);\n\n    const localData = {\n      ...eventData,\n      localX: eventData.x - this.x,\n      localY: eventData.y - this.y,\n    };\n\n    if (this.isHovered && !wasHovered) {\n      this.emit('hover', localData);\n      this.emit('mouseEnter', localData);\n    } else if (!this.isHovered && wasHovered) {\n      this.emit('hoverEnd', localData);\n      this.emit('mouseLeave', localData);\n    }\n\n    if (this.isHovered || this.isDragging) {\n      this.emit('mouseMove', localData);\n      this.emit('pointerMove', localData);\n    }\n\n    // Handle dragging\n    if (this.isDragging) {\n      this.emit('drag', localData);\n      return true;\n    }\n\n    return this.isHovered;\n  }\n\n  handleKeyDown(eventData) {\n    if (this.isFocused) {\n      this.emit('keyDown', eventData);\n\n      // Handle common accessibility keys\n      switch (eventData.key) {\n        case 'Enter':\n        case ' ':\n          if (!eventData.defaultPrevented) {\n            this.emit('click', { ...eventData, synthetic: true });\n          }\n          break;\n        case 'Escape':\n          this.blur();\n          break;\n      }\n      return true;\n    }\n    return false;\n  }\n\n  handleKeyUp(eventData) {\n    if (this.isFocused) {\n      this.emit('keyUp', eventData);\n      return true;\n    }\n    return false;\n  }\n\n  handleWheel(eventData) {\n    if (this.containsPoint(eventData.x, eventData.y)) {\n      this.emit('wheel', eventData);\n      return true;\n    }\n    return false;\n  }\n\n  handleFocus(eventData) {\n    if (!this.isFocused && this.isFocusable) {\n      this.isFocused = true;\n      this.emit('focus', eventData);\n      return true;\n    }\n    return false;\n  }\n\n  handleBlur(eventData) {\n    if (this.isFocused) {\n      this.isFocused = false;\n      this.emit('blur', eventData);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Programmatically focus this object\n   */\n  focus() {\n    if (this.isFocusable && !this.isDisabled && !this.isDestroyed) {\n      this.handleFocus({ synthetic: true });\n    }\n  }\n\n  /**\n   * Programmatically blur this object\n   */\n  blur() {\n    if (this.isFocused) {\n      this.handleBlur({ synthetic: true });\n    }\n  } // Enhanced Animation System\n  /**\n   * Animates a property to a target value\n   * @param {string|Object} property - Property name or object of property/value pairs\n   * @param {number} targetValue - Target value (ignored if property is object)\n   * @param {number} duration - Animation duration in milliseconds\n   * @param {string|Function} easing - Easing function name or custom function\n   * @returns {Promise} - Resolves when animation completes\n   */\n  animate(\n    property,\n    targetValue,\n    duration = DEFAULT_ANIMATION_DURATION,\n    easing = DEFAULT_EASING\n  ) {\n    if (this.isDestroyed) return Promise.resolve();\n\n    // Handle multiple properties\n    if (typeof property === 'object') {\n      const promises = Object.entries(property).map(([prop, value]) =>\n        this.animate(prop, value, targetValue || duration, duration || easing)\n      );\n      return Promise.all(promises);\n    }\n\n    return new Promise((resolve, reject) => {\n      try {\n        const startValue = this[property];\n        if (startValue === undefined) {\n          reject(new Error(`Property '${property}' not found`));\n          return;\n        }\n\n        const startTime = performance.now();\n        const animationId = `${property}_${startTime}`;\n        const easingFn =\n          typeof easing === 'function'\n            ? easing\n            : EasingFunctions[easing] || EasingFunctions.linear;\n\n        const animate = currentTime => {\n          if (this.isDestroyed) {\n            resolve();\n            return false;\n          }\n\n          const elapsed = currentTime - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n          const easedProgress = easingFn(progress);\n\n          this[property] = lerp(startValue, targetValue, easedProgress);\n          this.needsRedraw = true;\n\n          if (progress < 1) {\n            return true; // Continue animation\n          } else {\n            this.animations.delete(animationId);\n            resolve();\n            return false; // Animation complete\n          }\n        };\n\n        this.animations.set(animationId, animate);\n        animationManager.add(animationId, animate);\n\n        // Add to cleanup tasks\n        this.cleanupTasks.push(() => {\n          animationManager.remove(animationId);\n          this.animations.delete(animationId);\n        });\n      } catch (error) {\n        this.errorHandler(error, 'animate');\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Stops all animations for this object\n   */\n  stopAnimations() {\n    for (const animationId of this.animations.keys()) {\n      animationManager.remove(animationId);\n    }\n    this.animations.clear();\n  }\n\n  /**\n   * Queues an animation to run after current animations complete\n   * @param {Function} animationFn - Function that returns an animation promise\n   * @returns {Promise}\n   */\n  queueAnimation(animationFn) {\n    const promise =\n      this.animationQueue.length === 0\n        ? animationFn()\n        : this.animationQueue[this.animationQueue.length - 1].then(animationFn);\n\n    this.animationQueue.push(promise);\n\n    // Clean up completed animations\n    promise.finally(() => {\n      const index = this.animationQueue.indexOf(promise);\n      if (index > -1) {\n        this.animationQueue.splice(index, 1);\n      }\n    });\n\n    return promise;\n  } // Enhanced Lifecycle Methods\n  /**\n   * Updates the object and its children\n   * @param {number} deltaTime - Time since last update in milliseconds\n   */\n  update(deltaTime) {\n    if (this.isDestroyed) return;\n\n    try {\n      // Update animations (handled by AnimationManager)\n\n      // Update children\n      for (let i = this.children.length - 1; i >= 0; i--) {\n        const child = this.children[i];\n        if (child && typeof child.update === 'function') {\n          child.update(deltaTime);\n        }\n      }\n\n      // Custom update logic (override in subclasses)\n      this.onUpdate(deltaTime);\n    } catch (error) {\n      this.errorHandler(error, 'update');\n    }\n  }\n\n  /**\n   * Override in subclasses for custom update logic\n   * @param {number} deltaTime\n   */\n  onUpdate(_deltaTime) {\n    // Override in subclasses\n  }\n\n  /**\n   * Renders the object and its children\n   * @param {Object} renderer - Renderer object\n   */\n  render(renderer) {\n    if (!this.visible || this.alpha <= 0 || this.isDestroyed) return;\n\n    try {\n      this.renderCount++;\n      this.lastRenderTime = performance.now();\n\n      renderer.save();\n\n      // Apply transformations\n      this.applyTransforms(renderer);\n\n      // Render this object\n      this.renderSelf(renderer);\n\n      // Render children\n      this.renderChildren(renderer);\n\n      renderer.restore();\n\n      this.needsRedraw = false;\n    } catch (error) {\n      this.errorHandler(error, 'render');\n      renderer.restore(); // Ensure we restore state even on error\n    }\n  }\n\n  /**\n   * Applies transformations to the renderer\n   * @param {Object} renderer\n   */\n  applyTransforms(renderer) {\n    if (this.x || this.y) {\n      renderer.translate(this.x, this.y);\n    }\n\n    if (this.rotation) {\n      renderer.translate(this.width / 2, this.height / 2);\n      renderer.rotate(this.rotation);\n      renderer.translate(-this.width / 2, -this.height / 2);\n    }\n\n    if (this.scaleX !== 1 || this.scaleY !== 1) {\n      renderer.translate(this.width / 2, this.height / 2);\n      renderer.scale(this.scaleX, this.scaleY);\n      renderer.translate(-this.width / 2, -this.height / 2);\n    }\n\n    if (this.alpha !== 1) {\n      renderer.globalAlpha *= this.alpha;\n    }\n  }\n\n  /**\n   * Renders child objects\n   * @param {Object} renderer\n   */\n  renderChildren(renderer) {\n    for (const child of this.children) {\n      if (child && typeof child.render === 'function') {\n        child.render(renderer);\n      }\n    }\n  }\n\n  /**\n   * Override in subclasses to implement custom rendering\n   * @param {Object} renderer\n   */\n  renderSelf(_renderer) {\n    // Override in subclasses\n  }\n\n  /**\n   * Gets debug information about this object\n   * @returns {Object}\n   */\n  getDebugInfo() {\n    return {\n      id: this.id,\n      className: this.constructor.name,\n      bounds: this.getBounds(),\n      visible: this.visible,\n      interactive: this.isInteractive,\n      children: this.children.length,\n      animations: this.animations.size,\n      renderCount: this.renderCount,\n      lastRenderTime: this.lastRenderTime,\n    };\n  }\n\n  /**\n   * Enhanced cleanup method\n   */\n  destroy() {\n    if (this.isDestroyed) return;\n\n    try {\n      this.isDestroyed = true;\n\n      // Emit destroy event\n      this.emit('destroy');\n\n      // Stop all animations\n      this.stopAnimations();\n\n      // Clear event handlers\n      this.eventHandlers.clear();\n\n      // Run cleanup tasks\n      this.cleanupTasks.forEach(task => {\n        try {\n          task();\n        } catch (error) {\n          this.errorHandler(error, 'cleanup');\n        }\n      });\n      this.cleanupTasks = [];\n\n      // Destroy children\n      while (this.children.length > 0) {\n        const child = this.children[0];\n        this.removeChild(child);\n        if (typeof child.destroy === 'function') {\n          child.destroy();\n        }\n      }\n\n      // Remove from parent\n      if (this.parent) {\n        this.parent.removeChild(this);\n      }\n\n      // Clear references\n      this.parent = null;\n      this.scene = null;\n      this.eventHandlers = null;\n      this.animations = null;\n      this.transitions = null;\n    } catch (error) {\n      this.errorHandler(error, 'destroy');\n    }\n  }\n}\n\n// Ethics Meter Component\nexport class EthicsMeter extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || OBJECT_CONSTANTS.METER_DEFAULT_WIDTH,\n      height: options.height || OBJECT_CONSTANTS.METER_DEFAULT_HEIGHT,\n      ariaRole: 'progressbar',\n      interactive: false,\n    });\n\n    this.category = options.category || 'ethics';\n    this.value = options.value || OBJECT_CONSTANTS.METER_DEFAULT_VALUE;\n    this.minValue = options.minValue || 0;\n    this.maxValue = options.maxValue || OBJECT_CONSTANTS.METER_DEFAULT_MAX;\n    this.label =\n      options.label ||\n      this.category.charAt(0).toUpperCase() + this.category.slice(1);\n    this.showValue = options.showValue !== false;\n    this.showLabel = options.showLabel !== false;\n    this.animated = options.animated !== false;\n\n    // Visual styling\n    this.colors = {\n      excellent: options.colors?.excellent || '#4CAF50',\n      good: options.colors?.good || '#8BC34A',\n      fair: options.colors?.fair || '#FFC107',\n      poor: options.colors?.poor || '#FF9800',\n      critical: options.colors?.critical || '#F44336',\n      background: options.colors?.background || '#E0E0E0',\n      text: options.colors?.text || '#333333',\n    };\n\n    this.thresholds = {\n      excellent:\n        options.thresholds?.excellent ||\n        OBJECT_CONSTANTS.SCORE_THRESHOLD_EXCELLENT,\n      good: options.thresholds?.good || OBJECT_CONSTANTS.SCORE_THRESHOLD_GOOD,\n      fair: options.thresholds?.fair || OBJECT_CONSTANTS.SCORE_THRESHOLD_FAIR,\n      poor: options.thresholds?.poor || OBJECT_CONSTANTS.SCORE_THRESHOLD_POOR,\n    };\n\n    // Animation state\n    this.displayValue = this.value;\n    this.targetValue = this.value;\n\n    // Accessibility\n    this.ariaLabel = `${this.label} ethics score: ${this.value} out of ${this.maxValue}`;\n  }\n\n  updateScore(newValue, reason = '') {\n    const clampedValue = Math.max(\n      this.minValue,\n      Math.min(this.maxValue, newValue)\n    );\n\n    if (this.animated) {\n      this.targetValue = clampedValue;\n      this.animateToTarget();\n    } else {\n      this.setValue(clampedValue);\n    }\n\n    this.emit('scoreUpdate', {\n      oldValue: this.value,\n      newValue: clampedValue,\n      reason,\n      category: this.category,\n    });\n  }\n\n  setValue(value) {\n    this.value = value;\n    this.displayValue = value;\n    this.updateAccessibility();\n  }\n\n  animateToTarget() {\n    if (\n      Math.abs(this.displayValue - this.targetValue) <\n      OBJECT_CONSTANTS.ANIMATION_PRECISION\n    ) {\n      this.setValue(this.targetValue);\n      return;\n    }\n\n    const diff = this.targetValue - this.displayValue;\n    this.displayValue += diff * OBJECT_CONSTANTS.ANIMATION_PRECISION;\n\n    requestAnimationFrame(() => this.animateToTarget());\n  }\n\n  updateAccessibility() {\n    this.ariaLabel = `${this.label} ethics score: ${Math.round(this.displayValue)} out of ${this.maxValue}`;\n  }\n\n  getScoreColor() {\n    const value = this.displayValue;\n    if (value >= this.thresholds.excellent) return this.colors.excellent;\n    if (value >= this.thresholds.good) return this.colors.good;\n    if (value >= this.thresholds.fair) return this.colors.fair;\n    if (value >= this.thresholds.poor) return this.colors.poor;\n    return this.colors.critical;\n  }\n\n  getScoreLabel() {\n    const value = this.displayValue;\n    if (value >= this.thresholds.excellent) return 'Excellent';\n    if (value >= this.thresholds.good) return 'Good';\n    if (value >= this.thresholds.fair) return 'Fair';\n    if (value >= this.thresholds.poor) return 'Poor';\n    return 'Critical';\n  }\n\n  renderSelf(renderer) {\n    const percentage =\n      (this.displayValue - this.minValue) / (this.maxValue - this.minValue);\n    const fillWidth = this.width * percentage;\n\n    if (renderer.type === 'canvas') {\n      // Background track\n      renderer.fillStyle = this.colors.background;\n      renderer.fillRect(\n        0,\n        this.height * OBJECT_CONSTANTS.METER_TRACK_Y_RATIO,\n        this.width,\n        this.height * OBJECT_CONSTANTS.METER_TRACK_HEIGHT_RATIO\n      );\n\n      // Progress fill\n      renderer.fillStyle = this.getScoreColor();\n      renderer.fillRect(\n        0,\n        this.height * OBJECT_CONSTANTS.METER_TRACK_Y_RATIO,\n        fillWidth,\n        this.height * OBJECT_CONSTANTS.METER_TRACK_HEIGHT_RATIO\n      );\n\n      // Focus ring\n      if (this.isFocused) {\n        renderer.strokeStyle = '#2196F3';\n        renderer.lineWidth = OBJECT_CONSTANTS.BORDER_WIDTH;\n        renderer.strokeRect(\n          -OBJECT_CONSTANTS.FOCUS_RING_OFFSET,\n          this.height * OBJECT_CONSTANTS.METER_TRACK_Y_RATIO -\n            OBJECT_CONSTANTS.FOCUS_RING_OFFSET,\n          this.width + OBJECT_CONSTANTS.FOCUS_RING_BUTTON_OFFSET,\n          this.height * OBJECT_CONSTANTS.METER_TRACK_HEIGHT_RATIO +\n            OBJECT_CONSTANTS.FOCUS_RING_BUTTON_OFFSET\n        );\n      }\n\n      // Label\n      if (this.showLabel) {\n        renderer.fillStyle = this.colors.text;\n        renderer.font = '14px Arial';\n        renderer.textAlign = 'left';\n        renderer.fillText(\n          this.label,\n          0,\n          this.height * OBJECT_CONSTANTS.METER_LABEL_Y_RATIO\n        );\n      }\n\n      // Value display\n      if (this.showValue) {\n        renderer.fillStyle = this.colors.text;\n        renderer.font = '12px Arial';\n        renderer.textAlign = 'right';\n        const valueText = `${Math.round(this.displayValue)}/${this.maxValue}`;\n        renderer.fillText(\n          valueText,\n          this.width,\n          this.height * OBJECT_CONSTANTS.METER_LABEL_Y_RATIO\n        );\n\n        // Score label\n        renderer.font = '10px Arial';\n        renderer.fillText(\n          this.getScoreLabel(),\n          this.width,\n          this.height * OBJECT_CONSTANTS.METER_VALUE_LABEL_Y_RATIO\n        );\n      }\n    }\n  }\n}\n\n// Enhanced Button Component\nexport class InteractiveButton extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || OBJECT_CONSTANTS.BUTTON_DEFAULT_WIDTH,\n      height: options.height || OBJECT_CONSTANTS.BUTTON_DEFAULT_HEIGHT,\n      ariaRole: 'button',\n    });\n\n    this.text = options.text || 'Button';\n    this.icon = options.icon || null;\n    this.variant = options.variant || 'primary';\n    this.size = options.size || 'medium';\n\n    // Visual states\n    this.colors = this.getColorScheme();\n    this.currentColor = this.colors.normal;\n\n    // Button state\n    this.isLoading = false;\n    this.loadingText = options.loadingText || 'Loading...';\n\n    // Ripple effect\n    this.ripples = [];\n\n    this.setupEventHandlers();\n  }\n\n  getColorScheme() {\n    const schemes = {\n      primary: {\n        normal: { bg: '#2196F3', text: '#FFFFFF', border: '#2196F3' },\n        hover: { bg: '#1976D2', text: '#FFFFFF', border: '#1976D2' },\n        pressed: { bg: '#0D47A1', text: '#FFFFFF', border: '#0D47A1' },\n        disabled: { bg: '#CCCCCC', text: '#666666', border: '#CCCCCC' },\n      },\n      secondary: {\n        normal: { bg: '#757575', text: '#FFFFFF', border: '#757575' },\n        hover: { bg: '#616161', text: '#FFFFFF', border: '#616161' },\n        pressed: { bg: '#424242', text: '#FFFFFF', border: '#424242' },\n        disabled: { bg: '#CCCCCC', text: '#666666', border: '#CCCCCC' },\n      },\n      outline: {\n        normal: { bg: 'transparent', text: '#2196F3', border: '#2196F3' },\n        hover: { bg: '#E3F2FD', text: '#1976D2', border: '#1976D2' },\n        pressed: { bg: '#BBDEFB', text: '#0D47A1', border: '#0D47A1' },\n        disabled: { bg: 'transparent', text: '#CCCCCC', border: '#CCCCCC' },\n      },\n    };\n\n    return schemes[this.variant] || schemes.primary;\n  }\n\n  setupEventHandlers() {\n    this.on('hover', () => {\n      if (!this.isDisabled && !this.isPressed) {\n        this.currentColor = this.colors.hover;\n        this.animate(\n          'scaleX',\n          OBJECT_CONSTANTS.BUTTON_HOVER_SCALE,\n          OBJECT_CONSTANTS.BUTTON_SCALE_DURATION\n        );\n        this.animate(\n          'scaleY',\n          OBJECT_CONSTANTS.BUTTON_HOVER_SCALE,\n          OBJECT_CONSTANTS.BUTTON_SCALE_DURATION\n        );\n      }\n    });\n\n    this.on('hoverEnd', () => {\n      if (!this.isDisabled && !this.isPressed) {\n        this.currentColor = this.colors.normal;\n        this.animate('scaleX', 1, OBJECT_CONSTANTS.BUTTON_SCALE_DURATION);\n        this.animate('scaleY', 1, OBJECT_CONSTANTS.BUTTON_SCALE_DURATION);\n      }\n    });\n\n    this.on('mouseDown', event => {\n      if (!this.isDisabled) {\n        this.isPressed = true;\n        this.currentColor = this.colors.pressed;\n        this.createRipple(event.localX, event.localY);\n      }\n    });\n\n    this.on('mouseUp', () => {\n      if (!this.isDisabled) {\n        this.isPressed = false;\n        this.currentColor = this.isHovered\n          ? this.colors.hover\n          : this.colors.normal;\n      }\n    });\n\n    this.on('keyDown', event => {\n      if ((event.key === 'Enter' || event.key === ' ') && !this.isDisabled) {\n        event.preventDefault();\n        this.handleClick();\n      }\n    });\n  }\n\n  createRipple(x, y) {\n    const ripple = {\n      x: x || this.width / 2,\n      y: y || this.height / 2,\n      radius: 0,\n      maxRadius: Math.max(this.width, this.height),\n      alpha: OBJECT_CONSTANTS.RIPPLE_ALPHA,\n      startTime: performance.now(),\n    };\n\n    this.ripples.push(ripple);\n\n    setTimeout(() => {\n      const index = this.ripples.indexOf(ripple);\n      if (index > -1) {\n        this.ripples.splice(index, 1);\n      }\n    }, OBJECT_CONSTANTS.RIPPLE_DURATION);\n  }\n\n  handleClick() {\n    if (!this.isDisabled && !this.isLoading) {\n      this.emit('click', { button: this });\n    }\n  }\n\n  setLoading(loading, text = null) {\n    this.isLoading = loading;\n    if (text) this.loadingText = text;\n    this.isDisabled = loading;\n  }\n\n  updateRipples() {\n    const currentTime = performance.now();\n    this.ripples.forEach(ripple => {\n      const elapsed = currentTime - ripple.startTime;\n      const progress = Math.min(elapsed / OBJECT_CONSTANTS.RIPPLE_DURATION, 1);\n\n      ripple.radius = ripple.maxRadius * progress;\n      ripple.alpha = OBJECT_CONSTANTS.RIPPLE_ALPHA * (1 - progress);\n    });\n  }\n\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    this.updateRipples();\n\n    const color = this.isDisabled ? this.colors.disabled : this.currentColor;\n\n    // Button background\n    if (color.bg !== 'transparent') {\n      renderer.fillStyle = color.bg;\n      renderer.fillRect(0, 0, this.width, this.height);\n    }\n\n    // Button border\n    if (color.border) {\n      renderer.strokeStyle = color.border;\n      renderer.lineWidth = OBJECT_CONSTANTS.BORDER_WIDTH;\n      renderer.strokeRect(0, 0, this.width, this.height);\n    }\n\n    // Ripple effects\n    this.ripples.forEach(ripple => {\n      renderer.save();\n      renderer.globalAlpha = ripple.alpha;\n      renderer.fillStyle = '#FFFFFF';\n      renderer.beginPath();\n      renderer.arc(\n        ripple.x,\n        ripple.y,\n        ripple.radius,\n        0,\n        Math.PI * OBJECT_CONSTANTS.LOADING_SPINNER_SPEED\n      );\n      renderer.fill();\n      renderer.restore();\n    });\n\n    // Focus ring\n    if (this.isFocused) {\n      renderer.strokeStyle = '#FF9800';\n      renderer.lineWidth = OBJECT_CONSTANTS.THICK_BORDER_WIDTH;\n      renderer.strokeRect(\n        -OBJECT_CONSTANTS.FOCUS_RING_OFFSET,\n        -OBJECT_CONSTANTS.FOCUS_RING_OFFSET,\n        this.width + OBJECT_CONSTANTS.FOCUS_RING_BUTTON_OFFSET,\n        this.height + OBJECT_CONSTANTS.FOCUS_RING_BUTTON_OFFSET\n      );\n    }\n\n    // Button text\n    const displayText = this.isLoading ? this.loadingText : this.text;\n    renderer.fillStyle = color.text;\n    renderer.font = this.getFontSize();\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n\n    const textX = this.width / 2;\n    const textY = this.height / 2;\n\n    // Loading spinner\n    if (this.isLoading) {\n      this.renderLoadingSpinner(\n        renderer,\n        textX - OBJECT_CONSTANTS.BUTTON_SPINNER_OFFSET,\n        textY\n      );\n      renderer.fillText(\n        displayText,\n        textX + OBJECT_CONSTANTS.BUTTON_TEXT_OFFSET,\n        textY\n      );\n    } else {\n      renderer.fillText(displayText, textX, textY);\n    }\n  }\n\n  getFontSize() {\n    const sizes = {\n      small: '12px Arial',\n      medium: '14px Arial',\n      large: '16px Arial',\n    };\n    return sizes[this.size] || sizes.medium;\n  }\n\n  renderLoadingSpinner(renderer, x, y) {\n    const time = performance.now() / 1000;\n    const rotation = time * Math.PI * OBJECT_CONSTANTS.LOADING_SPINNER_SPEED;\n\n    renderer.save();\n    renderer.translate(x, y);\n    renderer.rotate(rotation);\n\n    renderer.strokeStyle = this.currentColor.text;\n    renderer.lineWidth = OBJECT_CONSTANTS.SPINNER_LINE_WIDTH;\n    renderer.beginPath();\n    renderer.arc(\n      0,\n      0,\n      OBJECT_CONSTANTS.SPINNER_RADIUS,\n      0,\n      Math.PI * OBJECT_CONSTANTS.LOADING_SPINNER_ARC\n    );\n    renderer.stroke();\n\n    renderer.restore();\n  }\n}\n\n// Enhanced Slider Component\nexport class InteractiveSlider extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || OBJECT_CONSTANTS.SLIDER_DEFAULT_WIDTH,\n      height: options.height || OBJECT_CONSTANTS.SLIDER_DEFAULT_HEIGHT,\n      ariaRole: 'slider',\n      draggable: true,\n    });\n\n    this.min = options.min || 0;\n    this.max = options.max || OBJECT_CONSTANTS.SLIDER_DEFAULT_MAX;\n    this.value = Math.max(\n      this.min,\n      Math.min(this.max, options.value || OBJECT_CONSTANTS.SLIDER_DEFAULT_VALUE)\n    );\n    this.step = options.step || OBJECT_CONSTANTS.SLIDER_DEFAULT_STEP;\n    this.label = options.label || '';\n    this.unit = options.unit || '';\n\n    // Visual properties\n    this.trackHeight =\n      options.trackHeight || OBJECT_CONSTANTS.SLIDER_DEFAULT_TRACK_HEIGHT;\n    this.handleSize =\n      options.handleSize || OBJECT_CONSTANTS.SLIDER_DEFAULT_HANDLE_SIZE;\n    this.showValue = options.showValue !== false;\n    this.showLabel = options.showLabel !== false;\n\n    // Colors\n    this.colors = {\n      track: options.colors?.track || '#E0E0E0',\n      fill: options.colors?.fill || '#2196F3',\n      handle: options.colors?.handle || '#FFFFFF',\n      handleBorder: options.colors?.handleBorder || '#2196F3',\n      text: options.colors?.text || '#333333',\n    };\n\n    // State\n    this.isDraggingHandle = false;\n    this.dragOffset = 0;\n    this.hoverHandle = false;\n\n    this.setupEventHandlers();\n    this.updateAccessibility();\n  }\n\n  setupEventHandlers() {\n    this.on('mouseDown', event => {\n      const handleX = this.getHandlePosition();\n      const clickX = event.localX;\n\n      if (Math.abs(clickX - handleX) <= this.handleSize / 2) {\n        this.isDraggingHandle = true;\n        this.dragOffset = clickX - handleX;\n        this.emit('dragStart', { value: this.value });\n      } else {\n        this.jumpToPosition(clickX);\n      }\n    });\n\n    this.on('hover', event => {\n      const handleX = this.getHandlePosition();\n      this.hoverHandle =\n        Math.abs(event.localX - handleX) <= this.handleSize / 2;\n    });\n\n    this.on('keyDown', event => {\n      let newValue = this.value;\n\n      switch (event.key) {\n        case 'ArrowLeft':\n        case 'ArrowDown':\n          newValue = Math.max(this.min, this.value - this.step);\n          break;\n        case 'ArrowRight':\n        case 'ArrowUp':\n          newValue = Math.min(this.max, this.value + this.step);\n          break;\n        case 'Home':\n          newValue = this.min;\n          break;\n        case 'End':\n          newValue = this.max;\n          break;\n        default:\n          return;\n      }\n\n      if (newValue !== this.value) {\n        event.preventDefault();\n        this.setValue(newValue, true);\n      }\n    });\n  }\n\n  jumpToPosition(x) {\n    const trackStart = this.handleSize / 2;\n    const trackWidth = this.width - this.handleSize;\n    const percentage = Math.max(0, Math.min(1, (x - trackStart) / trackWidth));\n    const newValue = this.min + (this.max - this.min) * percentage;\n    this.setValue(this.snapToStep(newValue), true);\n  }\n\n  snapToStep(value) {\n    return Math.round((value - this.min) / this.step) * this.step + this.min;\n  }\n\n  setValue(newValue, emitChange = false) {\n    const clampedValue = Math.max(this.min, Math.min(this.max, newValue));\n    const oldValue = this.value;\n\n    this.value = clampedValue;\n    this.updateAccessibility();\n\n    if (emitChange && oldValue !== clampedValue) {\n      this.emit('change', {\n        oldValue,\n        newValue: clampedValue,\n        percentage: (clampedValue - this.min) / (this.max - this.min),\n      });\n    }\n  }\n\n  updateAccessibility() {\n    const percentage = Math.round(\n      ((this.value - this.min) / (this.max - this.min)) * 100\n    );\n    this.ariaLabel = `${this.label || 'Slider'}: ${this.value}${this.unit} (${percentage}%)`;\n  }\n\n  getHandlePosition() {\n    const trackStart = this.handleSize / 2;\n    const trackWidth = this.width - this.handleSize;\n    const percentage = (this.value - this.min) / (this.max - this.min);\n    return trackStart + trackWidth * percentage;\n  }\n\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    const trackY = this.height / 2 - this.trackHeight / 2;\n    const handleX = this.getHandlePosition();\n    const handleY = this.height / 2;\n\n    // Label\n    if (this.showLabel && this.label) {\n      renderer.fillStyle = this.colors.text;\n      renderer.font = '12px Arial';\n      renderer.textAlign = 'left';\n      renderer.fillText(this.label, 0, OBJECT_CONSTANTS.SLIDER_LABEL_Y_OFFSET);\n    }\n\n    // Track background\n    renderer.fillStyle = this.colors.track;\n    renderer.fillRect(\n      this.handleSize / 2,\n      trackY,\n      this.width - this.handleSize,\n      this.trackHeight\n    );\n\n    // Track fill\n    const fillWidth = handleX - this.handleSize / 2;\n    renderer.fillStyle = this.colors.fill;\n    renderer.fillRect(this.handleSize / 2, trackY, fillWidth, this.trackHeight);\n\n    // Handle\n    renderer.fillStyle = this.colors.handle;\n    renderer.beginPath();\n    renderer.arc(handleX, handleY, this.handleSize / 2, 0, Math.PI * 2);\n    renderer.fill();\n\n    // Handle border\n    renderer.strokeStyle = this.colors.handleBorder;\n    renderer.lineWidth =\n      this.hoverHandle || this.isDraggingHandle\n        ? OBJECT_CONSTANTS.THICK_BORDER_WIDTH\n        : OBJECT_CONSTANTS.BORDER_WIDTH;\n    renderer.stroke();\n\n    // Focus ring\n    if (this.isFocused) {\n      renderer.strokeStyle = '#FF9800';\n      renderer.lineWidth = OBJECT_CONSTANTS.BORDER_WIDTH;\n      renderer.beginPath();\n      renderer.arc(\n        handleX,\n        handleY,\n        this.handleSize / 2 + OBJECT_CONSTANTS.FOCUS_RING_EXTRA,\n        0,\n        Math.PI * OBJECT_CONSTANTS.LOADING_SPINNER_SPEED\n      );\n      renderer.stroke();\n    }\n\n    // Value display\n    if (this.showValue) {\n      renderer.fillStyle = this.colors.text;\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'center';\n      const valueText = `${Math.round(this.value)}${this.unit}`;\n      renderer.fillText(\n        valueText,\n        handleX,\n        this.height + OBJECT_CONSTANTS.SLIDER_VALUE_Y_OFFSET\n      );\n    }\n  }\n}\n\n// Enhanced Scene Management\nexport class Scene extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      interactive: false,\n    });\n\n    this.camera = {\n      x: 0,\n      y: 0,\n      zoom: 1,\n    };\n\n    this.layers = new Map();\n    this.defaultLayer = 'default';\n\n    // Performance monitoring\n    this.frameCount = 0;\n    this.lastFrameTime = 0;\n    this.fps = 0;\n    this.fpsUpdateInterval = OBJECT_CONSTANTS.FPS_UPDATE_INTERVAL;\n    this.lastFpsUpdate = 0;\n  }\n\n  addToLayer(object, layerName = this.defaultLayer) {\n    if (!this.layers.has(layerName)) {\n      this.layers.set(layerName, []);\n    }\n    this.layers.get(layerName).push(object);\n    object.scene = this;\n  }\n\n  removeFromLayer(object, layerName = this.defaultLayer) {\n    if (this.layers.has(layerName)) {\n      const layer = this.layers.get(layerName);\n      const index = layer.indexOf(object);\n      if (index > -1) {\n        layer.splice(index, 1);\n        object.scene = null;\n      }\n    }\n  }\n\n  render(renderer) {\n    const currentTime = performance.now();\n\n    // Update FPS\n    this.frameCount++;\n    if (currentTime - this.lastFpsUpdate >= this.fpsUpdateInterval) {\n      this.fps = this.frameCount;\n      this.frameCount = 0;\n      this.lastFpsUpdate = currentTime;\n    }\n\n    renderer.save();\n\n    // Apply camera transform\n    renderer.translate(-this.camera.x, -this.camera.y);\n    renderer.scale(this.camera.zoom, this.camera.zoom);\n\n    // Render layers in order\n    for (const [, objects] of this.layers) {\n      objects.forEach(object => {\n        if (object.render) {\n          object.render(renderer);\n        }\n      });\n    }\n\n    renderer.restore();\n\n    this.lastFrameTime = currentTime;\n  }\n}\n\n// Export utility functions and classes\nexport {\n  animationManager,\n  EasingFunctions,\n  clamp,\n  lerp,\n  validateNumber,\n  validateString,\n  TOUCH_TARGET_SIZE,\n  FOCUS_RING_WIDTH,\n  DEFAULT_ANIMATION_DURATION,\n  DEFAULT_EASING,\n};\n","/**\n * Advanced UI Components - Specialized interactive components for SimulateAI\n * Modern, accessible, and performant UI components\n *\n * @version 2.0.0\n * @author SimulateAI Team\n * @license Apache-2.0\n */\n\nimport {\n  BaseObject,\n  clamp,\n  validateNumber,\n  validateString,\n  FOCUS_RING_WIDTH,\n} from './enhanced-objects.js';\nimport logger from '../utils/logger.js';\n\n// Constants to avoid magic numbers\nconst COMPONENT_CONSTANTS = {\n  // Modal defaults\n  DEFAULT_MODAL_WIDTH: 400,\n  DEFAULT_MODAL_HEIGHT: 300,\n  MODAL_SHADOW_OFFSET: 4,\n  MODAL_CLOSE_BUTTON_SIZE: 24,\n  MODAL_CLOSE_BUTTON_PADDING: 6,\n\n  // Button defaults\n  DEFAULT_BUTTON_WIDTH: 100,\n  DEFAULT_BUTTON_HEIGHT: 36,\n  CLOSE_BUTTON_X_PADDING: 6,\n\n  // Navigation menu defaults\n  DEFAULT_NAV_WIDTH: 250,\n  DEFAULT_NAV_HEIGHT: 400,\n  ANIMATION_STAGGER_OFFSET: 50,\n\n  // Text and layout\n  DEFAULT_LINE_HEIGHT: 20,\n  ICON_WIDTH: 25,\n  BADGE_WIDTH: 30,\n  BADGE_MIN_WIDTH: 20,\n  BADGE_CHAR_WIDTH: 8,\n  BADGE_PADDING: 5,\n  BADGE_HEIGHT: 16,\n  SUBMENU_INDICATOR_SIZE: 15,\n  SUBMENU_ARROW_SIZE: 6,\n\n  // Animation values\n  SELECTION_SCALE: 1.05,\n  FOCUS_SCALE: 1.02,\n  ANIMATION_FAST: 100,\n  ANIMATION_NORMAL: 150,\n  PERFORMANCE_THRESHOLD: 16, // 1 frame at 60fps\n\n  // Color calculations\n  RANDOM_BASE: 36,\n  RANDOM_LENGTH: 9,\n  COLOR_SUBSTR_START: 4,\n  COLOR_SUBSTR_LENGTH: 2,\n  RGB_MAX: 255,\n  LUMINANCE_THRESHOLD: 0.5,\n  LUMINANCE_RED: 0.299,\n  LUMINANCE_GREEN: 0.587,\n  LUMINANCE_BLUE: 0.114,\n\n  // Chart defaults\n  DEFAULT_CHART_WIDTH: 400,\n  DEFAULT_CHART_HEIGHT: 300,\n  CHART_PADDING_RATIO: 0.1,\n  CHART_RADIUS_MARGIN: 20,\n  CHART_LEGEND_WIDTH: 150,\n  CHART_SUBTITLE_Y: 35,\n  CHART_POINT_RADIUS: 4,\n  CHART_OPACITY: 0.3,\n  CHART_BAR_WIDTH_RATIO: 0.8,\n  CHART_LABEL_RADIUS_RATIO: 0.7,\n  CHART_SCATTER_POINT_RADIUS: 5,\n  CHART_LEGEND_ITEM_HEIGHT: 20,\n  CHART_LEGEND_INDICATOR_SIZE: 15,\n  CHART_LEGEND_INDICATOR_HEIGHT: 10,\n  CHART_LEGEND_TEXT_OFFSET: 35,\n  CHART_TOOLTIP_HEIGHT: 20,\n  CHART_TOOLTIP_RADIUS: 4,\n\n  // Form defaults\n  DEFAULT_FORM_WIDTH: 200,\n  DEFAULT_FORM_HEIGHT: 40,\n  VALIDATION_DEBOUNCE_TIME: 300,\n  FORM_LABEL_HEIGHT: 20,\n  FORM_HELP_HEIGHT: 20,\n  FORM_MESSAGE_Y_OFFSET: 15,\n  FORM_COUNT_Y_OFFSET: 30,\n  FORM_CURSOR_OFFSET: 4,\n  CHECKBOX_SIZE: 18,\n  CHECKBOX_CHECK_MARGIN: 4,\n  CHECKBOX_CHECK_OFFSET: 6,\n  RADIO_CHECK_RADIUS_DIVISOR: 4,\n\n  // Tooltip defaults\n  TOOLTIP_SHOW_DELAY: 500,\n  TOOLTIP_HIDE_DELAY: 200,\n  TOOLTIP_MAX_WIDTH: 250,\n  TOOLTIP_BASELINE_SIZE: 16,\n  TOOLTIP_ANIMATION_IN: 200,\n  TOOLTIP_ANIMATION_OUT: 150,\n  TOOLTIP_SLIDE_OFFSET: 10,\n\n  // Animation and alignment constants\n  ALIGNMENT_CENTER_BASE: 50,\n  ANIMATION_FADE_IN: 200,\n  ANIMATION_SCALE_IN: 200,\n  ANIMATION_SLIDE_IN: 200,\n};\n\n// Easing functions for animations\nconst EASING_FUNCTIONS = {\n  EASE_OUT_CUBIC: 'easeOutCubic',\n  EASE_OUT_QUAD: 'easeOutQuad',\n  EASE_OUT_BACK: 'easeOutBack',\n};\n\n// Enhanced constants for UI components\nconst UI_CONSTANTS = {\n  MODAL_Z_INDEX: 2000,\n  TOOLTIP_Z_INDEX: 3000,\n  DROPDOWN_Z_INDEX: 1500,\n  ANIMATION_DURATION: {\n    FAST: 150,\n    NORMAL: 300,\n    SLOW: 500,\n  },\n  COLORS: {\n    PRIMARY: '#2196F3',\n    SECONDARY: '#757575',\n    SUCCESS: '#4CAF50',\n    WARNING: '#FF9800',\n    ERROR: '#F44336',\n    WHITE: '#FFFFFF',\n    BLACK: '#000000',\n    GRAY_50: '#FAFAFA',\n    GRAY_100: '#F5F5F5',\n    GRAY_200: '#EEEEEE',\n    GRAY_300: '#E0E0E0',\n    GRAY_400: '#BDBDBD',\n    GRAY_500: '#9E9E9E',\n    GRAY_600: '#757575',\n    GRAY_700: '#616161',\n    GRAY_800: '#424242',\n    GRAY_900: '#212121',\n  },\n  SPACING: {\n    XS: 4,\n    SM: 8,\n    MD: 16,\n    LG: 24,\n    XL: 32,\n    XXL: 48,\n  },\n  BORDER_RADIUS: {\n    SM: 4,\n    MD: 8,\n    LG: 12,\n    XL: 16,\n  },\n};\n\n// Utility functions for UI components\nconst UIUtils = {\n  /**\n   * Debug-aware logging utility\n   * @param {string} level - 'info', 'warn', 'error'\n   * @param {string} message\n   * @param {*} data\n   */\n  debugLog(level, message, data = null) {\n    if (typeof window !== 'undefined' && window.DEBUG_MODE) {\n      if (data) {\n        logger[level](`[UI] ${message}:`, data);\n      } else {\n        logger[level](`[UI] ${message}`);\n      }\n    }\n  },\n\n  /**\n   * Creates a unique ID for UI components\n   * @param {string} prefix\n   * @returns {string}\n   */\n  generateId(prefix = 'ui') {\n    return `${prefix}_${Date.now()}_${Math.random().toString(COMPONENT_CONSTANTS.RANDOM_BASE).substr(2, COMPONENT_CONSTANTS.RANDOM_LENGTH)}`;\n  },\n\n  /**\n   * Calculates optimal text color based on background\n   * @param {string} backgroundColor\n   * @returns {string}\n   */\n  getContrastColor(backgroundColor) {\n    // Simple contrast calculation\n    const color = backgroundColor.replace('#', '');\n    const r = parseInt(color.substr(0, 2), 16);\n    const g = parseInt(color.substr(2, 2), 16);\n    const b = parseInt(\n      color.substr(\n        COMPONENT_CONSTANTS.COLOR_SUBSTR_START,\n        COMPONENT_CONSTANTS.COLOR_SUBSTR_LENGTH\n      ),\n      16\n    );\n    const luminance =\n      (COMPONENT_CONSTANTS.LUMINANCE_RED * r +\n        COMPONENT_CONSTANTS.LUMINANCE_GREEN * g +\n        COMPONENT_CONSTANTS.LUMINANCE_BLUE * b) /\n      COMPONENT_CONSTANTS.RGB_MAX;\n    return luminance > COMPONENT_CONSTANTS.LUMINANCE_THRESHOLD\n      ? UI_CONSTANTS.COLORS.BLACK\n      : UI_CONSTANTS.COLORS.WHITE;\n  },\n\n  /**\n   * Measures text dimensions\n   * @param {string} text\n   * @param {string} font\n   * @param {CanvasRenderingContext2D} renderer\n   * @returns {Object}\n   */\n  measureText(text, font, renderer) {\n    renderer.save();\n    renderer.font = font;\n    const metrics = renderer.measureText(text);\n    renderer.restore();\n\n    return {\n      width: metrics.width,\n      height: parseInt(font.match(/\\d+/)[0]), // Extract font size as approximation\n    };\n  },\n\n  /**\n   * Wraps text to fit within specified width\n   * @param {string} text\n   * @param {number} maxWidth\n   * @param {string} font\n   * @param {CanvasRenderingContext2D} renderer\n   * @returns {string[]}\n   */\n  wrapText(text, maxWidth, font, renderer) {\n    renderer.save();\n    renderer.font = font;\n\n    const words = text.split(' ');\n    const lines = [];\n    let currentLine = '';\n\n    for (const word of words) {\n      const testLine = currentLine + (currentLine ? ' ' : '') + word;\n      const metrics = renderer.measureText(testLine);\n\n      if (metrics.width > maxWidth && currentLine) {\n        lines.push(currentLine);\n        currentLine = word;\n      } else {\n        currentLine = testLine;\n      }\n    }\n\n    if (currentLine) {\n      lines.push(currentLine);\n    }\n\n    renderer.restore();\n    return lines;\n  },\n};\n\n// ===== ENHANCED MODAL DIALOG SYSTEM =====\nclass ModalDialog extends BaseObject {\n  /**\n   * Creates a new modal dialog\n   * @param {Object} options - Configuration options\n   */\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: validateNumber(\n        options.width,\n        COMPONENT_CONSTANTS.DEFAULT_MODAL_WIDTH\n      ),\n      height: validateNumber(\n        options.height,\n        COMPONENT_CONSTANTS.DEFAULT_MODAL_HEIGHT\n      ),\n      ariaRole: 'dialog',\n      ariaModal: true,\n      tabIndex: -1,\n    });\n\n    // Content properties\n    this.title = validateString(options.title, 'Dialog');\n    this.content = validateString(options.content);\n    this.buttons = Array.isArray(options.buttons)\n      ? options.buttons\n      : [{ text: 'OK', action: 'close' }];\n\n    // Behavior properties\n    this.closable = options.closable !== false;\n    this.backdrop = options.backdrop !== false;\n    this.animation = validateString(options.animation, 'fade');\n    this.autoFocus = options.autoFocus !== false;\n    this.trapFocus = options.trapFocus !== false;\n    this.closeOnEscape = options.closeOnEscape !== false;\n    this.closeOnBackdrop = options.closeOnBackdrop !== false;\n\n    // State management\n    this.isOpen = false;\n    this.isAnimating = false;\n    this.previousFocus = null;\n    this.firstFocusableElement = null;\n    this.lastFocusableElement = null;\n\n    // Visual properties\n    this.zIndex = UI_CONSTANTS.MODAL_Z_INDEX;\n    this.backdropColor = options.backdropColor || 'rgba(0, 0, 0, 0.5)';\n    this.borderRadius = UI_CONSTANTS.BORDER_RADIUS.LG;\n    this.padding = UI_CONSTANTS.SPACING.LG;\n\n    // Layout sections\n    this.headerHeight = 60;\n    this.footerHeight = 60;\n    this.bodyHeight = this.height - this.headerHeight - this.footerHeight;\n\n    // Button management\n    this.buttonElements = [];\n    this.focusedButtonIndex = 0;\n\n    this.setupModal();\n  }\n\n  /**\n   * Initializes the modal component\n   */\n  setupModal() {\n    // Set up accessibility attributes\n    this.ariaLabel = this.title;\n    this.ariaLabelledBy = `modal-title-${this.id}`;\n    this.ariaDescribedBy = `modal-body-${this.id}`;\n\n    // Set up event handlers\n    this.setupEventHandlers();\n\n    // Prepare button data\n    this.prepareButtons();\n\n    // Initially hide the modal\n    this.alpha = 0;\n    this.visible = false;\n  }\n\n  /**\n   * Sets up event handlers for the modal\n   */\n  setupEventHandlers() {\n    // Keyboard handling\n    this.on('keyDown', event => this.handleKeyDown(event));\n\n    // Mouse handling for backdrop\n    this.on('click', event => this.handleBackdropClick(event));\n\n    // Handle animation completion\n    this.on('animationComplete', () => {\n      this.isAnimating = false;\n    });\n  }\n\n  /**\n   * Prepares button configurations\n   */\n  prepareButtons() {\n    this.buttonElements = this.buttons.map((buttonConfig, index) => ({\n      ...buttonConfig,\n      id: `modal-btn-${this.id}-${index}`,\n      x: 0,\n      y: 0,\n      width: COMPONENT_CONSTANTS.DEFAULT_BUTTON_WIDTH,\n      height: COMPONENT_CONSTANTS.DEFAULT_BUTTON_HEIGHT,\n      isFocused: index === 0,\n      isHovered: false,\n      isPressed: false,\n    }));\n  }\n\n  /**\n   * Opens the modal with animation\n   * @returns {Promise}\n   */\n  async open() {\n    if (this.isOpen || this.isAnimating) return;\n\n    try {\n      this.isAnimating = true;\n\n      // Store previously focused element\n      this.previousFocus = document.activeElement;\n\n      // Show modal\n      this.visible = true;\n      this.isOpen = true;\n\n      // Calculate center position\n      this.centerOnScreen();\n\n      // Animate in based on animation type\n      await this.animateIn();\n\n      // Set up focus management\n      if (this.autoFocus) {\n        this.focusFirstElement();\n      }\n\n      // Emit open event\n      this.emit('open', { modal: this });\n    } catch (error) {\n      this.errorHandler(error, 'open');\n    } finally {\n      this.isAnimating = false;\n    }\n  }\n\n  /**\n   * Closes the modal with animation\n   * @returns {Promise}\n   */\n  async close() {\n    if (!this.isOpen || this.isAnimating) return;\n\n    try {\n      this.isAnimating = true;\n\n      // Animate out\n      await this.animateOut();\n\n      // Hide modal\n      this.visible = false;\n      this.isOpen = false;\n\n      // Restore focus\n      if (\n        this.previousFocus &&\n        typeof this.previousFocus.focus === 'function'\n      ) {\n        this.previousFocus.focus();\n      }\n\n      // Emit close event\n      this.emit('close', { modal: this });\n    } catch (error) {\n      this.errorHandler(error, 'close');\n    } finally {\n      this.isAnimating = false;\n    }\n  }\n\n  /**\n   * Centers the modal on screen\n   */\n  centerOnScreen() {\n    if (this.scene) {\n      // Assume scene represents viewport\n      this.x = (this.scene.width - this.width) / 2;\n      this.y = (this.scene.height - this.height) / 2;\n    } else {\n      // Default centering\n      this.x = (window.innerWidth - this.width) / 2;\n      this.y = (window.innerHeight - this.height) / 2;\n    }\n  }\n\n  /**\n   * Animates modal entrance\n   * @returns {Promise}\n   */\n  async animateIn() {\n    const animations = [];\n\n    switch (this.animation) {\n      case 'slide':\n        this.y -= 100;\n        animations.push(\n          this.animate(\n            'y',\n            this.y + 100,\n            UI_CONSTANTS.ANIMATION_DURATION.NORMAL,\n            'easeOutCubic'\n          ),\n          this.animate('alpha', 1, UI_CONSTANTS.ANIMATION_DURATION.NORMAL)\n        );\n        break;\n\n      case 'scale':\n        this.scaleX = 0.8;\n        this.scaleY = 0.8;\n        animations.push(\n          this.animate(\n            'scaleX',\n            1,\n            UI_CONSTANTS.ANIMATION_DURATION.NORMAL,\n            'easeOutBack'\n          ),\n          this.animate(\n            'scaleY',\n            1,\n            UI_CONSTANTS.ANIMATION_DURATION.NORMAL,\n            'easeOutBack'\n          ),\n          this.animate('alpha', 1, UI_CONSTANTS.ANIMATION_DURATION.NORMAL)\n        );\n        break;\n\n      case 'bounce':\n        this.scaleX = 0.3;\n        this.scaleY = 0.3;\n        animations.push(\n          this.animate(\n            'scaleX',\n            1,\n            UI_CONSTANTS.ANIMATION_DURATION.SLOW,\n            'bounce'\n          ),\n          this.animate(\n            'scaleY',\n            1,\n            UI_CONSTANTS.ANIMATION_DURATION.SLOW,\n            'bounce'\n          ),\n          this.animate('alpha', 1, UI_CONSTANTS.ANIMATION_DURATION.FAST)\n        );\n        break;\n\n      default: // fade\n        animations.push(\n          this.animate('alpha', 1, UI_CONSTANTS.ANIMATION_DURATION.NORMAL)\n        );\n    }\n\n    await Promise.all(animations);\n  }\n\n  /**\n   * Animates modal exit\n   * @returns {Promise}\n   */\n  async animateOut() {\n    return this.animate('alpha', 0, UI_CONSTANTS.ANIMATION_DURATION.FAST);\n  }\n\n  /**\n   * Handles keyboard input\n   * @param {Object} event\n   */\n  handleKeyDown(event) {\n    if (!this.isOpen) return;\n\n    switch (event.key) {\n      case 'Escape':\n        if (this.closeOnEscape && this.closable) {\n          event.preventDefault();\n          this.close();\n        }\n        break;\n\n      case 'Tab':\n        if (this.trapFocus) {\n          this.handleTabNavigation(event);\n        }\n        break;\n\n      case 'Enter':\n      case ' ': {\n        const focusedButton = this.buttonElements[this.focusedButtonIndex];\n        if (focusedButton) {\n          event.preventDefault();\n          this.executeButtonAction(focusedButton);\n        }\n        break;\n      }\n\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        this.navigateButtons(event.key === 'ArrowRight' ? 1 : -1);\n        break;\n    }\n  }\n\n  /**\n   * Handles tab navigation within modal\n   * @param {Object} event\n   */\n  handleTabNavigation(event) {\n    // Simple tab trapping - in a real implementation, you'd identify all focusable elements\n    event.preventDefault();\n\n    if (event.shiftKey) {\n      this.focusedButtonIndex = Math.max(0, this.focusedButtonIndex - 1);\n    } else {\n      this.focusedButtonIndex = Math.min(\n        this.buttonElements.length - 1,\n        this.focusedButtonIndex + 1\n      );\n    }\n\n    this.updateButtonFocus();\n  }\n\n  /**\n   * Navigates between buttons\n   * @param {number} direction\n   */\n  navigateButtons(direction) {\n    this.focusedButtonIndex = clamp(\n      this.focusedButtonIndex + direction,\n      0,\n      this.buttonElements.length - 1\n    );\n    this.updateButtonFocus();\n  }\n\n  /**\n   * Updates button focus states\n   */\n  updateButtonFocus() {\n    this.buttonElements.forEach((button, index) => {\n      button.isFocused = index === this.focusedButtonIndex;\n    });\n  }\n\n  /**\n   * Focuses the first focusable element\n   */\n  focusFirstElement() {\n    if (this.buttonElements.length > 0) {\n      this.focusedButtonIndex = 0;\n      this.updateButtonFocus();\n    }\n  }\n\n  /**\n   * Handles backdrop click\n   * @param {Object} event\n   */\n  handleBackdropClick(event) {\n    // Check if click is outside modal content area\n    if (\n      !this.containsPoint(event.x, event.y) &&\n      this.closeOnBackdrop &&\n      this.closable\n    ) {\n      this.close();\n    }\n  }\n\n  /**\n   * Executes button action\n   * @param {Object} button\n   */\n  executeButtonAction(button) {\n    try {\n      if (button.action === 'close') {\n        this.close();\n      } else if (typeof button.callback === 'function') {\n        const result = button.callback(this, button);\n\n        // If callback returns a promise, handle it\n        if (result && typeof result.then === 'function') {\n          result.catch(error => this.errorHandler(error, 'buttonCallback'));\n        }\n      }\n\n      this.emit('buttonClick', { button, modal: this });\n    } catch (error) {\n      this.errorHandler(error, 'executeButtonAction');\n    }\n  }\n\n  /**\n   * Calculates button layout\n   */\n  calculateButtonLayout() {\n    const buttonSpacing = UI_CONSTANTS.SPACING.SM;\n    const totalButtonWidth = this.buttonElements.reduce(\n      (sum, btn) => sum + btn.width,\n      0\n    );\n    const totalSpacing = (this.buttonElements.length - 1) * buttonSpacing;\n    const startX = (this.width - totalButtonWidth - totalSpacing) / 2;\n\n    let currentX = startX;\n    this.buttonElements.forEach(button => {\n      button.x = currentX;\n      button.y =\n        this.height -\n        this.footerHeight +\n        (this.footerHeight - button.height) / 2;\n      currentX += button.width + buttonSpacing;\n    });\n  }\n\n  /**\n   * Enhanced rendering for canvas\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas' || !this.visible) return;\n\n    try {\n      // Draw backdrop if enabled\n      if (this.backdrop && this.isOpen) {\n        this.renderBackdrop(renderer);\n      }\n\n      // Draw modal background\n      this.renderModalBackground(renderer);\n\n      // Draw header\n      this.renderHeader(renderer);\n\n      // Draw body\n      this.renderBody(renderer);\n\n      // Draw footer with buttons\n      this.renderFooter(renderer);\n\n      // Draw focus ring if focused\n      if (this.isFocused) {\n        this.renderFocusRing(renderer);\n      }\n    } catch (error) {\n      this.errorHandler(error, 'renderSelf');\n    }\n  }\n\n  /**\n   * Renders the modal backdrop\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderBackdrop(renderer) {\n    renderer.save();\n\n    // Reset transforms to draw full screen backdrop\n    renderer.setTransform(1, 0, 0, 1, 0, 0);\n\n    renderer.fillStyle = this.backdropColor;\n    renderer.fillRect(0, 0, renderer.canvas.width, renderer.canvas.height);\n\n    renderer.restore();\n  }\n\n  /**\n   * Renders the modal background\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderModalBackground(renderer) {\n    // Shadow\n    renderer.fillStyle = 'rgba(0, 0, 0, 0.2)';\n    renderer.fillRect(\n      COMPONENT_CONSTANTS.MODAL_SHADOW_OFFSET,\n      COMPONENT_CONSTANTS.MODAL_SHADOW_OFFSET,\n      this.width,\n      this.height\n    );\n\n    // Background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Border\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_300;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n  }\n\n  /**\n   * Renders the modal header\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderHeader(renderer) {\n    const headerY = 0;\n\n    // Header background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_50;\n    renderer.fillRect(0, headerY, this.width, this.headerHeight);\n\n    // Header border\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_200;\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(0, this.headerHeight);\n    renderer.lineTo(this.width, this.headerHeight);\n    renderer.stroke();\n\n    // Title\n    renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_900;\n    renderer.font = 'bold 16px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      this.title,\n      this.padding,\n      headerY + this.headerHeight / 2\n    );\n\n    // Close button (if closable)\n    if (this.closable) {\n      this.renderCloseButton(renderer);\n    }\n  }\n\n  /**\n   * Renders the close button\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderCloseButton(renderer) {\n    const buttonSize = COMPONENT_CONSTANTS.MODAL_CLOSE_BUTTON_SIZE;\n    const buttonX = this.width - this.padding - buttonSize;\n    const buttonY = (this.headerHeight - buttonSize) / 2;\n\n    // Button background\n    renderer.fillStyle = this.closeButtonHovered\n      ? UI_CONSTANTS.COLORS.GRAY_200\n      : 'transparent';\n    renderer.fillRect(buttonX, buttonY, buttonSize, buttonSize);\n\n    // X symbol\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_600;\n    renderer.lineWidth = 2;\n    renderer.beginPath();\n    renderer.moveTo(\n      buttonX + COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING,\n      buttonY + COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING\n    );\n    renderer.lineTo(\n      buttonX + buttonSize - COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING,\n      buttonY + buttonSize - COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING\n    );\n    renderer.moveTo(\n      buttonX + buttonSize - COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING,\n      buttonY + COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING\n    );\n    renderer.lineTo(\n      buttonX + COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING,\n      buttonY + buttonSize - COMPONENT_CONSTANTS.CLOSE_BUTTON_X_PADDING\n    );\n    renderer.stroke();\n  }\n\n  /**\n   * Renders the modal body\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderBody(renderer) {\n    const bodyY = this.headerHeight;\n\n    // Body background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n    renderer.fillRect(0, bodyY, this.width, this.bodyHeight);\n\n    // Content text\n    if (this.content) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_700;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'top';\n\n      // Wrap text to fit in body\n      const maxWidth = this.width - this.padding * 2;\n      const lines = UIUtils.wrapText(\n        this.content,\n        maxWidth,\n        '14px Arial',\n        renderer\n      );\n\n      let lineY = bodyY + this.padding;\n      lines.forEach(line => {\n        renderer.fillText(line, this.padding, lineY);\n        lineY += COMPONENT_CONSTANTS.DEFAULT_LINE_HEIGHT;\n      });\n    }\n  }\n\n  /**\n   * Renders the modal footer with buttons\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderFooter(renderer) {\n    const footerY = this.height - this.footerHeight;\n\n    // Footer background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_50;\n    renderer.fillRect(0, footerY, this.width, this.footerHeight);\n\n    // Footer border\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_200;\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(0, footerY);\n    renderer.lineTo(this.width, footerY);\n    renderer.stroke();\n\n    // Calculate and render buttons\n    this.calculateButtonLayout();\n    this.buttonElements.forEach(button => {\n      this.renderButton(renderer, button);\n    });\n  }\n\n  /**\n   * Renders a modal button\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {Object} button\n   */\n  renderButton(renderer, button) {\n    // Button background\n    let bgColor = UI_CONSTANTS.COLORS.PRIMARY;\n    let textColor = UI_CONSTANTS.COLORS.WHITE;\n\n    if (button.variant === 'secondary') {\n      bgColor = UI_CONSTANTS.COLORS.GRAY_300;\n      textColor = UI_CONSTANTS.COLORS.GRAY_700;\n    }\n\n    if (button.isPressed) {\n      bgColor = UI_CONSTANTS.COLORS.GRAY_700;\n    } else if (button.isHovered) {\n      bgColor =\n        button.variant === 'secondary'\n          ? UI_CONSTANTS.COLORS.GRAY_400\n          : '#1976D2';\n    }\n\n    renderer.fillStyle = bgColor;\n    renderer.fillRect(button.x, button.y, button.width, button.height);\n\n    // Button border\n    if (button.isFocused) {\n      renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n      renderer.lineWidth = 2;\n    } else {\n      renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_400;\n      renderer.lineWidth = 1;\n    }\n    renderer.strokeRect(button.x, button.y, button.width, button.height);\n\n    // Button text\n    renderer.fillStyle = textColor;\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      button.text,\n      button.x + button.width / 2,\n      button.y + button.height / 2\n    );\n  }\n\n  /**\n   * Renders focus ring around modal\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderFocusRing(renderer) {\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.PRIMARY;\n    renderer.lineWidth = FOCUS_RING_WIDTH;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      -FOCUS_RING_WIDTH,\n      -FOCUS_RING_WIDTH,\n      this.width + FOCUS_RING_WIDTH * 2,\n      this.height + FOCUS_RING_WIDTH * 2\n    );\n    renderer.setLineDash([]);\n  }\n\n  /**\n   * Enhanced input handling for modal interactions\n   * @param {string} eventType\n   * @param {Object} eventData\n   * @returns {boolean}\n   */\n  handleInput(eventType, eventData) {\n    if (!this.isOpen || this.isAnimating) return false;\n\n    // Handle button interactions\n    for (const button of this.buttonElements) {\n      const buttonBounds = {\n        x: this.x + button.x,\n        y: this.y + button.y,\n        width: button.width,\n        height: button.height,\n      };\n\n      const inButton =\n        eventData.x >= buttonBounds.x &&\n        eventData.x <= buttonBounds.x + buttonBounds.width &&\n        eventData.y >= buttonBounds.y &&\n        eventData.y <= buttonBounds.y + buttonBounds.height;\n\n      switch (eventType) {\n        case 'mousemove':\n          button.isHovered = inButton;\n          break;\n\n        case 'mousedown':\n          if (inButton) {\n            button.isPressed = true;\n            this.focusedButtonIndex = this.buttonElements.indexOf(button);\n            this.updateButtonFocus();\n            return true;\n          }\n          break;\n\n        case 'mouseup':\n          if (button.isPressed) {\n            button.isPressed = false;\n            if (inButton) {\n              this.executeButtonAction(button);\n            }\n            return true;\n          }\n          break;\n      }\n    }\n\n    // Handle close button if closable\n    if (this.closable && eventType === 'mousedown') {\n      const closeButtonBounds = {\n        x:\n          this.x +\n          this.width -\n          this.padding -\n          COMPONENT_CONSTANTS.MODAL_CLOSE_BUTTON_SIZE,\n        y:\n          this.y +\n          (this.headerHeight - COMPONENT_CONSTANTS.MODAL_CLOSE_BUTTON_SIZE) / 2,\n        width: COMPONENT_CONSTANTS.MODAL_CLOSE_BUTTON_SIZE,\n        height: COMPONENT_CONSTANTS.MODAL_CLOSE_BUTTON_SIZE,\n      };\n\n      if (\n        eventData.x >= closeButtonBounds.x &&\n        eventData.x <= closeButtonBounds.x + closeButtonBounds.width &&\n        eventData.y >= closeButtonBounds.y &&\n        eventData.y <= closeButtonBounds.y + closeButtonBounds.height\n      ) {\n        this.close();\n        return true;\n      }\n    }\n\n    return super.handleInput(eventType, eventData);\n  }\n\n  /**\n   * Enhanced destroy method\n   */\n  destroy() {\n    // Close modal if open\n    if (this.isOpen) {\n      this.close();\n    }\n\n    // Clean up any remaining timers or animations\n    this.stopAnimations();\n\n    super.destroy();\n  }\n}\n\n// ===== NAVIGATION MENU SYSTEM =====\nclass NavigationMenu extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || COMPONENT_CONSTANTS.DEFAULT_NAV_WIDTH,\n      height: options.height || COMPONENT_CONSTANTS.DEFAULT_NAV_HEIGHT,\n      ariaRole: 'navigation',\n    });\n\n    this.items = options.items || [];\n    this.orientation = options.orientation || 'vertical'; // 'horizontal', 'vertical'\n    this.expandable = options.expandable || false;\n    this.collapsible = options.collapsible || false;\n    this.selectedIndex = options.selectedIndex || 0;\n    this.multiSelect = options.multiSelect || false;\n    this.showIcons = options.showIcons !== false;\n    this.showTooltips = options.showTooltips || false;\n    this.animationDuration =\n      options.animationDuration || UI_CONSTANTS.ANIMATION.DURATION.FAST;\n\n    // State management\n    this.isExpanded = options.isExpanded !== false;\n    this.hoveredIndex = -1;\n    this.focusedIndex = this.selectedIndex;\n    this.selectedIndices = new Set([this.selectedIndex]);\n    this.isAnimating = false;\n\n    // Accessibility\n    this.ariaLabel = options.ariaLabel || 'Navigation menu';\n    this.ariaOrientation = this.orientation;\n\n    // Error handling\n    this.errorHandler =\n      options.errorHandler || this.defaultErrorHandler.bind(this);\n\n    // Performance tracking\n    this.lastRenderTime = 0;\n    this.renderCount = 0;\n\n    this.setupNavigation();\n    this.bindEvents();\n  }\n\n  /**\n   * Sets up navigation items with enhanced properties\n   */\n  setupNavigation() {\n    try {\n      this.menuItems = this.items.map((item, index) => ({\n        ...item,\n        index,\n        id: `nav-item-${this.id}-${index}`,\n        element: null,\n        isSelected: this.multiSelect\n          ? this.selectedIndices.has(index)\n          : index === this.selectedIndex,\n        isHovered: false,\n        isFocused: false,\n        isDisabled: item.disabled || false,\n        badge: item.badge || null,\n        submenu: item.submenu || null,\n        tooltip: item.tooltip || null,\n        animationOffset: index * COMPONENT_CONSTANTS.ANIMATION_STAGGER_OFFSET, // Staggered animations\n      }));\n\n      this.updateAccessibilityAttributes();\n    } catch (error) {\n      this.errorHandler(error, 'setupNavigation');\n    }\n  }\n\n  /**\n   * Binds event handlers with error handling\n   */\n  bindEvents() {\n    try {\n      this.on('keyDown', event => this.handleKeyNavigation(event));\n      this.on('focus', () => this.handleFocus());\n      this.on('blur', () => this.handleBlur());\n\n      // Animation events\n      this.on('animationStart', () => {\n        this.isAnimating = true;\n      });\n      this.on('animationEnd', () => {\n        this.isAnimating = false;\n      });\n    } catch (error) {\n      this.errorHandler(error, 'bindEvents');\n    }\n  }\n\n  /**\n   * Adds a new item with enhanced validation\n   * @param {Object} item\n   * @returns {boolean} Success status\n   */\n  addItem(item) {\n    try {\n      if (!item || typeof item !== 'object') {\n        throw new Error('Invalid item provided to addItem');\n      }\n\n      const index = this.menuItems.length;\n      const menuItem = {\n        text: item.text || `Item ${index + 1}`,\n        icon: item.icon || null,\n        action: item.action || null,\n        disabled: item.disabled || false,\n        badge: item.badge || null,\n        submenu: item.submenu || null,\n        tooltip: item.tooltip || null,\n        ...item,\n        index,\n        id: `nav-item-${this.id}-${index}`,\n        element: null,\n        isSelected: false,\n        isHovered: false,\n        isFocused: false,\n        isDisabled: item.disabled || false,\n        animationOffset: index * COMPONENT_CONSTANTS.ANIMATION_STAGGER_OFFSET,\n      };\n\n      this.menuItems.push(menuItem);\n      this.updateAccessibilityAttributes();\n\n      // Animate item addition\n      this.animateItemAddition(menuItem);\n\n      this.emit('itemAdded', { item: menuItem, index });\n      return true;\n    } catch (error) {\n      this.errorHandler(error, 'addItem');\n      return false;\n    }\n  }\n\n  /**\n   * Removes an item by index\n   * @param {number} index\n   * @returns {boolean} Success status\n   */\n  removeItem(index) {\n    try {\n      if (index < 0 || index >= this.menuItems.length) {\n        throw new Error(`Invalid index ${index} for removeItem`);\n      }\n\n      const item = this.menuItems[index];\n      this.menuItems.splice(index, 1);\n\n      // Update indices\n      this.menuItems.forEach((item, newIndex) => {\n        item.index = newIndex;\n        item.id = `nav-item-${this.id}-${newIndex}`;\n      });\n\n      // Adjust selection\n      if (this.selectedIndex >= index) {\n        this.selectedIndex = Math.max(0, this.selectedIndex - 1);\n      }\n\n      this.updateAccessibilityAttributes();\n      this.emit('itemRemoved', { item, index });\n\n      return true;\n    } catch (error) {\n      this.errorHandler(error, 'removeItem');\n      return false;\n    }\n  }\n\n  /**\n   * Enhanced item selection with multi-select support\n   * @param {number} index\n   * @param {boolean} addToSelection\n   */\n  selectItem(index, addToSelection = false) {\n    try {\n      if (index < 0 || index >= this.menuItems.length) {\n        throw new Error(`Invalid index ${index} for selectItem`);\n      }\n\n      const item = this.menuItems[index];\n      if (item.isDisabled) {\n        return;\n      }\n\n      if (this.multiSelect && addToSelection) {\n        // Toggle selection in multi-select mode\n        if (this.selectedIndices.has(index)) {\n          this.selectedIndices.delete(index);\n          item.isSelected = false;\n        } else {\n          this.selectedIndices.add(index);\n          item.isSelected = true;\n        }\n      } else {\n        // Single selection\n        this.clearSelection();\n        this.selectedIndex = index;\n        this.selectedIndices.clear();\n        this.selectedIndices.add(index);\n        item.isSelected = true;\n      }\n\n      // Update visual state\n      this.updateSelectionState();\n\n      // Execute action\n      if (item.action && typeof item.action === 'function') {\n        const result = item.action(item, this);\n        if (result && typeof result.then === 'function') {\n          result.catch(error => this.errorHandler(error, 'itemAction'));\n        }\n      }\n\n      // Animate selection\n      this.animateSelection(item);\n\n      this.emit('itemSelected', {\n        item,\n        index,\n        selectedIndices: Array.from(this.selectedIndices),\n        multiSelect: this.multiSelect && addToSelection,\n      });\n    } catch (error) {\n      this.errorHandler(error, 'selectItem');\n    }\n  }\n\n  /**\n   * Clears all selections\n   */\n  clearSelection() {\n    this.menuItems.forEach(item => {\n      item.isSelected = false;\n    });\n    this.selectedIndices.clear();\n  }\n\n  /**\n   * Updates selection state for all items\n   */\n  updateSelectionState() {\n    this.menuItems.forEach((item, index) => {\n      item.isSelected = this.selectedIndices.has(index);\n    });\n  }\n\n  /**\n   * Enhanced keyboard navigation with ARIA support\n   * @param {Object} event\n   */\n  handleKeyNavigation(event) {\n    try {\n      if (this.isAnimating) return;\n\n      const isVertical = this.orientation === 'vertical';\n      const nextKey = isVertical ? 'ArrowDown' : 'ArrowRight';\n      const prevKey = isVertical ? 'ArrowUp' : 'ArrowLeft';\n\n      switch (event.key) {\n        case nextKey:\n          event.preventDefault();\n          this.navigateToNextItem();\n          break;\n\n        case prevKey:\n          event.preventDefault();\n          this.navigateToPreviousItem();\n          break;\n\n        case 'Enter':\n        case ' ':\n          event.preventDefault();\n          this.activateCurrentItem(event.ctrlKey || event.metaKey);\n          break;\n\n        case 'Home':\n          event.preventDefault();\n          this.navigateToFirstItem();\n          break;\n\n        case 'End':\n          event.preventDefault();\n          this.navigateToLastItem();\n          break;\n\n        case 'Escape':\n          if (this.collapsible) {\n            this.collapse();\n          }\n          break;\n\n        case 'Tab':\n          // Allow natural tab navigation\n          break;\n\n        default:\n          // Handle character navigation\n          this.handleCharacterNavigation(event.key);\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleKeyNavigation');\n    }\n  }\n\n  /**\n   * Navigates to next available item\n   */\n  navigateToNextItem() {\n    const startIndex = this.focusedIndex;\n    let nextIndex = startIndex;\n\n    do {\n      nextIndex = (nextIndex + 1) % this.menuItems.length;\n    } while (this.menuItems[nextIndex].isDisabled && nextIndex !== startIndex);\n\n    if (nextIndex !== startIndex || !this.menuItems[nextIndex].isDisabled) {\n      this.focusedIndex = nextIndex;\n      this.updateFocus();\n    }\n  }\n\n  /**\n   * Navigates to previous available item\n   */\n  navigateToPreviousItem() {\n    const startIndex = this.focusedIndex;\n    let prevIndex = startIndex;\n\n    do {\n      prevIndex = prevIndex === 0 ? this.menuItems.length - 1 : prevIndex - 1;\n    } while (this.menuItems[prevIndex].isDisabled && prevIndex !== startIndex);\n\n    if (prevIndex !== startIndex || !this.menuItems[prevIndex].isDisabled) {\n      this.focusedIndex = prevIndex;\n      this.updateFocus();\n    }\n  }\n\n  /**\n   * Navigates to first available item\n   */\n  navigateToFirstItem() {\n    for (let i = 0; i < this.menuItems.length; i++) {\n      if (!this.menuItems[i].isDisabled) {\n        this.focusedIndex = i;\n        this.updateFocus();\n        break;\n      }\n    }\n  }\n\n  /**\n   * Navigates to last available item\n   */\n  navigateToLastItem() {\n    for (let i = this.menuItems.length - 1; i >= 0; i--) {\n      if (!this.menuItems[i].isDisabled) {\n        this.focusedIndex = i;\n        this.updateFocus();\n        break;\n      }\n    }\n  }\n\n  /**\n   * Activates the currently focused item\n   * @param {boolean} addToSelection\n   */\n  activateCurrentItem(addToSelection = false) {\n    if (this.focusedIndex >= 0 && this.focusedIndex < this.menuItems.length) {\n      this.selectItem(this.focusedIndex, addToSelection);\n    }\n  }\n\n  /**\n   * Handles character-based navigation (type-ahead)\n   * @param {string} char\n   */\n  handleCharacterNavigation(char) {\n    if (char.length !== 1 || char < ' ') return;\n\n    const searchChar = char.toLowerCase();\n    const startIndex = (this.focusedIndex + 1) % this.menuItems.length;\n\n    for (let i = 0; i < this.menuItems.length; i++) {\n      const index = (startIndex + i) % this.menuItems.length;\n      const item = this.menuItems[index];\n\n      if (\n        !item.isDisabled &&\n        item.text &&\n        item.text.toLowerCase().startsWith(searchChar)\n      ) {\n        this.focusedIndex = index;\n        this.updateFocus();\n        break;\n      }\n    }\n  }\n\n  /**\n   * Updates focus state with animations\n   */\n  updateFocus() {\n    try {\n      this.menuItems.forEach((item, index) => {\n        const wasFocused = item.isFocused;\n        item.isFocused = index === this.focusedIndex;\n\n        // Animate focus change\n        if (item.isFocused && !wasFocused) {\n          this.animateFocus(item);\n        }\n      });\n\n      this.emit('focusChanged', {\n        focusedIndex: this.focusedIndex,\n        focusedItem: this.menuItems[this.focusedIndex],\n      });\n    } catch (error) {\n      this.errorHandler(error, 'updateFocus');\n    }\n  }\n\n  /**\n   * Handles menu focus\n   */\n  handleFocus() {\n    if (this.focusedIndex < 0 || this.focusedIndex >= this.menuItems.length) {\n      this.focusedIndex = this.selectedIndex >= 0 ? this.selectedIndex : 0;\n    }\n    this.updateFocus();\n  }\n\n  /**\n   * Handles menu blur\n   */\n  handleBlur() {\n    this.menuItems.forEach(item => {\n      item.isFocused = false;\n    });\n  }\n\n  /**\n   * Expands the menu with animation\n   */\n  expand() {\n    if (this.isExpanded || this.isAnimating) return;\n\n    this.isExpanded = true;\n    this.animateExpansion(true);\n    this.emit('expanded');\n  }\n\n  /**\n   * Collapses the menu with animation\n   */\n  collapse() {\n    if (!this.isExpanded || this.isAnimating) return;\n\n    this.isExpanded = false;\n    this.animateExpansion(false);\n    this.emit('collapsed');\n  }\n\n  /**\n   * Toggles menu expansion\n   */\n  toggle() {\n    if (this.isExpanded) {\n      this.collapse();\n    } else {\n      this.expand();\n    }\n  }\n\n  // Animation methods\n  animateItemAddition(item) {\n    if (!this.animationsEnabled) return;\n\n    this.animate('alpha', 1, this.animationDuration, {\n      from: 0,\n      delay: item.animationOffset,\n      easing: EASING_FUNCTIONS.EASE_OUT_CUBIC,\n    });\n  }\n\n  animateSelection(_item) {\n    if (!this.animationsEnabled) return;\n\n    // Pulse animation for selection\n    this.animate(\n      'scale',\n      COMPONENT_CONSTANTS.SELECTION_SCALE,\n      COMPONENT_CONSTANTS.ANIMATION_FAST,\n      {\n        from: 1,\n        yoyo: true,\n        easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n      }\n    );\n  }\n\n  animateFocus(item) {\n    if (!this.animationsEnabled) return;\n\n    // Subtle scale animation for focus\n    item.focusScale = item.focusScale || 1;\n    this.animate(\n      'focusScale',\n      COMPONENT_CONSTANTS.FOCUS_SCALE,\n      COMPONENT_CONSTANTS.ANIMATION_NORMAL,\n      {\n        from: 1,\n        target: item,\n        easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n      }\n    );\n  }\n\n  animateExpansion(expanding) {\n    if (!this.animationsEnabled) return;\n\n    const targetHeight = expanding ? this.originalHeight : 0;\n    this.animate('height', targetHeight, this.animationDuration, {\n      easing: EASING_FUNCTIONS.EASE_OUT_CUBIC,\n    });\n  }\n\n  /**\n   * Updates accessibility attributes\n   */\n  updateAccessibilityAttributes() {\n    this.ariaLabel = `Navigation menu with ${this.menuItems.length} items`;\n    if (this.selectedIndices.size > 0) {\n      this.ariaLabel += `, ${this.selectedIndices.size} selected`;\n    }\n  }\n\n  /**\n   * Enhanced input handling with touch support\n   * @param {string} eventType\n   * @param {Object} eventData\n   * @returns {boolean}\n   */\n  handleInput(eventType, eventData) {\n    try {\n      if (!this.visible || this.isAnimating) return false;\n\n      const { x, y } = eventData;\n      const itemHeight =\n        this.orientation === 'vertical'\n          ? this.height / this.menuItems.length\n          : this.height;\n      const itemWidth =\n        this.orientation === 'horizontal'\n          ? this.width / this.menuItems.length\n          : this.width;\n\n      // Find hovered item\n      let hoveredIndex = -1;\n      for (let i = 0; i < this.menuItems.length; i++) {\n        const itemX = this.orientation === 'horizontal' ? i * itemWidth : 0;\n        const itemY = this.orientation === 'vertical' ? i * itemHeight : 0;\n\n        if (\n          x >= this.x + itemX &&\n          x <= this.x + itemX + itemWidth &&\n          y >= this.y + itemY &&\n          y <= this.y + itemY + itemHeight\n        ) {\n          hoveredIndex = i;\n          break;\n        }\n      }\n\n      // Update hover states\n      this.menuItems.forEach((item, index) => {\n        item.isHovered = index === hoveredIndex;\n      });\n\n      switch (eventType) {\n        case 'mousemove':\n          if (hoveredIndex !== this.hoveredIndex) {\n            this.hoveredIndex = hoveredIndex;\n            this.emit('hoverChanged', {\n              hoveredIndex,\n              hoveredItem: this.menuItems[hoveredIndex],\n            });\n          }\n          break;\n\n        case 'mousedown':\n        case 'touchstart':\n          if (hoveredIndex >= 0) {\n            this.focusedIndex = hoveredIndex;\n            this.updateFocus();\n            return true;\n          }\n          break;\n\n        case 'mouseup':\n        case 'touchend':\n          if (hoveredIndex >= 0) {\n            this.selectItem(\n              hoveredIndex,\n              eventData.ctrlKey || eventData.metaKey\n            );\n            return true;\n          }\n          break;\n      }\n\n      return super.handleInput(eventType, eventData);\n    } catch (error) {\n      this.errorHandler(error, 'handleInput');\n      return false;\n    }\n  }\n\n  /**\n   * Enhanced canvas rendering with modern styling\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas' || !this.visible) return;\n\n    try {\n      const startTime = performance.now();\n\n      // Performance optimization: skip rendering if not visible\n      if (this.alpha <= 0 || this.scale <= 0) return;\n\n      const itemHeight =\n        this.orientation === 'vertical'\n          ? this.height / this.menuItems.length\n          : this.height;\n      const itemWidth =\n        this.orientation === 'horizontal'\n          ? this.width / this.menuItems.length\n          : this.width;\n\n      // Render menu background\n      this.renderMenuBackground(renderer);\n\n      // Render items\n      this.menuItems.forEach((item, index) => {\n        if (this.isExpanded || !this.collapsible) {\n          this.renderMenuItem(renderer, item, index, itemWidth, itemHeight);\n        }\n      });\n\n      // Render focus ring\n      if (this.isFocused && this.focusedIndex >= 0) {\n        this.renderFocusRing(renderer, itemWidth, itemHeight);\n      }\n\n      // Performance tracking\n      const renderTime = performance.now() - startTime;\n      this.lastRenderTime = renderTime;\n      this.renderCount++;\n\n      if (renderTime > COMPONENT_CONSTANTS.PERFORMANCE_THRESHOLD) {\n        // Longer than 1 frame\n        UIUtils.debugLog(\n          'warn',\n          `NavigationMenu render took ${renderTime.toFixed(2)}ms`\n        );\n      }\n    } catch (error) {\n      this.errorHandler(error, 'renderSelf');\n    }\n  }\n\n  /**\n   * Renders menu background\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderMenuBackground(renderer) {\n    // Menu background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Menu border\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_300;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n\n    // Shadow\n    renderer.fillStyle = 'rgba(0, 0, 0, 0.1)';\n    renderer.fillRect(2, 2, this.width, this.height);\n  }\n\n  /**\n   * Renders individual menu item\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {Object} item\n   * @param {number} index\n   * @param {number} itemWidth\n   * @param {number} itemHeight\n   */\n  renderMenuItem(renderer, item, index, itemWidth, itemHeight) {\n    const x = this.orientation === 'horizontal' ? index * itemWidth : 0;\n    const y = this.orientation === 'vertical' ? index * itemHeight : 0;\n\n    // Item background\n    let bgColor = UI_CONSTANTS.COLORS.WHITE;\n    if (item.isDisabled) {\n      bgColor = UI_CONSTANTS.COLORS.GRAY_100;\n    } else if (item.isSelected) {\n      bgColor = UI_CONSTANTS.COLORS.PRIMARY;\n    } else if (item.isFocused) {\n      bgColor = UI_CONSTANTS.COLORS.PRIMARY_LIGHT;\n    } else if (item.isHovered) {\n      bgColor = UI_CONSTANTS.COLORS.GRAY_50;\n    }\n\n    renderer.fillStyle = bgColor;\n    renderer.fillRect(x, y, itemWidth, itemHeight);\n\n    // Item border\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_200;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(x, y, itemWidth, itemHeight);\n\n    // Focus indicator\n    if (item.isFocused) {\n      renderer.strokeStyle = UI_CONSTANTS.COLORS.PRIMARY;\n      renderer.lineWidth = 2;\n      renderer.strokeRect(x + 1, y + 1, itemWidth - 2, itemHeight - 2);\n    }\n\n    // Text\n    const textColor = item.isSelected\n      ? UI_CONSTANTS.COLORS.WHITE\n      : item.isDisabled\n        ? UI_CONSTANTS.COLORS.GRAY_400\n        : UI_CONSTANTS.COLORS.GRAY_900;\n\n    renderer.fillStyle = textColor;\n    renderer.font = `${item.isSelected ? 'bold ' : ''}14px Arial`;\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    let textX = x + UI_CONSTANTS.SPACING.SM;\n    const textY = y + itemHeight / 2;\n\n    // Icon\n    if (this.showIcons && item.icon) {\n      renderer.fillText(item.icon, textX, textY);\n      textX += COMPONENT_CONSTANTS.ICON_WIDTH;\n    }\n\n    // Text with truncation\n    const availableWidth =\n      itemWidth -\n      (textX - x) -\n      UI_CONSTANTS.SPACING.SM -\n      (item.badge ? COMPONENT_CONSTANTS.BADGE_WIDTH : 0);\n    const truncatedText = UIUtils.truncateText(\n      item.text,\n      availableWidth,\n      renderer.font,\n      renderer\n    );\n    renderer.fillText(truncatedText, textX, textY);\n\n    // Badge\n    if (item.badge) {\n      this.renderBadge(\n        renderer,\n        item.badge,\n        x + itemWidth - COMPONENT_CONSTANTS.ICON_WIDTH,\n        y + COMPONENT_CONSTANTS.BADGE_PADDING\n      );\n    }\n\n    // Submenu indicator\n    if (item.submenu) {\n      const indicatorX =\n        x + itemWidth - COMPONENT_CONSTANTS.SUBMENU_INDICATOR_SIZE;\n      const indicatorY = y + itemHeight / 2;\n      this.renderSubmenuIndicator(\n        renderer,\n        indicatorX,\n        indicatorY,\n        item.isSelected\n      );\n    }\n  }\n\n  /**\n   * Renders item badge\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {string|number} badge\n   * @param {number} x\n   * @param {number} y\n   */\n  renderBadge(renderer, badge, x, y) {\n    const badgeText = String(badge);\n    const badgeWidth = Math.max(\n      COMPONENT_CONSTANTS.BADGE_MIN_WIDTH,\n      badgeText.length * COMPONENT_CONSTANTS.BADGE_CHAR_WIDTH\n    );\n\n    // Badge background\n    renderer.fillStyle = UI_CONSTANTS.COLORS.DANGER;\n    UIUtils.fillRoundedRect(\n      renderer,\n      x - badgeWidth / 2,\n      y,\n      badgeWidth,\n      COMPONENT_CONSTANTS.BADGE_HEIGHT,\n      UI_CONSTANTS.BORDER_RADIUS.SM\n    );\n\n    // Badge text\n    renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n    renderer.font = 'bold 10px Arial';\n    renderer.textAlign = 'center';\n    renderer.fillText(badgeText, x, y + UI_CONSTANTS.SPACING.SM);\n  }\n\n  /**\n   * Renders submenu indicator\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {number} x\n   * @param {number} y\n   * @param {boolean} isSelected\n   */\n  renderSubmenuIndicator(renderer, x, y, isSelected) {\n    const size = 6;\n    const color = isSelected\n      ? UI_CONSTANTS.COLORS.WHITE\n      : UI_CONSTANTS.COLORS.GRAY_600;\n\n    renderer.fillStyle = color;\n    renderer.beginPath();\n    renderer.moveTo(x - size, y - size);\n    renderer.lineTo(x + size, y);\n    renderer.lineTo(x - size, y + size);\n    renderer.closePath();\n    renderer.fill();\n  }\n\n  /**\n   * Renders focus ring around focused item\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {number} itemWidth\n   * @param {number} itemHeight\n   */\n  renderFocusRing(renderer, itemWidth, itemHeight) {\n    const item = this.menuItems[this.focusedIndex];\n    if (!item) return;\n\n    const x = this.orientation === 'horizontal' ? item.index * itemWidth : 0;\n    const y = this.orientation === 'vertical' ? item.index * itemHeight : 0;\n\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n    renderer.lineWidth = FOCUS_RING_WIDTH;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      x - FOCUS_RING_WIDTH,\n      y - FOCUS_RING_WIDTH,\n      itemWidth + FOCUS_RING_WIDTH * 2,\n      itemHeight + FOCUS_RING_WIDTH * 2\n    );\n    renderer.setLineDash([]);\n  }\n\n  /**\n   * Gets accessibility description\n   * @returns {string}\n   */\n  getAccessibilityDescription() {\n    const selectedCount = this.selectedIndices.size;\n    const totalCount = this.menuItems.length;\n    const enabledCount = this.menuItems.filter(item => !item.isDisabled).length;\n\n    return (\n      `Navigation menu with ${totalCount} items, ${enabledCount} enabled, ${selectedCount} selected. ` +\n      `Currently ${this.isExpanded ? 'expanded' : 'collapsed'}. ` +\n      `Orientation: ${this.orientation}.`\n    );\n  }\n\n  /**\n   * Default error handler\n   * @param {Error} error\n   * @param {string} context\n   */\n  defaultErrorHandler(error, context) {\n    UIUtils.debugLog('error', `NavigationMenu error in ${context}`, error);\n    this.emit('error', { error, context, component: 'NavigationMenu' });\n  }\n\n  /**\n   * Enhanced destroy method with cleanup\n   */\n  destroy() {\n    try {\n      // Clear any running animations\n      this.stopAnimations();\n\n      // Clear timers\n      this.clearTimers();\n\n      // Clean up menu items\n      this.menuItems = [];\n      this.selectedIndices.clear();\n\n      super.destroy();\n    } catch (error) {\n      this.errorHandler(error, 'destroy');\n    }\n  }\n}\n\n// ===== DATA VISUALIZATION COMPONENTS =====\nclass Chart extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || COMPONENT_CONSTANTS.DEFAULT_CHART_WIDTH,\n      height: options.height || COMPONENT_CONSTANTS.DEFAULT_CHART_HEIGHT,\n      ariaRole: 'img',\n    });\n\n    this.type = options.type || 'line'; // 'line', 'bar', 'pie', 'scatter', 'area'\n    this.data = options.data || [];\n    this.labels = options.labels || [];\n    this.title = options.title || '';\n    this.subtitle = options.subtitle || '';\n    this.showLegend = options.showLegend !== false;\n    this.showAxis = options.showAxis !== false;\n    this.showGrid = options.showGrid !== false;\n    this.showTooltips = options.showTooltips !== false;\n    this.interactive = options.interactive !== false;\n    this.animated = options.animated !== false;\n    this.colors = options.colors || [\n      UI_CONSTANTS.COLORS.PRIMARY,\n      UI_CONSTANTS.COLORS.SUCCESS,\n      UI_CONSTANTS.COLORS.WARNING,\n      UI_CONSTANTS.COLORS.DANGER,\n      UI_CONSTANTS.COLORS.INFO,\n      '#9C27B0',\n      '#607D8B',\n      '#795548',\n    ];\n\n    // Chart dimensions (accounting for margins)\n    this.margin = options.margin || {\n      top: 50,\n      right: 40,\n      bottom: 50,\n      left: 70,\n    };\n    this.chartWidth = this.width - this.margin.left - this.margin.right;\n    this.chartHeight = this.height - this.margin.top - this.margin.bottom;\n\n    // Animation and interaction state\n    this.animationProgress = 0;\n    this.isAnimating = false;\n    this.hoveredDataPoint = null;\n    this.selectedDataPoints = new Set();\n\n    // Performance and accessibility\n    this.errorHandler =\n      options.errorHandler || this.defaultErrorHandler.bind(this);\n    this.lastRenderTime = 0;\n    this.renderCount = 0;\n\n    // Chart-specific data\n    this.processedData = null;\n    this.scales = null;\n    this.legend = null;\n    this.tooltip = null;\n\n    this.setupChart();\n    this.bindEvents();\n  }\n\n  /**\n   * Sets up chart with data processing and validation\n   */\n  setupChart() {\n    try {\n      this.validateData();\n      this.processData();\n      this.calculateScales();\n      this.setupLegend();\n      this.setupTooltip();\n      this.updateAccessibilityAttributes();\n\n      if (this.animated) {\n        this.startEntranceAnimation();\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setupChart');\n    }\n  }\n\n  /**\n   * Binds interaction events\n   */\n  bindEvents() {\n    try {\n      if (this.interactive) {\n        this.on('mousemove', event => this.handleMouseMove(event));\n        this.on('mousedown', event => this.handleMouseDown(event));\n        this.on('mouseup', event => this.handleMouseUp(event));\n        this.on('keyDown', event => this.handleKeyDown(event));\n      }\n    } catch (error) {\n      this.errorHandler(error, 'bindEvents');\n    }\n  }\n\n  /**\n   * Validates input data\n   */\n  validateData() {\n    if (!Array.isArray(this.data)) {\n      throw new Error('Chart data must be an array');\n    }\n\n    if (this.data.length === 0) {\n      throw new Error('Chart data cannot be empty');\n    }\n\n    // Type-specific validation\n    switch (this.type) {\n      case 'pie':\n        if (!this.data.every(val => typeof val === 'number' && val >= 0)) {\n          throw new Error('Pie chart data must be positive numbers');\n        }\n        break;\n\n      case 'line':\n      case 'area':\n      case 'bar':\n        if (!Array.isArray(this.data[0])) {\n          // Single series\n          if (!this.data.every(val => typeof val === 'number')) {\n            throw new Error('Line/Bar chart data must be numbers');\n          }\n        } else {\n          // Multiple series\n          if (\n            !this.data.every(\n              series =>\n                Array.isArray(series) &&\n                series.every(val => typeof val === 'number')\n            )\n          ) {\n            throw new Error('Multi-series data must be arrays of numbers');\n          }\n        }\n        break;\n\n      case 'scatter':\n        if (\n          !this.data.every(\n            point =>\n              Array.isArray(point) &&\n              point.length >= 2 &&\n              typeof point[0] === 'number' &&\n              typeof point[1] === 'number'\n          )\n        ) {\n          throw new Error('Scatter plot data must be [x, y] coordinate pairs');\n        }\n        break;\n    }\n  }\n\n  /**\n   * Processes data based on chart type\n   */\n  processData() {\n    try {\n      switch (this.type) {\n        case 'line':\n        case 'area':\n        case 'bar':\n          this.processSeriesData();\n          break;\n        case 'pie':\n          this.processPieData();\n          break;\n        case 'scatter':\n          this.processScatterData();\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'processData');\n    }\n  }\n\n  /**\n   * Processes series data for line/bar/area charts\n   */\n  processSeriesData() {\n    // Normalize to multi-series format\n    if (!Array.isArray(this.data[0])) {\n      this.data = [this.data]; // Single series\n    }\n\n    // Calculate statistics\n    const allValues = this.data.flat();\n    this.minValue = Math.min(...allValues);\n    this.maxValue = Math.max(...allValues);\n    this.avgValue =\n      allValues.reduce((sum, val) => sum + val, 0) / allValues.length;\n\n    // Add padding to min/max for better visualization\n    const range = this.maxValue - this.minValue;\n    const padding = range * COMPONENT_CONSTANTS.CHART_PADDING_RATIO;\n    this.minValue = Math.max(0, this.minValue - padding);\n    this.maxValue = this.maxValue + padding;\n\n    // Process each series\n    this.processedData = this.data.map((series, seriesIndex) => ({\n      values: series,\n      color: this.colors[seriesIndex % this.colors.length],\n      label: this.labels[seriesIndex] || `Series ${seriesIndex + 1}`,\n      visible: true,\n      opacity: 1,\n    }));\n  }\n\n  /**\n   * Processes data for pie charts\n   */\n  processPieData() {\n    const total = this.data.reduce((sum, val) => sum + val, 0);\n\n    if (total === 0) {\n      throw new Error('Pie chart total cannot be zero');\n    }\n\n    this.processedData = this.data.map((value, index) => ({\n      value,\n      percentage: (value / total) * 100,\n      angle: (value / total) * 2 * Math.PI,\n      color: this.colors[index % this.colors.length],\n      label: this.labels[index] || `Slice ${index + 1}`,\n      visible: true,\n      opacity: 1,\n    }));\n\n    // Calculate cumulative angles for rendering\n    let cumulativeAngle = 0;\n    this.processedData.forEach(slice => {\n      slice.startAngle = cumulativeAngle;\n      slice.endAngle = cumulativeAngle + slice.angle;\n      cumulativeAngle += slice.angle;\n    });\n  }\n\n  /**\n   * Processes scatter plot data\n   */\n  processScatterData() {\n    this.minX = Math.min(...this.data.map(point => point[0]));\n    this.maxX = Math.max(...this.data.map(point => point[0]));\n    this.minY = Math.min(...this.data.map(point => point[1]));\n    this.maxY = Math.max(...this.data.map(point => point[1]));\n\n    // Add padding\n    const xRange = this.maxX - this.minX;\n    const yRange = this.maxY - this.minY;\n    const xPadding = xRange * COMPONENT_CONSTANTS.CHART_PADDING_RATIO;\n    const yPadding = yRange * COMPONENT_CONSTANTS.CHART_PADDING_RATIO;\n\n    this.minX -= xPadding;\n    this.maxX += xPadding;\n    this.minY -= yPadding;\n    this.maxY += yPadding;\n\n    this.processedData = this.data.map((point, index) => ({\n      x: point[0],\n      y: point[1],\n      color: this.colors[index % this.colors.length],\n      label: this.labels[index] || `Point ${index + 1}`,\n      visible: true,\n      opacity: 1,\n    }));\n  }\n\n  /**\n   * Calculates scales for positioning data\n   */\n  calculateScales() {\n    try {\n      switch (this.type) {\n        case 'line':\n        case 'area':\n        case 'bar':\n          this.xScale =\n            this.chartWidth / (this.processedData[0].values.length - 1);\n          this.yScale = this.chartHeight / (this.maxValue - this.minValue);\n          break;\n\n        case 'scatter':\n          this.xScale = this.chartWidth / (this.maxX - this.minX);\n          this.yScale = this.chartHeight / (this.maxY - this.minY);\n          break;\n\n        case 'pie':\n          // Pie charts use radius calculation instead\n          this.radius =\n            Math.min(this.chartWidth, this.chartHeight) / 2 -\n            COMPONENT_CONSTANTS.CHART_RADIUS_MARGIN;\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'calculateScales');\n    }\n  }\n\n  /**\n   * Sets up legend configuration\n   */\n  setupLegend() {\n    if (!this.showLegend) return;\n\n    this.legend = {\n      x: this.width - COMPONENT_CONSTANTS.CHART_LEGEND_WIDTH,\n      y: this.margin.top,\n      width: 140,\n      itemHeight: 20,\n      items: this.processedData.map(item => ({\n        color: item.color,\n        label: item.label,\n        visible: item.visible,\n      })),\n    };\n  }\n\n  /**\n   * Sets up tooltip configuration\n   */\n  setupTooltip() {\n    if (!this.showTooltips) return;\n\n    this.tooltip = {\n      visible: false,\n      x: 0,\n      y: 0,\n      content: '',\n      width: 'auto',\n      height: 'auto',\n    };\n  }\n\n  /**\n   * Starts entrance animation\n   */\n  startEntranceAnimation() {\n    if (!this.animationsEnabled) return;\n\n    this.animationProgress = 0;\n    this.isAnimating = true;\n\n    this.animate('animationProgress', 1, UI_CONSTANTS.ANIMATION.DURATION.SLOW, {\n      easing: EASING_FUNCTIONS.EASE_OUT_CUBIC,\n      onComplete: () => {\n        this.isAnimating = false;\n        this.emit('animationComplete');\n      },\n    });\n  }\n\n  /**\n   * Handles mouse movement for interactions\n   * @param {Object} event\n   */\n  handleMouseMove(event) {\n    try {\n      if (!this.interactive) return;\n\n      const { x, y } = event;\n      const localX = x - this.x - this.margin.left;\n      const localY = y - this.y - this.margin.top;\n\n      // Find data point near cursor\n      const dataPoint = this.findDataPointAt(localX, localY);\n\n      if (dataPoint !== this.hoveredDataPoint) {\n        this.hoveredDataPoint = dataPoint;\n\n        if (dataPoint && this.showTooltips) {\n          this.showTooltip(dataPoint, x, y);\n        } else {\n          this.hideTooltip();\n        }\n\n        this.emit('dataPointHover', { dataPoint, x: localX, y: localY });\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleMouseMove');\n    }\n  }\n\n  /**\n   * Handles mouse down for selection\n   * @param {Object} event\n   */\n  handleMouseDown(event) {\n    try {\n      if (!this.interactive) return;\n\n      const { x, y } = event;\n      const localX = x - this.x - this.margin.left;\n      const localY = y - this.y - this.margin.top;\n\n      const dataPoint = this.findDataPointAt(localX, localY);\n\n      if (dataPoint) {\n        if (event.ctrlKey || event.metaKey) {\n          // Multi-select\n          if (this.selectedDataPoints.has(dataPoint)) {\n            this.selectedDataPoints.delete(dataPoint);\n          } else {\n            this.selectedDataPoints.add(dataPoint);\n          }\n        } else {\n          // Single select\n          this.selectedDataPoints.clear();\n          this.selectedDataPoints.add(dataPoint);\n        }\n\n        this.emit('dataPointSelect', {\n          dataPoint,\n          selectedPoints: Array.from(this.selectedDataPoints),\n        });\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleMouseDown');\n    }\n  }\n\n  /**\n   * Handles mouse up events\n   * @param {Object} event\n   */\n  handleMouseUp(_event) {\n    // Placeholder for future drag interactions\n  }\n\n  /**\n   * Handles keyboard navigation\n   * @param {Object} event\n   */\n  handleKeyDown(event) {\n    try {\n      if (!this.interactive) return;\n\n      switch (event.key) {\n        case 'Escape':\n          this.selectedDataPoints.clear();\n          this.hideTooltip();\n          this.emit('selectionCleared');\n          break;\n\n        case 'Enter':\n        case ' ':\n          if (this.hoveredDataPoint) {\n            this.selectedDataPoints.clear();\n            this.selectedDataPoints.add(this.hoveredDataPoint);\n            this.emit('dataPointSelect', {\n              dataPoint: this.hoveredDataPoint,\n              selectedPoints: Array.from(this.selectedDataPoints),\n            });\n          }\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleKeyDown');\n    }\n  }\n\n  /**\n   * Finds data point at given coordinates\n   * @param {number} x\n   * @param {number} y\n   * @returns {Object|null}\n   */\n  findDataPointAt(x, y) {\n    const tolerance = 10; // Pixel tolerance for hit detection\n\n    switch (this.type) {\n      case 'line':\n      case 'area':\n        return this.findLineDataPoint(x, y, tolerance);\n\n      case 'bar':\n        return this.findBarDataPoint(x, y);\n\n      case 'pie':\n        return this.findPieDataPoint(x, y);\n\n      case 'scatter':\n        return this.findScatterDataPoint(x, y, tolerance);\n\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Finds data point for line charts\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tolerance\n   * @returns {Object|null}\n   */\n  findLineDataPoint(x, y, tolerance) {\n    for (const series of this.processedData) {\n      for (let i = 0; i < series.values.length; i++) {\n        const pointX = i * this.xScale;\n        const pointY =\n          this.chartHeight - (series.values[i] - this.minValue) * this.yScale;\n\n        const distance = Math.sqrt(\n          Math.pow(x - pointX, 2) + Math.pow(y - pointY, 2)\n        );\n\n        if (distance <= tolerance) {\n          return {\n            series: series.label,\n            index: i,\n            value: series.values[i],\n            x: pointX,\n            y: pointY,\n            color: series.color,\n          };\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Finds data point for bar charts\n   * @param {number} x\n   * @param {number} y\n   * @returns {Object|null}\n   */\n  findBarDataPoint(x, y) {\n    const barWidth = this.chartWidth / this.processedData[0].values.length;\n    const barIndex = Math.floor(x / barWidth);\n\n    if (barIndex >= 0 && barIndex < this.processedData[0].values.length) {\n      for (const series of this.processedData) {\n        const value = series.values[barIndex];\n        const barHeight = (value - this.minValue) * this.yScale;\n        const barY = this.chartHeight - barHeight;\n\n        if (y >= barY && y <= this.chartHeight) {\n          return {\n            series: series.label,\n            index: barIndex,\n            value,\n            x: barIndex * barWidth + barWidth / 2,\n            y: barY + barHeight / 2,\n            color: series.color,\n          };\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Finds data point for pie charts\n   * @param {number} x\n   * @param {number} y\n   * @returns {Object|null}\n   */\n  findPieDataPoint(x, y) {\n    const centerX = this.chartWidth / 2;\n    const centerY = this.chartHeight / 2;\n\n    const distance = Math.sqrt(\n      Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2)\n    );\n\n    if (distance <= this.radius) {\n      const angle = Math.atan2(y - centerY, x - centerX);\n      const normalizedAngle = angle < 0 ? angle + 2 * Math.PI : angle;\n\n      for (const slice of this.processedData) {\n        if (\n          normalizedAngle >= slice.startAngle &&\n          normalizedAngle <= slice.endAngle\n        ) {\n          return {\n            label: slice.label,\n            value: slice.value,\n            percentage: slice.percentage,\n            color: slice.color,\n            angle: normalizedAngle,\n          };\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Finds data point for scatter plots\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tolerance\n   * @returns {Object|null}\n   */\n  findScatterDataPoint(x, y, tolerance) {\n    for (const point of this.processedData) {\n      const pointX = (point.x - this.minX) * this.xScale;\n      const pointY = this.chartHeight - (point.y - this.minY) * this.yScale;\n\n      const distance = Math.sqrt(\n        Math.pow(x - pointX, 2) + Math.pow(y - pointY, 2)\n      );\n\n      if (distance <= tolerance) {\n        return {\n          ...point,\n          screenX: pointX,\n          screenY: pointY,\n        };\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Shows tooltip for data point\n   * @param {Object} dataPoint\n   * @param {number} x\n   * @param {number} y\n   */\n  showTooltip(dataPoint, x, y) {\n    if (!this.tooltip) return;\n\n    this.tooltip.visible = true;\n    this.tooltip.x = x + 10;\n    this.tooltip.y = y - 10;\n    this.tooltip.content = this.formatTooltipContent(dataPoint);\n  }\n\n  /**\n   * Hides tooltip\n   */\n  hideTooltip() {\n    if (this.tooltip) {\n      this.tooltip.visible = false;\n    }\n  }\n\n  /**\n   * Formats tooltip content\n   * @param {Object} dataPoint\n   * @returns {string}\n   */\n  formatTooltipContent(dataPoint) {\n    switch (this.type) {\n      case 'pie':\n        return `${dataPoint.label}: ${dataPoint.value} (${dataPoint.percentage.toFixed(1)}%)`;\n\n      case 'scatter':\n        return `${dataPoint.label}: (${dataPoint.x}, ${dataPoint.y})`;\n\n      default:\n        return `${dataPoint.series}: ${dataPoint.value}`;\n    }\n  }\n\n  /**\n   * Enhanced canvas rendering with performance optimization\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas' || !this.visible) return;\n\n    try {\n      const startTime = performance.now();\n\n      // Clear background\n      renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n      renderer.fillRect(0, 0, this.width, this.height);\n\n      // Render title and subtitle\n      this.renderTitles(renderer);\n\n      // Set up chart area clipping\n      renderer.save();\n      renderer.beginPath();\n      renderer.rect(\n        this.margin.left,\n        this.margin.top,\n        this.chartWidth,\n        this.chartHeight\n      );\n      renderer.clip();\n\n      // Render grid and axes\n      if (this.showGrid && this.type !== 'pie') {\n        this.renderGrid(renderer);\n      }\n\n      if (this.showAxis && this.type !== 'pie') {\n        this.renderAxes(renderer);\n      }\n\n      // Render chart based on type\n      switch (this.type) {\n        case 'line':\n          this.renderLineChart(renderer);\n          break;\n        case 'area':\n          this.renderAreaChart(renderer);\n          break;\n        case 'bar':\n          this.renderBarChart(renderer);\n          break;\n        case 'pie':\n          this.renderPieChart(renderer);\n          break;\n        case 'scatter':\n          this.renderScatterPlot(renderer);\n          break;\n      }\n\n      renderer.restore();\n\n      // Render legend\n      if (this.showLegend) {\n        this.renderLegend(renderer);\n      }\n\n      // Render tooltip\n      if (this.tooltip && this.tooltip.visible) {\n        this.renderTooltip(renderer);\n      }\n\n      // Performance tracking\n      const renderTime = performance.now() - startTime;\n      this.lastRenderTime = renderTime;\n      this.renderCount++;\n\n      if (renderTime > COMPONENT_CONSTANTS.PERFORMANCE_THRESHOLD) {\n        UIUtils.debugLog(\n          'warn',\n          `Chart render took ${renderTime.toFixed(2)}ms`\n        );\n      }\n    } catch (error) {\n      this.errorHandler(error, 'renderSelf');\n    }\n  }\n\n  /**\n   * Renders chart titles\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderTitles(renderer) {\n    // Main title\n    if (this.title) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_900;\n      renderer.font = 'bold 18px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'top';\n      renderer.fillText(this.title, this.width / 2, 10);\n    }\n\n    // Subtitle\n    if (this.subtitle) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_600;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'top';\n      renderer.fillText(\n        this.subtitle,\n        this.width / 2,\n        COMPONENT_CONSTANTS.CHART_SUBTITLE_Y\n      );\n    }\n  }\n\n  /**\n   * Renders grid lines\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderGrid(renderer) {\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_200;\n    renderer.lineWidth = 1;\n    renderer.setLineDash([2, 2]);\n\n    // Horizontal grid lines\n    const gridLines = 5;\n    for (let i = 0; i <= gridLines; i++) {\n      const y = this.margin.top + (i / gridLines) * this.chartHeight;\n      renderer.beginPath();\n      renderer.moveTo(this.margin.left, y);\n      renderer.lineTo(this.margin.left + this.chartWidth, y);\n      renderer.stroke();\n    }\n\n    // Vertical grid lines (for non-pie charts)\n    if (this.type !== 'pie') {\n      const verticalLines =\n        this.type === 'bar'\n          ? this.processedData[0].values.length\n          : Math.min(10, this.processedData[0].values.length);\n\n      for (let i = 0; i <= verticalLines; i++) {\n        const x = this.margin.left + (i / verticalLines) * this.chartWidth;\n        renderer.beginPath();\n        renderer.moveTo(x, this.margin.top);\n        renderer.lineTo(x, this.margin.top + this.chartHeight);\n        renderer.stroke();\n      }\n    }\n\n    renderer.setLineDash([]);\n  }\n\n  /**\n   * Renders axes with labels\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderAxes(renderer) {\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_400;\n    renderer.lineWidth = 2;\n\n    // Y-axis\n    renderer.beginPath();\n    renderer.moveTo(this.margin.left, this.margin.top);\n    renderer.lineTo(this.margin.left, this.margin.top + this.chartHeight);\n    renderer.stroke();\n\n    // X-axis\n    renderer.beginPath();\n    renderer.moveTo(this.margin.left, this.margin.top + this.chartHeight);\n    renderer.lineTo(\n      this.margin.left + this.chartWidth,\n      this.margin.top + this.chartHeight\n    );\n    renderer.stroke();\n\n    // Y-axis labels\n    renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_700;\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'right';\n    renderer.textBaseline = 'middle';\n\n    const ySteps = 5;\n    for (let i = 0; i <= ySteps; i++) {\n      const value =\n        this.minValue + (i / ySteps) * (this.maxValue - this.minValue);\n      const y =\n        this.margin.top + this.chartHeight - (i / ySteps) * this.chartHeight;\n      renderer.fillText(value.toFixed(1), this.margin.left - 10, y);\n    }\n\n    // X-axis labels (for applicable chart types)\n    if (this.labels.length > 0) {\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'top';\n\n      this.labels.forEach((label, index) => {\n        const x =\n          this.margin.left +\n          (index / (this.labels.length - 1)) * this.chartWidth;\n        const y = this.margin.top + this.chartHeight + 10;\n        renderer.fillText(label, x, y);\n      });\n    }\n  }\n\n  /**\n   * Renders line chart\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderLineChart(renderer) {\n    this.processedData.forEach((series, _seriesIndex) => {\n      if (!series.visible) return;\n\n      renderer.strokeStyle = series.color;\n      renderer.lineWidth = 3;\n      renderer.lineCap = 'round';\n      renderer.lineJoin = 'round';\n      renderer.globalAlpha =\n        series.opacity * (this.animated ? this.animationProgress : 1);\n\n      renderer.beginPath();\n\n      series.values.forEach((value, index) => {\n        const x = this.margin.left + index * this.xScale;\n        const y =\n          this.margin.top +\n          this.chartHeight -\n          (value - this.minValue) * this.yScale;\n\n        if (index === 0) {\n          renderer.moveTo(x, y);\n        } else {\n          renderer.lineTo(x, y);\n        }\n      });\n\n      renderer.stroke();\n\n      // Render data points\n      series.values.forEach((value, index) => {\n        const x = this.margin.left + index * this.xScale;\n        const y =\n          this.margin.top +\n          this.chartHeight -\n          (value - this.minValue) * this.yScale;\n\n        renderer.fillStyle = series.color;\n        renderer.beginPath();\n        renderer.arc(\n          x,\n          y,\n          COMPONENT_CONSTANTS.CHART_POINT_RADIUS,\n          0,\n          2 * Math.PI\n        );\n        renderer.fill();\n\n        // Highlight selected points\n        const dataPoint = {\n          series: series.label,\n          index,\n          value,\n          x: x - this.margin.left,\n          y: y - this.margin.top,\n        };\n\n        if (this.selectedDataPoints.has(dataPoint)) {\n          renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n          renderer.lineWidth = 2;\n          renderer.stroke();\n        }\n      });\n\n      renderer.globalAlpha = 1;\n    });\n  }\n\n  /**\n   * Renders area chart\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderAreaChart(renderer) {\n    this.processedData.forEach((series, _seriesIndex) => {\n      if (!series.visible) return;\n\n      // Fill area\n      renderer.fillStyle = series.color;\n      renderer.globalAlpha =\n        COMPONENT_CONSTANTS.CHART_OPACITY *\n        series.opacity *\n        (this.animated ? this.animationProgress : 1);\n\n      renderer.beginPath();\n\n      // Start from bottom-left\n      renderer.moveTo(this.margin.left, this.margin.top + this.chartHeight);\n\n      // Draw line\n      series.values.forEach((value, index) => {\n        const x = this.margin.left + index * this.xScale;\n        const y =\n          this.margin.top +\n          this.chartHeight -\n          (value - this.minValue) * this.yScale;\n        renderer.lineTo(x, y);\n      });\n\n      // Close to bottom-right\n      const lastX = this.margin.left + (series.values.length - 1) * this.xScale;\n      renderer.lineTo(lastX, this.margin.top + this.chartHeight);\n      renderer.closePath();\n      renderer.fill();\n\n      renderer.globalAlpha = 1;\n\n      // Draw line on top\n      this.renderLineChart(renderer);\n    });\n  }\n\n  /**\n   * Renders bar chart\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderBarChart(renderer) {\n    const barWidth = this.chartWidth / this.processedData[0].values.length;\n    const seriesBarWidth =\n      (barWidth / this.processedData.length) *\n      COMPONENT_CONSTANTS.CHART_BAR_WIDTH_RATIO;\n\n    this.processedData.forEach((series, seriesIndex) => {\n      if (!series.visible) return;\n\n      renderer.fillStyle = series.color;\n      renderer.globalAlpha =\n        series.opacity * (this.animated ? this.animationProgress : 1);\n\n      series.values.forEach((value, index) => {\n        const x =\n          this.margin.left + index * barWidth + seriesIndex * seriesBarWidth;\n        const height = (value - this.minValue) * this.yScale;\n        const y = this.margin.top + this.chartHeight - height;\n\n        renderer.fillRect(x, y, seriesBarWidth, height);\n\n        // Selection highlight\n        const dataPoint = {\n          series: series.label,\n          index,\n          value,\n          x: x + seriesBarWidth / 2 - this.margin.left,\n          y: y + height / 2 - this.margin.top,\n        };\n\n        if (this.selectedDataPoints.has(dataPoint)) {\n          renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n          renderer.lineWidth = 3;\n          renderer.strokeRect(x, y, seriesBarWidth, height);\n        }\n      });\n\n      renderer.globalAlpha = 1;\n    });\n  }\n\n  /**\n   * Renders pie chart\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderPieChart(renderer) {\n    const centerX = this.margin.left + this.chartWidth / 2;\n    const centerY = this.margin.top + this.chartHeight / 2;\n\n    this.processedData.forEach((slice, _index) => {\n      if (!slice.visible) return;\n\n      const animationRadius =\n        this.radius * (this.animated ? this.animationProgress : 1);\n\n      renderer.fillStyle = slice.color;\n      renderer.globalAlpha = slice.opacity;\n\n      renderer.beginPath();\n      renderer.moveTo(centerX, centerY);\n      renderer.arc(\n        centerX,\n        centerY,\n        animationRadius,\n        slice.startAngle,\n        slice.endAngle\n      );\n      renderer.closePath();\n      renderer.fill();\n\n      // Slice border\n      renderer.strokeStyle = UI_CONSTANTS.COLORS.WHITE;\n      renderer.lineWidth = 2;\n      renderer.stroke();\n\n      // Selection highlight\n      if (this.selectedDataPoints.has(slice)) {\n        renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n        renderer.lineWidth = 4;\n        renderer.stroke();\n      }\n\n      // Labels\n      const labelAngle = (slice.startAngle + slice.endAngle) / 2;\n      const labelRadius =\n        animationRadius * COMPONENT_CONSTANTS.CHART_LABEL_RADIUS_RATIO;\n      const labelX = centerX + Math.cos(labelAngle) * labelRadius;\n      const labelY = centerY + Math.sin(labelAngle) * labelRadius;\n\n      renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n      renderer.font = 'bold 12px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(`${slice.percentage.toFixed(1)}%`, labelX, labelY);\n\n      renderer.globalAlpha = 1;\n    });\n  }\n\n  /**\n   * Renders scatter plot\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderScatterPlot(renderer) {\n    this.processedData.forEach((point, _index) => {\n      if (!point.visible) return;\n\n      const x = this.margin.left + (point.x - this.minX) * this.xScale;\n      const y =\n        this.margin.top +\n        this.chartHeight -\n        (point.y - this.minY) * this.yScale;\n\n      renderer.fillStyle = point.color;\n      renderer.globalAlpha =\n        point.opacity * (this.animated ? this.animationProgress : 1);\n\n      renderer.beginPath();\n      renderer.arc(\n        x,\n        y,\n        COMPONENT_CONSTANTS.CHART_SCATTER_POINT_RADIUS,\n        0,\n        2 * Math.PI\n      );\n      renderer.fill();\n\n      // Selection highlight\n      if (this.selectedDataPoints.has(point)) {\n        renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n        renderer.lineWidth = 3;\n        renderer.stroke();\n      }\n\n      renderer.globalAlpha = 1;\n    });\n  }\n\n  /**\n   * Renders legend\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderLegend(renderer) {\n    if (!this.legend) return;\n\n    const { x, y, width, itemHeight, items } = this.legend;\n\n    // Legend background\n    renderer.fillStyle = 'rgba(255, 255, 255, 0.9)';\n    renderer.fillRect(\n      x,\n      y,\n      width,\n      items.length * itemHeight + COMPONENT_CONSTANTS.CHART_LEGEND_ITEM_HEIGHT\n    );\n\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.GRAY_300;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(\n      x,\n      y,\n      width,\n      items.length * itemHeight + COMPONENT_CONSTANTS.CHART_LEGEND_ITEM_HEIGHT\n    );\n\n    // Legend items\n    items.forEach((item, index) => {\n      const itemY = y + 10 + index * itemHeight;\n\n      // Color box\n      renderer.fillStyle = item.color;\n      renderer.fillRect(\n        x + UI_CONSTANTS.SPACING.MD / 2,\n        itemY + UI_CONSTANTS.SPACING.XS,\n        COMPONENT_CONSTANTS.CHART_LEGEND_INDICATOR_SIZE,\n        COMPONENT_CONSTANTS.CHART_LEGEND_INDICATOR_HEIGHT\n      );\n\n      // Label\n      renderer.fillStyle = item.visible\n        ? UI_CONSTANTS.COLORS.GRAY_900\n        : UI_CONSTANTS.COLORS.GRAY_400;\n      renderer.font = '12px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(\n        item.label,\n        x + COMPONENT_CONSTANTS.CHART_LEGEND_TEXT_OFFSET,\n        itemY + UI_CONSTANTS.SPACING.MD / 2\n      );\n    });\n  }\n\n  /**\n   * Renders tooltip\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderTooltip(renderer) {\n    if (!this.tooltip || !this.tooltip.visible) return;\n\n    const { x, y, content } = this.tooltip;\n\n    // Measure text\n    renderer.font = '12px Arial';\n    const textWidth = renderer.measureText(content).width;\n    const padding = 8;\n    const tooltipWidth = textWidth + padding * 2;\n    const tooltipHeight =\n      COMPONENT_CONSTANTS.CHART_TOOLTIP_HEIGHT + padding * 2;\n\n    // Tooltip background\n    renderer.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    UIUtils.fillRoundedRect(\n      renderer,\n      x,\n      y,\n      tooltipWidth,\n      tooltipHeight,\n      COMPONENT_CONSTANTS.CHART_TOOLTIP_RADIUS\n    );\n\n    // Tooltip text\n    renderer.fillStyle = UI_CONSTANTS.COLORS.WHITE;\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(content, x + padding, y + tooltipHeight / 2);\n  }\n\n  /**\n   * Updates accessibility attributes\n   */\n  updateAccessibilityAttributes() {\n    this.ariaLabel = this.getAccessibilityDescription();\n  }\n\n  /**\n   * Gets accessibility description\n   * @returns {string}\n   */\n  getAccessibilityDescription() {\n    const dataCount =\n      this.type === 'pie'\n        ? this.processedData.length\n        : this.processedData.reduce(\n            (sum, series) => sum + series.values.length,\n            0\n          );\n\n    return (\n      `${this.type} chart titled \"${this.title}\" with ${dataCount} data points. ` +\n      `${this.subtitle ? `${this.subtitle} ` : ''}` +\n      `Interactive: ${this.interactive ? 'yes' : 'no'}.`\n    );\n  }\n\n  /**\n   * Default error handler\n   * @param {Error} error\n   * @param {string} context\n   */\n  defaultErrorHandler(error, context) {\n    UIUtils.debugLog('error', `Chart error in ${context}`, error);\n    this.emit('error', { error, context, component: 'Chart' });\n  }\n\n  /**\n   * Enhanced destroy method with cleanup\n   */\n  destroy() {\n    try {\n      // Stop any running animations\n      this.stopAnimations();\n\n      // Clean up data\n      this.processedData = null;\n      this.selectedDataPoints.clear();\n      this.hoveredDataPoint = null;\n\n      super.destroy();\n    } catch (error) {\n      this.errorHandler(error, 'destroy');\n    }\n  }\n}\n\n// ===== FORM COMPONENTS =====\nclass FormField extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || COMPONENT_CONSTANTS.DEFAULT_FORM_WIDTH,\n      height: options.height || COMPONENT_CONSTANTS.DEFAULT_FORM_HEIGHT,\n      ariaRole: 'group',\n    });\n\n    this.label = options.label || '';\n    this.type = options.type || 'text'; // 'text', 'number', 'email', 'password', 'textarea', 'select', 'checkbox', 'radio'\n    this.value = options.value || '';\n    this.placeholder = options.placeholder || '';\n    this.required = options.required || false;\n    this.disabled = options.disabled || false;\n    this.readonly = options.readonly || false;\n    this.maxLength = options.maxLength || null;\n    this.minLength = options.minLength || null;\n    this.pattern = options.pattern || null;\n    this.options = options.options || []; // For select, radio, checkbox\n    this.multiSelect = options.multiSelect || false;\n    this.validation = options.validation || null;\n    this.validateOnChange = options.validateOnChange !== false;\n    this.validateOnBlur = options.validateOnBlur !== false;\n    this.showCharacterCount = options.showCharacterCount || false;\n    this.helpText = options.helpText || '';\n\n    // State management\n    this.isValid = true;\n    this.errorMessage = '';\n    this.warningMessage = '';\n    this.successMessage = '';\n    this.isFocused = false;\n    this.isDirty = false;\n    this.isTouched = false;\n    this.isAnimating = false;\n\n    // Enhanced validation\n    this.validationRules = new Map();\n    this.asyncValidation = options.asyncValidation || null;\n    this.validationDebounceTime =\n      options.validationDebounceTime ||\n      COMPONENT_CONSTANTS.VALIDATION_DEBOUNCE_TIME;\n    this.validationTimer = null;\n\n    // Accessibility\n    this.ariaDescribedBy = [];\n    this.fieldId = options.fieldId || `field-${this.id}`;\n    this.errorId = `${this.fieldId}-error`;\n    this.helpId = `${this.fieldId}-help`;\n\n    // Performance and error handling\n    this.errorHandler =\n      options.errorHandler || this.defaultErrorHandler.bind(this);\n    this.lastRenderTime = 0;\n    this.renderCount = 0;\n\n    this.setupField();\n    this.setupValidation();\n    this.bindEvents();\n  }\n\n  /**\n   * Sets up the form field with initial configuration\n   */\n  setupField() {\n    try {\n      // Process options for select/radio/checkbox types\n      if (['select', 'radio', 'checkbox'].includes(this.type)) {\n        this.processOptions();\n      }\n\n      // Set initial accessibility attributes\n      this.updateAccessibilityAttributes();\n\n      // Initialize validation state\n      if (this.validateOnChange) {\n        this.validate();\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setupField');\n    }\n  }\n\n  /**\n   * Sets up validation rules\n   */\n  setupValidation() {\n    try {\n      // Built-in validation rules\n      if (this.required) {\n        this.addValidationRule('required', value => {\n          if (this.type === 'checkbox') {\n            return {\n              isValid: value === true,\n              message: 'This field is required',\n            };\n          }\n          const isEmpty = !value || value.toString().trim() === '';\n          return { isValid: !isEmpty, message: 'This field is required' };\n        });\n      }\n\n      if (this.minLength !== null) {\n        this.addValidationRule('minLength', value => {\n          const length = value ? value.toString().length : 0;\n          return {\n            isValid: length >= this.minLength,\n            message: `Minimum length is ${this.minLength} characters`,\n          };\n        });\n      }\n\n      if (this.maxLength !== null) {\n        this.addValidationRule('maxLength', value => {\n          const length = value ? value.toString().length : 0;\n          return {\n            isValid: length <= this.maxLength,\n            message: `Maximum length is ${this.maxLength} characters`,\n          };\n        });\n      }\n\n      if (this.pattern) {\n        this.addValidationRule('pattern', value => {\n          if (!value) return { isValid: true, message: '' };\n          const regex = new RegExp(this.pattern);\n          return {\n            isValid: regex.test(value.toString()),\n            message: 'Please enter a valid format',\n          };\n        });\n      }\n\n      // Type-specific validation\n      switch (this.type) {\n        case 'email':\n          this.addValidationRule('email', value => {\n            if (!value) return { isValid: true, message: '' };\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            return {\n              isValid: emailRegex.test(value),\n              message: 'Please enter a valid email address',\n            };\n          });\n          break;\n\n        case 'number':\n          this.addValidationRule('number', value => {\n            if (!value) return { isValid: true, message: '' };\n            const isValid = !isNaN(value) && isFinite(value);\n            return {\n              isValid,\n              message: 'Please enter a valid number',\n            };\n          });\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setupValidation');\n    }\n  }\n\n  /**\n   * Binds event handlers\n   */\n  bindEvents() {\n    try {\n      this.on('focus', () => this.handleFocus());\n      this.on('blur', () => this.handleBlur());\n      this.on('input', event => this.handleFieldInput(event));\n      this.on('change', event => this.handleChange(event));\n      this.on('keyDown', event => this.handleKeyDown(event));\n    } catch (error) {\n      this.errorHandler(error, 'bindEvents');\n    }\n  }\n\n  /**\n   * Processes options for select/radio/checkbox types\n   */\n  processOptions() {\n    this.processedOptions = this.options.map((option, index) => {\n      if (typeof option === 'string') {\n        return {\n          value: option,\n          label: option,\n          disabled: false,\n          selected: false,\n          id: `${this.fieldId}-option-${index}`,\n        };\n      } else {\n        return {\n          value: option.value,\n          label: option.label || option.value,\n          disabled: option.disabled || false,\n          selected: option.selected || false,\n          id: `${this.fieldId}-option-${index}`,\n          ...option,\n        };\n      }\n    });\n  }\n\n  /**\n   * Adds a validation rule\n   * @param {string} name\n   * @param {Function} validator\n   */\n  addValidationRule(name, validator) {\n    this.validationRules.set(name, validator);\n  }\n\n  /**\n   * Removes a validation rule\n   * @param {string} name\n   */\n  removeValidationRule(name) {\n    this.validationRules.delete(name);\n  }\n\n  /**\n   * Sets the field value with validation\n   * @param {any} newValue\n   * @param {boolean} skipValidation\n   */\n  setValue(newValue, skipValidation = false) {\n    try {\n      const oldValue = this.value;\n      this.value = newValue;\n      this.isDirty = true;\n\n      if (!skipValidation && this.validateOnChange) {\n        this.debouncedValidate();\n      }\n\n      this.emit('change', {\n        value: newValue,\n        oldValue,\n        isValid: this.isValid,\n        field: this,\n      });\n\n      // Update character count if enabled\n      if (this.showCharacterCount) {\n        this.updateCharacterCount();\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setValue');\n    }\n  }\n\n  /**\n   * Validates the field value\n   * @returns {boolean} Is valid\n   */\n  async validate() {\n    try {\n      this.clearMessages();\n      let isValid = true;\n      let firstErrorMessage = '';\n\n      // Run synchronous validation rules\n      for (const [name, validator] of this.validationRules) {\n        try {\n          const result = validator(this.value);\n          if (!result.isValid) {\n            isValid = false;\n            if (!firstErrorMessage) {\n              firstErrorMessage = result.message;\n            }\n          }\n        } catch (error) {\n          UIUtils.debugLog('warn', `Validation rule '${name}' failed`, error);\n        }\n      }\n\n      // Run custom validation if provided\n      if (this.validation && typeof this.validation === 'function') {\n        try {\n          const result = this.validation(this.value, this);\n          if (result && !result.isValid) {\n            isValid = false;\n            if (!firstErrorMessage) {\n              firstErrorMessage = result.message || 'Invalid value';\n            }\n          }\n        } catch (error) {\n          UIUtils.debugLog('warn', 'Custom validation failed', error);\n          isValid = false;\n          if (!firstErrorMessage) {\n            firstErrorMessage = 'Validation error occurred';\n          }\n        }\n      }\n\n      // Run async validation if provided\n      if (this.asyncValidation && typeof this.asyncValidation === 'function') {\n        try {\n          const result = await this.asyncValidation(this.value, this);\n          if (result && !result.isValid) {\n            isValid = false;\n            if (!firstErrorMessage) {\n              firstErrorMessage = result.message || 'Invalid value';\n            }\n          }\n        } catch (error) {\n          UIUtils.debugLog('warn', 'Async validation failed', error);\n          isValid = false;\n          if (!firstErrorMessage) {\n            firstErrorMessage = 'Async validation error occurred';\n          }\n        }\n      }\n\n      this.isValid = isValid;\n      this.errorMessage = firstErrorMessage;\n\n      this.updateAccessibilityAttributes();\n      this.emit('validation', {\n        isValid: this.isValid,\n        message: this.errorMessage,\n        field: this,\n      });\n\n      return this.isValid;\n    } catch (error) {\n      this.errorHandler(error, 'validate');\n      return false;\n    }\n  }\n\n  /**\n   * Debounced validation\n   */\n  debouncedValidate() {\n    if (this.validationTimer) {\n      clearTimeout(this.validationTimer);\n    }\n\n    this.validationTimer = setTimeout(() => {\n      this.validate();\n    }, this.validationDebounceTime);\n  }\n\n  /**\n   * Clears all validation messages\n   */\n  clearMessages() {\n    this.errorMessage = '';\n    this.warningMessage = '';\n    this.successMessage = '';\n  }\n\n  /**\n   * Sets a success message\n   * @param {string} message\n   */\n  setSuccessMessage(message) {\n    this.clearMessages();\n    this.successMessage = message;\n    this.isValid = true;\n  }\n\n  /**\n   * Sets a warning message\n   * @param {string} message\n   */\n  setWarningMessage(message) {\n    this.warningMessage = message;\n  }\n\n  /**\n   * Sets an error message\n   * @param {string} message\n   */\n  setErrorMessage(message) {\n    this.clearMessages();\n    this.errorMessage = message;\n    this.isValid = false;\n  }\n\n  /**\n   * Handles field focus\n   */\n  handleFocus() {\n    try {\n      this.isFocused = true;\n      this.animateFocus(true);\n      this.emit('fieldFocus', { field: this });\n    } catch (error) {\n      this.errorHandler(error, 'handleFocus');\n    }\n  }\n\n  /**\n   * Handles field blur\n   */\n  handleBlur() {\n    try {\n      this.isFocused = false;\n      this.isTouched = true;\n      this.animateFocus(false);\n\n      if (this.validateOnBlur) {\n        this.validate();\n      }\n\n      this.emit('fieldBlur', { field: this });\n    } catch (error) {\n      this.errorHandler(error, 'handleBlur');\n    }\n  }\n\n  /**\n   * Handles field value input events (internal event handling)\n   * @param {Object} event\n   */\n  handleFieldInput(event) {\n    try {\n      const newValue = event.value;\n      this.setValue(newValue);\n    } catch (error) {\n      this.errorHandler(error, 'handleFieldInput');\n    }\n  }\n\n  /**\n   * Handles change events\n   * @param {Object} event\n   */\n  handleChange(event) {\n    try {\n      // For certain field types, change might be different from input\n      if (this.type === 'select' || this.type === 'radio') {\n        this.setValue(event.value);\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleChange');\n    }\n  }\n\n  /**\n   * Handles keyboard events\n   * @param {Object} event\n   */\n  handleKeyDown(event) {\n    try {\n      switch (event.key) {\n        case 'Enter':\n          if (this.type === 'textarea') {\n            // Allow line breaks in textarea\n            return;\n          }\n          event.preventDefault();\n          this.emit('submit', { field: this, value: this.value });\n          break;\n\n        case 'Escape':\n          this.blur();\n          break;\n\n        case 'Tab':\n          // Allow natural tab navigation\n          break;\n\n        default:\n          // Handle type-specific key behaviors\n          this.handleTypeSpecificKeys(event);\n          break;\n      }\n    } catch (error) {\n      this.errorHandler(error, 'handleKeyDown');\n    }\n  }\n\n  /**\n   * Handles type-specific key behaviors\n   * @param {Object} event\n   */\n  handleTypeSpecificKeys(event) {\n    switch (this.type) {\n      case 'number':\n        // Only allow numeric input\n        if (\n          !/[0-9\\-+.,]/.test(event.key) &&\n          ![\n            'Backspace',\n            'Delete',\n            'ArrowLeft',\n            'ArrowRight',\n            'Home',\n            'End',\n          ].includes(event.key)\n        ) {\n          event.preventDefault();\n        }\n        break;\n\n      case 'select':\n      case 'radio':\n        this.handleSelectableKeyDown(event);\n        break;\n    }\n  }\n\n  /**\n   * Handles keyboard navigation for selectable fields\n   * @param {Object} event\n   */\n  handleSelectableKeyDown(event) {\n    if (!this.processedOptions || this.processedOptions.length === 0) return;\n\n    const currentIndex = this.processedOptions.findIndex(\n      opt => opt.value === this.value\n    );\n    let newIndex = currentIndex;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        newIndex = Math.min(currentIndex + 1, this.processedOptions.length - 1);\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        newIndex = Math.max(currentIndex - 1, 0);\n        break;\n\n      case 'Home':\n        event.preventDefault();\n        newIndex = 0;\n        break;\n\n      case 'End':\n        event.preventDefault();\n        newIndex = this.processedOptions.length - 1;\n        break;\n    }\n\n    if (\n      newIndex !== currentIndex &&\n      !this.processedOptions[newIndex].disabled\n    ) {\n      this.setValue(this.processedOptions[newIndex].value);\n    }\n  }\n\n  /**\n   * Updates character count display\n   */\n  updateCharacterCount() {\n    if (!this.showCharacterCount) return;\n\n    const currentLength = this.value ? this.value.toString().length : 0;\n    this.characterCount = {\n      current: currentLength,\n      max: this.maxLength,\n      remaining: this.maxLength ? this.maxLength - currentLength : null,\n    };\n  }\n\n  /**\n   * Animates focus state\n   * @param {boolean} focused\n   */\n  animateFocus(focused) {\n    if (!this.animationsEnabled) return;\n\n    this.isAnimating = true;\n\n    const targetScale = focused ? COMPONENT_CONSTANTS.FOCUS_SCALE : 1;\n    this.animate(\n      'focusScale',\n      targetScale,\n      COMPONENT_CONSTANTS.ANIMATION_NORMAL,\n      {\n        from: this.focusScale || 1,\n        easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n        onComplete: () => {\n          this.isAnimating = false;\n        },\n      }\n    );\n  }\n\n  /**\n   * Updates accessibility attributes\n   */\n  updateAccessibilityAttributes() {\n    this.ariaDescribedBy = [];\n\n    if (this.helpText) {\n      this.ariaDescribedBy.push(this.helpId);\n    }\n\n    if (!this.isValid && this.errorMessage) {\n      this.ariaDescribedBy.push(this.errorId);\n    }\n\n    this.ariaInvalid = !this.isValid;\n    this.ariaRequired = this.required;\n    this.ariaDisabled = this.disabled;\n    this.ariaReadonly = this.readonly;\n  }\n\n  /**\n   * Enhanced input handling for mouse and touch events\n   * @param {string} eventType\n   * @param {Object} eventData\n   * @returns {boolean}\n   */\n  handleInput(eventType, eventData) {\n    try {\n      if (!this.visible || this.disabled) return false;\n\n      const inBounds = this.containsPoint(eventData.x, eventData.y);\n\n      switch (eventType) {\n        case 'mousedown':\n        case 'touchstart':\n          if (inBounds) {\n            this.focus();\n            return true;\n          }\n          break;\n\n        case 'mousemove':\n          // Handle hover states for interactive elements\n          if (this.type === 'select' && this.processedOptions) {\n            this.updateOptionHover(eventData);\n          }\n          break;\n      }\n\n      return super.handleInput(eventType, eventData);\n    } catch (error) {\n      this.errorHandler(error, 'handleInput');\n      return false;\n    }\n  }\n\n  /**\n   * Updates hover state for options\n   * @param {Object} eventData\n   */\n  updateOptionHover(_eventData) {\n    // Implementation for hovering over select options\n    // This would be used in dropdown rendering\n  }\n\n  /**\n   * Enhanced canvas rendering with modern styling\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas' || !this.visible) return;\n\n    try {\n      const startTime = performance.now();\n\n      // Render based on field type\n      switch (this.type) {\n        case 'text':\n        case 'email':\n        case 'password':\n        case 'number':\n          this.renderTextInput(renderer);\n          break;\n\n        case 'textarea':\n          this.renderTextarea(renderer);\n          break;\n\n        case 'select':\n          this.renderSelect(renderer);\n          break;\n\n        case 'checkbox':\n          this.renderCheckbox(renderer);\n          break;\n\n        case 'radio':\n          this.renderRadioGroup(renderer);\n          break;\n      }\n\n      // Render label\n      this.renderLabel(renderer);\n\n      // Render messages\n      this.renderMessages(renderer);\n\n      // Render character count if enabled\n      if (this.showCharacterCount && this.characterCount) {\n        this.renderCharacterCount(renderer);\n      }\n\n      // Render focus ring if focused\n      if (this.isFocused && !this.disabled) {\n        this.renderFocusRing(renderer);\n      }\n\n      // Performance tracking\n      const renderTime = performance.now() - startTime;\n      this.lastRenderTime = renderTime;\n      this.renderCount++;\n\n      if (renderTime > COMPONENT_CONSTANTS.PERFORMANCE_THRESHOLD) {\n        UIUtils.debugLog(\n          'warn',\n          `FormField render took ${renderTime.toFixed(2)}ms`\n        );\n      }\n    } catch (error) {\n      this.errorHandler(error, 'renderSelf');\n    }\n  }\n\n  /**\n   * Renders text input field\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderTextInput(renderer) {\n    const fieldY = this.label ? COMPONENT_CONSTANTS.FORM_LABEL_HEIGHT : 0;\n    const fieldHeight =\n      this.height -\n      fieldY -\n      (this.errorMessage || this.helpText\n        ? COMPONENT_CONSTANTS.FORM_HELP_HEIGHT\n        : 0);\n\n    // Field background\n    let bgColor = this.disabled\n      ? UI_CONSTANTS.COLORS.GRAY_100\n      : UI_CONSTANTS.COLORS.WHITE;\n    if (this.readonly) {\n      bgColor = UI_CONSTANTS.COLORS.GRAY_50;\n    }\n\n    const scale = this.focusScale || 1;\n    const scaledWidth = this.width * scale;\n    const scaledHeight = fieldHeight * scale;\n    const offsetX = (this.width - scaledWidth) / 2;\n    const offsetY = (fieldHeight - scaledHeight) / 2;\n\n    renderer.fillStyle = bgColor;\n    renderer.fillRect(offsetX, fieldY + offsetY, scaledWidth, scaledHeight);\n\n    // Border\n    let borderColor = UI_CONSTANTS.COLORS.GRAY_300;\n    let borderWidth = 1;\n\n    if (!this.isValid) {\n      borderColor = UI_CONSTANTS.COLORS.DANGER;\n      borderWidth = 2;\n    } else if (this.isFocused) {\n      borderColor = UI_CONSTANTS.COLORS.PRIMARY;\n      borderWidth = 2;\n    } else if (this.successMessage) {\n      borderColor = UI_CONSTANTS.COLORS.SUCCESS;\n    } else if (this.warningMessage) {\n      borderColor = UI_CONSTANTS.COLORS.WARNING;\n    }\n\n    renderer.strokeStyle = borderColor;\n    renderer.lineWidth = borderWidth;\n    renderer.strokeRect(offsetX, fieldY + offsetY, scaledWidth, scaledHeight);\n\n    // Value text or placeholder\n    const displayValue = this.value || this.placeholder;\n    const isPlaceholder = !this.value && this.placeholder;\n\n    if (displayValue) {\n      renderer.fillStyle = this.disabled\n        ? UI_CONSTANTS.COLORS.GRAY_400\n        : isPlaceholder\n          ? UI_CONSTANTS.COLORS.GRAY_500\n          : UI_CONSTANTS.COLORS.GRAY_900;\n\n      renderer.font = `${isPlaceholder ? 'italic ' : ''}14px Arial`;\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n\n      // Handle password masking\n      const textToRender =\n        this.type === 'password' && this.value\n          ? '•'.repeat(this.value.length)\n          : displayValue;\n\n      // Truncate text if too long\n      const padding = UI_CONSTANTS.SPACING.SM;\n      const maxWidth = scaledWidth - padding * 2;\n      const truncatedText = UIUtils.truncateText(\n        textToRender,\n        maxWidth,\n        renderer.font,\n        renderer\n      );\n\n      renderer.fillText(\n        truncatedText,\n        offsetX + padding,\n        fieldY + offsetY + scaledHeight / 2\n      );\n    }\n\n    // Cursor (if focused and not readonly)\n    if (this.isFocused && !this.readonly && !this.disabled) {\n      this.renderCursor(renderer, offsetX, fieldY + offsetY, scaledHeight);\n    }\n  }\n\n  /**\n   * Renders textarea field\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderTextarea(renderer) {\n    // Similar to text input but with multi-line support\n    this.renderTextInput(renderer);\n\n    // TODO: Implement multi-line text rendering\n    // This would require text wrapping and line management\n  }\n\n  /**\n   * Renders select dropdown field\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelect(renderer) {\n    const fieldY = this.label ? COMPONENT_CONSTANTS.FORM_LABEL_HEIGHT : 0;\n    const fieldHeight =\n      this.height -\n      fieldY -\n      (this.errorMessage || this.helpText\n        ? COMPONENT_CONSTANTS.FORM_HELP_HEIGHT\n        : 0);\n\n    // Render as text input first\n    this.renderTextInput(renderer);\n\n    // Add dropdown arrow\n    const arrowSize = 8;\n    const arrowX = this.width - UI_CONSTANTS.SPACING.SM - arrowSize;\n    const arrowY = fieldY + fieldHeight / 2;\n\n    renderer.fillStyle = this.disabled\n      ? UI_CONSTANTS.COLORS.GRAY_400\n      : UI_CONSTANTS.COLORS.GRAY_600;\n\n    renderer.beginPath();\n    renderer.moveTo(arrowX, arrowY - arrowSize / 2);\n    renderer.lineTo(arrowX + arrowSize, arrowY - arrowSize / 2);\n    renderer.lineTo(arrowX + arrowSize / 2, arrowY + arrowSize / 2);\n    renderer.closePath();\n    renderer.fill();\n  }\n\n  /**\n   * Renders checkbox field\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderCheckbox(renderer) {\n    const checkboxSize = COMPONENT_CONSTANTS.CHECKBOX_SIZE;\n    const checkboxY = this.label\n      ? COMPONENT_CONSTANTS.FORM_LABEL_HEIGHT\n      : (this.height - checkboxSize) / 2;\n\n    // Checkbox background\n    renderer.fillStyle = this.disabled\n      ? UI_CONSTANTS.COLORS.GRAY_100\n      : UI_CONSTANTS.COLORS.WHITE;\n    renderer.fillRect(0, checkboxY, checkboxSize, checkboxSize);\n\n    // Checkbox border\n    let borderColor = UI_CONSTANTS.COLORS.GRAY_300;\n    if (!this.isValid) {\n      borderColor = UI_CONSTANTS.COLORS.DANGER;\n    } else if (this.isFocused) {\n      borderColor = UI_CONSTANTS.COLORS.PRIMARY;\n    }\n\n    renderer.strokeStyle = borderColor;\n    renderer.lineWidth = this.isFocused ? 2 : 1;\n    renderer.strokeRect(0, checkboxY, checkboxSize, checkboxSize);\n\n    // Checkbox check mark\n    if (this.value === true) {\n      renderer.strokeStyle = UI_CONSTANTS.COLORS.PRIMARY;\n      renderer.lineWidth = 2;\n      renderer.lineCap = 'round';\n\n      renderer.beginPath();\n      renderer.moveTo(\n        COMPONENT_CONSTANTS.CHECKBOX_CHECK_MARGIN,\n        checkboxY + checkboxSize / 2\n      );\n      renderer.lineTo(\n        checkboxSize / 2,\n        checkboxY + checkboxSize - COMPONENT_CONSTANTS.CHECKBOX_CHECK_OFFSET\n      );\n      renderer.lineTo(\n        checkboxSize - COMPONENT_CONSTANTS.CHECKBOX_CHECK_MARGIN,\n        checkboxY + COMPONENT_CONSTANTS.CHECKBOX_CHECK_OFFSET\n      );\n      renderer.stroke();\n    }\n\n    // Label text (to the right of checkbox)\n    if (this.label) {\n      renderer.fillStyle = this.disabled\n        ? UI_CONSTANTS.COLORS.GRAY_400\n        : UI_CONSTANTS.COLORS.GRAY_900;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(\n        this.label,\n        checkboxSize + UI_CONSTANTS.SPACING.SM,\n        checkboxY + checkboxSize / 2\n      );\n    }\n  }\n\n  /**\n   * Renders radio button group\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderRadioGroup(renderer) {\n    if (!this.processedOptions) return;\n\n    const radioSize = 18;\n    const spacing = 25;\n    const currentY = this.label ? COMPONENT_CONSTANTS.FORM_LABEL_HEIGHT : 0;\n\n    this.processedOptions.forEach((option, index) => {\n      const radioY = currentY + index * spacing;\n      const isSelected = this.value === option.value;\n\n      // Radio background\n      renderer.fillStyle = option.disabled\n        ? UI_CONSTANTS.COLORS.GRAY_100\n        : UI_CONSTANTS.COLORS.WHITE;\n      renderer.beginPath();\n      renderer.arc(\n        radioSize / 2,\n        radioY + radioSize / 2,\n        radioSize / 2,\n        0,\n        2 * Math.PI\n      );\n      renderer.fill();\n\n      // Radio border\n      let borderColor = UI_CONSTANTS.COLORS.GRAY_300;\n      if (!this.isValid) {\n        borderColor = UI_CONSTANTS.COLORS.DANGER;\n      } else if (this.isFocused && isSelected) {\n        borderColor = UI_CONSTANTS.COLORS.PRIMARY;\n      }\n\n      renderer.strokeStyle = borderColor;\n      renderer.lineWidth = this.isFocused && isSelected ? 2 : 1;\n      renderer.stroke();\n\n      // Radio selection\n      if (isSelected) {\n        renderer.fillStyle = UI_CONSTANTS.COLORS.PRIMARY;\n        renderer.beginPath();\n        renderer.arc(\n          radioSize / 2,\n          radioY + radioSize / 2,\n          radioSize / COMPONENT_CONSTANTS.RADIO_CHECK_RADIUS_DIVISOR,\n          0,\n          2 * Math.PI\n        );\n        renderer.fill();\n      }\n\n      // Option label\n      renderer.fillStyle = option.disabled\n        ? UI_CONSTANTS.COLORS.GRAY_400\n        : UI_CONSTANTS.COLORS.GRAY_900;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(\n        option.label,\n        radioSize + UI_CONSTANTS.SPACING.SM,\n        radioY + radioSize / 2\n      );\n    });\n  }\n\n  /**\n   * Renders field label\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderLabel(renderer) {\n    if (!this.label || this.type === 'checkbox') return; // Checkbox renders label differently\n\n    renderer.fillStyle = this.disabled\n      ? UI_CONSTANTS.COLORS.GRAY_400\n      : UI_CONSTANTS.COLORS.GRAY_700;\n    renderer.font = `${this.required ? 'bold ' : ''}12px Arial`;\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    let labelText = this.label;\n    if (this.required) {\n      labelText += ' *';\n    }\n\n    renderer.fillText(labelText, 0, 0);\n  }\n\n  /**\n   * Renders validation and help messages\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderMessages(renderer) {\n    const messageY = this.height - COMPONENT_CONSTANTS.FORM_MESSAGE_Y_OFFSET;\n\n    if (this.errorMessage) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.DANGER;\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'top';\n      renderer.fillText(this.errorMessage, 0, messageY);\n    } else if (this.successMessage) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.SUCCESS;\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'top';\n      renderer.fillText(this.successMessage, 0, messageY);\n    } else if (this.warningMessage) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.WARNING;\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'top';\n      renderer.fillText(this.warningMessage, 0, messageY);\n    } else if (this.helpText) {\n      renderer.fillStyle = UI_CONSTANTS.COLORS.GRAY_500;\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'top';\n      renderer.fillText(this.helpText, 0, messageY);\n    }\n  }\n\n  /**\n   * Renders character count\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderCharacterCount(renderer) {\n    if (!this.characterCount) return;\n\n    const countText = this.characterCount.max\n      ? `${this.characterCount.current}/${this.characterCount.max}`\n      : this.characterCount.current.toString();\n\n    const isOverLimit =\n      this.characterCount.max &&\n      this.characterCount.current > this.characterCount.max;\n\n    renderer.fillStyle = isOverLimit\n      ? UI_CONSTANTS.COLORS.DANGER\n      : UI_CONSTANTS.COLORS.GRAY_500;\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'right';\n    renderer.textBaseline = 'top';\n    renderer.fillText(\n      countText,\n      this.width,\n      this.height - COMPONENT_CONSTANTS.FORM_COUNT_Y_OFFSET\n    );\n  }\n\n  /**\n   * Renders text cursor\n   * @param {CanvasRenderingContext2D} renderer\n   * @param {number} x\n   * @param {number} y\n   * @param {number} height\n   */\n  renderCursor(renderer, x, y, height) {\n    // Simple blinking cursor\n    const cursorX =\n      x +\n      UI_CONSTANTS.SPACING.SM +\n      (this.value ? renderer.measureText(this.value).width : 0);\n\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.PRIMARY;\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(cursorX, y + COMPONENT_CONSTANTS.FORM_CURSOR_OFFSET);\n    renderer.lineTo(\n      cursorX,\n      y + height - COMPONENT_CONSTANTS.FORM_CURSOR_OFFSET\n    );\n    renderer.stroke();\n  }\n\n  /**\n   * Renders focus ring\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderFocusRing(renderer) {\n    const fieldY = this.label ? COMPONENT_CONSTANTS.FORM_LABEL_HEIGHT : 0;\n    const fieldHeight =\n      this.height -\n      fieldY -\n      (this.errorMessage || this.helpText\n        ? COMPONENT_CONSTANTS.FORM_HELP_HEIGHT\n        : 0);\n\n    renderer.strokeStyle = UI_CONSTANTS.COLORS.WARNING;\n    renderer.lineWidth = FOCUS_RING_WIDTH;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      -FOCUS_RING_WIDTH,\n      fieldY - FOCUS_RING_WIDTH,\n      this.width + FOCUS_RING_WIDTH * 2,\n      fieldHeight + FOCUS_RING_WIDTH * 2\n    );\n    renderer.setLineDash([]);\n  }\n\n  /**\n   * Gets accessibility description\n   * @returns {string}\n   */\n  getAccessibilityDescription() {\n    let description = `${this.type} field`;\n    if (this.label) description += ` labeled \"${this.label}\"`;\n    if (this.required) description += ', required';\n    if (this.disabled) description += ', disabled';\n    if (this.readonly) description += ', read-only';\n    if (!this.isValid) description += ', invalid';\n    return description;\n  }\n\n  /**\n   * Default error handler\n   * @param {Error} error\n   * @param {string} context\n   */\n  defaultErrorHandler(error, context) {\n    UIUtils.debugLog('error', `FormField error in ${context}`, error);\n    this.emit('error', { error, context, component: 'FormField' });\n  }\n\n  /**\n   * Enhanced destroy method with cleanup\n   */\n  destroy() {\n    try {\n      // Clear validation timer\n      if (this.validationTimer) {\n        clearTimeout(this.validationTimer);\n      }\n\n      // Stop any running animations\n      this.stopAnimations();\n\n      // Clear validation rules\n      this.validationRules.clear();\n\n      super.destroy();\n    } catch (error) {\n      this.errorHandler(error, 'destroy');\n    }\n  }\n}\n\n// ===== TOOLTIP SYSTEM =====\nclass Tooltip extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || 'auto',\n      height: options.height || 'auto',\n      ariaRole: 'tooltip',\n    });\n\n    this.content = options.content || '';\n    this.target = options.target || null;\n    this.position = options.position || 'top'; // 'top', 'bottom', 'left', 'right', 'auto'\n    this.showDelay =\n      options.showDelay || COMPONENT_CONSTANTS.TOOLTIP_SHOW_DELAY;\n    this.hideDelay =\n      options.hideDelay || COMPONENT_CONSTANTS.TOOLTIP_HIDE_DELAY;\n    this.offset = options.offset || 10;\n    this.maxWidth = options.maxWidth || COMPONENT_CONSTANTS.TOOLTIP_MAX_WIDTH;\n    this.theme = options.theme || 'dark'; // 'dark', 'light', 'custom'\n    this.allowHtml = options.allowHtml || false;\n    this.interactive = options.interactive || false;\n    this.followCursor = options.followCursor || false;\n    this.persistent = options.persistent || false; // Stay open until explicitly closed\n    this.arrow = options.arrow !== false;\n    this.animation = options.animation || 'fade'; // 'fade', 'scale', 'slide', 'none'\n\n    // State management\n    this.isVisible = false;\n    this.isAnimating = false;\n    this.showTimer = null;\n    this.hideTimer = null;\n    this.currentPosition = this.position;\n    this.calculatedDimensions = { width: 0, height: 0 };\n    this.arrowPosition = { x: 0, y: 0, direction: 'up' };\n\n    // Performance and accessibility\n    this.errorHandler =\n      options.errorHandler || this.defaultErrorHandler.bind(this);\n    this.lastRenderTime = 0;\n    this.renderCount = 0;\n\n    // Auto-positioning boundaries\n    this.viewportBounds = null;\n    this.autoPositionPadding = 10;\n\n    // Touch handling\n    this.touchStartTime = 0;\n    this.longPressDuration = 500;\n    this.longPressTimer = null;\n\n    this.setupTooltip();\n    this.bindEvents();\n  }\n\n  /**\n   * Sets up tooltip with initial configuration\n   */\n  setupTooltip() {\n    try {\n      if (this.target) {\n        this.bindTargetEvents();\n      }\n\n      this.updateViewportBounds();\n      this.calculateDimensions();\n      this.updateAccessibilityAttributes();\n    } catch (error) {\n      this.errorHandler(error, 'setupTooltip');\n    }\n  }\n\n  /**\n   * Binds event handlers\n   */\n  bindEvents() {\n    try {\n      // Global events for positioning updates\n      if (typeof window !== 'undefined') {\n        window.addEventListener('resize', () => this.updateViewportBounds());\n        window.addEventListener('scroll', () => this.updatePosition());\n      }\n    } catch (error) {\n      this.errorHandler(error, 'bindEvents');\n    }\n  }\n\n  /**\n   * Binds events to target element\n   */\n  bindTargetEvents() {\n    if (!this.target) return;\n\n    try {\n      // Mouse events\n      this.target.on('mouseenter', event => this.handleTargetMouseEnter(event));\n      this.target.on('mouseleave', event => this.handleTargetMouseLeave(event));\n      this.target.on('mousemove', event => this.handleTargetMouseMove(event));\n\n      // Touch events for mobile\n      this.target.on('touchstart', event => this.handleTargetTouchStart(event));\n      this.target.on('touchend', event => this.handleTargetTouchEnd(event));\n      this.target.on('touchcancel', event =>\n        this.handleTargetTouchCancel(event)\n      );\n\n      // Focus events for accessibility\n      this.target.on('focus', () => this.handleTargetFocus());\n      this.target.on('blur', () => this.handleTargetBlur());\n\n      // Keyboard events\n      this.target.on('keydown', event => this.handleTargetKeyDown(event));\n    } catch (error) {\n      this.errorHandler(error, 'bindTargetEvents');\n    }\n  }\n\n  /**\n   * Sets new content for the tooltip\n   * @param {string} content\n   */\n  setContent(content) {\n    try {\n      this.content = content;\n      this.calculateDimensions();\n\n      if (this.isVisible) {\n        this.updatePosition();\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setContent');\n    }\n  }\n\n  /**\n   * Sets new target for the tooltip\n   * @param {Object} target\n   */\n  setTarget(target) {\n    try {\n      // Remove old target events\n      if (this.target) {\n        this.unbindTargetEvents();\n      }\n\n      this.target = target;\n\n      if (target) {\n        this.bindTargetEvents();\n      }\n    } catch (error) {\n      this.errorHandler(error, 'setTarget');\n    }\n  }\n\n  /**\n   * Unbinds events from current target\n   */\n  unbindTargetEvents() {\n    if (!this.target) return;\n\n    // Remove all event listeners\n    // This would depend on the event system implementation\n    this.target.off('mouseenter');\n    this.target.off('mouseleave');\n    this.target.off('mousemove');\n    this.target.off('touchstart');\n    this.target.off('touchend');\n    this.target.off('touchcancel');\n    this.target.off('focus');\n    this.target.off('blur');\n    this.target.off('keydown');\n  }\n\n  /**\n   * Calculates tooltip dimensions based on content\n   */\n  calculateDimensions() {\n    try {\n      if (!this.content) {\n        this.calculatedDimensions = { width: 0, height: 0 };\n        return;\n      }\n\n      // Create temporary canvas to measure text\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      ctx.font = this.getFont();\n\n      // Split content into lines and measure\n      const lines = this.wrapText(this.content, this.maxWidth, ctx);\n      const lineHeight = this.getLineHeight();\n      const padding = this.getPadding();\n\n      const textWidth = Math.max(\n        ...lines.map(line => ctx.measureText(line).width)\n      );\n      const textHeight = lines.length * lineHeight;\n\n      this.calculatedDimensions = {\n        width: Math.min(textWidth + padding.horizontal, this.maxWidth),\n        height: textHeight + padding.vertical,\n        lines,\n      };\n\n      // Update actual dimensions\n      this.width = this.calculatedDimensions.width;\n      this.height = this.calculatedDimensions.height;\n    } catch (error) {\n      this.errorHandler(error, 'calculateDimensions');\n    }\n  }\n\n  /**\n   * Wraps text to fit within max width\n   * @param {string} text\n   * @param {number} maxWidth\n   * @param {CanvasRenderingContext2D} ctx\n   * @returns {Array<string>}\n   */\n  wrapText(text, maxWidth, ctx) {\n    const words = text.split(' ');\n    const lines = [];\n    let currentLine = '';\n\n    for (const word of words) {\n      const testLine = currentLine ? `${currentLine} ${word}` : word;\n      const metrics = ctx.measureText(testLine);\n\n      if (metrics.width > maxWidth && currentLine) {\n        lines.push(currentLine);\n        currentLine = word;\n      } else {\n        currentLine = testLine;\n      }\n    }\n\n    if (currentLine) {\n      lines.push(currentLine);\n    }\n\n    return lines;\n  }\n\n  /**\n   * Gets font string for text measurement\n   * @returns {string}\n   */\n  getFont() {\n    return '12px Arial';\n  }\n\n  /**\n   * Gets line height for text\n   * @returns {number}\n   */\n  getLineHeight() {\n    return COMPONENT_CONSTANTS.TOOLTIP_BASELINE_SIZE;\n  }\n\n  /**\n   * Gets padding values\n   * @returns {Object}\n   */\n  getPadding() {\n    return {\n      horizontal: UI_CONSTANTS.SPACING.SM * 2,\n      vertical: UI_CONSTANTS.SPACING.XS * 2,\n      top: UI_CONSTANTS.SPACING.XS,\n      right: UI_CONSTANTS.SPACING.SM,\n      bottom: UI_CONSTANTS.SPACING.XS,\n      left: UI_CONSTANTS.SPACING.SM,\n    };\n  }\n\n  /**\n   * Updates viewport bounds for auto-positioning\n   */\n  updateViewportBounds() {\n    try {\n      if (typeof window !== 'undefined') {\n        this.viewportBounds = {\n          width: window.innerWidth,\n          height: window.innerHeight,\n          scrollX: window.scrollX || 0,\n          scrollY: window.scrollY || 0,\n        };\n      } else {\n        // Fallback for non-browser environments\n        this.viewportBounds = {\n          width: 1920,\n          height: 1080,\n          scrollX: 0,\n          scrollY: 0,\n        };\n      }\n    } catch (error) {\n      this.errorHandler(error, 'updateViewportBounds');\n    }\n  }\n\n  /**\n   * Schedules tooltip to show\n   * @param {Object} event\n   */\n  scheduleShow(event) {\n    try {\n      this.clearTimers();\n\n      if (this.isVisible) return;\n\n      this.showTimer = setTimeout(() => {\n        this.show(event);\n      }, this.showDelay);\n    } catch (error) {\n      this.errorHandler(error, 'scheduleShow');\n    }\n  }\n\n  /**\n   * Schedules tooltip to hide\n   */\n  scheduleHide() {\n    try {\n      this.clearTimers();\n\n      if (!this.isVisible || this.persistent) return;\n\n      this.hideTimer = setTimeout(() => {\n        this.hide();\n      }, this.hideDelay);\n    } catch (error) {\n      this.errorHandler(error, 'scheduleHide');\n    }\n  }\n\n  /**\n   * Clears all timers\n   */\n  clearTimers() {\n    if (this.showTimer) {\n      clearTimeout(this.showTimer);\n      this.showTimer = null;\n    }\n    if (this.hideTimer) {\n      clearTimeout(this.hideTimer);\n      this.hideTimer = null;\n    }\n    if (this.longPressTimer) {\n      clearTimeout(this.longPressTimer);\n      this.longPressTimer = null;\n    }\n  }\n\n  /**\n   * Shows the tooltip with animation\n   * @param {Object} event\n   */\n  show(event) {\n    try {\n      if (this.isVisible || this.isAnimating || !this.content) return;\n\n      this.calculateDimensions();\n      this.calculatePosition(event);\n\n      this.isVisible = true;\n      this.isAnimating = true;\n\n      // Start entrance animation\n      this.startEntranceAnimation();\n\n      this.emit('show', { tooltip: this });\n    } catch (error) {\n      this.errorHandler(error, 'show');\n    }\n  }\n\n  /**\n   * Hides the tooltip with animation\n   */\n  hide() {\n    try {\n      if (!this.isVisible || this.isAnimating) return;\n\n      this.isAnimating = true;\n\n      // Start exit animation\n      this.startExitAnimation().then(() => {\n        this.isVisible = false;\n        this.isAnimating = false;\n        this.emit('hide', { tooltip: this });\n      });\n    } catch (error) {\n      this.errorHandler(error, 'hide');\n    }\n  }\n\n  /**\n   * Toggles tooltip visibility\n   */\n  toggle(event) {\n    if (this.isVisible) {\n      this.hide();\n    } else {\n      this.show(event);\n    }\n  }\n\n  /**\n   * Calculates optimal position for tooltip\n   * @param {Object} event\n   */\n  calculatePosition(event) {\n    try {\n      if (!this.target && !event) return;\n\n      let targetBounds;\n\n      if (this.followCursor && event) {\n        // Position near cursor\n        targetBounds = {\n          x: event.x || event.clientX || 0,\n          y: event.y || event.clientY || 0,\n          width: 0,\n          height: 0,\n        };\n      } else if (this.target) {\n        // Position relative to target\n        targetBounds = this.target.getBounds\n          ? this.target.getBounds()\n          : {\n              x: this.target.x || 0,\n              y: this.target.y || 0,\n              width: this.target.width || 0,\n              height: this.target.height || 0,\n            };\n      } else {\n        return;\n      }\n\n      // Try preferred position first\n      let position = this.tryPosition(this.position, targetBounds);\n\n      // If auto-positioning or preferred position doesn't fit, find best position\n      if ((this.position === 'auto' || !position.fits) && this.viewportBounds) {\n        position = this.findBestPosition(targetBounds);\n      }\n\n      this.x = position.x;\n      this.y = position.y;\n      this.currentPosition = position.direction;\n      this.arrowPosition = position.arrow;\n    } catch (error) {\n      this.errorHandler(error, 'calculatePosition');\n    }\n  }\n\n  /**\n   * Tries to position tooltip in specified direction\n   * @param {string} direction\n   * @param {Object} targetBounds\n   * @returns {Object}\n   */\n  tryPosition(direction, targetBounds) {\n    const tooltip = {\n      width: this.calculatedDimensions.width,\n      height: this.calculatedDimensions.height,\n    };\n\n    let x, y, arrowX, arrowY, arrowDirection;\n\n    switch (direction) {\n      case 'top':\n        x = targetBounds.x + targetBounds.width / 2 - tooltip.width / 2;\n        y = targetBounds.y - tooltip.height - this.offset;\n        arrowX = tooltip.width / 2;\n        arrowY = tooltip.height;\n        arrowDirection = 'down';\n        break;\n\n      case 'bottom':\n        x = targetBounds.x + targetBounds.width / 2 - tooltip.width / 2;\n        y = targetBounds.y + targetBounds.height + this.offset;\n        arrowX = tooltip.width / 2;\n        arrowY = 0;\n        arrowDirection = 'up';\n        break;\n\n      case 'left':\n        x = targetBounds.x - tooltip.width - this.offset;\n        y = targetBounds.y + targetBounds.height / 2 - tooltip.height / 2;\n        arrowX = tooltip.width;\n        arrowY = tooltip.height / 2;\n        arrowDirection = 'right';\n        break;\n\n      case 'right':\n        x = targetBounds.x + targetBounds.width + this.offset;\n        y = targetBounds.y + targetBounds.height / 2 - tooltip.height / 2;\n        arrowX = 0;\n        arrowY = tooltip.height / 2;\n        arrowDirection = 'left';\n        break;\n\n      default:\n        // Default to top\n        return this.tryPosition('top', targetBounds);\n    }\n\n    // Check if position fits in viewport\n    const fits = this.checkViewportFit(x, y, tooltip.width, tooltip.height);\n\n    return {\n      x,\n      y,\n      direction,\n      fits,\n      arrow: { x: arrowX, y: arrowY, direction: arrowDirection },\n    };\n  }\n\n  /**\n   * Finds the best position that fits in viewport\n   * @param {Object} targetBounds\n   * @returns {Object}\n   */\n  findBestPosition(targetBounds) {\n    const positions = ['top', 'bottom', 'right', 'left'];\n\n    // Try each position and score them\n    const scoredPositions = positions.map(pos => {\n      const result = this.tryPosition(pos, targetBounds);\n      result.score = this.scorePosition(result, targetBounds);\n      return result;\n    });\n\n    // Sort by score (higher is better)\n    scoredPositions.sort((a, b) => b.score - a.score);\n\n    // Return best position, with adjustments if needed\n    const bestPosition = scoredPositions[0];\n    return this.adjustPositionToFit(bestPosition);\n  }\n\n  /**\n   * Scores a position based on visibility and alignment\n   * @param {Object} position\n   * @param {Object} targetBounds\n   * @returns {number}\n   */\n  scorePosition(position, targetBounds) {\n    let score = 0;\n\n    // Prefer positions that fit completely in viewport\n    if (position.fits) {\n      score += 100;\n    }\n\n    // Prefer positions with better alignment to target center\n    const targetCenterX = targetBounds.x + targetBounds.width / 2;\n    const targetCenterY = targetBounds.y + targetBounds.height / 2;\n    const tooltipCenterX = position.x + this.calculatedDimensions.width / 2;\n    const tooltipCenterY = position.y + this.calculatedDimensions.height / 2;\n\n    const alignmentScore =\n      COMPONENT_CONSTANTS.ALIGNMENT_CENTER_BASE -\n      Math.min(\n        COMPONENT_CONSTANTS.ALIGNMENT_CENTER_BASE,\n        Math.abs(targetCenterX - tooltipCenterX) +\n          Math.abs(targetCenterY - tooltipCenterY)\n      );\n    score += alignmentScore;\n\n    // Prefer top and bottom positions over left and right\n    if (position.direction === 'top' || position.direction === 'bottom') {\n      score += 10;\n    }\n\n    return score;\n  }\n\n  /**\n   * Adjusts position to fit better in viewport\n   * @param {Object} position\n   * @returns {Object}\n   */\n  adjustPositionToFit(position) {\n    if (!this.viewportBounds) return position;\n\n    let { x, y } = position;\n    const padding = this.autoPositionPadding;\n\n    // Adjust horizontally\n    if (x < padding) {\n      x = padding;\n    } else if (\n      x + this.calculatedDimensions.width >\n      this.viewportBounds.width - padding\n    ) {\n      x = this.viewportBounds.width - this.calculatedDimensions.width - padding;\n    }\n\n    // Adjust vertically\n    if (y < padding) {\n      y = padding;\n    } else if (\n      y + this.calculatedDimensions.height >\n      this.viewportBounds.height - padding\n    ) {\n      y =\n        this.viewportBounds.height - this.calculatedDimensions.height - padding;\n    }\n\n    return {\n      ...position,\n      x,\n      y,\n      fits: true,\n    };\n  }\n\n  /**\n   * Checks if tooltip fits in viewport at given position\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   * @returns {boolean}\n   */\n  checkViewportFit(x, y, width, height) {\n    if (!this.viewportBounds) return true;\n\n    const padding = this.autoPositionPadding;\n\n    return (\n      x >= padding &&\n      y >= padding &&\n      x + width <= this.viewportBounds.width - padding &&\n      y + height <= this.viewportBounds.height - padding\n    );\n  }\n\n  /**\n   * Updates tooltip position (for following cursor or target movement)\n   * @param {Object} event\n   */\n  updatePosition(event) {\n    if (this.isVisible && !this.isAnimating) {\n      this.calculatePosition(event);\n    }\n  }\n\n  /**\n   * Starts entrance animation\n   */\n  startEntranceAnimation() {\n    if (!this.animationsEnabled || this.animation === 'none') {\n      this.isAnimating = false;\n      return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n      switch (this.animation) {\n        case 'fade':\n          this.alpha = 0;\n          this.animate('alpha', 1, COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_IN, {\n            easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n            onComplete: () => {\n              this.isAnimating = false;\n              resolve();\n            },\n          });\n          break;\n\n        case 'scale':\n          this.scale = 0;\n          this.animate('scale', 1, COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_IN, {\n            easing: EASING_FUNCTIONS.EASE_OUT_BACK,\n            onComplete: () => {\n              this.isAnimating = false;\n              resolve();\n            },\n          });\n          break;\n\n        case 'slide': {\n          const slideOffset =\n            this.currentPosition === 'top' || this.currentPosition === 'bottom'\n              ? this.currentPosition === 'top'\n                ? -COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n                : COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n              : this.currentPosition === 'left'\n                ? -COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n                : COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET;\n\n          if (\n            this.currentPosition === 'top' ||\n            this.currentPosition === 'bottom'\n          ) {\n            this.y += slideOffset;\n            this.animate(\n              'y',\n              this.y - slideOffset,\n              COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_IN,\n              {\n                easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n                onComplete: () => {\n                  this.isAnimating = false;\n                  resolve();\n                },\n              }\n            );\n          } else {\n            this.x += slideOffset;\n            this.animate(\n              'x',\n              this.x - slideOffset,\n              COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_IN,\n              {\n                easing: EASING_FUNCTIONS.EASE_OUT_QUAD,\n                onComplete: () => {\n                  this.isAnimating = false;\n                  resolve();\n                },\n              }\n            );\n          }\n          break;\n        }\n\n        default:\n          this.isAnimating = false;\n          resolve();\n          break;\n      }\n    });\n  }\n\n  /**\n   * Starts exit animation\n   */\n  startExitAnimation() {\n    if (!this.animationsEnabled || this.animation === 'none') {\n      return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n      switch (this.animation) {\n        case 'fade':\n          this.animate('alpha', 0, COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_OUT, {\n            easing: EASING_FUNCTIONS.EASE_IN_QUAD,\n            onComplete: resolve,\n          });\n          break;\n\n        case 'scale':\n          this.animate('scale', 0, COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_OUT, {\n            easing: EASING_FUNCTIONS.EASE_IN_BACK,\n            onComplete: resolve,\n          });\n          break;\n\n        case 'slide': {\n          const slideOffset =\n            this.currentPosition === 'top' || this.currentPosition === 'bottom'\n              ? this.currentPosition === 'top'\n                ? -COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n                : COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n              : this.currentPosition === 'left'\n                ? -COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET\n                : COMPONENT_CONSTANTS.TOOLTIP_SLIDE_OFFSET;\n\n          if (\n            this.currentPosition === 'top' ||\n            this.currentPosition === 'bottom'\n          ) {\n            this.animate(\n              'y',\n              this.y + slideOffset,\n              COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_OUT,\n              {\n                easing: EASING_FUNCTIONS.EASE_IN_QUAD,\n                onComplete: resolve,\n              }\n            );\n          } else {\n            this.animate(\n              'x',\n              this.x + slideOffset,\n              COMPONENT_CONSTANTS.TOOLTIP_ANIMATION_OUT,\n              {\n                easing: EASING_FUNCTIONS.EASE_IN_QUAD,\n                onComplete: resolve,\n              }\n            );\n          }\n          break;\n        }\n\n        default:\n          resolve();\n          break;\n      }\n    });\n  }\n\n  // Event handlers for target interactions\n  handleTargetMouseEnter(event) {\n    this.scheduleShow(event);\n  }\n\n  handleTargetMouseLeave(_event) {\n    if (!this.interactive) {\n      this.scheduleHide();\n    }\n  }\n\n  handleTargetMouseMove(event) {\n    if (this.followCursor && this.isVisible) {\n      this.updatePosition(event);\n    }\n  }\n\n  handleTargetTouchStart(event) {\n    this.touchStartTime = Date.now();\n    this.longPressTimer = setTimeout(() => {\n      this.show(event);\n    }, this.longPressDuration);\n  }\n\n  handleTargetTouchEnd(event) {\n    this.clearTimers();\n\n    const touchDuration = Date.now() - this.touchStartTime;\n    if (touchDuration < this.longPressDuration) {\n      // Short tap - toggle tooltip\n      this.toggle(event);\n    }\n  }\n\n  handleTargetTouchCancel(_event) {\n    this.clearTimers();\n    this.scheduleHide();\n  }\n\n  handleTargetFocus() {\n    this.scheduleShow();\n  }\n\n  handleTargetBlur() {\n    this.scheduleHide();\n  }\n\n  handleTargetKeyDown(event) {\n    if (event.key === 'Escape' && this.isVisible) {\n      this.hide();\n    }\n  }\n\n  /**\n   * Updates accessibility attributes\n   */\n  updateAccessibilityAttributes() {\n    this.ariaLabel = this.content;\n    this.ariaLive = 'polite';\n    this.ariaAtomic = true;\n  }\n\n  /**\n   * Enhanced canvas rendering with modern styling\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas' || !this.visible || !this.isVisible) return;\n\n    try {\n      const startTime = performance.now();\n\n      // Skip rendering if not visible or transparent\n      if (this.alpha <= 0 || this.scale <= 0) return;\n\n      renderer.save();\n\n      // Apply transformations\n      if (this.scale !== 1) {\n        renderer.scale(this.scale, this.scale);\n      }\n\n      renderer.globalAlpha = this.alpha;\n\n      // Render tooltip background\n      this.renderBackground(renderer);\n\n      // Render arrow if enabled\n      if (this.arrow) {\n        this.renderArrow(renderer);\n      }\n\n      // Render content\n      this.renderContent(renderer);\n\n      renderer.restore();\n\n      // Performance tracking\n      const renderTime = performance.now() - startTime;\n      this.lastRenderTime = renderTime;\n      this.renderCount++;\n\n      if (renderTime > COMPONENT_CONSTANTS.PERFORMANCE_THRESHOLD) {\n        UIUtils.debugLog(\n          'warn',\n          `Tooltip render took ${renderTime.toFixed(2)}ms`\n        );\n      }\n    } catch (error) {\n      this.errorHandler(error, 'renderSelf');\n    }\n  }\n\n  /**\n   * Renders tooltip background\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderBackground(renderer) {\n    const bgColor = this.getBackgroundColor();\n    const borderColor = this.getBorderColor();\n    const borderRadius = 6;\n\n    // Shadow\n    renderer.fillStyle = 'rgba(0, 0, 0, 0.1)';\n    UIUtils.fillRoundedRect(\n      renderer,\n      2,\n      2,\n      this.width,\n      this.height,\n      borderRadius\n    );\n\n    // Background\n    renderer.fillStyle = bgColor;\n    UIUtils.fillRoundedRect(\n      renderer,\n      0,\n      0,\n      this.width,\n      this.height,\n      borderRadius\n    );\n\n    // Border\n    if (borderColor) {\n      renderer.strokeStyle = borderColor;\n      renderer.lineWidth = 1;\n      UIUtils.strokeRoundedRect(\n        renderer,\n        0,\n        0,\n        this.width,\n        this.height,\n        borderRadius\n      );\n    }\n  }\n\n  /**\n   * Gets background color based on theme\n   * @returns {string}\n   */\n  getBackgroundColor() {\n    switch (this.theme) {\n      case 'light':\n        return UI_CONSTANTS.COLORS.WHITE;\n      case 'dark':\n        return 'rgba(0, 0, 0, 0.9)';\n      default:\n        return 'rgba(0, 0, 0, 0.8)';\n    }\n  }\n\n  /**\n   * Gets border color based on theme\n   * @returns {string|null}\n   */\n  getBorderColor() {\n    switch (this.theme) {\n      case 'light':\n        return UI_CONSTANTS.COLORS.GRAY_300;\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Gets text color based on theme\n   * @returns {string}\n   */\n  getTextColor() {\n    switch (this.theme) {\n      case 'light':\n        return UI_CONSTANTS.COLORS.GRAY_900;\n      case 'dark':\n      default:\n        return UI_CONSTANTS.COLORS.WHITE;\n    }\n  }\n\n  /**\n   * Renders tooltip arrow\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderArrow(renderer) {\n    if (!this.arrowPosition) return;\n\n    const { x, y, direction } = this.arrowPosition;\n    const arrowSize = 6;\n    const bgColor = this.getBackgroundColor();\n\n    renderer.fillStyle = bgColor;\n    renderer.beginPath();\n\n    switch (direction) {\n      case 'up':\n        renderer.moveTo(x - arrowSize, y);\n        renderer.lineTo(x + arrowSize, y);\n        renderer.lineTo(x, y - arrowSize);\n        break;\n\n      case 'down':\n        renderer.moveTo(x - arrowSize, y);\n        renderer.lineTo(x + arrowSize, y);\n        renderer.lineTo(x, y + arrowSize);\n        break;\n\n      case 'left':\n        renderer.moveTo(x, y - arrowSize);\n        renderer.lineTo(x, y + arrowSize);\n        renderer.lineTo(x - arrowSize, y);\n        break;\n\n      case 'right':\n        renderer.moveTo(x, y - arrowSize);\n        renderer.lineTo(x, y + arrowSize);\n        renderer.lineTo(x + arrowSize, y);\n        break;\n    }\n\n    renderer.closePath();\n    renderer.fill();\n\n    // Arrow border\n    const borderColor = this.getBorderColor();\n    if (borderColor) {\n      renderer.strokeStyle = borderColor;\n      renderer.lineWidth = 1;\n      renderer.stroke();\n    }\n  }\n\n  /**\n   * Renders tooltip content\n   * @param {CanvasRenderingContext2D} renderer\n   */\n  renderContent(renderer) {\n    if (!this.content || !this.calculatedDimensions.lines) return;\n\n    const padding = this.getPadding();\n    const lineHeight = this.getLineHeight();\n    const textColor = this.getTextColor();\n\n    renderer.fillStyle = textColor;\n    renderer.font = this.getFont();\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    this.calculatedDimensions.lines.forEach((line, index) => {\n      const x = padding.left;\n      const y = padding.top + index * lineHeight;\n      renderer.fillText(line, x, y);\n    });\n  }\n\n  /**\n   * Gets accessibility description\n   * @returns {string}\n   */\n  getAccessibilityDescription() {\n    return (\n      `Tooltip with content: \"${this.content}\". Position: ${this.currentPosition}. ` +\n      `${this.isVisible ? 'Currently visible' : 'Currently hidden'}.`\n    );\n  }\n\n  /**\n   * Default error handler\n   * @param {Error} error\n   * @param {string} context\n   */\n  defaultErrorHandler(error, context) {\n    UIUtils.debugLog('error', `Tooltip error in ${context}`, error);\n    this.emit('error', { error, context, component: 'Tooltip' });\n  }\n\n  /**\n   * Enhanced destroy method with cleanup\n   */\n  destroy() {\n    try {\n      // Clear all timers\n      this.clearTimers();\n\n      // Hide tooltip if visible\n      if (this.isVisible) {\n        this.hide();\n      }\n\n      // Unbind target events\n      if (this.target) {\n        this.unbindTargetEvents();\n      }\n\n      // Remove global event listeners\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('resize', this.updateViewportBounds);\n        window.removeEventListener('scroll', this.updatePosition);\n      }\n\n      // Stop any running animations\n      this.stopAnimations();\n\n      super.destroy();\n    } catch (error) {\n      this.errorHandler(error, 'destroy');\n    }\n  }\n}\n\n// ===== EXPORT ALL COMPONENTS =====\nexport { ModalDialog, NavigationMenu, Chart, FormField, Tooltip };\n","/**\n * High-Priority Reusable Components Implementation\n * Starting with the most critical components for SimulateAI\n */\n\nimport { BaseObject } from './enhanced-objects.js';\n\n// Constants to eliminate magic numbers\nconst PRIORITY_COMPONENT_CONSTANTS = {\n  // DataTable constants\n  DATA_TABLE_DEFAULT_WIDTH: 600,\n  DATA_TABLE_DEFAULT_HEIGHT: 400,\n  DATA_TABLE_DEFAULT_PAGE_SIZE: 25,\n  DATA_TABLE_DEFAULT_HEADER_HEIGHT: 40,\n  DATA_TABLE_DEFAULT_ROW_HEIGHT: 30,\n  DATA_TABLE_SORT_INDICATOR_OFFSET: 20,\n  DATA_TABLE_PAGINATION_HEIGHT: 30,\n  DATA_TABLE_PAGINATION_TEXT_OFFSET: 10,\n  DATA_TABLE_PAGINATION_TEXT_Y_OFFSET: 15,\n  DATA_TABLE_PAGINATION_BUTTON_Y_OFFSET: 5,\n  DATA_TABLE_PAGINATION_PREV_X_OFFSET: 140,\n  DATA_TABLE_PAGINATION_NEXT_X_OFFSET: 70,\n  DATA_TABLE_PAGINATION_BUTTON_HEIGHT: 20,\n  DATA_TABLE_PAGINATION_BUTTON_WIDTH: 60,\n  DATA_TABLE_PAGINATION_BUTTON_TEXT_X_OFFSET: 30,\n  DATA_TABLE_PAGINATION_BUTTON_TEXT_Y_OFFSET: 10,\n\n  // NotificationToast constants\n  NOTIFICATION_TOAST_DEFAULT_WIDTH: 320,\n  NOTIFICATION_TOAST_DEFAULT_HEIGHT: 80,\n  NOTIFICATION_TOAST_DEFAULT_DURATION: 5000,\n  NOTIFICATION_TOAST_DEFAULT_Y: 20,\n  NOTIFICATION_TOAST_DEFAULT_X_OFFSET: 20,\n  NOTIFICATION_TOAST_REMOVE_DELAY: 300,\n  NOTIFICATION_TOAST_BORDER_WIDTH: 4,\n  NOTIFICATION_TOAST_ICON_X: 25,\n  NOTIFICATION_TOAST_MESSAGE_X: 50,\n  NOTIFICATION_TOAST_DISMISS_X_OFFSET: 15,\n  NOTIFICATION_TOAST_PROGRESS_HEIGHT: 2,\n  NOTIFICATION_TOAST_PROGRESS_ALPHA: 0.3,\n\n  // LoadingSpinner constants\n  LOADING_SPINNER_DEFAULT_WIDTH: 100,\n  LOADING_SPINNER_DEFAULT_HEIGHT: 100,\n  LOADING_SPINNER_DEFAULT_ANIMATION_SPEED: 2,\n  LOADING_SPINNER_FRAME_TIME: 16.67,\n  LOADING_SPINNER_FRAME_TIME_DIVISOR: 1000,\n  LOADING_SPINNER_MESSAGE_Y_OFFSET: 15,\n  LOADING_SPINNER_CANCEL_Y_OFFSET: 40,\n  LOADING_SPINNER_CANCEL_BUTTON_WIDTH: 60,\n  LOADING_SPINNER_CANCEL_BUTTON_HEIGHT: 25,\n  LOADING_SPINNER_CANCEL_BUTTON_X_OFFSET: 30,\n  LOADING_SPINNER_CANCEL_BUTTON_TEXT_Y_OFFSET: 12,\n  LOADING_SPINNER_LINE_WIDTH: 3,\n  LOADING_SPINNER_PROGRESS_LINE_WIDTH: 4,\n  LOADING_SPINNER_ARC_END_MULTIPLIER: 1.5,\n  LOADING_SPINNER_OVERLAY_ALPHA: 0.8,\n\n  // Size configurations\n  SPINNER_SIZE_SMALL: 20,\n  SPINNER_SIZE_MEDIUM: 40,\n  SPINNER_SIZE_LARGE: 60,\n};\n\n// =============================================================================\n// PRIORITY 1: DATA TABLE COMPONENT\n// =============================================================================\n\nclass DataTable extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_DEFAULT_WIDTH,\n      height:\n        options.height ||\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_DEFAULT_HEIGHT,\n      ariaRole: 'table',\n    });\n\n    this.columns = options.columns || [];\n    this.data = options.data || [];\n    this.sortColumn = options.sortColumn || null;\n    this.sortDirection = options.sortDirection || 'asc'; // 'asc' or 'desc'\n    this.selectedRows = new Set(options.selectedRows || []);\n    this.currentPage = options.currentPage || 1;\n    this.pageSize =\n      options.pageSize ||\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_DEFAULT_PAGE_SIZE;\n    this.pagination = options.pagination !== false;\n    this.selectable = options.selectable !== false;\n    this.filterable = options.filterable !== false;\n\n    // Styling\n    this.headerHeight =\n      options.headerHeight ||\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_DEFAULT_HEADER_HEIGHT;\n    this.rowHeight =\n      options.rowHeight ||\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_DEFAULT_ROW_HEIGHT;\n    this.borderColor = options.borderColor || '#CCCCCC';\n    this.headerBackground = options.headerBackground || '#F5F5F5';\n    this.alternateRowColor = options.alternateRowColor || '#FAFAFA';\n    this.selectedRowColor = options.selectedRowColor || '#E3F2FD';\n\n    // State\n    this.filters = new Map();\n    this.scrollTop = 0;\n    this.hoveredRow = -1;\n\n    this.setupTable();\n  }\n\n  setupTable() {\n    // Calculate display metrics\n    this.visibleRows = Math.floor(\n      (this.height - this.headerHeight) / this.rowHeight\n    );\n    this.totalPages = Math.ceil(this.getFilteredData().length / this.pageSize);\n\n    // Event handlers\n    this.on('click', event => this.handleClick(event));\n    this.on('mouseMove', event => this.handleMouseMove(event));\n    this.on('keyDown', event => this.handleKeyDown(event));\n    this.on('scroll', event => this.handleScroll(event));\n  }\n\n  // Data Management Methods\n  getFilteredData() {\n    let filteredData = [...this.data];\n\n    // Apply filters\n    for (const [column, filterValue] of this.filters) {\n      if (filterValue && filterValue.trim() !== '') {\n        filteredData = filteredData.filter(row => {\n          const cellValue = row[column];\n          return String(cellValue)\n            .toLowerCase()\n            .includes(filterValue.toLowerCase());\n        });\n      }\n    }\n\n    // Apply sorting\n    if (this.sortColumn) {\n      filteredData.sort((a, b) => {\n        const aVal = a[this.sortColumn];\n        const bVal = b[this.sortColumn];\n\n        let comparison = 0;\n        if (aVal < bVal) comparison = -1;\n        else if (aVal > bVal) comparison = 1;\n\n        return this.sortDirection === 'desc' ? -comparison : comparison;\n      });\n    }\n\n    return filteredData;\n  }\n\n  getCurrentPageData() {\n    const filteredData = this.getFilteredData();\n    const startIndex = (this.currentPage - 1) * this.pageSize;\n    const endIndex = Math.min(startIndex + this.pageSize, filteredData.length);\n    return filteredData.slice(startIndex, endIndex);\n  }\n\n  // Interaction Methods\n  sortByColumn(columnKey) {\n    if (this.sortColumn === columnKey) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortColumn = columnKey;\n      this.sortDirection = 'asc';\n    }\n    this.emit('sort', { column: columnKey, direction: this.sortDirection });\n  }\n\n  selectRow(rowIndex, multiSelect = false) {\n    if (!this.selectable) return;\n\n    if (!multiSelect) {\n      this.selectedRows.clear();\n    }\n\n    if (this.selectedRows.has(rowIndex)) {\n      this.selectedRows.delete(rowIndex);\n    } else {\n      this.selectedRows.add(rowIndex);\n    }\n\n    this.emit('selectionChange', {\n      selectedRows: Array.from(this.selectedRows),\n    });\n  }\n\n  setFilter(columnKey, value) {\n    if (value && value.trim() !== '') {\n      this.filters.set(columnKey, value);\n    } else {\n      this.filters.delete(columnKey);\n    }\n    this.currentPage = 1; // Reset to first page\n    this.emit('filter', { column: columnKey, value });\n  }\n\n  goToPage(page) {\n    this.currentPage = Math.max(1, Math.min(page, this.totalPages));\n    this.emit('pageChange', { page: this.currentPage });\n  }\n\n  // Event Handlers\n  handleClick(event) {\n    const { localX, localY } = event;\n\n    // Check header clicks (for sorting)\n    if (localY <= this.headerHeight) {\n      const columnIndex = Math.floor(\n        localX / (this.width / this.columns.length)\n      );\n      const column = this.columns[columnIndex];\n      if (column && column.sortable !== false) {\n        this.sortByColumn(column.key);\n      }\n      return;\n    }\n\n    // Check row clicks (for selection)\n    const rowIndex = Math.floor((localY - this.headerHeight) / this.rowHeight);\n    const actualRowIndex = (this.currentPage - 1) * this.pageSize + rowIndex;\n\n    if (rowIndex >= 0 && rowIndex < this.getCurrentPageData().length) {\n      this.selectRow(actualRowIndex, event.ctrlKey || event.metaKey);\n    }\n  }\n\n  handleMouseMove(event) {\n    const { localY } = event;\n    const newHoveredRow = Math.floor(\n      (localY - this.headerHeight) / this.rowHeight\n    );\n\n    if (newHoveredRow !== this.hoveredRow) {\n      this.hoveredRow = newHoveredRow;\n    }\n  }\n\n  handleKeyDown(event) {\n    switch (event.key) {\n      case 'ArrowUp':\n        // Navigate up\n        break;\n      case 'ArrowDown':\n        // Navigate down\n        break;\n      case 'Enter':\n      case ' ':\n        // Select current row\n        break;\n      case 'PageUp':\n        this.goToPage(this.currentPage - 1);\n        break;\n      case 'PageDown':\n        this.goToPage(this.currentPage + 1);\n        break;\n    }\n  }\n\n  // Rendering\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    this.renderTable(renderer);\n    this.renderHeader(renderer);\n    this.renderRows(renderer);\n\n    if (this.pagination) {\n      this.renderPagination(renderer);\n    }\n  }\n\n  renderTable(renderer) {\n    // Table background\n    renderer.fillStyle = '#FFFFFF';\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Table border\n    renderer.strokeStyle = this.borderColor;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n  }\n\n  renderHeader(renderer) {\n    // Header background\n    renderer.fillStyle = this.headerBackground;\n    renderer.fillRect(0, 0, this.width, this.headerHeight);\n\n    // Header border\n    renderer.strokeStyle = this.borderColor;\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(0, this.headerHeight);\n    renderer.lineTo(this.width, this.headerHeight);\n    renderer.stroke();\n\n    // Column headers\n    const columnWidth = this.width / this.columns.length;\n\n    this.columns.forEach((column, index) => {\n      const x = index * columnWidth;\n\n      // Column separator\n      if (index > 0) {\n        renderer.beginPath();\n        renderer.moveTo(x, 0);\n        renderer.lineTo(x, this.headerHeight);\n        renderer.stroke();\n      }\n\n      // Header text\n      renderer.fillStyle = '#333333';\n      renderer.font = 'bold 12px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(\n        column.title || column.key,\n        x + 10,\n        this.headerHeight / 2\n      );\n\n      // Sort indicator\n      if (this.sortColumn === column.key) {\n        const sortX =\n          x +\n          columnWidth -\n          PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_SORT_INDICATOR_OFFSET;\n        const sortY = this.headerHeight / 2;\n        const arrow = this.sortDirection === 'asc' ? '▲' : '▼';\n\n        renderer.font = '10px Arial';\n        renderer.textAlign = 'center';\n        renderer.fillText(arrow, sortX, sortY);\n      }\n    });\n  }\n\n  renderRows(renderer) {\n    const pageData = this.getCurrentPageData();\n    const columnWidth = this.width / this.columns.length;\n\n    pageData.forEach((row, index) => {\n      const y = this.headerHeight + index * this.rowHeight;\n      const actualRowIndex = (this.currentPage - 1) * this.pageSize + index;\n\n      // Row background\n      let backgroundColor = '#FFFFFF';\n      if (this.selectedRows.has(actualRowIndex)) {\n        backgroundColor = this.selectedRowColor;\n      } else if (index % 2 === 1) {\n        backgroundColor = this.alternateRowColor;\n      } else if (index === this.hoveredRow) {\n        backgroundColor = '#F0F0F0';\n      }\n\n      renderer.fillStyle = backgroundColor;\n      renderer.fillRect(0, y, this.width, this.rowHeight);\n\n      // Row border\n      renderer.strokeStyle = this.borderColor;\n      renderer.lineWidth = 0.5;\n      renderer.beginPath();\n      renderer.moveTo(0, y + this.rowHeight);\n      renderer.lineTo(this.width, y + this.rowHeight);\n      renderer.stroke();\n\n      // Cell content\n      this.columns.forEach((column, colIndex) => {\n        const cellX = colIndex * columnWidth;\n        const cellValue = row[column.key];\n\n        // Column separator\n        if (colIndex > 0) {\n          renderer.beginPath();\n          renderer.moveTo(cellX, y);\n          renderer.lineTo(cellX, y + this.rowHeight);\n          renderer.stroke();\n        }\n\n        // Cell text\n        renderer.fillStyle = '#333333';\n        renderer.font = '11px Arial';\n        renderer.textAlign = 'left';\n        renderer.textBaseline = 'middle';\n\n        let displayValue = cellValue;\n        if (column.format && typeof column.format === 'function') {\n          displayValue = column.format(cellValue);\n        } else if (column.type === 'number' && typeof cellValue === 'number') {\n          displayValue = cellValue.toFixed(2);\n        }\n\n        renderer.fillText(\n          String(displayValue || ''),\n          cellX + 10,\n          y + this.rowHeight / 2\n        );\n      });\n    });\n  }\n\n  renderPagination(renderer) {\n    const paginationY =\n      this.height - PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_HEIGHT;\n    const totalData = this.getFilteredData().length;\n\n    // Pagination background\n    renderer.fillStyle = '#F9F9F9';\n    renderer.fillRect(\n      0,\n      paginationY,\n      this.width,\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_HEIGHT\n    );\n\n    // Pagination info\n    const startItem = (this.currentPage - 1) * this.pageSize + 1;\n    const endItem = Math.min(this.currentPage * this.pageSize, totalData);\n    const infoText = `${startItem}-${endItem} of ${totalData}`;\n\n    renderer.fillStyle = '#666666';\n    renderer.font = '11px Arial';\n    renderer.textAlign = 'left';\n    renderer.fillText(\n      infoText,\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_TEXT_OFFSET,\n      paginationY +\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_TEXT_Y_OFFSET\n    );\n\n    // Page controls\n    const buttonWidth =\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_WIDTH;\n    const buttonY =\n      paginationY +\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_Y_OFFSET;\n    const prevX =\n      this.width -\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_PREV_X_OFFSET;\n    const nextX =\n      this.width -\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_NEXT_X_OFFSET;\n\n    // Previous button\n    renderer.fillStyle = this.currentPage > 1 ? '#2196F3' : '#CCCCCC';\n    renderer.fillRect(\n      prevX,\n      buttonY,\n      buttonWidth,\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_HEIGHT\n    );\n    renderer.fillStyle = '#FFFFFF';\n    renderer.textAlign = 'center';\n    renderer.fillText(\n      'Previous',\n      prevX +\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_TEXT_X_OFFSET,\n      buttonY +\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_TEXT_Y_OFFSET\n    );\n\n    // Next button\n    renderer.fillStyle =\n      this.currentPage < this.totalPages ? '#2196F3' : '#CCCCCC';\n    renderer.fillRect(\n      nextX,\n      buttonY,\n      buttonWidth,\n      PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_HEIGHT\n    );\n    renderer.fillStyle = '#FFFFFF';\n    renderer.fillText(\n      'Next',\n      nextX +\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_TEXT_X_OFFSET,\n      buttonY +\n        PRIORITY_COMPONENT_CONSTANTS.DATA_TABLE_PAGINATION_BUTTON_TEXT_Y_OFFSET\n    );\n  }\n\n  // Public API Methods\n  setData(newData) {\n    this.data = newData;\n    this.selectedRows.clear();\n    this.currentPage = 1;\n    this.totalPages = Math.ceil(this.getFilteredData().length / this.pageSize);\n    this.emit('dataChange', { data: newData });\n  }\n\n  getSelectedData() {\n    const filteredData = this.getFilteredData();\n    return Array.from(this.selectedRows)\n      .map(index => filteredData[index])\n      .filter(Boolean);\n  }\n\n  exportData(format = 'json') {\n    const data = this.getFilteredData();\n\n    if (format === 'csv') {\n      const headers = this.columns.map(col => col.title || col.key).join(',');\n      const rows = data\n        .map(row => this.columns.map(col => row[col.key]).join(','))\n        .join('\\n');\n      return `${headers}\\n${rows}`;\n    }\n\n    return JSON.stringify(data, null, 2);\n  }\n}\n\n// =============================================================================\n// PRIORITY 2: NOTIFICATION TOAST COMPONENT\n// =============================================================================\n\nclass NotificationToast extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width ||\n        PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DEFAULT_WIDTH,\n      height:\n        options.height ||\n        PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DEFAULT_HEIGHT,\n      ariaRole: 'alert',\n    });\n\n    this.message = options.message || 'Notification';\n    this.type = options.type || 'info'; // 'success', 'error', 'warning', 'info'\n    this.duration =\n      options.duration ||\n      PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DEFAULT_DURATION; // Auto-dismiss time\n    this.dismissible = options.dismissible !== false;\n    this.actions = options.actions || [];\n    this.icon = options.icon || this.getDefaultIcon();\n\n    // State\n    this.isVisible = false;\n    this.progress = 0;\n    this.startTime = null;\n\n    this.setupToast();\n  }\n\n  getDefaultIcon() {\n    const icons = {\n      success: '✓',\n      error: '✗',\n      warning: '⚠',\n      info: 'ℹ',\n    };\n    return icons[this.type] || icons.info;\n  }\n\n  setupToast() {\n    // Position toast (typically managed by a ToastManager)\n    this.y =\n      this.y || PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DEFAULT_Y;\n    this.x =\n      this.x ||\n      window.innerWidth -\n        this.width -\n        PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DEFAULT_X_OFFSET;\n\n    this.show();\n  }\n\n  show() {\n    this.isVisible = true;\n    this.startTime = performance.now();\n    this.emit('show', this);\n\n    // Auto-dismiss timer\n    if (this.duration > 0) {\n      setTimeout(() => {\n        this.hide();\n      }, this.duration);\n    }\n  }\n\n  hide() {\n    this.isVisible = false;\n    this.emit('hide', this);\n\n    // Remove from parent/engine after animation\n    setTimeout(() => {\n      this.emit('remove', this);\n    }, PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_REMOVE_DELAY);\n  }\n\n  renderSelf(renderer) {\n    if (!this.isVisible || renderer.type !== 'canvas') return;\n\n    // Update progress for auto-dismiss\n    if (this.duration > 0 && this.startTime) {\n      const elapsed = performance.now() - this.startTime;\n      this.progress = Math.min(elapsed / this.duration, 1);\n    }\n\n    // Toast background\n    const colors = this.getTypeColors();\n    renderer.fillStyle = colors.background;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Left border accent\n    renderer.fillStyle = colors.accent;\n    renderer.fillRect(\n      0,\n      0,\n      PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_BORDER_WIDTH,\n      this.height\n    );\n\n    // Icon\n    renderer.fillStyle = colors.accent;\n    renderer.font = '16px Arial';\n    renderer.textAlign = 'center';\n    renderer.fillText(\n      this.icon,\n      PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_ICON_X,\n      this.height / 2\n    );\n\n    // Message\n    renderer.fillStyle = colors.text;\n    renderer.font = '13px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      this.message,\n      PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_MESSAGE_X,\n      this.height / 2\n    );\n\n    // Dismiss button\n    if (this.dismissible) {\n      renderer.fillStyle = colors.text;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'center';\n      renderer.fillText(\n        '×',\n        this.width -\n          PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_DISMISS_X_OFFSET,\n        this.height / 2\n      );\n    }\n\n    // Progress bar\n    if (this.duration > 0) {\n      const progressWidth = this.width * this.progress;\n      renderer.fillStyle = colors.accent;\n      renderer.globalAlpha =\n        PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_PROGRESS_ALPHA;\n      renderer.fillRect(\n        0,\n        this.height -\n          PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_PROGRESS_HEIGHT,\n        progressWidth,\n        PRIORITY_COMPONENT_CONSTANTS.NOTIFICATION_TOAST_PROGRESS_HEIGHT\n      );\n      renderer.globalAlpha = 1;\n    }\n  }\n\n  getTypeColors() {\n    const colorSchemes = {\n      success: {\n        background: '#E8F5E8',\n        accent: '#4CAF50',\n        text: '#2E7D32',\n      },\n      error: {\n        background: '#FFEBEE',\n        accent: '#F44336',\n        text: '#C62828',\n      },\n      warning: {\n        background: '#FFF3E0',\n        accent: '#FF9800',\n        text: '#E65100',\n      },\n      info: {\n        background: '#E3F2FD',\n        accent: '#2196F3',\n        text: '#1565C0',\n      },\n    };\n\n    return colorSchemes[this.type] || colorSchemes.info;\n  }\n}\n\n// =============================================================================\n// PRIORITY 3: LOADING SPINNER COMPONENT\n// =============================================================================\n\nclass LoadingSpinner extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width ||\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_DEFAULT_WIDTH,\n      height:\n        options.height ||\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_DEFAULT_HEIGHT,\n      ariaRole: 'progressbar',\n    });\n\n    this.message = options.message || 'Loading...';\n    this.size = options.size || 'medium'; // 'small', 'medium', 'large'\n    this.progress = options.progress || null; // null for indeterminate\n    this.cancellable = options.cancellable || false;\n    this.overlay = options.overlay !== false;\n\n    // Animation state\n    this.rotation = 0;\n    this.animationSpeed =\n      options.animationSpeed ||\n      PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_DEFAULT_ANIMATION_SPEED; // rotations per second\n\n    this.setupSpinner();\n  }\n\n  setupSpinner() {\n    // Size-based dimensions\n    const sizes = {\n      small: {\n        spinner: PRIORITY_COMPONENT_CONSTANTS.SPINNER_SIZE_SMALL,\n        font: '11px Arial',\n      },\n      medium: {\n        spinner: PRIORITY_COMPONENT_CONSTANTS.SPINNER_SIZE_MEDIUM,\n        font: '13px Arial',\n      },\n      large: {\n        spinner: PRIORITY_COMPONENT_CONSTANTS.SPINNER_SIZE_LARGE,\n        font: '15px Arial',\n      },\n    };\n\n    const sizeConfig = sizes[this.size] || sizes.medium;\n    this.spinnerSize = sizeConfig.spinner;\n    this.font = sizeConfig.font;\n\n    // Start animation\n    this.startAnimation();\n  }\n\n  startAnimation() {\n    const animate = () => {\n      if (this.visible) {\n        this.rotation +=\n          this.animationSpeed *\n          (PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_FRAME_TIME /\n            PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_FRAME_TIME_DIVISOR) *\n          Math.PI *\n          2; // Assuming 60fps\n        requestAnimationFrame(animate);\n      }\n    };\n    animate();\n  }\n\n  setProgress(progress) {\n    this.progress = Math.max(0, Math.min(1, progress));\n    this.emit('progressChange', { progress: this.progress });\n  }\n\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    // Overlay background\n    if (this.overlay) {\n      renderer.fillStyle = `rgba(255, 255, 255, ${PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_OVERLAY_ALPHA})`;\n      renderer.fillRect(0, 0, this.width, this.height);\n    }\n\n    const centerX = this.width / 2;\n    const centerY = this.height / 2;\n\n    // Spinner\n    if (this.progress === null) {\n      // Indeterminate spinner\n      this.renderIndeterminateSpinner(renderer, centerX, centerY);\n    } else {\n      // Determinate progress circle\n      this.renderProgressCircle(renderer, centerX, centerY);\n    }\n\n    // Message\n    if (this.message) {\n      renderer.fillStyle = '#666666';\n      renderer.font = this.font;\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'top';\n      renderer.fillText(\n        this.message,\n        centerX,\n        centerY +\n          this.spinnerSize / 2 +\n          PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_MESSAGE_Y_OFFSET\n      );\n    }\n\n    // Progress percentage\n    if (this.progress !== null) {\n      const percentage = `${Math.round(this.progress * 100)}%`;\n      renderer.fillStyle = '#333333';\n      renderer.font = this.font;\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(percentage, centerX, centerY);\n    }\n\n    // Cancel button\n    if (this.cancellable) {\n      const cancelY =\n        centerY +\n        this.spinnerSize / 2 +\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_CANCEL_Y_OFFSET;\n      renderer.fillStyle = '#F44336';\n      renderer.fillRect(\n        centerX -\n          PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_CANCEL_BUTTON_X_OFFSET,\n        cancelY,\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_CANCEL_BUTTON_WIDTH,\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_CANCEL_BUTTON_HEIGHT\n      );\n\n      renderer.fillStyle = '#FFFFFF';\n      renderer.font = '11px Arial';\n      renderer.textAlign = 'center';\n      renderer.fillText(\n        'Cancel',\n        centerX,\n        cancelY +\n          PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_CANCEL_BUTTON_TEXT_Y_OFFSET\n      );\n    }\n  }\n\n  renderIndeterminateSpinner(renderer, centerX, centerY) {\n    const radius = this.spinnerSize / 2;\n\n    renderer.save();\n    renderer.translate(centerX, centerY);\n    renderer.rotate(this.rotation);\n\n    // Spinner arc\n    renderer.strokeStyle = '#2196F3';\n    renderer.lineWidth =\n      PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_LINE_WIDTH;\n    renderer.beginPath();\n    renderer.arc(\n      0,\n      0,\n      radius,\n      0,\n      Math.PI * PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_ARC_END_MULTIPLIER\n    );\n    renderer.stroke();\n\n    renderer.restore();\n  }\n\n  renderProgressCircle(renderer, centerX, centerY) {\n    const radius = this.spinnerSize / 2;\n\n    // Background circle\n    renderer.strokeStyle = '#E0E0E0';\n    renderer.lineWidth =\n      PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_PROGRESS_LINE_WIDTH;\n    renderer.beginPath();\n    renderer.arc(centerX, centerY, radius, 0, Math.PI * 2);\n    renderer.stroke();\n\n    // Progress arc\n    if (this.progress > 0) {\n      const progressAngle = this.progress * Math.PI * 2;\n\n      renderer.strokeStyle = '#2196F3';\n      renderer.lineWidth =\n        PRIORITY_COMPONENT_CONSTANTS.LOADING_SPINNER_PROGRESS_LINE_WIDTH;\n      renderer.beginPath();\n      renderer.arc(\n        centerX,\n        centerY,\n        radius,\n        -Math.PI / 2,\n        -Math.PI / 2 + progressAngle\n      );\n      renderer.stroke();\n    }\n  }\n}\n\n// =============================================================================\n// EXPORTS\n// =============================================================================\n\nexport { DataTable, NotificationToast, LoadingSpinner };\n\nexport default {\n  DataTable,\n  NotificationToast,\n  LoadingSpinner,\n};\n","import logger from '../utils/logger.js';\n\n/**\n * Modern Layout Components\n * Implementation of TabContainer, ProgressStepper, SplitPane, TreeView, and FileUpload\n * Enhanced with accessibility, performance, themes, and modern JavaScript patterns\n */\n\nimport { BaseObject } from './enhanced-objects.js';\n\n// Constants to eliminate magic numbers\nconst LAYOUT_COMPONENT_CONSTANTS = {\n  // Animation easing constants\n  EASING_HALF_POINT: 0.5,\n  EASING_CURVE_FACTOR: 4,\n  EASING_CUBIC_POWER: 3,\n\n  // Bounce animation constants\n  BOUNCE_DIVISOR: 2.75,\n  BOUNCE_MULTIPLIER: 7.5625,\n  BOUNCE_THRESHOLD_1: 1.5,\n  BOUNCE_THRESHOLD_2: 2.25,\n  BOUNCE_THRESHOLD_3: 2.625,\n  BOUNCE_OFFSET_1: 0.75,\n  BOUNCE_OFFSET_2: 0.9375,\n  BOUNCE_OFFSET_3: 0.984375,\n  BOUNCE_RANGE_1: 2.5,\n\n  // Memory and performance constants\n  MEMORY_WARNING_MB: 50,\n  BYTES_PER_KB: 1024,\n\n  // TabContainer constants\n  TAB_CONTAINER_DEFAULT_WIDTH: 600,\n  TAB_CONTAINER_DEFAULT_HEIGHT: 400,\n  TAB_DEFAULT_HEIGHT: 40,\n  TAB_MAX_DEFAULT: 20,\n  TAB_MIN_HEIGHT: 20,\n  TAB_CLOSE_BUTTON_SIZE: 20,\n  TAB_CLOSE_BUTTON_OFFSET: 15,\n  TAB_BADGE_OFFSET: 35,\n  TAB_BADGE_Y_OFFSET: 5,\n  TAB_BADGE_RADIUS: 8,\n  TAB_ICON_OFFSET: 20,\n  TAB_TEXT_PADDING: 30,\n  TAB_CONTENT_PADDING: 20,\n  TAB_BORDER_OFFSET: 3,\n  TAB_BORDER_WIDTH: 3,\n\n  // Animation scale constants\n  ANIMATION_SCALE_MIN: 0.8,\n  ANIMATION_SCALE_RANGE: 0.2,\n  ANIMATION_FADE_DIVISOR: 2,\n  ANIMATION_FADE_OFFSET: 0.5,\n\n  // ProgressStepper constants\n  PROGRESS_STEPPER_DEFAULT_WIDTH: 600,\n  PROGRESS_STEPPER_DEFAULT_HEIGHT: 80,\n  PROGRESS_STEP_CENTER_OFFSET: 0.5,\n  PROGRESS_LIGHTEN_FACTOR: 0.1,\n  PROGRESS_RADIUS_OFFSET: 4,\n  PROGRESS_SCALE_FACTOR: 0.2,\n  PROGRESS_RADIUS_PADDING: 25,\n  PROGRESS_CIRCLE_BORDER: 3,\n  PROGRESS_TEXT_OFFSET_X: 15,\n  PROGRESS_TEXT_OFFSET_Y: 5,\n  PROGRESS_DESCRIPTION_Y_OFFSET: 20,\n\n  // Color manipulation constants\n  COLOR_MAX_VALUE: 255,\n  COLOR_RED_SHIFT: 16,\n  COLOR_GREEN_SHIFT: 8,\n  COLOR_GREEN_MASK: 0x00ff,\n  COLOR_BLUE_MASK: 0x0000ff,\n\n  // SplitPane constants\n  SPLIT_PANE_DEFAULT_WIDTH: 600,\n  SPLIT_PANE_DEFAULT_HEIGHT: 400,\n  SPLIT_MIN_RATIO: 0.1,\n  SPLIT_MAX_RATIO: 0.9,\n  SPLIT_DEFAULT_RATIO: 0.5,\n  SPLIT_MIN_SIZE: 50,\n  SPLIT_SPLITTER_SIZE: 6,\n  SPLIT_KEYBOARD_ADJUSTMENT: 0.05,\n  SPLIT_COLLAPSED_RATIO: 0.05,\n  SPLIT_EXPANDED_RATIO: 0.95,\n  SPLIT_CENTER_THRESHOLD: 0.5,\n\n  // TreeView constants\n  TREE_VIEW_DEFAULT_WIDTH: 300,\n  TREE_VIEW_DEFAULT_HEIGHT: 400,\n  TREE_INDENT_SIZE: 20,\n  TREE_GRIP_SPACING: 4,\n  TREE_GRIP_SIZE: 3,\n  TREE_DASH_SIZE: 3,\n  TREE_SELECTION_PADDING: 4,\n  TREE_NODE_HEIGHT: 24,\n  TREE_MIN_NODE_HEIGHT: 16,\n  TREE_EXPAND_AREA_SIZE: 16,\n  TREE_TEXT_OFFSET: 20,\n  TREE_ICON_OFFSET: 4,\n  TREE_FOCUS_BORDER_OFFSET: 4,\n  TREE_SCROLLBAR_MIN_HEIGHT: 20,\n\n  // FileUpload constants\n  FILE_UPLOAD_DEFAULT_WIDTH: 400,\n  FILE_UPLOAD_DEFAULT_HEIGHT: 200,\n  FILE_UPLOAD_MAX_SIZE_MB: 10,\n  FILE_UPLOAD_BYTES_PER_KB: 1024,\n  FILE_UPLOAD_PROGRESS_INCREMENT: 0.1,\n  FILE_UPLOAD_DASH_SIZE: 5,\n  FILE_UPLOAD_ICON_Y_OFFSET: 30,\n  FILE_UPLOAD_BUTTON_Y_OFFSET: 30,\n  FILE_UPLOAD_FILE_NAME_X: 35,\n  FILE_UPLOAD_SIZE_TEXT_OFFSET: 50,\n  FILE_UPLOAD_REMOVE_BUTTON_OFFSET: 20,\n  FILE_UPLOAD_PROGRESS_MARGIN: 20,\n  FILE_UPLOAD_PROGRESS_TEXT_Y_OFFSET: 5,\n};\n\n// =============================================================================\n// MODERN INFRASTRUCTURE FOR LAYOUT COMPONENTS\n// =============================================================================\n\n/**\n * Component theme management with enhanced layout-specific colors\n */\nclass ComponentTheme {\n  static themes = {\n    light: {\n      // Base colors\n      background: '#ffffff',\n      backgroundSecondary: '#f8f9fa',\n      backgroundDisabled: '#e9ecef',\n      text: '#212529',\n      textSecondary: '#6c757d',\n      disabled: '#adb5bd',\n\n      // Interactive elements\n      primary: '#007bff',\n      primaryHover: '#0056b3',\n      primaryText: '#ffffff',\n      primaryBorder: '#0056b3',\n\n      // Layout-specific colors\n      border: '#dee2e6',\n      borderActive: '#007bff',\n      shadow: 'rgba(0, 0, 0, 0.1)',\n      overlay: 'rgba(0, 0, 0, 0.5)',\n\n      // Status colors\n      success: '#28a745',\n      successHover: '#218838',\n      warning: '#ffc107',\n      warningHover: '#e0a800',\n      danger: '#dc3545',\n      dangerHover: '#c82333',\n\n      // Focus and selection\n      focus: '#007bff',\n      selection: '#e3f2fd',\n      hover: '#f5f5f5',\n\n      // Tab-specific colors\n      tabBackground: '#f8f9fa',\n      tabActive: '#ffffff',\n      tabBorder: '#dee2e6',\n      tabHover: '#e9ecef',\n\n      // Tree-specific colors\n      treeExpander: '#6c757d',\n      treeSelected: '#007bff',\n      treeHover: '#f8f9fa',\n\n      // Progress colors\n      progressTrack: '#e9ecef',\n      progressFill: '#007bff',\n      progressComplete: '#28a745',\n\n      // Upload colors\n      uploadBorder: '#007bff',\n      uploadHover: '#e3f2fd',\n      uploadError: '#dc3545',\n    },\n\n    dark: {\n      // Base colors\n      background: '#1a1a1a',\n      backgroundSecondary: '#2d2d2d',\n      backgroundDisabled: '#404040',\n      text: '#ffffff',\n      textSecondary: '#b3b3b3',\n      disabled: '#666666',\n\n      // Interactive elements\n      primary: '#4dabf7',\n      primaryHover: '#339af0',\n      primaryText: '#000000',\n      primaryBorder: '#339af0',\n\n      // Layout-specific colors\n      border: '#404040',\n      borderActive: '#4dabf7',\n      shadow: 'rgba(0, 0, 0, 0.3)',\n      overlay: 'rgba(0, 0, 0, 0.7)',\n\n      // Status colors\n      success: '#51cf66',\n      successHover: '#40c057',\n      warning: '#ffd43b',\n      warningHover: '#fab005',\n      danger: '#ff6b6b',\n      dangerHover: '#fa5252',\n\n      // Focus and selection\n      focus: '#4dabf7',\n      selection: '#1c7ed6',\n      hover: '#2d2d2d',\n\n      // Tab-specific colors\n      tabBackground: '#2d2d2d',\n      tabActive: '#1a1a1a',\n      tabBorder: '#404040',\n      tabHover: '#333333',\n\n      // Tree-specific colors\n      treeExpander: '#b3b3b3',\n      treeSelected: '#4dabf7',\n      treeHover: '#2d2d2d',\n\n      // Progress colors\n      progressTrack: '#404040',\n      progressFill: '#4dabf7',\n      progressComplete: '#51cf66',\n\n      // Upload colors\n      uploadBorder: '#4dabf7',\n      uploadHover: '#1c7ed6',\n      uploadError: '#ff6b6b',\n    },\n\n    highContrast: {\n      // Base colors\n      background: '#000000',\n      backgroundSecondary: '#1a1a1a',\n      backgroundDisabled: '#333333',\n      text: '#ffffff',\n      textSecondary: '#cccccc',\n      disabled: '#666666',\n\n      // Interactive elements\n      primary: '#ffffff',\n      primaryHover: '#cccccc',\n      primaryText: '#000000',\n      primaryBorder: '#ffffff',\n\n      // Layout-specific colors\n      border: '#ffffff',\n      borderActive: '#ffff00',\n      shadow: 'rgba(255, 255, 255, 0.3)',\n      overlay: 'rgba(0, 0, 0, 0.8)',\n\n      // Status colors\n      success: '#00ff00',\n      successHover: '#00cc00',\n      warning: '#ffff00',\n      warningHover: '#cccc00',\n      danger: '#ff0000',\n      dangerHover: '#cc0000',\n\n      // Focus and selection\n      focus: '#ffff00',\n      selection: '#0000ff',\n      hover: '#333333',\n\n      // Tab-specific colors\n      tabBackground: '#1a1a1a',\n      tabActive: '#000000',\n      tabBorder: '#ffffff',\n      tabHover: '#333333',\n\n      // Tree-specific colors\n      treeExpander: '#ffffff',\n      treeSelected: '#ffff00',\n      treeHover: '#333333',\n\n      // Progress colors\n      progressTrack: '#333333',\n      progressFill: '#ffffff',\n      progressComplete: '#00ff00',\n\n      // Upload colors\n      uploadBorder: '#ffffff',\n      uploadHover: '#333333',\n      uploadError: '#ff0000',\n    },\n  };\n\n  static getCurrentTheme() {\n    // Check for high contrast preference\n    if (\n      window.matchMedia &&\n      window.matchMedia('(prefers-contrast: high)').matches\n    ) {\n      return 'highContrast';\n    }\n\n    return 'light';\n  }\n\n  static getColor(colorName, customTheme = null) {\n    const theme = customTheme || this.getCurrentTheme();\n    return (\n      this.themes[theme]?.[colorName] ||\n      this.themes.light[colorName] ||\n      '#000000'\n    );\n  }\n\n  static getAllColors(customTheme = null) {\n    const theme = customTheme || this.getCurrentTheme();\n    return { ...this.themes[theme] };\n  }\n}\n\n/**\n * Enhanced performance monitoring for layout components\n */\nclass PerformanceMonitor {\n  static instances = new Map();\n  static measurements = new Map();\n\n  static createInstance(componentId) {\n    const instance = {\n      startMeasurement: operation =>\n        this.startMeasurement(componentId, operation),\n      endMeasurement: operation => this.endMeasurement(componentId, operation),\n      getMetrics: () => this.getMetrics(componentId),\n    };\n    this.instances.set(componentId, instance);\n    return instance;\n  }\n\n  static startMeasurement(componentId, operation) {\n    const key = `${componentId}-${operation}`;\n    this.measurements.set(key, {\n      startTime: performance.now(),\n      startMemory: this.getMemoryUsage(),\n    });\n  }\n\n  static endMeasurement(componentId, operation) {\n    const key = `${componentId}-${operation}`;\n    const start = this.measurements.get(key);\n\n    if (start) {\n      const endTime = performance.now();\n      const endMemory = this.getMemoryUsage();\n\n      const measurement = {\n        duration: endTime - start.startTime,\n        memoryDelta: endMemory - start.startMemory,\n        timestamp: new Date().toISOString(),\n      };\n\n      this.measurements.delete(key);\n\n      // Log performance warnings\n      if (measurement.duration > PERFORMANCE_THRESHOLDS.renderTime) {\n        logger.warn(\n          `Performance warning: ${operation} took ${measurement.duration.toFixed(2)}ms in ${componentId}`\n        );\n      }\n\n      return measurement;\n    }\n\n    return null;\n  }\n\n  static getMemoryUsage() {\n    if ('memory' in performance) {\n      return performance.memory.usedJSHeapSize;\n    }\n    return 0;\n  }\n\n  static getMetrics(componentId) {\n    const measurements = Array.from(this.measurements.entries())\n      .filter(([key]) => key.startsWith(componentId))\n      .map(([key, value]) => ({ operation: key.split('-')[1], ...value }));\n\n    return {\n      activeOperations: measurements.length,\n      totalMemory: this.getMemoryUsage(),\n    };\n  }\n}\n\n/**\n * Enhanced component error handling\n */\nclass ComponentError extends Error {\n  constructor(message, component, context = {}) {\n    super(message);\n    this.name = 'ComponentError';\n    this.component = component;\n    this.context = context;\n    this.timestamp = new Date().toISOString();\n    this.stack = new Error().stack;\n  }\n\n  static create(message, component, context) {\n    return new ComponentError(message, component, context);\n  }\n\n  toString() {\n    return `${this.name} in ${this.component}: ${this.message}`;\n  }\n}\n\n/**\n * Enhanced animation manager for layout components\n */\nclass AnimationManager {\n  static activeAnimations = new Map();\n  static animationId = 0;\n\n  static animate(target, from, to, options = {}) {\n    const id = ++this.animationId;\n    const animation = {\n      id,\n      target,\n      from: { ...from },\n      to: { ...to },\n      duration: options.duration || ANIMATION_DEFAULTS.duration,\n      easing: options.easing || ANIMATION_DEFAULTS.easing,\n      startTime: performance.now(),\n      onUpdate: options.onUpdate || (() => {}),\n      onComplete: options.onComplete || (() => {}),\n    };\n\n    this.activeAnimations.set(id, animation);\n    this.runAnimation(animation);\n\n    return id;\n  }\n\n  static runAnimation(animation) {\n    const animate = () => {\n      const elapsed = performance.now() - animation.startTime;\n      const progress = Math.min(elapsed / animation.duration, 1);\n      const easedProgress = this.applyEasing(progress, animation.easing);\n\n      // Interpolate values\n      const current = {};\n      for (const key in animation.from) {\n        const fromValue = animation.from[key];\n        const toValue = animation.to[key];\n        current[key] = fromValue + (toValue - fromValue) * easedProgress;\n      }\n\n      animation.onUpdate(current, progress);\n\n      if (progress >= 1) {\n        animation.onComplete();\n        this.activeAnimations.delete(animation.id);\n      } else {\n        requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }\n\n  static applyEasing(progress, easing) {\n    const easings = {\n      linear: t => t,\n      easeIn: t => t * t,\n      easeOut: t => 1 - Math.pow(1 - t, 2),\n      easeInOut: t =>\n        t < LAYOUT_COMPONENT_CONSTANTS.EASING_HALF_POINT\n          ? 2 * t * t\n          : -1 + (LAYOUT_COMPONENT_CONSTANTS.EASING_CURVE_FACTOR - 2 * t) * t,\n      easeOutCubic: t =>\n        1 - Math.pow(1 - t, LAYOUT_COMPONENT_CONSTANTS.EASING_CUBIC_POWER),\n      bounce: t => {\n        if (t < 1 / LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR)\n          return LAYOUT_COMPONENT_CONSTANTS.BOUNCE_MULTIPLIER * t * t;\n        if (t < 2 / LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR)\n          return (\n            LAYOUT_COMPONENT_CONSTANTS.BOUNCE_MULTIPLIER *\n              (t -=\n                LAYOUT_COMPONENT_CONSTANTS.BOUNCE_THRESHOLD_1 /\n                LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR) *\n              t +\n            LAYOUT_COMPONENT_CONSTANTS.BOUNCE_OFFSET_1\n          );\n        if (\n          t <\n          LAYOUT_COMPONENT_CONSTANTS.BOUNCE_RANGE_1 /\n            LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR\n        )\n          return (\n            LAYOUT_COMPONENT_CONSTANTS.BOUNCE_MULTIPLIER *\n              (t -=\n                LAYOUT_COMPONENT_CONSTANTS.BOUNCE_THRESHOLD_2 /\n                LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR) *\n              t +\n            LAYOUT_COMPONENT_CONSTANTS.BOUNCE_OFFSET_2\n          );\n        return (\n          LAYOUT_COMPONENT_CONSTANTS.BOUNCE_MULTIPLIER *\n            (t -=\n              LAYOUT_COMPONENT_CONSTANTS.BOUNCE_THRESHOLD_3 /\n              LAYOUT_COMPONENT_CONSTANTS.BOUNCE_DIVISOR) *\n            t +\n          LAYOUT_COMPONENT_CONSTANTS.BOUNCE_OFFSET_3\n        );\n      },\n    };\n\n    return easings[easing] ? easings[easing](progress) : progress;\n  }\n\n  static cancelAnimation(animationId) {\n    this.activeAnimations.delete(animationId);\n  }\n\n  static cancelAllAnimations() {\n    this.activeAnimations.clear();\n  }\n}\n\n// Enhanced constants and defaults\nconst ANIMATION_DEFAULTS = {\n  duration: 250,\n  easing: 'easeOutCubic',\n};\n\n// Accessibility defaults (currently unused)\n// const ACCESSIBILITY_DEFAULTS = {\n//     announceDelay: 150,\n//     focusDelay: 100\n// };\n\nconst PERFORMANCE_THRESHOLDS = {\n  renderTime: 16, // 60fps target\n  eventThrottle: 16,\n  memoryWarning:\n    LAYOUT_COMPONENT_CONSTANTS.MEMORY_WARNING_MB *\n    LAYOUT_COMPONENT_CONSTANTS.BYTES_PER_KB *\n    LAYOUT_COMPONENT_CONSTANTS.BYTES_PER_KB, // 50MB\n};\n\n// =============================================================================\n// MODERN TAB CONTAINER COMPONENT\n// =============================================================================\n\n/**\n * Advanced TabContainer component with accessibility, drag-and-drop,\n * theme support, and modern interaction patterns.\n */\nclass TabContainer extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || LAYOUT_COMPONENT_CONSTANTS.TAB_CONTAINER_DEFAULT_WIDTH,\n      height:\n        options.height ||\n        LAYOUT_COMPONENT_CONSTANTS.TAB_CONTAINER_DEFAULT_HEIGHT,\n      ariaRole: 'tablist',\n      ariaLabel: options.ariaLabel || 'Tab Container',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.tabs = options.tabs || [];\n    this.activeTabIndex = options.activeTab || 0;\n    this.tabHeight =\n      options.tabHeight || LAYOUT_COMPONENT_CONSTANTS.TAB_DEFAULT_HEIGHT;\n    this.closeable = options.closeable !== false;\n    this.reorderable = options.reorderable !== false;\n    this.maxTabs =\n      options.maxTabs || LAYOUT_COMPONENT_CONSTANTS.TAB_MAX_DEFAULT;\n    this.disabled = options.disabled || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Enhanced state management\n    this.hoveredTabIndex = -1;\n    this.draggedTabIndex = -1;\n    this.dragOffset = { x: 0, y: 0 };\n    this.focusedTabIndex = -1;\n    this.isDragging = false;\n\n    // Animation and performance\n    this.animationState = {\n      tabTransitions: new Map(),\n      contentFade: 0,\n    };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('TabContainer');\n\n    try {\n      this.setupTabs();\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.maxTabs &&\n      (typeof options.maxTabs !== 'number' || options.maxTabs < 1)\n    ) {\n      throw new ComponentError(\n        'maxTabs must be a positive number',\n        'TabContainer'\n      );\n    }\n\n    if (\n      options.tabHeight &&\n      (typeof options.tabHeight !== 'number' ||\n        options.tabHeight < LAYOUT_COMPONENT_CONSTANTS.TAB_MIN_HEIGHT)\n    ) {\n      throw new ComponentError(\n        `tabHeight must be at least ${LAYOUT_COMPONENT_CONSTANTS.TAB_MIN_HEIGHT} pixels`,\n        'TabContainer'\n      );\n    }\n\n    if (options.tabs && !Array.isArray(options.tabs)) {\n      throw new ComponentError('tabs must be an array', 'TabContainer');\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowLeft: () => this.navigateTab(-1),\n      ArrowRight: () => this.navigateTab(1),\n      Home: () => this.navigateToTab('first'),\n      End: () => this.navigateToTab('last'),\n      Enter: () => this.activateFocusedTab(),\n      Space: () => this.activateFocusedTab(),\n      Delete: () => this.closeFocusedTab(),\n      Escape: () => this.handleEscape(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'TabContainer',\n          { context, originalError: error }\n        );\n\n        logger.error('TabContainer Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'tab-management':\n        this.validateTabState();\n        break;\n      case 'animation':\n        this.animationState.tabTransitions.clear();\n        AnimationManager.cancelAllAnimations();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'tablist');\n    this.setAttribute('aria-multiselectable', 'false');\n    this.setAttribute('aria-orientation', 'horizontal');\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n\n  setupTabs() {\n    try {\n      // Ensure we have at least one tab\n      if (this.tabs.length === 0) {\n        this.tabs.push({\n          id: 'default',\n          title: 'Tab 1',\n          content: 'Default content',\n          closeable: false,\n        });\n      }\n\n      // Normalize tab data with enhanced properties\n      this.tabs = this.tabs.map((tab, index) => ({\n        id: tab.id || `tab-${index}`,\n        title: tab.title || `Tab ${index + 1}`,\n        content: tab.content || '',\n        closeable: tab.closeable !== false && this.closeable,\n        icon: tab.icon || null,\n        badge: tab.badge || null,\n        disabled: tab.disabled || false,\n        ariaControls: `tabpanel-${tab.id || index}`,\n        ariaSelected: false,\n        ...tab,\n      }));\n\n      // Validate and clamp active tab index\n      this.validateTabState();\n\n      // Set up ARIA relationships\n      this.updateTabAccessibility();\n    } catch (error) {\n      this.errorHandler.handle(error, 'tab-setup');\n    }\n  }\n\n  validateTabState() {\n    // Ensure we have valid tabs\n    if (this.tabs.length === 0) {\n      this.tabs.push({\n        id: 'fallback',\n        title: 'Default Tab',\n        content: '',\n        closeable: false,\n      });\n    }\n\n    // Clamp active tab index\n    this.activeTabIndex = Math.max(\n      0,\n      Math.min(this.activeTabIndex, this.tabs.length - 1)\n    );\n\n    // Ensure focused tab is valid\n    if (this.focusedTabIndex >= this.tabs.length) {\n      this.focusedTabIndex = this.activeTabIndex;\n    }\n  }\n\n  updateTabAccessibility() {\n    this.tabs.forEach((tab, index) => {\n      tab.ariaSelected = index === this.activeTabIndex;\n    });\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      mouseMove: this.handleMouseMove.bind(this),\n      mouseDown: this.handleMouseDown.bind(this),\n      mouseUp: this.handleMouseUp.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced tab management with animations and accessibility\n  async addTab(tabData, index = -1) {\n    try {\n      if (this.tabs.length >= this.maxTabs) {\n        this.announceChange('Maximum number of tabs reached');\n        return false;\n      }\n\n      const newTab = {\n        id: tabData.id || `tab-${Date.now()}`,\n        title: tabData.title || 'New Tab',\n        content: tabData.content || '',\n        closeable: tabData.closeable !== false && this.closeable,\n        icon: tabData.icon || null,\n        badge: tabData.badge || null,\n        disabled: tabData.disabled || false,\n        ariaControls: `tabpanel-${tabData.id || Date.now()}`,\n        ariaSelected: false,\n        ...tabData,\n      };\n\n      let insertIndex;\n      if (index >= 0 && index < this.tabs.length) {\n        this.tabs.splice(index, 0, newTab);\n        insertIndex = index;\n        if (index <= this.activeTabIndex) {\n          this.activeTabIndex++;\n        }\n      } else {\n        this.tabs.push(newTab);\n        insertIndex = this.tabs.length - 1;\n      }\n\n      // Animate tab appearance\n      if (!this.prefersReducedMotion()) {\n        await this.animateTabInsertion(insertIndex);\n      }\n\n      this.updateTabAccessibility();\n      this.clearRenderCache();\n\n      this.announceChange(`Tab \"${newTab.title}\" added`);\n      this.emit('tabAdded', { tab: newTab, index: insertIndex });\n\n      return true;\n    } catch (error) {\n      this.errorHandler.handle(error, 'addTab');\n      return false;\n    }\n  }\n\n  async removeTab(index) {\n    try {\n      if (index < 0 || index >= this.tabs.length || this.tabs.length <= 1) {\n        return false;\n      }\n\n      const removedTab = this.tabs[index];\n      if (!removedTab.closeable) {\n        this.announceChange('Tab cannot be closed');\n        return false;\n      }\n\n      // Animate tab removal\n      if (!this.prefersReducedMotion()) {\n        await this.animateTabRemoval(index);\n      }\n\n      this.tabs.splice(index, 1);\n\n      // Adjust active tab index\n      if (index < this.activeTabIndex) {\n        this.activeTabIndex--;\n      } else if (index === this.activeTabIndex) {\n        this.activeTabIndex = Math.min(\n          this.activeTabIndex,\n          this.tabs.length - 1\n        );\n      }\n\n      // Adjust focused tab index\n      if (this.focusedTabIndex >= this.tabs.length) {\n        this.focusedTabIndex = Math.max(0, this.tabs.length - 1);\n      }\n\n      this.updateTabAccessibility();\n      this.clearRenderCache();\n\n      this.announceChange(`Tab \"${removedTab.title}\" removed`);\n      this.emit('tabRemoved', { tab: removedTab, index });\n\n      return true;\n    } catch (error) {\n      this.errorHandler.handle(error, 'removeTab');\n      return false;\n    }\n  }\n\n  async setActiveTab(index) {\n    try {\n      if (\n        index >= 0 &&\n        index < this.tabs.length &&\n        !this.tabs[index].disabled\n      ) {\n        const previousIndex = this.activeTabIndex;\n        this.activeTabIndex = index;\n        this.focusedTabIndex = index;\n\n        // Animate content transition\n        if (!this.prefersReducedMotion() && previousIndex !== index) {\n          await this.animateContentTransition(previousIndex, index);\n        }\n\n        this.updateTabAccessibility();\n        this.clearRenderCache();\n\n        const activeTab = this.tabs[index];\n        this.announceChange(`Tab \"${activeTab.title}\" activated`);\n        this.emit('tabChanged', {\n          previousIndex,\n          activeIndex: index,\n          tab: activeTab,\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'setActiveTab');\n    }\n  }\n\n  updateTab(index, updates) {\n    try {\n      if (index >= 0 && index < this.tabs.length) {\n        const oldTab = { ...this.tabs[index] };\n        Object.assign(this.tabs[index], updates);\n\n        // Update ARIA if needed\n        if (updates.title) {\n          this.announceChange(`Tab renamed to \"${updates.title}\"`);\n        }\n\n        this.clearRenderCache();\n        this.emit('tabUpdated', {\n          index,\n          tab: this.tabs[index],\n          updates,\n          oldTab,\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'updateTab');\n    }\n  }\n\n  // Event Handlers\n  handleClick(event) {\n    const { localX, localY } = event;\n\n    if (localY <= this.tabHeight) {\n      const tabIndex = this.getTabIndexFromX(localX);\n\n      if (tabIndex >= 0 && tabIndex < this.tabs.length) {\n        const tab = this.tabs[tabIndex];\n        const tabBounds = this.getTabBounds(tabIndex);\n\n        // Check if clicking close button\n        if (\n          tab.closeable &&\n          localX >=\n            tabBounds.x +\n              tabBounds.width -\n              LAYOUT_COMPONENT_CONSTANTS.TAB_CLOSE_BUTTON_SIZE\n        ) {\n          this.removeTab(tabIndex);\n        } else if (!tab.disabled) {\n          this.setActiveTab(tabIndex);\n        }\n      }\n    }\n  }\n\n  handleMouseMove(event) {\n    const { localX, localY } = event;\n\n    if (localY <= this.tabHeight) {\n      this.hoveredTabIndex = this.getTabIndexFromX(localX);\n    } else {\n      this.hoveredTabIndex = -1;\n    }\n\n    // Handle tab dragging\n    if (this.draggedTabIndex >= 0 && this.reorderable) {\n      const newIndex = this.getTabIndexFromX(localX);\n      if (newIndex >= 0 && newIndex !== this.draggedTabIndex) {\n        this.reorderTab(this.draggedTabIndex, newIndex);\n        this.draggedTabIndex = newIndex;\n      }\n    }\n  }\n\n  handleMouseDown(event) {\n    const { localX, localY } = event;\n\n    if (localY <= this.tabHeight && this.reorderable) {\n      const tabIndex = this.getTabIndexFromX(localX);\n      if (tabIndex >= 0 && tabIndex < this.tabs.length) {\n        this.draggedTabIndex = tabIndex;\n        this.dragOffset.x = localX - this.getTabBounds(tabIndex).x;\n      }\n    }\n  }\n\n  handleMouseUp(_event) {\n    this.draggedTabIndex = -1;\n    this.dragOffset = { x: 0, y: 0 };\n  }\n\n  handleKeyDown(event) {\n    switch (event.key) {\n      case 'ArrowLeft':\n        if (this.activeTabIndex > 0) {\n          this.setActiveTab(this.activeTabIndex - 1);\n        }\n        break;\n      case 'ArrowRight':\n        if (this.activeTabIndex < this.tabs.length - 1) {\n          this.setActiveTab(this.activeTabIndex + 1);\n        }\n        break;\n      case 'Home':\n        this.setActiveTab(0);\n        break;\n      case 'End':\n        this.setActiveTab(this.tabs.length - 1);\n        break;\n      case 'Delete':\n        if (this.tabs[this.activeTabIndex]?.closeable) {\n          this.removeTab(this.activeTabIndex);\n        }\n        break;\n    }\n  }\n\n  // Utility Methods\n  getTabIndexFromX(x) {\n    const tabWidth = this.width / this.tabs.length;\n    return Math.floor(x / tabWidth);\n  }\n\n  getTabBounds(index) {\n    const tabWidth = this.width / this.tabs.length;\n    return {\n      x: index * tabWidth,\n      y: 0,\n      width: tabWidth,\n      height: this.tabHeight,\n    };\n  }\n\n  reorderTab(fromIndex, toIndex) {\n    if (fromIndex === toIndex) return;\n\n    const tab = this.tabs.splice(fromIndex, 1)[0];\n    this.tabs.splice(toIndex, 0, tab);\n\n    // Update active tab index\n    if (this.activeTabIndex === fromIndex) {\n      this.activeTabIndex = toIndex;\n    } else if (\n      fromIndex < this.activeTabIndex &&\n      toIndex >= this.activeTabIndex\n    ) {\n      this.activeTabIndex--;\n    } else if (\n      fromIndex > this.activeTabIndex &&\n      toIndex <= this.activeTabIndex\n    ) {\n      this.activeTabIndex++;\n    }\n\n    this.emit('tabReordered', { fromIndex, toIndex, tab });\n  }\n\n  // Rendering\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    this.renderTabHeaders(renderer);\n    this.renderActiveContent(renderer);\n  }\n\n  renderTabHeaders(renderer) {\n    this.tabs.forEach((tab, index) => {\n      const bounds = this.getTabBounds(index);\n      const isActive = index === this.activeTabIndex;\n      const isHovered = index === this.hoveredTabIndex;\n\n      // Tab background\n      let backgroundColor = this.tabBackgroundColor;\n      if (isActive) {\n        backgroundColor = this.activeTabColor;\n      } else if (isHovered) {\n        backgroundColor = '#e9ecef';\n      }\n\n      renderer.fillStyle = backgroundColor;\n      renderer.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n      // Tab border\n      renderer.strokeStyle = this.tabBorderColor;\n      renderer.lineWidth = 1;\n      renderer.strokeRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n      // Active tab indicator\n      if (isActive) {\n        renderer.fillStyle = '#007bff';\n        renderer.fillRect(\n          bounds.x,\n          bounds.y +\n            bounds.height -\n            LAYOUT_COMPONENT_CONSTANTS.TAB_BORDER_OFFSET,\n          bounds.width,\n          LAYOUT_COMPONENT_CONSTANTS.TAB_BORDER_WIDTH\n        );\n      }\n\n      // Tab content\n      const contentX = bounds.x + 10;\n      let textX = contentX;\n\n      // Icon\n      if (tab.icon) {\n        renderer.fillStyle = tab.disabled ? '#999999' : '#333333';\n        renderer.font = '14px Arial';\n        renderer.textAlign = 'left';\n        renderer.fillText(tab.icon, textX, bounds.y + bounds.height / 2 + 2);\n        textX += LAYOUT_COMPONENT_CONSTANTS.TAB_ICON_OFFSET;\n      }\n\n      // Title\n      renderer.fillStyle = tab.disabled ? '#999999' : '#333333';\n      renderer.font = isActive ? 'bold 12px Arial' : '12px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n      const maxTextWidth =\n        bounds.width -\n        (textX - bounds.x) -\n        LAYOUT_COMPONENT_CONSTANTS.TAB_TEXT_PADDING;\n      let { title } = tab;\n      const titleWidth = renderer.measureText(title).width;\n      if (titleWidth > maxTextWidth) {\n        const ellipsis = '...';\n        const ellipsisWidth = renderer.measureText(ellipsis).width;\n        const availableWidth = maxTextWidth - ellipsisWidth;\n\n        // Binary search for optimal length\n        let left = 0;\n        let right = title.length;\n        while (left < right) {\n          const mid = Math.floor((left + right + 1) / 2);\n          if (\n            renderer.measureText(title.substring(0, mid)).width <=\n            availableWidth\n          ) {\n            left = mid;\n          } else {\n            right = mid - 1;\n          }\n        }\n        title = title.substring(0, left) + ellipsis;\n      }\n\n      renderer.fillText(title, textX, bounds.y + bounds.height / 2);\n\n      // Badge\n      if (tab.badge) {\n        const badgeX =\n          bounds.x + bounds.width - LAYOUT_COMPONENT_CONSTANTS.TAB_BADGE_OFFSET;\n        const badgeY = bounds.y + LAYOUT_COMPONENT_CONSTANTS.TAB_BADGE_Y_OFFSET;\n\n        renderer.fillStyle = '#dc3545';\n        renderer.beginPath();\n        renderer.arc(\n          badgeX,\n          badgeY,\n          LAYOUT_COMPONENT_CONSTANTS.TAB_BADGE_RADIUS,\n          0,\n          Math.PI * 2\n        );\n        renderer.fill();\n\n        renderer.fillStyle = '#ffffff';\n        renderer.font = 'bold 10px Arial';\n        renderer.textAlign = 'center';\n        renderer.fillText(tab.badge, badgeX, badgeY + 1);\n      }\n\n      // Close button\n      if (tab.closeable) {\n        const closeX =\n          bounds.x +\n          bounds.width -\n          LAYOUT_COMPONENT_CONSTANTS.TAB_CLOSE_BUTTON_OFFSET;\n        const closeY = bounds.y + bounds.height / 2;\n\n        renderer.fillStyle = isHovered ? '#dc3545' : '#666666';\n        renderer.font = '12px Arial';\n        renderer.textAlign = 'center';\n        renderer.fillText('×', closeX, closeY);\n      }\n    });\n  }\n\n  renderActiveContent(renderer) {\n    const contentY = this.tabHeight;\n    const contentHeight = this.height - this.tabHeight;\n\n    // Content background\n    renderer.fillStyle = this.contentBackgroundColor;\n    renderer.fillRect(0, contentY, this.width, contentHeight);\n\n    // Content border\n    renderer.strokeStyle = this.tabBorderColor;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, contentY, this.width, contentHeight);\n\n    // Active tab content\n    if (this.activeTabIndex >= 0 && this.activeTabIndex < this.tabs.length) {\n      const activeTab = this.tabs[this.activeTabIndex];\n\n      if (typeof activeTab.content === 'string') {\n        renderer.fillStyle = '#333333';\n        renderer.font = '14px Arial';\n        renderer.textAlign = 'left';\n        renderer.textBaseline = 'top';\n        renderer.fillText(\n          activeTab.content,\n          LAYOUT_COMPONENT_CONSTANTS.TAB_CONTENT_PADDING,\n          contentY + LAYOUT_COMPONENT_CONSTANTS.TAB_CONTENT_PADDING\n        );\n      }\n      // If content is a component/object, it should render itself\n    }\n  }\n  // Animation methods\n  async animateTabInsertion(index) {\n    const duration = 300;\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeOutCubic',\n      onUpdate: progress => {\n        this.animationState.tabTransitions.set(index, {\n          type: 'insert',\n          progress,\n          scale:\n            LAYOUT_COMPONENT_CONSTANTS.ANIMATION_SCALE_MIN +\n            LAYOUT_COMPONENT_CONSTANTS.ANIMATION_SCALE_RANGE * progress,\n          opacity: progress,\n        });\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animationState.tabTransitions.delete(index);\n        this.invalidate();\n      },\n    });\n\n    return animation.start();\n  }\n\n  async animateTabRemoval(index) {\n    const duration = 200;\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeInCubic',\n      onUpdate: progress => {\n        this.animationState.tabTransitions.set(index, {\n          type: 'remove',\n          progress: 1 - progress,\n          scale:\n            1 - LAYOUT_COMPONENT_CONSTANTS.ANIMATION_SCALE_RANGE * progress,\n          opacity: 1 - progress,\n        });\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animationState.tabTransitions.delete(index);\n        this.invalidate();\n      },\n    });\n\n    return animation.start();\n  }\n\n  async animateContentTransition(_fromIndex, _toIndex) {\n    const duration = 250;\n    this.animationState.contentFade = 1;\n\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeInOutCubic',\n      onUpdate: progress => {\n        this.animationState.contentFade =\n          progress < LAYOUT_COMPONENT_CONSTANTS.ANIMATION_FADE_OFFSET\n            ? 1 - progress * LAYOUT_COMPONENT_CONSTANTS.ANIMATION_FADE_DIVISOR\n            : (progress - LAYOUT_COMPONENT_CONSTANTS.ANIMATION_FADE_OFFSET) *\n              LAYOUT_COMPONENT_CONSTANTS.ANIMATION_FADE_DIVISOR;\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animationState.contentFade = 1;\n        this.invalidate();\n      },\n    });\n\n    return animation.start();\n  }\n\n  // Focus and keyboard navigation\n  navigateTab(direction) {\n    const newIndex = this.focusedTabIndex + direction;\n    if (newIndex >= 0 && newIndex < this.tabs.length) {\n      this.focusedTabIndex = newIndex;\n      this.updateFocusVisuals();\n    }\n  }\n\n  navigateToTab(position) {\n    switch (position) {\n      case 'first':\n        this.focusedTabIndex = 0;\n        break;\n      case 'last':\n        this.focusedTabIndex = this.tabs.length - 1;\n        break;\n    }\n    this.updateFocusVisuals();\n  }\n\n  activateFocusedTab() {\n    if (this.focusedTabIndex >= 0 && this.focusedTabIndex < this.tabs.length) {\n      this.setActiveTab(this.focusedTabIndex);\n    }\n  }\n\n  closeFocusedTab() {\n    if (this.focusedTabIndex >= 0 && this.focusedTabIndex < this.tabs.length) {\n      const tab = this.tabs[this.focusedTabIndex];\n      if (tab.closeable) {\n        this.removeTab(this.focusedTabIndex);\n      }\n    }\n  }\n\n  handleEscape() {\n    this.focusedTabIndex = this.activeTabIndex;\n    this.updateFocusVisuals();\n  }\n\n  updateFocusVisuals() {\n    this.invalidate();\n\n    // Update screen reader announcement\n    if (this.focusedTabIndex >= 0 && this.focusedTabIndex < this.tabs.length) {\n      const tab = this.tabs[this.focusedTabIndex];\n      this.announceChange(`Focused on tab \"${tab.title}\"`);\n    }\n  }\n\n  handleFocusIn() {\n    if (this.focusedTabIndex === -1) {\n      this.focusedTabIndex = this.activeTabIndex;\n    }\n    this.updateFocusVisuals();\n  }\n\n  handleFocusOut() {\n    // Keep focused tab for keyboard users\n    this.updateFocusVisuals();\n  }\n\n  // Utility methods\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  clearRenderCache() {\n    this.renderCache.clear();\n    this.invalidate();\n  }\n\n  throttle(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n\n  reset() {\n    this.activeTabIndex = 0;\n    this.focusedTabIndex = 0;\n    this.hoveredTabIndex = -1;\n    this.draggedTabIndex = -1;\n    this.animationState.tabTransitions.clear();\n    this.animationState.contentFade = 1;\n    this.clearRenderCache();\n    this.validateTabState();\n  }\n\n  destroy() {\n    // Clean up resources\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n\n    if (this.announcer && this.announcer.parentNode) {\n      this.announcer.parentNode.removeChild(this.announcer);\n    }\n\n    this.animationState.tabTransitions.clear();\n    AnimationManager.cancelAllAnimations();\n    this.renderCache.clear();\n\n    super.destroy();\n  }\n\n  // Public API\n  getActiveTab() {\n    return this.tabs[this.activeTabIndex];\n  }\n\n  getTabById(id) {\n    return this.tabs.find(tab => tab.id === id);\n  }\n\n  getTabIndex(id) {\n    return this.tabs.findIndex(tab => tab.id === id);\n  }\n\n  getTabs() {\n    return [...this.tabs];\n  }\n\n  getTabCount() {\n    return this.tabs.length;\n  }\n\n  isTabCloseable(index) {\n    return this.tabs[index]?.closeable || false;\n  }\n\n  setTabCloseable(index, closeable) {\n    if (this.tabs[index]) {\n      this.tabs[index].closeable = closeable;\n      this.clearRenderCache();\n    }\n  }\n\n  setTheme(theme) {\n    this.theme = theme;\n    this.clearRenderCache();\n    this.emit('themeChanged', { theme });\n  }\n}\n\n// =============================================================================\n// PROGRESS STEPPER COMPONENT\n// =============================================================================\n\n/**\n * Advanced ProgressStepper component with accessibility, animations,\n * theme support, and modern interaction patterns.\n */\nclass ProgressStepper extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width ||\n        LAYOUT_COMPONENT_CONSTANTS.PROGRESS_STEPPER_DEFAULT_WIDTH,\n      height:\n        options.height ||\n        LAYOUT_COMPONENT_CONSTANTS.PROGRESS_STEPPER_DEFAULT_HEIGHT,\n      ariaRole: 'progressbar',\n      ariaLabel: options.ariaLabel || 'Progress Steps',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.steps = options.steps || [];\n    this.currentStep = Math.max(\n      0,\n      Math.min(options.currentStep || 0, this.steps.length - 1)\n    );\n    this.orientation = options.orientation || 'horizontal';\n    this.allowStepClick = options.allowStepClick !== false;\n    this.showStepNumbers = options.showStepNumbers !== false;\n    this.showLabels = options.showLabels !== false;\n    this.disabled = options.disabled || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Enhanced state management\n    this.hoveredStepIndex = -1;\n    this.focusedStepIndex = -1;\n    this.animatingSteps = new Set();\n    this.progressPercentage = 0;\n\n    // Animation and performance\n    this.animationState = {\n      stepTransitions: new Map(),\n      progressAnimation: null,\n    };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor =\n      PerformanceMonitor.createInstance('ProgressStepper');\n\n    try {\n      this.setupSteps();\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.updateProgress();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.currentStep &&\n      (typeof options.currentStep !== 'number' || options.currentStep < 0)\n    ) {\n      throw new ComponentError(\n        'currentStep must be a non-negative number',\n        'ProgressStepper'\n      );\n    }\n\n    if (\n      options.orientation &&\n      !['horizontal', 'vertical'].includes(options.orientation)\n    ) {\n      throw new ComponentError(\n        'orientation must be \"horizontal\" or \"vertical\"',\n        'ProgressStepper'\n      );\n    }\n\n    if (options.steps && !Array.isArray(options.steps)) {\n      throw new ComponentError('steps must be an array', 'ProgressStepper');\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowLeft: () => this.navigateStep(-1),\n      ArrowRight: () => this.navigateStep(1),\n      ArrowUp: () => this.navigateStep(-1),\n      ArrowDown: () => this.navigateStep(1),\n      Home: () => this.navigateToStep('first'),\n      End: () => this.navigateToStep('last'),\n      Enter: () => this.activateFocusedStep(),\n      Space: () => this.activateFocusedStep(),\n      Escape: () => this.handleEscape(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'ProgressStepper',\n          { context, originalError: error }\n        );\n\n        logger.error('ProgressStepper Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'step-management':\n        this.validateStepState();\n        break;\n      case 'animation':\n        this.animationState.stepTransitions.clear();\n        this.animatingSteps.clear();\n        AnimationManager.cancelAllAnimations();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'progressbar');\n    this.setAttribute('aria-valuemin', '0');\n    this.setAttribute('aria-valuemax', this.steps.length - 1);\n    this.setAttribute('aria-valuenow', this.currentStep);\n    this.setAttribute(\n      'aria-valuetext',\n      this.getStepDescription(this.currentStep)\n    );\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupSteps() {\n    try {\n      // Ensure we have at least one step\n      if (this.steps.length === 0) {\n        this.steps.push({\n          id: 'default',\n          title: 'Step 1',\n          description: 'Default step',\n          completed: false,\n        });\n      }\n\n      // Normalize step data\n      this.steps = this.steps.map((step, index) => ({\n        id: step.id || `step-${index}`,\n        title: step.title || `Step ${index + 1}`,\n        description: step.description || '',\n        completed: step.completed || false,\n        disabled: step.disabled || false,\n        icon: step.icon || null,\n        optional: step.optional || false,\n        ...step,\n      }));\n\n      // Validate and clamp current step\n      this.validateStepState();\n\n      // Update accessibility\n      this.updateStepAccessibility();\n    } catch (error) {\n      this.errorHandler.handle(error, 'step-setup');\n    }\n  }\n\n  validateStepState() {\n    // Ensure we have valid steps\n    if (this.steps.length === 0) {\n      this.steps.push({\n        id: 'fallback',\n        title: 'Default Step',\n        description: '',\n        completed: false,\n      });\n    }\n\n    // Clamp current step\n    this.currentStep = Math.max(\n      0,\n      Math.min(this.currentStep, this.steps.length - 1)\n    );\n\n    // Ensure focused step is valid\n    if (this.focusedStepIndex >= this.steps.length) {\n      this.focusedStepIndex = this.currentStep;\n    }\n  }\n\n  updateStepAccessibility() {\n    this.setAttribute('aria-valuenow', this.currentStep);\n    this.setAttribute(\n      'aria-valuetext',\n      this.getStepDescription(this.currentStep)\n    );\n\n    // Calculate progress percentage\n    this.progressPercentage =\n      this.steps.length > 1\n        ? (this.currentStep / (this.steps.length - 1)) * 100\n        : 100;\n  }\n\n  getStepDescription(index) {\n    if (index >= 0 && index < this.steps.length) {\n      const step = this.steps[index];\n      const status = step.completed\n        ? 'completed'\n        : index === this.currentStep\n          ? 'current'\n          : 'pending';\n      return `${step.title}, ${status}. ${step.description || ''}`.trim();\n    }\n    return '';\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      mouseMove: this.handleMouseMove.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced step management with animations and accessibility\n  async goToStep(stepIndex) {\n    try {\n      if (stepIndex >= 0 && stepIndex < this.steps.length) {\n        const step = this.steps[stepIndex];\n        if (\n          !step.disabled &&\n          (this.allowStepClick || stepIndex <= this.getLastCompletedStep() + 1)\n        ) {\n          const previousStep = this.currentStep;\n          this.currentStep = stepIndex;\n          this.focusedStepIndex = stepIndex;\n\n          // Animate step transition\n          if (!this.prefersReducedMotion() && previousStep !== stepIndex) {\n            await this.animateStepTransition(previousStep, stepIndex);\n          }\n\n          this.updateProgress();\n          this.updateStepAccessibility();\n          this.clearRenderCache();\n\n          this.announceChange(`Moved to ${step.title}`);\n          this.emit('stepChanged', {\n            previousStep,\n            currentStep: stepIndex,\n            step: this.steps[stepIndex],\n          });\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'goToStep');\n    }\n  }\n\n  async nextStep() {\n    if (this.currentStep < this.steps.length - 1) {\n      await this.goToStep(this.currentStep + 1);\n    }\n  }\n\n  async previousStep() {\n    if (this.currentStep > 0) {\n      await this.goToStep(this.currentStep - 1);\n    }\n  }\n\n  async completeStep(stepIndex = this.currentStep) {\n    try {\n      if (stepIndex >= 0 && stepIndex < this.steps.length) {\n        this.steps[stepIndex].completed = true;\n\n        // Animate completion\n        if (!this.prefersReducedMotion()) {\n          await this.animateStepCompletion(stepIndex);\n        }\n\n        this.updateProgress();\n        this.clearRenderCache();\n\n        const step = this.steps[stepIndex];\n        this.announceChange(`${step.title} completed`);\n        this.emit('stepCompleted', {\n          stepIndex,\n          step: this.steps[stepIndex],\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'completeStep');\n    }\n  }\n\n  getLastCompletedStep() {\n    for (let i = this.steps.length - 1; i >= 0; i--) {\n      if (this.steps[i].completed) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getStepStatus(index) {\n    const step = this.steps[index];\n    if (step.completed) return 'completed';\n    if (index === this.currentStep) return 'active';\n    if (step.disabled) return 'disabled';\n    return 'inactive';\n  }\n\n  // Animation methods\n  async animateStepTransition(fromIndex, toIndex) {\n    const duration = 300;\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeOutCubic',\n      onUpdate: progress => {\n        this.animationState.stepTransitions.set('transition', {\n          fromIndex,\n          toIndex,\n          progress,\n        });\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animationState.stepTransitions.delete('transition');\n        this.invalidate();\n      },\n    });\n\n    return animation.start();\n  }\n\n  async animateStepCompletion(index) {\n    const duration = 500;\n    this.animatingSteps.add(index);\n\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeOutElastic',\n      onUpdate: progress => {\n        this.animationState.stepTransitions.set(`completion-${index}`, {\n          type: 'complete',\n          index,\n          progress,\n          scale:\n            1 +\n            LAYOUT_COMPONENT_CONSTANTS.PROGRESS_SCALE_FACTOR *\n              Math.sin(progress * Math.PI),\n        });\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animationState.stepTransitions.delete(`completion-${index}`);\n        this.animatingSteps.delete(index);\n        this.invalidate();\n      },\n    });\n\n    return animation.start();\n  }\n\n  updateProgress() {\n    const completedSteps = this.steps.filter(step => step.completed).length;\n    this.progressPercentage =\n      this.steps.length > 0 ? (completedSteps / this.steps.length) * 100 : 0;\n\n    // Animate progress if not in reduced motion mode\n    if (!this.prefersReducedMotion() && this.animationState.progressAnimation) {\n      AnimationManager.cancelAnimation(this.animationState.progressAnimation);\n    }\n\n    if (!this.prefersReducedMotion()) {\n      const currentProgress = this.getAttribute('aria-valuenow') || 0;\n      const targetProgress = this.currentStep;\n\n      this.animationState.progressAnimation = AnimationManager.createAnimation({\n        duration: 400,\n        easing: 'easeOutCubic',\n        onUpdate: progress => {\n          const value =\n            currentProgress + (targetProgress - currentProgress) * progress;\n          this.setAttribute('aria-valuenow', Math.round(value));\n        },\n        onComplete: () => {\n          this.animationState.progressAnimation = null;\n        },\n      });\n\n      this.animationState.progressAnimation.start();\n    } else {\n      this.setAttribute('aria-valuenow', this.currentStep);\n    }\n  }\n\n  // Event handlers\n  handleClick(event) {\n    try {\n      if (!this.allowStepClick || this.disabled) return;\n\n      const stepIndex = this.getStepIndexFromPosition(\n        event.localX,\n        event.localY\n      );\n      if (stepIndex >= 0) {\n        this.goToStep(stepIndex);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'handleClick');\n    }\n  }\n\n  handleMouseMove(event) {\n    const stepIndex = this.getStepIndexFromPosition(event.localX, event.localY);\n\n    if (stepIndex !== this.hoveredStepIndex) {\n      this.hoveredStepIndex = stepIndex;\n      this.invalidate();\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    const handler = this.keyboardHandler[event.key];\n    if (handler) {\n      event.preventDefault();\n      handler();\n    }\n  }\n\n  handleFocus() {\n    if (this.focusedStepIndex === -1) {\n      this.focusedStepIndex = this.currentStep;\n    }\n    this.invalidate();\n  }\n\n  handleBlur() {\n    this.invalidate();\n  }\n\n  // Focus and keyboard navigation\n  navigateStep(direction) {\n    const newIndex = this.focusedStepIndex + direction;\n    if (newIndex >= 0 && newIndex < this.steps.length) {\n      this.focusedStepIndex = newIndex;\n      this.updateFocusVisuals();\n    }\n  }\n\n  navigateToStep(position) {\n    switch (position) {\n      case 'first':\n        this.focusedStepIndex = 0;\n        break;\n      case 'last':\n        this.focusedStepIndex = this.steps.length - 1;\n        break;\n    }\n    this.updateFocusVisuals();\n  }\n\n  activateFocusedStep() {\n    if (\n      this.focusedStepIndex >= 0 &&\n      this.focusedStepIndex < this.steps.length\n    ) {\n      this.goToStep(this.focusedStepIndex);\n    }\n  }\n\n  handleEscape() {\n    this.focusedStepIndex = this.currentStep;\n    this.updateFocusVisuals();\n  }\n\n  updateFocusVisuals() {\n    this.invalidate();\n\n    if (\n      this.focusedStepIndex >= 0 &&\n      this.focusedStepIndex < this.steps.length\n    ) {\n      const step = this.steps[this.focusedStepIndex];\n      this.announceChange(`Focused on ${step.title}`);\n    }\n  }\n\n  handleFocusIn() {\n    if (this.focusedStepIndex === -1) {\n      this.focusedStepIndex = this.currentStep;\n    }\n    this.updateFocusVisuals();\n  }\n\n  handleFocusOut() {\n    this.updateFocusVisuals();\n  }\n\n  getStepIndexFromPosition(x, y) {\n    try {\n      if (this.orientation === 'horizontal') {\n        const stepWidth = this.width / this.steps.length;\n        const stepIndex = Math.floor(x / stepWidth);\n        return stepIndex >= 0 && stepIndex < this.steps.length ? stepIndex : -1;\n      } else {\n        const stepHeight = this.height / this.steps.length;\n        const stepIndex = Math.floor(y / stepHeight);\n        return stepIndex >= 0 && stepIndex < this.steps.length ? stepIndex : -1;\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'getStepIndexFromPosition');\n      return -1;\n    }\n  }\n\n  // Enhanced rendering with theme support\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      const theme = ComponentTheme.themes[this.theme];\n\n      if (this.orientation === 'horizontal') {\n        this.renderHorizontalStepper(renderer, theme);\n      } else {\n        this.renderVerticalStepper(renderer, theme);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderHorizontalStepper(renderer, theme) {\n    const stepWidth = this.width / this.steps.length;\n    const centerY = this.height / 2;\n    const circleRadius = 15;\n    const lineY = centerY;\n\n    // Draw connecting lines with enhanced styling\n    for (let i = 0; i < this.steps.length - 1; i++) {\n      const startX = (i + 1) * stepWidth - stepWidth / 2 + circleRadius;\n      const endX = (i + 1) * stepWidth + stepWidth / 2 - circleRadius;\n\n      const isCompleted =\n        this.steps[i].completed && this.steps[i + 1].completed;\n      const isActive = i === this.currentStep - 1 || i === this.currentStep;\n\n      // Line gradient for better visual appeal\n      const gradient = renderer.createLinearGradient(\n        startX,\n        lineY,\n        endX,\n        lineY\n      );\n      if (isCompleted) {\n        gradient.addColorStop(0, theme.progressComplete);\n        gradient.addColorStop(1, theme.progressComplete);\n      } else if (isActive) {\n        gradient.addColorStop(0, theme.progressFill);\n        gradient.addColorStop(1, theme.border);\n      } else {\n        gradient.addColorStop(0, theme.progressTrack);\n        gradient.addColorStop(1, theme.progressTrack);\n      }\n\n      renderer.strokeStyle = gradient;\n      renderer.lineWidth = 3;\n      renderer.lineCap = 'round';\n      renderer.beginPath();\n      renderer.moveTo(startX, lineY);\n      renderer.lineTo(endX, lineY);\n      renderer.stroke();\n    }\n\n    // Draw steps with enhanced visual effects\n    this.steps.forEach((step, index) => {\n      const centerX =\n        (index + LAYOUT_COMPONENT_CONSTANTS.PROGRESS_STEP_CENTER_OFFSET) *\n        stepWidth;\n      const status = this.getStepStatus(index);\n      const isHovered = index === this.hoveredStepIndex;\n      const isFocused = index === this.focusedStepIndex;\n\n      // Animation effects\n      let scale = 1;\n      const completionAnim = this.animationState.stepTransitions.get(\n        `completion-${index}`\n      );\n      if (completionAnim) {\n        ({ scale } = completionAnim);\n      }\n\n      const currentRadius = circleRadius * scale;\n\n      // Step circle with theme colors\n      let fillColor = theme.progressTrack;\n      let strokeColor = theme.border;\n      let textColor = theme.textSecondary;\n\n      switch (status) {\n        case 'completed':\n          fillColor = theme.progressComplete;\n          strokeColor = theme.progressComplete;\n          textColor = theme.background;\n          break;\n        case 'active':\n          fillColor = theme.progressFill;\n          strokeColor = theme.progressFill;\n          textColor = theme.background;\n          break;\n        case 'disabled':\n          fillColor = theme.backgroundDisabled;\n          strokeColor = theme.disabled;\n          textColor = theme.disabled;\n          break;\n      }\n\n      // Hover and focus effects\n      if (isHovered && !step.disabled) {\n        fillColor = this.lightenColor(\n          fillColor,\n          LAYOUT_COMPONENT_CONSTANTS.PROGRESS_LIGHTEN_FACTOR\n        );\n      }\n\n      // Focus ring\n      if (isFocused) {\n        renderer.strokeStyle = theme.focus;\n        renderer.lineWidth = 3;\n        renderer.beginPath();\n        renderer.arc(\n          centerX,\n          centerY,\n          currentRadius + LAYOUT_COMPONENT_CONSTANTS.PROGRESS_RADIUS_OFFSET,\n          0,\n          Math.PI * 2\n        );\n        renderer.stroke();\n      }\n\n      // Main circle\n      renderer.fillStyle = fillColor;\n      renderer.strokeStyle = strokeColor;\n      renderer.lineWidth = 2;\n      renderer.beginPath();\n      renderer.arc(centerX, centerY, currentRadius, 0, Math.PI * 2);\n      renderer.fill();\n      renderer.stroke();\n\n      // Step content with better typography\n      if (step.completed) {\n        renderer.fillStyle = textColor;\n        renderer.font = 'bold 14px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'middle';\n        renderer.fillText('✓', centerX, centerY);\n      } else if (this.showStepNumbers) {\n        renderer.fillStyle = textColor;\n        renderer.font = 'bold 12px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'middle';\n        renderer.fillText((index + 1).toString(), centerX, centerY);\n      } else if (step.icon) {\n        renderer.fillStyle = textColor;\n        renderer.font = '14px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'middle';\n        renderer.fillText(step.icon, centerX, centerY);\n      }\n\n      // Enhanced step labels\n      if (this.showLabels && step.title) {\n        renderer.fillStyle =\n          status === 'active' ? theme.text : theme.textSecondary;\n        renderer.font = status === 'active' ? 'bold 11px Arial' : '11px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'top';\n\n        // Truncate long titles\n        const maxWidth = stepWidth - 10;\n        let { title } = step;\n        if (renderer.measureText(title).width > maxWidth) {\n          while (\n            renderer.measureText(`${title}...`).width > maxWidth &&\n            title.length > 0\n          ) {\n            title = title.slice(0, -1);\n          }\n          title = `${title}...`;\n        }\n\n        renderer.fillText(title, centerX, centerY + currentRadius + 10);\n\n        // Optional indicator\n        if (step.optional) {\n          renderer.fillStyle = theme.textSecondary;\n          renderer.font = '9px Arial';\n          renderer.fillText(\n            '(optional)',\n            centerX,\n            centerY +\n              currentRadius +\n              LAYOUT_COMPONENT_CONSTANTS.PROGRESS_RADIUS_PADDING\n          );\n        }\n      }\n    });\n  }\n\n  renderVerticalStepper(renderer, theme) {\n    const stepHeight = this.height / this.steps.length;\n    const centerX = 30;\n    const circleRadius = 12;\n\n    // Similar implementation to horizontal but with vertical layout\n    // Draw connecting lines\n    for (let i = 0; i < this.steps.length - 1; i++) {\n      const startY = (i + 1) * stepHeight - stepHeight / 2 + circleRadius;\n      const endY = (i + 1) * stepHeight + stepHeight / 2 - circleRadius;\n\n      const isCompleted =\n        this.steps[i].completed && this.steps[i + 1].completed;\n      renderer.strokeStyle = isCompleted\n        ? theme.progressComplete\n        : theme.progressTrack;\n      renderer.lineWidth = 3;\n      renderer.lineCap = 'round';\n      renderer.beginPath();\n      renderer.moveTo(centerX, startY);\n      renderer.lineTo(centerX, endY);\n      renderer.stroke();\n    }\n\n    // Draw steps\n    this.steps.forEach((step, index) => {\n      const centerY =\n        (index + LAYOUT_COMPONENT_CONSTANTS.PROGRESS_STEP_CENTER_OFFSET) *\n        stepHeight;\n      const status = this.getStepStatus(index);\n      const isHovered = index === this.hoveredStepIndex;\n      const isFocused = index === this.focusedStepIndex;\n\n      // Colors based on status and theme\n      let fillColor = theme.progressTrack;\n      let strokeColor = theme.border;\n      let textColor = theme.textSecondary;\n\n      switch (status) {\n        case 'completed':\n          fillColor = theme.progressComplete;\n          strokeColor = theme.progressComplete;\n          textColor = theme.background;\n          break;\n        case 'active':\n          fillColor = theme.progressFill;\n          strokeColor = theme.progressFill;\n          textColor = theme.background;\n          break;\n        case 'disabled':\n          fillColor = theme.backgroundDisabled;\n          strokeColor = theme.disabled;\n          textColor = theme.disabled;\n          break;\n      }\n\n      if (isHovered && !step.disabled) {\n        fillColor = this.lightenColor(\n          fillColor,\n          LAYOUT_COMPONENT_CONSTANTS.PROGRESS_LIGHTEN_FACTOR\n        );\n      }\n\n      // Focus ring\n      if (isFocused) {\n        renderer.strokeStyle = theme.focus;\n        renderer.lineWidth = 3;\n        renderer.beginPath();\n        renderer.arc(\n          centerX,\n          centerY,\n          circleRadius + LAYOUT_COMPONENT_CONSTANTS.PROGRESS_CIRCLE_BORDER,\n          0,\n          Math.PI * 2\n        );\n        renderer.stroke();\n      }\n\n      // Main circle\n      renderer.fillStyle = fillColor;\n      renderer.strokeStyle = strokeColor;\n      renderer.lineWidth = 2;\n      renderer.beginPath();\n      renderer.arc(centerX, centerY, circleRadius, 0, Math.PI * 2);\n      renderer.fill();\n      renderer.stroke();\n\n      // Step content\n      if (step.completed) {\n        renderer.fillStyle = textColor;\n        renderer.font = 'bold 12px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'middle';\n        renderer.fillText('✓', centerX, centerY);\n      } else if (this.showStepNumbers) {\n        renderer.fillStyle = textColor;\n        renderer.font = 'bold 10px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'middle';\n        renderer.fillText((index + 1).toString(), centerX, centerY);\n      }\n\n      // Labels and descriptions\n      if (this.showLabels && step.title) {\n        renderer.fillStyle =\n          status === 'active' ? theme.text : theme.textSecondary;\n        renderer.font = status === 'active' ? 'bold 12px Arial' : '12px Arial';\n        renderer.textAlign = 'left';\n        renderer.textBaseline = 'middle';\n        renderer.fillText(\n          step.title,\n          centerX +\n            circleRadius +\n            LAYOUT_COMPONENT_CONSTANTS.PROGRESS_TEXT_OFFSET_X,\n          centerY - LAYOUT_COMPONENT_CONSTANTS.PROGRESS_TEXT_OFFSET_Y\n        );\n\n        if (step.description) {\n          renderer.fillStyle = theme.textSecondary;\n          renderer.font = '10px Arial';\n          renderer.fillText(\n            step.description,\n            centerX +\n              circleRadius +\n              LAYOUT_COMPONENT_CONSTANTS.PROGRESS_TEXT_OFFSET_X,\n            centerY + 10\n          );\n        }\n\n        if (step.optional) {\n          renderer.fillStyle = theme.textSecondary;\n          renderer.font = 'italic 9px Arial';\n          renderer.fillText(\n            '(optional)',\n            centerX +\n              circleRadius +\n              LAYOUT_COMPONENT_CONSTANTS.PROGRESS_TEXT_OFFSET_X,\n            centerY + LAYOUT_COMPONENT_CONSTANTS.PROGRESS_DESCRIPTION_Y_OFFSET\n          );\n        }\n      }\n    });\n  }\n\n  // Utility methods\n  lightenColor(color, amount) {\n    const num = parseInt(color.replace('#', ''), 16);\n    const r = Math.min(\n      LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE,\n      Math.floor(\n        (num >> LAYOUT_COMPONENT_CONSTANTS.COLOR_RED_SHIFT) +\n          amount * LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE\n      )\n    );\n    const g = Math.min(\n      LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE,\n      Math.floor(\n        ((num >> LAYOUT_COMPONENT_CONSTANTS.COLOR_GREEN_SHIFT) &\n          LAYOUT_COMPONENT_CONSTANTS.COLOR_GREEN_MASK) +\n          amount * LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE\n      )\n    );\n    const b = Math.min(\n      LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE,\n      Math.floor(\n        (num & LAYOUT_COMPONENT_CONSTANTS.COLOR_BLUE_MASK) +\n          amount * LAYOUT_COMPONENT_CONSTANTS.COLOR_MAX_VALUE\n      )\n    );\n    return `rgb(${r}, ${g}, ${b})`;\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  clearRenderCache() {\n    this.renderCache.clear();\n    this.invalidate();\n  }\n\n  throttle(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n\n  reset() {\n    this.currentStep = 0;\n    this.focusedStepIndex = 0;\n    this.hoveredStepIndex = -1;\n    this.animatingSteps.clear();\n    this.animationState.stepTransitions.clear();\n\n    this.steps.forEach(step => {\n      step.completed = false;\n    });\n\n    this.updateProgress();\n    this.updateStepAccessibility();\n    this.clearRenderCache();\n\n    this.announceChange('Progress reset');\n    this.emit('reset');\n  }\n\n  destroy() {\n    // Clean up resources\n    if (this.announcer && this.announcer.parentNode) {\n      this.announcer.parentNode.removeChild(this.announcer);\n    }\n\n    this.animationState.stepTransitions.clear();\n    this.animatingSteps.clear();\n    AnimationManager.cancelAllAnimations();\n    this.renderCache.clear();\n\n    super.destroy();\n  }\n\n  // Public API\n  getCurrentStep() {\n    return this.steps[this.currentStep];\n  }\n\n  getProgress() {\n    const completedSteps = this.steps.filter(step => step.completed).length;\n    return this.steps.length > 0 ? completedSteps / this.steps.length : 0;\n  }\n\n  getProgressPercentage() {\n    return this.progressPercentage;\n  }\n\n  getSteps() {\n    return [...this.steps];\n  }\n\n  getStepCount() {\n    return this.steps.length;\n  }\n\n  addStep(stepData, index = -1) {\n    try {\n      const newStep = {\n        id: stepData.id || `step-${Date.now()}`,\n        title: stepData.title || 'New Step',\n        description: stepData.description || '',\n        completed: stepData.completed || false,\n        disabled: stepData.disabled || false,\n        icon: stepData.icon || null,\n        optional: stepData.optional || false,\n        ...stepData,\n      };\n\n      if (index >= 0 && index < this.steps.length) {\n        this.steps.splice(index, 0, newStep);\n        if (index <= this.currentStep) {\n          this.currentStep++;\n        }\n      } else {\n        this.steps.push(newStep);\n      }\n\n      this.validateStepState();\n      this.updateStepAccessibility();\n      this.clearRenderCache();\n\n      this.emit('stepAdded', {\n        step: newStep,\n        index: index >= 0 ? index : this.steps.length - 1,\n      });\n      return true;\n    } catch (error) {\n      this.errorHandler.handle(error, 'addStep');\n      return false;\n    }\n  }\n\n  removeStep(index) {\n    try {\n      if (index >= 0 && index < this.steps.length && this.steps.length > 1) {\n        const removedStep = this.steps.splice(index, 1)[0];\n\n        if (index < this.currentStep) {\n          this.currentStep--;\n        } else if (\n          index === this.currentStep &&\n          this.currentStep >= this.steps.length\n        ) {\n          this.currentStep = this.steps.length - 1;\n        }\n\n        this.validateStepState();\n        this.updateStepAccessibility();\n        this.clearRenderCache();\n\n        this.emit('stepRemoved', { step: removedStep, index });\n        return true;\n      }\n      return false;\n    } catch (error) {\n      this.errorHandler.handle(error, 'removeStep');\n      return false;\n    }\n  }\n\n  updateStep(index, updates) {\n    try {\n      if (index >= 0 && index < this.steps.length) {\n        const oldStep = { ...this.steps[index] };\n        Object.assign(this.steps[index], updates);\n\n        this.clearRenderCache();\n        this.emit('stepUpdated', {\n          index,\n          step: this.steps[index],\n          updates,\n          oldStep,\n        });\n        return true;\n      }\n      return false;\n    } catch (error) {\n      this.errorHandler.handle(error, 'updateStep');\n      return false;\n    }\n  }\n\n  setTheme(theme) {\n    this.theme = theme;\n    this.clearRenderCache();\n    this.emit('themeChanged', { theme });\n  }\n}\n\n// =============================================================================\n// SPLIT PANE COMPONENT\n// =============================================================================\n\n/**\n * Advanced SplitPane component with accessibility, animations,\n * theme support, and modern interaction patterns.\n */\nclass SplitPane extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || LAYOUT_COMPONENT_CONSTANTS.SPLIT_PANE_DEFAULT_WIDTH,\n      height:\n        options.height || LAYOUT_COMPONENT_CONSTANTS.SPLIT_PANE_DEFAULT_HEIGHT,\n      ariaRole: 'separator',\n      ariaLabel: options.ariaLabel || 'Split Pane',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.orientation = options.orientation || 'horizontal';\n    this.split = Math.max(\n      LAYOUT_COMPONENT_CONSTANTS.SPLIT_MIN_RATIO,\n      Math.min(\n        LAYOUT_COMPONENT_CONSTANTS.SPLIT_MAX_RATIO,\n        options.split || LAYOUT_COMPONENT_CONSTANTS.SPLIT_DEFAULT_RATIO\n      )\n    );\n    this.minSize = options.minSize || LAYOUT_COMPONENT_CONSTANTS.SPLIT_MIN_SIZE;\n    this.splitterSize =\n      options.splitterSize || LAYOUT_COMPONENT_CONSTANTS.SPLIT_SPLITTER_SIZE;\n    this.resizable = options.resizable !== false;\n    this.collapsible = options.collapsible || false;\n    this.disabled = options.disabled || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Pane content\n    this.leftPane = options.leftPane || null;\n    this.rightPane = options.rightPane || null;\n\n    // Enhanced state management\n    this.isResizing = false;\n    this.isHovering = false;\n    this.isFocused = false;\n    this.startMousePos = 0;\n    this.startSplit = 0;\n    this.collapsed = null;\n    this.animatedSplit = this.split;\n\n    // Animation and performance\n    this.animationState = {\n      splitTransition: null,\n      collapseAnimation: null,\n    };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('SplitPane');\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.updateAccessibility();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.split &&\n      (typeof options.split !== 'number' ||\n        options.split < 0 ||\n        options.split > 1)\n    ) {\n      throw new ComponentError(\n        'split must be a number between 0 and 1',\n        'SplitPane'\n      );\n    }\n\n    if (\n      options.orientation &&\n      !['horizontal', 'vertical'].includes(options.orientation)\n    ) {\n      throw new ComponentError(\n        'orientation must be \"horizontal\" or \"vertical\"',\n        'SplitPane'\n      );\n    }\n\n    if (\n      options.minSize &&\n      (typeof options.minSize !== 'number' || options.minSize < 0)\n    ) {\n      throw new ComponentError(\n        'minSize must be a non-negative number',\n        'SplitPane'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowLeft: () =>\n        this.adjustSplit(-LAYOUT_COMPONENT_CONSTANTS.SPLIT_KEYBOARD_ADJUSTMENT),\n      ArrowRight: () =>\n        this.adjustSplit(LAYOUT_COMPONENT_CONSTANTS.SPLIT_KEYBOARD_ADJUSTMENT),\n      ArrowUp: () =>\n        this.adjustSplit(-LAYOUT_COMPONENT_CONSTANTS.SPLIT_KEYBOARD_ADJUSTMENT),\n      ArrowDown: () =>\n        this.adjustSplit(LAYOUT_COMPONENT_CONSTANTS.SPLIT_KEYBOARD_ADJUSTMENT),\n      Home: () => this.setSplit(LAYOUT_COMPONENT_CONSTANTS.SPLIT_MIN_RATIO),\n      End: () => this.setSplit(LAYOUT_COMPONENT_CONSTANTS.SPLIT_MAX_RATIO),\n      Enter: () => this.toggleCollapse(),\n      Space: () => this.toggleCollapse(),\n      Escape: () => this.handleEscape(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'SplitPane',\n          { context, originalError: error }\n        );\n\n        logger.error('SplitPane Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'resize':\n        this.isResizing = false;\n        this.split = Math.max(\n          LAYOUT_COMPONENT_CONSTANTS.SPLIT_MIN_RATIO,\n          Math.min(LAYOUT_COMPONENT_CONSTANTS.SPLIT_MAX_RATIO, this.split)\n        );\n        break;\n      case 'animation':\n        this.animationState.splitTransition = null;\n        this.animationState.collapseAnimation = null;\n        AnimationManager.cancelAllAnimations();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'separator');\n    this.setAttribute('aria-orientation', this.orientation);\n    this.setAttribute('aria-valuemin', '10');\n    this.setAttribute('aria-valuemax', '90');\n    this.setAttribute('aria-valuenow', Math.round(this.split * 100));\n    this.setAttribute('aria-valuetext', this.getSplitDescription());\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  updateAccessibility() {\n    this.setAttribute('aria-valuenow', Math.round(this.split * 100));\n    this.setAttribute('aria-valuetext', this.getSplitDescription());\n  }\n\n  getSplitDescription() {\n    const percentage = Math.round(this.split * 100);\n    const orientation = this.orientation === 'horizontal' ? 'left' : 'top';\n    return `${orientation} pane ${percentage}%, ${orientation === 'left' ? 'right' : 'bottom'} pane ${100 - percentage}%`;\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      mouseDown: this.handleMouseDown.bind(this),\n      mouseMove: this.handleMouseMove.bind(this),\n      mouseUp: this.handleMouseUp.bind(this),\n      dblclick: this.handleDoubleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced split management with animations\n  async setSplit(newSplit, animate = true) {\n    try {\n      const clampedSplit = Math.max(\n        LAYOUT_COMPONENT_CONSTANTS.SPLIT_MIN_RATIO,\n        Math.min(LAYOUT_COMPONENT_CONSTANTS.SPLIT_MAX_RATIO, newSplit)\n      );\n\n      if (clampedSplit === this.split) return;\n\n      const oldSplit = this.split;\n\n      if (animate && !this.prefersReducedMotion()) {\n        await this.animateSplitChange(oldSplit, clampedSplit);\n      } else {\n        this.split = clampedSplit;\n        this.animatedSplit = clampedSplit;\n      }\n\n      this.updateAccessibility();\n      this.clearRenderCache();\n\n      this.announceChange(\n        `Split adjusted to ${Math.round(clampedSplit * 100)}%`\n      );\n      this.emit('splitChanged', { oldSplit, newSplit: clampedSplit });\n    } catch (error) {\n      this.errorHandler.handle(error, 'setSplit');\n    }\n  }\n\n  adjustSplit(delta) {\n    const newSplit = this.split + delta;\n    this.setSplit(newSplit);\n  }\n\n  async toggleCollapse() {\n    if (!this.collapsible) return;\n\n    try {\n      if (this.collapsed) {\n        await this.expand();\n      } else {\n        // Default to collapsing the smaller pane\n        const collapseLeft =\n          this.split > LAYOUT_COMPONENT_CONSTANTS.SPLIT_CENTER_THRESHOLD;\n        await this.collapse(collapseLeft ? 'left' : 'right');\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'toggleCollapse');\n    }\n  }\n\n  async collapse(side) {\n    if (!this.collapsible || this.collapsed === side) return;\n\n    try {\n      const targetSplit =\n        side === 'left'\n          ? LAYOUT_COMPONENT_CONSTANTS.SPLIT_COLLAPSED_RATIO\n          : LAYOUT_COMPONENT_CONSTANTS.SPLIT_EXPANDED_RATIO;\n\n      if (!this.prefersReducedMotion()) {\n        await this.animateCollapse(this.split, targetSplit);\n      } else {\n        this.split = targetSplit;\n        this.animatedSplit = targetSplit;\n      }\n\n      this.collapsed = side;\n      this.updateAccessibility();\n      this.clearRenderCache();\n\n      this.announceChange(`${side} pane collapsed`);\n      this.emit('paneCollapsed', { side });\n    } catch (error) {\n      this.errorHandler.handle(error, 'collapse');\n    }\n  }\n\n  async expand() {\n    if (!this.collapsed) return;\n\n    try {\n      const targetSplit = 0.5;\n\n      if (!this.prefersReducedMotion()) {\n        await this.animateCollapse(this.split, targetSplit);\n      } else {\n        this.split = targetSplit;\n        this.animatedSplit = targetSplit;\n      }\n\n      const expandedSide = this.collapsed;\n      this.collapsed = null;\n      this.updateAccessibility();\n      this.clearRenderCache();\n\n      this.announceChange(`${expandedSide} pane expanded`);\n      this.emit('paneExpanded', { side: expandedSide });\n    } catch (error) {\n      this.errorHandler.handle(error, 'expand');\n    }\n  }\n\n  // Animation methods\n  async animateSplitChange(fromSplit, toSplit) {\n    const duration = 250;\n\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeOutCubic',\n      onUpdate: progress => {\n        this.animatedSplit = fromSplit + (toSplit - fromSplit) * progress;\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.split = toSplit;\n        this.animatedSplit = toSplit;\n        this.animationState.splitTransition = null;\n        this.invalidate();\n      },\n    });\n\n    this.animationState.splitTransition = animation;\n    return animation.start();\n  }\n\n  async animateCollapse(fromSplit, toSplit) {\n    const duration = 300;\n\n    const animation = AnimationManager.createAnimation({\n      duration,\n      easing: 'easeInOutCubic',\n      onUpdate: progress => {\n        this.animatedSplit = fromSplit + (toSplit - fromSplit) * progress;\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.split = toSplit;\n        this.animatedSplit = toSplit;\n        this.animationState.collapseAnimation = null;\n        this.invalidate();\n      },\n    });\n\n    this.animationState.collapseAnimation = animation;\n    return animation.start();\n  }\n\n  // Enhanced splitter bounds calculation\n  getSplitterBounds() {\n    const split = this.animatedSplit || this.split;\n\n    if (this.orientation === 'horizontal') {\n      const splitX = this.width * split;\n      return {\n        x: splitX - this.splitterSize / 2,\n        y: 0,\n        width: this.splitterSize,\n        height: this.height,\n      };\n    } else {\n      const splitY = this.height * split;\n      return {\n        x: 0,\n        y: splitY - this.splitterSize / 2,\n        width: this.width,\n        height: this.splitterSize,\n      };\n    }\n  }\n\n  getLeftPaneBounds() {\n    if (this.collapsed === 'left') {\n      return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    if (this.collapsed === 'right') {\n      return { x: 0, y: 0, width: this.width, height: this.height };\n    }\n\n    if (this.orientation === 'horizontal') {\n      const splitX = this.width * this.split;\n      return {\n        x: 0,\n        y: 0,\n        width: splitX - this.splitterSize / 2,\n        height: this.height,\n      };\n    } else {\n      const splitY = this.height * this.split;\n      return {\n        x: 0,\n        y: 0,\n        width: this.width,\n        height: splitY - this.splitterSize / 2,\n      };\n    }\n  }\n\n  getRightPaneBounds() {\n    if (this.collapsed === 'right') {\n      return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    if (this.collapsed === 'left') {\n      return { x: 0, y: 0, width: this.width, height: this.height };\n    }\n\n    if (this.orientation === 'horizontal') {\n      const splitX = this.width * this.split;\n      return {\n        x: splitX + this.splitterSize / 2,\n        y: 0,\n        width: this.width - splitX - this.splitterSize / 2,\n        height: this.height,\n      };\n    } else {\n      const splitY = this.height * this.split;\n      return {\n        x: 0,\n        y: splitY + this.splitterSize / 2,\n        width: this.width,\n        height: this.height - splitY - this.splitterSize / 2,\n      };\n    }\n  }\n\n  isPointInSplitter(x, y) {\n    const bounds = this.getSplitterBounds();\n    return (\n      x >= bounds.x &&\n      x <= bounds.x + bounds.width &&\n      y >= bounds.y &&\n      y <= bounds.y + bounds.height\n    );\n  }\n\n  // Event Handlers\n  // Event handlers\n  handleMouseDown(event) {\n    try {\n      if (!this.resizable || this.disabled) return;\n\n      const { localX, localY } = event;\n\n      if (this.isPointInSplitter(localX, localY)) {\n        this.isResizing = true;\n        this.startSplit = this.split;\n\n        if (this.orientation === 'horizontal') {\n          this.startMousePos = localX;\n        } else {\n          this.startMousePos = localY;\n        }\n\n        this.announceChange('Started resizing split pane');\n        this.emit('resizeStart', { split: this.split });\n        event.stopPropagation();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'handleMouseDown');\n    }\n  }\n\n  handleMouseMove(event) {\n    try {\n      const { localX, localY } = event;\n\n      if (this.isResizing) {\n        const currentPos = this.orientation === 'horizontal' ? localX : localY;\n        const delta = currentPos - this.startMousePos;\n        const totalSize =\n          this.orientation === 'horizontal' ? this.width : this.height;\n        const deltaRatio = delta / totalSize;\n\n        let newSplit = this.startSplit + deltaRatio;\n\n        // Apply minimum size constraints\n        const minRatio = this.minSize / totalSize;\n        newSplit = Math.max(minRatio, Math.min(1 - minRatio, newSplit));\n\n        this.split = newSplit;\n        this.animatedSplit = newSplit;\n        this.updateAccessibility();\n        this.clearRenderCache();\n\n        this.emit('resize', { split: newSplit });\n      } else {\n        // Update hover state\n        const wasHovering = this.isHovering;\n        this.isHovering = this.isPointInSplitter(localX, localY);\n\n        if (wasHovering !== this.isHovering) {\n          this.invalidate();\n        }\n\n        // Update cursor\n        if (this.resizable && this.isHovering) {\n          document.body.style.cursor =\n            this.orientation === 'horizontal' ? 'col-resize' : 'row-resize';\n        } else {\n          document.body.style.cursor = 'default';\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'handleMouseMove');\n    }\n  }\n\n  handleMouseUp(_event) {\n    try {\n      if (this.isResizing) {\n        this.isResizing = false;\n        document.body.style.cursor = 'default';\n\n        this.announceChange(\n          `Split adjusted to ${Math.round(this.split * 100)}%`\n        );\n        this.emit('resizeEnd', { split: this.split });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'handleMouseUp');\n    }\n  }\n\n  handleDoubleClick(event) {\n    try {\n      const { localX, localY } = event;\n\n      if (this.isPointInSplitter(localX, localY) && this.collapsible) {\n        this.toggleCollapse();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'handleDoubleClick');\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    const handler = this.keyboardHandler[event.key];\n    if (handler) {\n      event.preventDefault();\n      handler();\n    }\n  }\n\n  handleFocus() {\n    this.isFocused = true;\n    this.invalidate();\n  }\n\n  handleBlur() {\n    this.isFocused = false;\n    this.invalidate();\n    document.body.style.cursor = 'default';\n  }\n\n  handleFocusIn() {\n    this.isFocused = true;\n    this.invalidate();\n  }\n\n  handleFocusOut() {\n    this.isFocused = false;\n    this.invalidate();\n  }\n\n  handleEscape() {\n    if (this.isResizing) {\n      this.isResizing = false;\n      this.split = this.startSplit;\n      this.animatedSplit = this.startSplit;\n      this.updateAccessibility();\n      this.clearRenderCache();\n      document.body.style.cursor = 'default';\n\n      this.announceChange('Resize cancelled');\n      this.emit('resizeCancel');\n    }\n  }\n\n  // Enhanced rendering with theme support\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      const theme = ComponentTheme.themes[this.theme];\n\n      this.renderPanes(renderer, theme);\n      this.renderSplitter(renderer, theme);\n\n      if (this.isFocused) {\n        this.renderFocusIndicator(renderer, theme);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderPanes(renderer, theme) {\n    const leftBounds = this.getLeftPaneBounds();\n    const rightBounds = this.getRightPaneBounds();\n\n    // Left/Top pane background\n    renderer.fillStyle = theme.background;\n    renderer.fillRect(\n      leftBounds.x,\n      leftBounds.y,\n      leftBounds.width,\n      leftBounds.height\n    );\n\n    // Right/Bottom pane background\n    renderer.fillStyle = theme.backgroundSecondary;\n    renderer.fillRect(\n      rightBounds.x,\n      rightBounds.y,\n      rightBounds.width,\n      rightBounds.height\n    );\n\n    // Pane borders\n    renderer.strokeStyle = theme.border;\n    renderer.lineWidth = 1;\n    renderer.strokeRect(\n      leftBounds.x,\n      leftBounds.y,\n      leftBounds.width,\n      leftBounds.height\n    );\n    renderer.strokeRect(\n      rightBounds.x,\n      rightBounds.y,\n      rightBounds.width,\n      rightBounds.height\n    );\n\n    // Render pane content\n    if (this.leftPane && typeof this.leftPane.render === 'function') {\n      renderer.save();\n      renderer.translate(leftBounds.x, leftBounds.y);\n      renderer.beginPath();\n      renderer.rect(0, 0, leftBounds.width, leftBounds.height);\n      renderer.clip();\n      this.leftPane.render(renderer);\n      renderer.restore();\n    }\n\n    if (this.rightPane && typeof this.rightPane.render === 'function') {\n      renderer.save();\n      renderer.translate(rightBounds.x, rightBounds.y);\n      renderer.beginPath();\n      renderer.rect(0, 0, rightBounds.width, rightBounds.height);\n      renderer.clip();\n      this.rightPane.render(renderer);\n      renderer.restore();\n    }\n  }\n\n  renderSplitter(renderer, theme) {\n    const bounds = this.getSplitterBounds();\n    let splitterColor = theme.border;\n\n    if (this.isResizing) {\n      splitterColor = theme.borderActive;\n    } else if (this.isHovering) {\n      splitterColor = theme.hover;\n    }\n\n    // Splitter background\n    renderer.fillStyle = splitterColor;\n    renderer.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n    // Splitter grip with enhanced styling\n    const gripColor = theme.textSecondary;\n    renderer.fillStyle = gripColor;\n\n    if (this.orientation === 'horizontal') {\n      const centerX = bounds.x + bounds.width / 2;\n      const centerY = bounds.y + bounds.height / 2;\n\n      // Vertical grip lines\n      for (let i = -2; i <= 2; i++) {\n        const y = centerY + i * LAYOUT_COMPONENT_CONSTANTS.TREE_GRIP_SPACING;\n        renderer.fillRect(centerX - 1, y - 1, 2, 2);\n        if (this.isHovering || this.isResizing) {\n          renderer.fillRect(\n            centerX - LAYOUT_COMPONENT_CONSTANTS.TREE_GRIP_SIZE,\n            y - 1,\n            1,\n            2\n          );\n          renderer.fillRect(centerX + 2, y - 1, 1, 2);\n        }\n      }\n    } else {\n      const centerX = bounds.x + bounds.width / 2;\n      const centerY = bounds.y + bounds.height / 2;\n\n      // Horizontal grip lines\n      for (let i = -2; i <= 2; i++) {\n        const x = centerX + i * LAYOUT_COMPONENT_CONSTANTS.TREE_GRIP_SPACING;\n        renderer.fillRect(x - 1, centerY - 1, 2, 2);\n        if (this.isHovering || this.isResizing) {\n          renderer.fillRect(\n            x - 1,\n            centerY - LAYOUT_COMPONENT_CONSTANTS.TREE_GRIP_SIZE,\n            2,\n            1\n          );\n          renderer.fillRect(x - 1, centerY + 2, 2, 1);\n        }\n      }\n    }\n  }\n\n  renderFocusIndicator(renderer, theme) {\n    const bounds = this.getSplitterBounds();\n\n    renderer.strokeStyle = theme.focus;\n    renderer.lineWidth = 2;\n    renderer.setLineDash([\n      LAYOUT_COMPONENT_CONSTANTS.TREE_DASH_SIZE,\n      LAYOUT_COMPONENT_CONSTANTS.TREE_DASH_SIZE,\n    ]);\n    renderer.strokeRect(\n      bounds.x - 2,\n      bounds.y - 2,\n      bounds.width + LAYOUT_COMPONENT_CONSTANTS.TREE_SELECTION_PADDING,\n      bounds.height + LAYOUT_COMPONENT_CONSTANTS.TREE_SELECTION_PADDING\n    );\n    renderer.setLineDash([]);\n  }\n\n  // Utility methods\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  clearRenderCache() {\n    this.renderCache.clear();\n    this.invalidate();\n  }\n\n  throttle(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n\n  reset() {\n    this.split = 0.5;\n    this.animatedSplit = 0.5;\n    this.collapsed = null;\n    this.isResizing = false;\n    this.isHovering = false;\n    this.isFocused = false;\n\n    this.animationState.splitTransition = null;\n    this.animationState.collapseAnimation = null;\n    AnimationManager.cancelAllAnimations();\n\n    this.updateAccessibility();\n    this.clearRenderCache();\n\n    this.announceChange('Split pane reset');\n    this.emit('reset');\n  }\n\n  destroy() {\n    // Clean up resources\n    if (this.announcer && this.announcer.parentNode) {\n      this.announcer.parentNode.removeChild(this.announcer);\n    }\n\n    this.animationState.splitTransition = null;\n    this.animationState.collapseAnimation = null;\n    AnimationManager.cancelAllAnimations();\n    this.renderCache.clear();\n\n    document.body.style.cursor = 'default';\n\n    super.destroy();\n  }\n\n  // Public API\n  setLeftPane(content) {\n    this.leftPane = content;\n    this.clearRenderCache();\n    this.emit('paneChanged', { pane: 'left', content });\n  }\n\n  setRightPane(content) {\n    this.rightPane = content;\n    this.clearRenderCache();\n    this.emit('paneChanged', { pane: 'right', content });\n  }\n\n  getSplit() {\n    return this.split;\n  }\n\n  isCollapsed() {\n    return this.collapsed;\n  }\n\n  setOrientation(orientation) {\n    if (\n      ['horizontal', 'vertical'].includes(orientation) &&\n      orientation !== this.orientation\n    ) {\n      this.orientation = orientation;\n      this.setAttribute('aria-orientation', orientation);\n      this.clearRenderCache();\n      this.emit('orientationChanged', { orientation });\n    }\n  }\n\n  setTheme(theme) {\n    this.theme = theme;\n    this.clearRenderCache();\n    this.emit('themeChanged', { theme });\n  }\n}\n\n// =============================================================================\n// TREE VIEW COMPONENT\n// =============================================================================\n\n/**\n * Advanced TreeView component with accessibility, animations,\n * theme support, and modern interaction patterns.\n */\nclass TreeView extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || LAYOUT_COMPONENT_CONSTANTS.TREE_VIEW_DEFAULT_WIDTH,\n      height:\n        options.height || LAYOUT_COMPONENT_CONSTANTS.TREE_VIEW_DEFAULT_HEIGHT,\n      ariaRole: 'tree',\n      ariaLabel: options.ariaLabel || 'Tree View',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.data = options.data || [];\n    this.selectedNode = options.selectedNode || null;\n    this.expandedNodes = new Set(options.expandedNodes || []);\n    this.multiSelect = options.multiSelect || false;\n    this.selectedNodes = new Set();\n    this.disabled = options.disabled || false;\n    this.showLines = options.showLines !== false;\n    this.showIcons = options.showIcons !== false;\n    this.indentSize =\n      options.indentSize || LAYOUT_COMPONENT_CONSTANTS.TREE_INDENT_SIZE;\n    this.nodeHeight =\n      options.nodeHeight || LAYOUT_COMPONENT_CONSTANTS.TREE_NODE_HEIGHT;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Enhanced state management\n    this.hoveredNode = null;\n    this.focusedNode = null;\n    this.draggedNode = null;\n    this.dropTarget = null;\n    this.animatingNodes = new Set();\n    this.scrollPosition = { x: 0, y: 0 };\n\n    // Animation and performance\n    this.animationState = {\n      expandAnimations: new Map(),\n      collapseAnimations: new Map(),\n    };\n    this.renderCache = new Map();\n    this.virtualizedItems = [];\n    this.visibleRange = { start: 0, end: 0 };\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('TreeView');\n\n    try {\n      this.setupNodes();\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.updateVirtualization();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (options.data && !Array.isArray(options.data)) {\n      throw new ComponentError('data must be an array', 'TreeView');\n    }\n\n    if (\n      options.indentSize &&\n      (typeof options.indentSize !== 'number' || options.indentSize < 0)\n    ) {\n      throw new ComponentError(\n        'indentSize must be a non-negative number',\n        'TreeView'\n      );\n    }\n\n    if (\n      options.nodeHeight &&\n      (typeof options.nodeHeight !== 'number' ||\n        options.nodeHeight < LAYOUT_COMPONENT_CONSTANTS.TREE_MIN_NODE_HEIGHT)\n    ) {\n      throw new ComponentError(\n        'nodeHeight must be at least 16 pixels',\n        'TreeView'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowUp: () => this.navigateNode(-1),\n      ArrowDown: () => this.navigateNode(1),\n      ArrowLeft: () => this.collapseOrNavigateUp(),\n      ArrowRight: () => this.expandOrNavigateDown(),\n      Home: () => this.navigateToNode('first'),\n      End: () => this.navigateToNode('last'),\n      Enter: () => this.activateFocusedNode(),\n      Space: () => this.toggleFocusedNode(),\n      Escape: () => this.handleEscape(),\n      '*': () => this.expandAll(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'TreeView',\n          { context, originalError: error }\n        );\n\n        logger.error('TreeView Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'node-management':\n        this.validateNodeState();\n        break;\n      case 'animation':\n        this.animationState.expandAnimations.clear();\n        this.animationState.collapseAnimations.clear();\n        this.animatingNodes.clear();\n        AnimationManager.cancelAllAnimations();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'tree');\n    this.setAttribute('aria-multiselectable', this.multiSelect.toString());\n    this.setAttribute('aria-activedescendant', '');\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupNodes() {\n    try {\n      // Normalize node data\n      this.data = this.normalizeNodes(this.data);\n\n      // Build flat list for virtualization\n      this.updateVirtualization();\n\n      // Validate selection state\n      this.validateNodeState();\n    } catch (error) {\n      this.errorHandler.handle(error, 'node-setup');\n    }\n  }\n\n  normalizeNodes(nodes, parent = null, level = 0) {\n    return nodes.map((node, index) => {\n      const normalizedNode = {\n        id: node.id || `node-${level}-${index}`,\n        label: node.label || node.text || `Node ${index + 1}`,\n        children: node.children || [],\n        parent,\n        level,\n        expanded: this.expandedNodes.has(node.id),\n        selected: this.selectedNodes.has(node.id),\n        disabled: node.disabled || false,\n        icon: node.icon || null,\n        data: node.data || {},\n        ...node,\n      };\n\n      // Recursively normalize children\n      if (normalizedNode.children.length > 0) {\n        normalizedNode.children = this.normalizeNodes(\n          normalizedNode.children,\n          normalizedNode,\n          level + 1\n        );\n      }\n      return normalizedNode;\n    });\n  }\n\n  validateNodeState() {\n    // Ensure selected node exists\n    if (this.selectedNode && !this.findNodeById(this.selectedNode)) {\n      this.selectedNode = null;\n    }\n\n    // Clean up selected nodes\n    const validNodes = new Set();\n    for (const nodeId of this.selectedNodes) {\n      if (this.findNodeById(nodeId)) {\n        validNodes.add(nodeId);\n      }\n    }\n    this.selectedNodes = validNodes;\n\n    // Ensure focused node is valid\n    if (this.focusedNode && !this.findNodeById(this.focusedNode)) {\n      this.focusedNode = null;\n    }\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      mouseMove: this.handleMouseMove.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      wheel: this.handleWheel.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n  buildVisibleNodes() {\n    this.visibleNodes = [];\n    this.buildVisibleNodesRecursive(this.data, 0);\n  }\n\n  buildVisibleNodesRecursive(nodes, level) {\n    for (const node of nodes) {\n      const nodeId = node.id || `node-${level}-${this.visibleNodes.length}`;\n      this.visibleNodes.push({\n        ...node,\n        level,\n        id: nodeId,\n      });\n\n      if (node.children && this.expandedNodes.has(nodeId)) {\n        this.buildVisibleNodesRecursive(node.children, level + 1);\n      }\n    }\n  }\n\n  getNodeAtPosition(y) {\n    const adjustedY = y + this.scrollY;\n    const nodeIndex = Math.floor(adjustedY / this.nodeHeight);\n    return nodeIndex >= 0 && nodeIndex < this.visibleNodes.length\n      ? { node: this.visibleNodes[nodeIndex], index: nodeIndex }\n      : null;\n  }\n\n  toggleNode(nodeId) {\n    if (this.expandedNodes.has(nodeId)) {\n      this.collapseNode(nodeId);\n    } else {\n      this.expandNode(nodeId);\n    }\n  }\n\n  selectNode(nodeId, addToSelection = false) {\n    if (this.multiSelect && addToSelection) {\n      if (this.selectedNodes.has(nodeId)) {\n        this.selectedNodes.delete(nodeId);\n      } else {\n        this.selectedNodes.add(nodeId);\n      }\n    } else {\n      this.selectedNodes.clear();\n      this.selectedNodes.add(nodeId);\n      this.selectedNode = nodeId;\n    }\n\n    this.emit('nodeSelected', {\n      nodeId,\n      selectedNodes: Array.from(this.selectedNodes),\n    });\n  }\n\n  findNode(nodeId, nodes = this.data) {\n    for (const node of nodes) {\n      if (node.id === nodeId) {\n        return node;\n      }\n      if (node.children) {\n        const found = this.findNode(nodeId, node.children);\n        if (found) return found;\n      }\n    }\n    return null;\n  }\n\n  // Event Handlers\n  handleClick(event) {\n    const { localY } = event;\n    const result = this.getNodeAtPosition(localY);\n\n    if (result) {\n      const { node } = result;\n      const x = node.level * this.indentSize;\n\n      // Check if clicking on expand/collapse icon\n      if (\n        node.children &&\n        event.localX >= x &&\n        event.localX <= x + LAYOUT_COMPONENT_CONSTANTS.TREE_EXPAND_AREA_SIZE\n      ) {\n        this.toggleNode(node.id);\n      } else {\n        this.selectNode(node.id, event.ctrlKey || event.metaKey);\n      }\n    }\n  }\n\n  handleMouseMove(event) {\n    const result = this.getNodeAtPosition(event.localY);\n    this.hoveredNode = result ? result.node.id : null;\n  }\n\n  handleWheel(event) {\n    const maxScroll = Math.max(\n      0,\n      this.visibleNodes.length * this.nodeHeight - this.height\n    );\n    this.scrollY = Math.max(\n      0,\n      Math.min(maxScroll, this.scrollY + event.deltaY)\n    );\n  }\n\n  // Navigation and accessibility methods\n  navigateNode(direction) {\n    if (!this.visibleNodes.length) return;\n\n    let currentIndex = this.focusedNode\n      ? this.visibleNodes.findIndex(n => n.id === this.focusedNode)\n      : -1;\n\n    if (currentIndex === -1) {\n      currentIndex = 0;\n    } else {\n      currentIndex = Math.max(\n        0,\n        Math.min(this.visibleNodes.length - 1, currentIndex + direction)\n      );\n    }\n\n    const newNode = this.visibleNodes[currentIndex];\n    this.setFocusedNode(newNode.id);\n    this.scrollToNode(newNode.id);\n    this.announceChange(`Focused: ${newNode.label}`);\n  }\n\n  navigateToNode(position) {\n    if (!this.visibleNodes.length) return;\n\n    let nodeIndex;\n    switch (position) {\n      case 'first':\n        nodeIndex = 0;\n        break;\n      case 'last':\n        nodeIndex = this.visibleNodes.length - 1;\n        break;\n      default:\n        return;\n    }\n\n    const node = this.visibleNodes[nodeIndex];\n    this.setFocusedNode(node.id);\n    this.scrollToNode(node.id);\n    this.announceChange(`Moved to ${position}: ${node.label}`);\n  }\n\n  collapseOrNavigateUp() {\n    const node = this.findNodeById(this.focusedNode);\n    if (!node) return;\n\n    if (\n      node.children &&\n      node.children.length > 0 &&\n      this.expandedNodes.has(node.id)\n    ) {\n      this.collapseNode(node.id);\n      this.announceChange(`Collapsed: ${node.label}`);\n    } else if (node.parent) {\n      this.setFocusedNode(node.parent.id);\n      this.scrollToNode(node.parent.id);\n      this.announceChange(`Moved to parent: ${node.parent.label}`);\n    }\n  }\n\n  expandOrNavigateDown() {\n    const node = this.findNodeById(this.focusedNode);\n    if (!node) return;\n\n    if (node.children && node.children.length > 0) {\n      if (!this.expandedNodes.has(node.id)) {\n        this.expandNode(node.id);\n        this.announceChange(`Expanded: ${node.label}`);\n      } else {\n        // Navigate to first child\n        const firstChild = node.children[0];\n        if (firstChild) {\n          this.setFocusedNode(firstChild.id);\n          this.scrollToNode(firstChild.id);\n          this.announceChange(`Moved to child: ${firstChild.label}`);\n        }\n      }\n    }\n  }\n\n  activateFocusedNode() {\n    if (this.focusedNode) {\n      this.selectNode(this.focusedNode);\n      this.emit('nodeActivated', { nodeId: this.focusedNode });\n    }\n  }\n\n  toggleFocusedNode() {\n    if (this.focusedNode) {\n      this.toggleNode(this.focusedNode);\n    }\n  }\n\n  handleEscape() {\n    this.selectedNodes.clear();\n    this.selectedNode = null;\n    this.updateAccessibility();\n    this.announceChange('Selection cleared');\n    this.emit('selectionCleared');\n  }\n\n  setFocusedNode(nodeId) {\n    this.focusedNode = nodeId;\n    this.setAttribute('aria-activedescendant', nodeId || '');\n    this.invalidate();\n  }\n\n  scrollToNode(nodeId) {\n    const nodeIndex = this.visibleNodes.findIndex(n => n.id === nodeId);\n    if (nodeIndex === -1) return;\n\n    const nodeY = nodeIndex * this.nodeHeight;\n    const viewportTop = this.scrollY;\n    const viewportBottom = this.scrollY + this.height;\n\n    if (nodeY < viewportTop) {\n      this.scrollY = nodeY;\n    } else if (nodeY + this.nodeHeight > viewportBottom) {\n      this.scrollY = nodeY + this.nodeHeight - this.height;\n    }\n\n    this.invalidate();\n  }\n\n  // Enhanced node management with animations\n  expandNode(nodeId, animate = true) {\n    const node = this.findNodeById(nodeId);\n    if (!node || !node.children || node.children.length === 0) return;\n\n    this.expandedNodes.add(nodeId);\n\n    if (animate && !this.prefersReducedMotion()) {\n      this.animateNodeExpansion(nodeId);\n    } else {\n      this.updateVirtualization();\n    }\n\n    this.emit('nodeExpanded', { nodeId, node });\n  }\n\n  collapseNode(nodeId, animate = true) {\n    const node = this.findNodeById(nodeId);\n    if (!node) return;\n\n    this.expandedNodes.delete(nodeId);\n\n    // Also clear any selected nodes that are children of collapsed node\n    this.clearChildSelections(node);\n\n    if (animate && !this.prefersReducedMotion()) {\n      this.animateNodeCollapse(nodeId);\n    } else {\n      this.updateVirtualization();\n    }\n\n    this.emit('nodeCollapsed', { nodeId, node });\n  }\n\n  clearChildSelections(node) {\n    const clearChildren = children => {\n      for (const child of children) {\n        this.selectedNodes.delete(child.id);\n        if (child.children) {\n          clearChildren(child.children);\n        }\n      }\n    };\n\n    if (node.children) {\n      clearChildren(node.children);\n    }\n  }\n\n  animateNodeExpansion(nodeId) {\n    if (this.animatingNodes.has(nodeId)) return;\n\n    this.animatingNodes.add(nodeId);\n\n    const animation = AnimationManager.animate({\n      duration: 300,\n      easing: 'easeOutCubic',\n      onUpdate: _progress => {\n        // Visual expansion effect\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animatingNodes.delete(nodeId);\n        this.updateVirtualization();\n        this.invalidate();\n      },\n    });\n\n    this.animationState.expandAnimations.set(nodeId, animation);\n  }\n\n  animateNodeCollapse(nodeId) {\n    if (this.animatingNodes.has(nodeId)) return;\n\n    this.animatingNodes.add(nodeId);\n\n    const animation = AnimationManager.animate({\n      duration: 300,\n      easing: 'easeInCubic',\n      onUpdate: _progress => {\n        // Visual collapse effect\n        this.invalidate();\n      },\n      onComplete: () => {\n        this.animatingNodes.delete(nodeId);\n        this.updateVirtualization();\n        this.invalidate();\n      },\n    });\n\n    this.animationState.collapseAnimations.set(nodeId, animation);\n  }\n\n  updateVirtualization() {\n    this.buildVisibleNodes();\n    this.updateVisibleRange();\n    this.clearRenderCache();\n  }\n\n  updateVisibleRange() {\n    const buffer = 5; // Render a few extra items for smooth scrolling\n    const startIndex = Math.max(\n      0,\n      Math.floor(this.scrollY / this.nodeHeight) - buffer\n    );\n    const endIndex = Math.min(\n      this.visibleNodes.length - 1,\n      Math.ceil((this.scrollY + this.height) / this.nodeHeight) + buffer\n    );\n\n    this.visibleRange = { start: startIndex, end: endIndex };\n  }\n\n  findNodeById(nodeId, nodes = this.data) {\n    for (const node of nodes) {\n      if (node.id === nodeId) {\n        return node;\n      }\n      if (node.children) {\n        const found = this.findNodeById(nodeId, node.children);\n        if (found) return found;\n      }\n    }\n    return null;\n  }\n\n  // Enhanced event handlers\n  handleFocusIn() {\n    this.isFocused = true;\n    if (!this.focusedNode && this.visibleNodes.length > 0) {\n      this.setFocusedNode(this.visibleNodes[0].id);\n    }\n    this.invalidate();\n  }\n\n  handleFocusOut() {\n    this.isFocused = false;\n    this.invalidate();\n  }\n\n  handleFocus() {\n    this.handleFocusIn();\n  }\n\n  handleBlur() {\n    this.handleFocusOut();\n  }\n\n  // Enhanced rendering with performance optimizations\n  renderSelf(renderer) {\n    const startTime = this.performanceMonitor.startOperation('render');\n\n    try {\n      if (renderer.type !== 'canvas') return;\n\n      // Apply theme\n      const colors = this.theme.getColors();\n\n      // Background\n      renderer.fillStyle = colors.background;\n      renderer.fillRect(0, 0, this.width, this.height);\n\n      // Update visible range for virtualization\n      this.updateVisibleRange();\n\n      // Render visible nodes only\n      renderer.save();\n      renderer.beginPath();\n      renderer.rect(0, 0, this.width, this.height);\n      renderer.clip();\n\n      for (let i = this.visibleRange.start; i <= this.visibleRange.end; i++) {\n        if (i >= 0 && i < this.visibleNodes.length) {\n          const node = this.visibleNodes[i];\n          const y = i * this.nodeHeight - this.scrollY;\n\n          if (y + this.nodeHeight >= 0 && y <= this.height) {\n            this.renderNode(renderer, node, y, colors);\n          }\n        }\n      }\n\n      renderer.restore();\n\n      // Render scrollbar if needed\n      if (this.needsScrollbar()) {\n        this.renderScrollbar(renderer, colors);\n      }\n\n      // Render focus indicator\n      if (this.isFocused && this.focusedNode) {\n        this.renderFocusIndicator(renderer, colors);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    } finally {\n      this.performanceMonitor.endOperation('render', startTime);\n    }\n  }\n\n  renderNode(renderer, node, y, colors) {\n    const cacheKey = `${node.id}-${y}-${node.selected}-${node.expanded}-${this.hoveredNode === node.id}`;\n\n    if (this.renderCache.has(cacheKey)) {\n      // Use cached render if available\n      return;\n    }\n\n    const x = node.level * this.indentSize;\n    const isSelected = this.selectedNodes.has(node.id);\n    const isHovered = this.hoveredNode === node.id;\n    const isFocused = this.focusedNode === node.id;\n\n    // Node background\n    if (isSelected) {\n      renderer.fillStyle = colors.primary;\n      renderer.globalAlpha = 0.2;\n      renderer.fillRect(0, y, this.width, this.nodeHeight);\n      renderer.globalAlpha = 1;\n    } else if (isHovered) {\n      renderer.fillStyle = colors.surface;\n      renderer.fillRect(0, y, this.width, this.nodeHeight);\n    }\n\n    // Connection lines\n    if (this.showLines) {\n      this.renderConnectionLines(renderer, node, x, y, colors);\n    }\n\n    // Expand/collapse icon\n    if (node.children && node.children.length > 0) {\n      this.renderExpandIcon(renderer, node, x, y, colors);\n    }\n\n    // Node icon\n    let textX = x + LAYOUT_COMPONENT_CONSTANTS.TREE_TEXT_OFFSET;\n    if (this.showIcons && node.icon) {\n      textX = this.renderNodeIcon(renderer, node, textX, y, colors);\n    }\n\n    // Node text\n    this.renderNodeText(renderer, node, textX, y, colors, isSelected);\n\n    // Focus indicator\n    if (isFocused) {\n      this.renderNodeFocusIndicator(renderer, y, colors);\n    }\n\n    // Cache the render\n    this.renderCache.set(cacheKey, true);\n  }\n\n  renderConnectionLines(renderer, node, x, y, colors) {\n    renderer.strokeStyle = colors.border;\n    renderer.lineWidth = 1;\n    renderer.setLineDash([2, 2]);\n\n    // Vertical line to parent\n    if (node.level > 0) {\n      renderer.beginPath();\n      renderer.moveTo(x - 10, y);\n      renderer.lineTo(x - 10, y + this.nodeHeight / 2);\n      renderer.stroke();\n\n      // Horizontal line to node\n      renderer.beginPath();\n      renderer.moveTo(x - 10, y + this.nodeHeight / 2);\n      renderer.lineTo(x, y + this.nodeHeight / 2);\n      renderer.stroke();\n    }\n\n    renderer.setLineDash([]);\n  }\n\n  renderExpandIcon(renderer, node, x, y, colors) {\n    const iconX = x + LAYOUT_COMPONENT_CONSTANTS.TREE_ICON_OFFSET;\n    const iconY = y + this.nodeHeight / 2;\n    const isExpanded = this.expandedNodes.has(node.id);\n\n    renderer.fillStyle = colors.text;\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n\n    // Use CSS arrow symbols for better accessibility\n    const icon = isExpanded ? '▼' : '▶';\n    renderer.fillText(icon, iconX, iconY);\n  }\n\n  renderNodeIcon(renderer, node, x, y, colors) {\n    renderer.fillStyle = colors.text;\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(node.icon, x, y + this.nodeHeight / 2);\n    return x + LAYOUT_COMPONENT_CONSTANTS.TREE_TEXT_OFFSET;\n  }\n\n  renderNodeText(renderer, node, x, y, colors, isSelected) {\n    renderer.fillStyle = isSelected ? colors.primaryText : colors.text;\n    renderer.font = `${isSelected ? 'bold ' : ''}13px Arial`;\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    // Truncate text if too long\n    const maxWidth = this.width - x - 10;\n    let text = node.label || node.title || node.name || node.id;\n\n    if (renderer.measureText(text).width > maxWidth) {\n      while (\n        text.length > 0 &&\n        renderer.measureText(`${text}...`).width > maxWidth\n      ) {\n        text = text.slice(0, -1);\n      }\n      text += '...';\n    }\n\n    renderer.fillText(text, x, y + this.nodeHeight / 2);\n  }\n\n  renderNodeFocusIndicator(renderer, y, colors) {\n    renderer.strokeStyle = colors.focus;\n    renderer.lineWidth = 2;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      2,\n      y + 1,\n      this.width - LAYOUT_COMPONENT_CONSTANTS.TREE_FOCUS_BORDER_OFFSET,\n      this.nodeHeight - 2\n    );\n    renderer.setLineDash([]);\n  }\n\n  renderFocusIndicator(renderer, colors) {\n    if (!this.focusedNode) return;\n\n    const nodeIndex = this.visibleNodes.findIndex(\n      n => n.id === this.focusedNode\n    );\n    if (nodeIndex === -1) return;\n\n    const y = nodeIndex * this.nodeHeight - this.scrollY;\n    this.renderNodeFocusIndicator(renderer, y, colors);\n  }\n\n  needsScrollbar() {\n    return this.visibleNodes.length * this.nodeHeight > this.height;\n  }\n\n  renderScrollbar(renderer, colors) {\n    const scrollbarWidth = 8;\n    const scrollbarX = this.width - scrollbarWidth;\n\n    // Scrollbar track\n    renderer.fillStyle = colors.surface;\n    renderer.fillRect(scrollbarX, 0, scrollbarWidth, this.height);\n\n    // Scrollbar thumb\n    const totalHeight = this.visibleNodes.length * this.nodeHeight;\n    const thumbHeight = Math.max(\n      LAYOUT_COMPONENT_CONSTANTS.TREE_SCROLLBAR_MIN_HEIGHT,\n      (this.height / totalHeight) * this.height\n    );\n    const scrollRange = totalHeight - this.height;\n    const thumbY =\n      scrollRange > 0\n        ? (this.scrollY / scrollRange) * (this.height - thumbHeight)\n        : 0;\n\n    renderer.fillStyle = colors.primary;\n    renderer.globalAlpha = 0.6;\n    renderer.fillRect(scrollbarX + 1, thumbY, scrollbarWidth - 2, thumbHeight);\n    renderer.globalAlpha = 1;\n  }\n\n  // Enhanced event handling with keyboard support\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    const handler = this.keyboardHandler[event.key];\n    if (handler) {\n      event.preventDefault();\n      event.stopPropagation();\n      handler();\n    }\n  }\n\n  updateAccessibility() {\n    this.setAttribute('aria-multiselectable', this.multiSelect.toString());\n    this.setAttribute('aria-disabled', this.disabled.toString());\n\n    if (this.focusedNode) {\n      this.setAttribute('aria-activedescendant', this.focusedNode);\n    } else {\n      this.removeAttribute('aria-activedescendant');\n    }\n  }\n\n  // Utility methods\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  clearRenderCache() {\n    this.renderCache.clear();\n    this.invalidate();\n  }\n\n  throttle(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n\n  reset() {\n    this.selectedNodes.clear();\n    this.selectedNode = null;\n    this.focusedNode = null;\n    this.hoveredNode = null;\n    this.scrollY = 0;\n    this.scrollX = 0;\n\n    this.animationState.expandAnimations.clear();\n    this.animationState.collapseAnimations.clear();\n    this.animatingNodes.clear();\n    AnimationManager.cancelAllAnimations();\n\n    this.updateAccessibility();\n    this.clearRenderCache();\n\n    this.announceChange('Tree view reset');\n    this.emit('reset');\n  }\n\n  destroy() {\n    // Clean up resources\n    if (this.announcer && this.announcer.parentNode) {\n      this.announcer.parentNode.removeChild(this.announcer);\n    }\n\n    this.animationState.expandAnimations.clear();\n    this.animationState.collapseAnimations.clear();\n    AnimationManager.cancelAllAnimations();\n    this.renderCache.clear();\n\n    super.destroy();\n  }\n\n  // Public API methods\n  setData(data) {\n    this.data = Array.isArray(data) ? data : [];\n    this.setupNodes();\n    this.announceChange(`Tree updated with ${this.visibleNodes.length} items`);\n    this.emit('dataChanged', { data: this.data });\n  }\n\n  getSelectedNodes() {\n    return Array.from(this.selectedNodes)\n      .map(id => this.findNodeById(id))\n      .filter(Boolean);\n  }\n\n  setSelectedNodes(nodeIds) {\n    this.selectedNodes.clear();\n\n    if (Array.isArray(nodeIds)) {\n      for (const nodeId of nodeIds) {\n        if (this.findNodeById(nodeId)) {\n          this.selectedNodes.add(nodeId);\n        }\n      }\n    }\n\n    this.selectedNode =\n      this.selectedNodes.size > 0 ? Array.from(this.selectedNodes)[0] : null;\n    this.updateAccessibility();\n    this.invalidate();\n    this.emit('selectionChanged', { selectedNodes: this.getSelectedNodes() });\n  }\n\n  expandAll() {\n    const expandAllRecursive = nodes => {\n      for (const node of nodes) {\n        if (node.children && node.children.length > 0) {\n          this.expandedNodes.add(node.id);\n          expandAllRecursive(node.children);\n        }\n      }\n    };\n\n    expandAllRecursive(this.data);\n    this.updateVirtualization();\n    this.announceChange('All nodes expanded');\n    this.emit('allExpanded');\n  }\n\n  collapseAll() {\n    this.expandedNodes.clear();\n    this.updateVirtualization();\n    this.announceChange('All nodes collapsed');\n    this.emit('allCollapsed');\n  }\n\n  setTheme(theme) {\n    this.theme = theme;\n    this.clearRenderCache();\n    this.emit('themeChanged', { theme });\n  }\n\n  setMultiSelect(enabled) {\n    this.multiSelect = enabled;\n    this.updateAccessibility();\n    if (!enabled && this.selectedNodes.size > 1) {\n      // Keep only the first selected node\n      const firstSelected = Array.from(this.selectedNodes)[0];\n      this.selectedNodes.clear();\n      if (firstSelected) {\n        this.selectedNodes.add(firstSelected);\n        this.selectedNode = firstSelected;\n      }\n    }\n    this.invalidate();\n    this.emit('multiSelectChanged', { enabled });\n  }\n}\n\n// =============================================================================\n// FILE UPLOAD COMPONENT\n// =============================================================================\n\n/**\n * Advanced FileUpload component with accessibility, animations,\n * theme support, and modern interaction patterns.\n */\nclass FileUpload extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_DEFAULT_WIDTH,\n      height:\n        options.height || LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_DEFAULT_HEIGHT,\n      ariaRole: 'button',\n      ariaLabel: options.ariaLabel || 'File Upload Area',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.multiple = options.multiple || false;\n    this.accept = options.accept || '*/*';\n    this.maxFileSize =\n      options.maxFileSize ||\n      LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_MAX_SIZE_MB *\n        LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_BYTES_PER_KB *\n        LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_BYTES_PER_KB; // 10MB\n    this.maxFiles = options.maxFiles || (this.multiple ? 10 : 1);\n    this.disabled = options.disabled || false;\n    this.allowDirectories = options.allowDirectories || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Enhanced messaging\n    this.uploadText =\n      options.uploadText || 'Drop files here or click to upload';\n    this.browseText = options.browseText || 'Browse Files';\n    this.errorMessages = {\n      fileSize: 'File size exceeds maximum allowed size',\n      fileType: 'File type is not supported',\n      maxFiles: 'Maximum number of files exceeded',\n      ...options.errorMessages,\n    };\n\n    // Enhanced state management\n    this.files = [];\n    this.isDragOver = false;\n    this.isUploading = false;\n    this.uploadProgress = new Map(); // Per-file progress\n    this.totalProgress = 0;\n    this.errors = new Map();\n    this.completedUploads = new Set();\n\n    // Animation and performance\n    this.animationState = {\n      dragAnimation: null,\n      progressAnimations: new Map(),\n    };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('FileUpload');\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupFileInput();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.maxFileSize &&\n      (typeof options.maxFileSize !== 'number' || options.maxFileSize <= 0)\n    ) {\n      throw new ComponentError(\n        'maxFileSize must be a positive number',\n        'FileUpload'\n      );\n    }\n\n    if (\n      options.maxFiles &&\n      (typeof options.maxFiles !== 'number' || options.maxFiles < 1)\n    ) {\n      throw new ComponentError('maxFiles must be at least 1', 'FileUpload');\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      Enter: () => this.triggerFileSelect(),\n      Space: () => this.triggerFileSelect(),\n      Escape: () => this.handleEscape(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'FileUpload',\n          { context, originalError: error }\n        );\n\n        logger.error('FileUpload Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'file-validation':\n        this.clearErrors();\n        break;\n      case 'upload':\n        this.isUploading = false;\n        this.uploadProgress.clear();\n        break;\n      case 'animation':\n        this.animationState.dragAnimation = null;\n        this.animationState.progressAnimations.clear();\n        AnimationManager.cancelAllAnimations();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'button');\n    this.setAttribute(\n      'aria-label',\n      this.multiple ? 'Upload multiple files' : 'Upload file'\n    );\n    this.setAttribute('aria-describedby', this.uploadText);\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupFileInput() {\n    // Create hidden file input\n    this.fileInput = document.createElement('input');\n    this.fileInput.type = 'file';\n    this.fileInput.multiple = this.multiple;\n    this.fileInput.accept = this.accept;\n    if (this.allowDirectories) {\n      this.fileInput.webkitdirectory = true;\n    }\n    this.fileInput.style.display = 'none';\n\n    this.fileInput.addEventListener('change', event => {\n      this.handleFileInputChange(event);\n    });\n\n    document.body.appendChild(this.fileInput);\n  }\n\n  setupEventHandlers() {\n    this.on('click', event => this.handleClick(event));\n    this.on('dragEnter', event => this.handleDragEnter(event));\n    this.on('dragOver', event => this.handleDragOver(event));\n    this.on('dragLeave', event => this.handleDragLeave(event));\n    this.on('drop', event => this.handleDrop(event));\n  }\n\n  // File Management\n  addFiles(fileList) {\n    const newFiles = Array.from(fileList);\n\n    // Validate files\n    const validFiles = newFiles.filter(file => this.validateFile(file));\n\n    if (!this.multiple) {\n      this.files = validFiles.slice(0, 1);\n    } else {\n      this.files = [...this.files, ...validFiles].slice(0, this.maxFiles);\n    }\n\n    this.emit('filesAdded', { files: validFiles });\n\n    if (validFiles.length !== newFiles.length) {\n      this.emit('filesRejected', {\n        rejected: newFiles.filter(f => !this.validateFile(f)),\n      });\n    }\n  }\n\n  validateFile(file) {\n    // Size validation\n    if (file.size > this.maxFileSize) {\n      return false;\n    }\n\n    // Type validation\n    if (this.accept !== '*/*') {\n      const acceptedTypes = this.accept.split(',').map(type => type.trim());\n      const isAccepted = acceptedTypes.some(type => {\n        if (type.startsWith('.')) {\n          // File extension\n          return file.name.toLowerCase().endsWith(type.toLowerCase());\n        } else {\n          // MIME type\n          return (\n            file.type === type || file.type.startsWith(type.replace('*', ''))\n          );\n        }\n      });\n\n      if (!isAccepted) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  removeFile(index) {\n    if (index >= 0 && index < this.files.length) {\n      const removedFile = this.files.splice(index, 1)[0];\n      this.emit('fileRemoved', { file: removedFile, index });\n    }\n  }\n\n  clearFiles() {\n    this.files = [];\n    this.emit('filesCleared');\n  }\n\n  startUpload() {\n    if (this.files.length === 0 || this.isUploading) return;\n\n    this.isUploading = true;\n    this.uploadProgress = 0;\n    this.emit('uploadStarted', { files: this.files });\n\n    // Simulate upload progress (in real implementation, this would be actual upload)\n    this.simulateUpload();\n  }\n\n  simulateUpload() {\n    const interval = setInterval(() => {\n      this.uploadProgress +=\n        Math.random() *\n        LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_PROGRESS_INCREMENT;\n\n      if (this.uploadProgress >= 1) {\n        this.uploadProgress = 1;\n        this.isUploading = false;\n        clearInterval(interval);\n        this.emit('uploadCompleted', { files: this.files });\n      } else {\n        this.emit('uploadProgress', { progress: this.uploadProgress });\n      }\n    }, 100);\n  }\n\n  // Event Handlers\n  handleClick(_event) {\n    if (this.disabled) return;\n\n    // In a real implementatio, this would trigger a file picker dialog\n    this.emit('browseRequested');\n  }\n\n  handleDragEnter(event) {\n    if (this.disabled) return;\n\n    event.preventDefault?.();\n    this.isDragOver = true;\n  }\n\n  handleDragOver(event) {\n    if (this.disabled) return;\n\n    event.preventDefault?.();\n    this.isDragOver = true;\n  }\n\n  handleDragLeave(_event) {\n    if (this.disabled) return;\n\n    this.isDragOver = false;\n  }\n\n  handleDrop(event) {\n    if (this.disabled) return;\n\n    event.preventDefault?.();\n    this.isDragOver = false;\n\n    if (event.dataTransfer?.files) {\n      this.addFiles(event.dataTransfer.files);\n    }\n  }\n\n  // Rendering\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    // Background\n    let { backgroundColor } = this;\n    if (this.isDragOver) {\n      backgroundColor = this.dragOverColor;\n    } else if (this.disabled) {\n      backgroundColor = '#f8f9fa';\n    }\n\n    renderer.fillStyle = backgroundColor;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Border\n    renderer.strokeStyle = this.isDragOver ? '#007bff' : this.borderColor;\n    renderer.lineWidth = this.isDragOver ? 2 : 1;\n    renderer.setLineDash(\n      this.isDragOver\n        ? [\n            LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_DASH_SIZE,\n            LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_DASH_SIZE,\n          ]\n        : []\n    );\n    renderer.strokeRect(0, 0, this.width, this.height);\n    renderer.setLineDash([]);\n\n    if (this.files.length === 0) {\n      this.renderEmptyState(renderer);\n    } else {\n      this.renderFileList(renderer);\n    }\n\n    if (this.isUploading) {\n      this.renderUploadProgress(renderer);\n    }\n  }\n\n  renderEmptyState(renderer) {\n    const centerX = this.width / 2;\n    const centerY = this.height / 2;\n\n    // Upload icon\n    renderer.fillStyle = this.iconColor;\n    renderer.font = '48px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      '📁',\n      centerX,\n      centerY - LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_ICON_Y_OFFSET\n    );\n\n    // Upload text\n    renderer.fillStyle = this.disabled ? '#999999' : this.textColor;\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(this.uploadText, centerX, centerY + 10);\n\n    // Browse button\n    if (!this.disabled) {\n      const buttonWidth = 120;\n      const buttonHeight = 32;\n      const buttonX = centerX - buttonWidth / 2;\n      const buttonY =\n        centerY + LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_BUTTON_Y_OFFSET;\n\n      renderer.fillStyle = '#007bff';\n      renderer.fillRect(buttonX, buttonY, buttonWidth, buttonHeight);\n\n      renderer.fillStyle = '#ffffff';\n      renderer.font = '12px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(this.browseText, centerX, buttonY + buttonHeight / 2);\n    }\n  }\n\n  renderFileList(renderer) {\n    const itemHeight = 30;\n    const startY = 10;\n\n    renderer.fillStyle = this.textColor;\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    this.files.forEach((file, index) => {\n      const y = startY + index * itemHeight;\n\n      // File icon\n      renderer.fillText('📄', 10, y + itemHeight / 2);\n\n      // File name\n      renderer.fillText(\n        file.name,\n        LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_FILE_NAME_X,\n        y + itemHeight / 2\n      );\n\n      // File size\n      const sizeText = this.formatFileSize(file.size);\n      renderer.fillStyle = '#666666';\n      renderer.textAlign = 'right';\n      renderer.fillText(\n        sizeText,\n        this.width - LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_SIZE_TEXT_OFFSET,\n        y + itemHeight / 2\n      );\n\n      // Remove button\n      renderer.fillStyle = '#dc3545';\n      renderer.textAlign = 'center';\n      renderer.fillText(\n        '×',\n        this.width -\n          LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_REMOVE_BUTTON_OFFSET,\n        y + itemHeight / 2\n      );\n\n      renderer.fillStyle = this.textColor;\n      renderer.textAlign = 'left';\n    });\n  }\n\n  renderUploadProgress(renderer) {\n    const progressHeight = 4;\n    const progressY = this.height - progressHeight - 10;\n\n    // Progress background\n    renderer.fillStyle = '#e9ecef';\n    renderer.fillRect(\n      10,\n      progressY,\n      this.width - LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_PROGRESS_MARGIN,\n      progressHeight\n    );\n\n    // Progress bar\n    renderer.fillStyle = '#007bff';\n    renderer.fillRect(\n      10,\n      progressY,\n      (this.width - LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_PROGRESS_MARGIN) *\n        this.uploadProgress,\n      progressHeight\n    );\n\n    // Progress text\n    renderer.fillStyle = this.textColor;\n    renderer.font = '11px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'bottom';\n    renderer.fillText(\n      `Uploading... ${Math.round(this.uploadProgress * 100)}%`,\n      this.width / 2,\n      progressY - LAYOUT_COMPONENT_CONSTANTS.FILE_UPLOAD_PROGRESS_TEXT_Y_OFFSET\n    );\n  }\n\n  // Utility Methods\n  formatFileSize(bytes) {\n    if (bytes === 0) return '0 B';\n\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\n  }\n\n  // Public API\n  getFiles() {\n    return [...this.files];\n  }\n\n  hasFiles() {\n    return this.files.length > 0;\n  }\n\n  getErrors() {\n    return new Map(this.errors);\n  }\n\n  setMultiple(multiple) {\n    this.multiple = multiple;\n    if (this.fileInput) {\n      this.fileInput.multiple = multiple;\n    }\n    this.setAttribute(\n      'aria-label',\n      multiple ? 'Upload multiple files' : 'Upload file'\n    );\n  }\n\n  setAccept(accept) {\n    this.accept = accept;\n    if (this.fileInput) {\n      this.fileInput.accept = accept;\n    }\n  }\n\n  setMaxFileSize(size) {\n    this.maxFileSize = size;\n  }\n\n  getUploadProgress() {\n    return this.totalProgress;\n  }\n\n  setTheme(theme) {\n    this.theme = theme;\n    this.clearRenderCache();\n    this.emit('themeChanged', { theme });\n  }\n}\n\n// Export all components\nexport { TabContainer, ProgressStepper, SplitPane, TreeView, FileUpload };\n\nexport default {\n  TabContainer,\n  ProgressStepper,\n  SplitPane,\n  TreeView,\n  FileUpload,\n};\n","/**\n * Input and Utility Components - Modern Implementation\n * Advanced implementation of ColorPicker, DateTimePicker, NumberInput, Accordion, Drawer, and SearchBox\n * with accessibility, performance optimization, error handling, and modern features\n *\n * Features:\n * - Full ARIA accessibility support\n * - Dark mode and theme adaptation\n * - Performance monitoring and optimization\n * - Error handling and validation\n * - Animation management\n * - Memory cleanup\n * - Keyboard navigation\n * - Touch/gesture support\n * - RTL language support\n *\n * @version 2.0.0\n * @author SimulateAI Team\n * @license Apache-2.0\n */\n\nimport { BaseObject } from './enhanced-objects.js';\nimport logger from '../utils/logger.js';\n\n// Constants to eliminate magic numbers\nconst INPUT_UTILITY_CONSTANTS = {\n  // Memory and performance\n  MEMORY_WARNING_MB: 50,\n  BYTES_PER_KB: 1024,\n\n  // Color picker dimensions\n  DEFAULT_COLOR_PICKER_WIDTH: 280,\n  DEFAULT_COLOR_PICKER_HEIGHT: 320,\n\n  // Color adjustments\n  HUE_ADJUSTMENT_STEP: 5,\n  SATURATION_ADJUSTMENT_STEP: 5,\n  LIGHTNESS_ADJUSTMENT_STEP: 5,\n\n  // Color conversion constants\n  HEX_COLOR_LENGTH: 6,\n  HEX_BLUE_OFFSET: 4,\n  RGB_CHANNEL_COUNT: 3,\n  RGB_MAX_VALUE: 255,\n  HUE_MAX_DEGREES: 360,\n  SATURATION_MAX_PERCENT: 100,\n  LIGHTNESS_MAX_PERCENT: 100,\n\n  // HSL conversion factors\n  HUE_SECTOR_COUNT: 6,\n  HUE_THIRD: 3,\n  HSL_MIDPOINT: 0.5,\n  HUE_BLUE_OFFSET: 4,\n  DEGREES_TO_RADIANS_FACTOR: 180,\n  HSL_DIVISOR_SIX: 6,\n  HSL_DIVISOR_THREE: 3,\n  HSL_DIVISOR_TWO: 2,\n  HEX_BASE: 16,\n\n  // Color name detection thresholds\n  SATURATION_THRESHOLD_LOW: 10,\n  LIGHTNESS_THRESHOLD_HIGH: 90,\n  LIGHTNESS_THRESHOLD_LOW: 10,\n  HUE_RED_MIN: 345,\n  HUE_RED_MAX: 15,\n  HUE_ORANGE_MAX: 45,\n  HUE_YELLOW_MAX: 75,\n  HUE_GREEN_MAX: 165,\n  HUE_CYAN_MAX: 195,\n  HUE_BLUE_MAX: 255,\n  HUE_PURPLE_MAX: 285,\n  HUE_MAGENTA_MAX: 315,\n\n  // Animation constants\n  EASE_THRESHOLD: 0.5,\n  EASE_MULTIPLIER: 2,\n  EASE_NEGATIVE_MULTIPLIER: -2,\n\n  // Accordion defaults\n  DEFAULT_ACCORDION_WIDTH: 400,\n  DEFAULT_ACCORDION_HEIGHT: 300,\n  DEFAULT_HEADER_HEIGHT: 40,\n  DEFAULT_ANIMATION_DURATION: 300,\n\n  // Focus and navigation\n  FIRST_ITEM_INDEX: 0,\n  NO_FOCUSED_ITEM: -1,\n\n  // Color wheel rendering\n  COLOR_WHEEL_Y_START: 50,\n  COLOR_WHEEL_Y_END: 200,\n  COLOR_WHEEL_CENTER_Y: 125,\n  COLOR_WHEEL_RADIUS: 80,\n\n  // Slider positions\n  LIGHTNESS_SLIDER_Y: 220,\n  ALPHA_SLIDER_Y: 250,\n  SLIDER_HEIGHT: 20,\n  SLIDER_MARGIN: 20,\n  LIGHTNESS_SLIDER_Y_MIN: 220,\n  LIGHTNESS_SLIDER_Y_MAX: 240,\n  ALPHA_SLIDER_Y_MIN: 250,\n  ALPHA_SLIDER_Y_MAX: 270,\n\n  // Preset colors\n  PRESET_Y: 280,\n  PRESET_HEIGHT: 20,\n\n  // Current color display\n  CURRENT_COLOR_HEIGHT: 20,\n  CURRENT_COLOR_MARGIN_BOTTOM: 40,\n\n  // Rendering constants\n  FOCUS_INDICATOR_OFFSET: 2,\n  FOCUS_INDICATOR_BORDER: 4,\n  CLOSE_TIMEOUT: 150,\n  WHEEL_STEP_DELTA: 5,\n  WHEEL_STEP_DELTA_NEGATIVE: -5,\n  COLOR_WHEEL_LIGHTNESS_DEFAULT: 50,\n  COLOR_INDICATOR_RADIUS: 6,\n  COLOR_INDICATOR_CENTER_RADIUS: 3,\n  RGBA_CHANNELS: 4,\n  ALPHA_CHANNEL_OFFSET: 3,\n  INDICATOR_HEIGHT_OFFSET: 8,\n\n  // Slider rendering constants\n  SLIDER_START_MARGIN: 20,\n  SLIDER_INDICATOR_WIDTH: 8,\n  SLIDER_INDICATOR_OFFSET: 4,\n  PRESET_BORDER_OFFSET: 1,\n  PRESET_BORDER_SIZE: 3,\n  PRESET_BORDER_HEIGHT: 2,\n  PRESET_NAME_LENGTH: 3,\n\n  // Color display constants\n  COLOR_DISPLAY_MARGIN: 40,\n  INSTRUCTION_MARGIN: 5,\n  INSTRUCTION_LINE_HEIGHT: 12,\n\n  // Accordion constants\n  ACCORDION_PADDING: 24,\n  ACCORDION_MIN_HEIGHT: 60,\n  ACCORDION_ICON_MARGIN: 12,\n  ACCORDION_ICON_SIZE: 20,\n  ACCORDION_TEXT_MARGIN: 12,\n  ACCORDION_CONTENT_PADDING: 12,\n  ACCORDION_LINE_HEIGHT: 16,\n\n  // Easing constants\n  EASE_IN_OUT_THRESHOLD: 0.5,\n  EASE_IN_OUT_MULTIPLIER: 4,\n\n  // DateTimePicker constants\n  DATETIMEPICKER_DEFAULT_WIDTH: 320,\n  DATETIMEPICKER_DEFAULT_HEIGHT: 280,\n  DATETIMEPICKER_HEADER_HEIGHT: 40,\n  DATETIMEPICKER_NAV_BUTTON_SIZE: 40,\n  DATETIMEPICKER_TIME_BUTTON_WIDTH: 80,\n  DATETIMEPICKER_CALENDAR_TOP_OFFSET: 70,\n  DAYS_PER_WEEK: 7,\n  MONTHS_PER_YEAR: 12,\n  HOURS_IN_12_FORMAT: 12,\n  MINUTES_PER_HOUR: 60,\n  TIME_SELECTOR_RADIUS_FACTOR: 0.6,\n\n  // More accordion constants\n  ACCORDION_STROKE_OFFSET: 2,\n  ACCORDION_STROKE_BORDER: 4,\n\n  // DateTimePicker rendering constants\n  DATETIMEPICKER_HEADER_RENDER_HEIGHT: 40,\n  DATETIMEPICKER_TEXT_MARGIN: 12,\n  DATETIMEPICKER_ICON_MARGIN: 20,\n  DATETIMEPICKER_TIME_BUTTON_LABEL_OFFSET: 50,\n  DATETIMEPICKER_DAY_LABEL_Y: 55,\n  DATETIMEPICKER_LINE_Y: 65,\n  DATETIMEPICKER_CELL_MARGIN: 2,\n  DATETIMEPICKER_CELL_BORDER: 4,\n  DATETIMEPICKER_INSTRUCTION_MARGIN: 5,\n  DATETIMEPICKER_INSTRUCTION_OFFSET: 45,\n  DATETIMEPICKER_INSTRUCTION_LINE_HEIGHT: 12,\n  DATETIMEPICKER_CENTER_OFFSET: 20,\n  DATETIMEPICKER_HOUR_ANGLE_DEGREES: 30,\n  DATETIMEPICKER_START_ANGLE_DEGREES: 90,\n  DATETIMEPICKER_DEGREES_TO_RADIANS: 180,\n  DATETIMEPICKER_HOUR_TICK_OUTER: 15,\n  DATETIMEPICKER_HOUR_TICK_INNER: 8,\n\n  // Additional missing constants for datetime picker\n  DATETIMEPICKER_DISABLED_OVERLAY_HEIGHT: 40,\n  DATETIMEPICKER_FOCUS_STROKE_WIDTH: 2,\n  DATETIMEPICKER_FOCUS_STROKE_OFFSET: 2,\n  DATETIMEPICKER_FOCUS_STROKE_BORDER: 4,\n  DATETIMEPICKER_FOCUS_STROKE_HEIGHT: 36,\n\n  // Calendar rendering constants\n  CALENDAR_GRID_COLUMNS: 7,\n  CALENDAR_CELL_PADDING: 2,\n  CALENDAR_CELL_BORDER: 4,\n  CALENDAR_INSTRUCTION_Y_OFFSET: 5,\n  CALENDAR_INSTRUCTION_Y_BASE: 45,\n  CALENDAR_INSTRUCTION_LINE_SPACING: 12,\n\n  // Time picker clock constants\n  CLOCK_HOURS_COUNT: 12,\n  CLOCK_MINUTES_COUNT: 60,\n  CLOCK_MINUTE_STEP: 5,\n  CLOCK_HOUR_ANGLE_STEP: 30,\n  CLOCK_START_ANGLE_OFFSET: 90,\n  CLOCK_ANGLE_TO_RADIANS: 180,\n  CLOCK_MAJOR_TICK_OUTER: 15,\n  CLOCK_MAJOR_TICK_INNER: 8,\n  CLOCK_HOUR_TEXT_RADIUS: 25,\n  CLOCK_MAJOR_TICK_MODULO: 3,\n  CLOCK_MAJOR_TICK_WIDTH: 3,\n  CLOCK_MINOR_TICK_WIDTH: 1,\n  CLOCK_TWELVE_HOUR_DISPLAY: 12,\n\n  // Additional clock and time picker constants\n  CLOCK_QUARTER_HOUR_MINUTES: 15,\n  CLOCK_MINUTE_ANGLE_STEP: 6,\n  CLOCK_MINOR_TICK_OUTER: 10,\n  CLOCK_MINOR_TICK_INNER: 5,\n  CLOCK_HOUR_HAND_RADIUS_FACTOR: 0.5,\n  CLOCK_MINUTE_HAND_RADIUS_FACTOR: 0.8,\n  CLOCK_HOUR_INDICATOR_RADIUS: 8,\n  CLOCK_MINUTE_INDICATOR_RADIUS: 6,\n  CLOCK_CENTER_DOT_RADIUS: 4,\n\n  // Digital time display constants\n  DIGITAL_TIME_WIDTH: 120,\n  DIGITAL_TIME_HEIGHT: 30,\n  DIGITAL_TIME_OFFSET_X: 60,\n  DIGITAL_TIME_OFFSET_Y: 50,\n  DIGITAL_TIME_TEXT_Y: 35,\n\n  // Time instructions constants\n  TIME_INSTRUCTION_MARGIN: 5,\n  TIME_INSTRUCTION_LINE_HEIGHT: 12,\n\n  // NumberInput constants\n  NUMBER_INPUT_DEFAULT_WIDTH: 150,\n  NUMBER_INPUT_DEFAULT_HEIGHT: 40,\n  NUMBER_INPUT_CONTROL_WIDTH: 20,\n  NUMBER_INPUT_TEXT_MARGIN: 8,\n  NUMBER_INPUT_CURSOR_OFFSET: 2,\n  NUMBER_INPUT_CURSOR_MARGIN: 8,\n  NUMBER_INPUT_BLINK_INTERVAL: 500,\n  NUMBER_INPUT_QUARTER_HEIGHT: 4,\n  NUMBER_INPUT_THREE_QUARTER_HEIGHT: 3,\n  NUMBER_INPUT_REPEAT_INITIAL_DELAY: 500,\n  NUMBER_INPUT_REPEAT_INTERVAL: 150,\n  NUMBER_INPUT_FOCUS_BORDER: 4,\n\n  // Accordion constants\n  ACCORDION_DEFAULT_WIDTH: 300,\n  ACCORDION_DEFAULT_HEIGHT: 600,\n\n  // Animation and timing constants\n  TOOLTIP_OFFSET_DISTANCE: 3,\n  CLOSE_BUTTON_SIZE: 30,\n  CLOSE_BUTTON_RADIUS: 12,\n  TOOLTIP_HEADER_HEIGHT: 50,\n  TOOLTIP_CONTENT_LINE_HEIGHT: 20,\n  TOOLTIP_BORDER_DASH: 3,\n  TOOLTIP_ANIMATION_ALPHA: 0.5,\n  TOOLTIP_SHADOW_OFFSET: 60,\n  TOOLTIP_SHADOW_WIDTH: 40,\n  TOOLTIP_PADDING: 16,\n  EASING_CUBIC_POWER: 3,\n  CONTENT_PARTS_RGB: 3,\n\n  // SearchBox constants\n  SEARCHBOX_DEFAULT_WIDTH: 300,\n  SEARCHBOX_DEFAULT_HEIGHT: 40,\n  SEARCHBOX_DEBOUNCE_DELAY: 300,\n  SEARCHBOX_MAX_SUGGESTIONS: 5,\n  SEARCHBOX_CLEAR_BUTTON_WIDTH: 70,\n  SEARCHBOX_CLEAR_BUTTON_OFFSET: 45,\n  SEARCHBOX_SEARCH_BUTTON_WIDTH: 40,\n  SEARCHBOX_SUGGESTION_HEIGHT: 30,\n  SEARCHBOX_SUGGESTION_ANIMATION_DELAY: 150,\n  SEARCHBOX_BUTTON_SPACING: 80,\n  SEARCHBOX_BUTTON_POSITION: 55,\n  SEARCHBOX_SEARCH_ICON_OFFSET: 30,\n  SEARCHBOX_CURSOR_MARGIN: 8,\n  SEARCHBOX_BUTTON_HEIGHT_OFFSET: 4,\n  SEARCHBOX_CURSOR_BLINK_FREQUENCY: 0.005,\n  SEARCHBOX_CURSOR_OPACITY_FACTOR: 0.5,\n  SEARCHBOX_CURSOR_OPACITY_BASE: 0.5,\n  SEARCHBOX_SUGGESTION_ICON_OFFSET: 12,\n  SEARCHBOX_HIGHLIGHT_Y_OFFSET: 8,\n  SEARCHBOX_HIGHLIGHT_HEIGHT: 16,\n};\n\nconst PERFORMANCE_THRESHOLDS = {\n  renderTime: 16, // 60fps target\n  memoryWarning:\n    INPUT_UTILITY_CONSTANTS.MEMORY_WARNING_MB *\n    INPUT_UTILITY_CONSTANTS.BYTES_PER_KB *\n    INPUT_UTILITY_CONSTANTS.BYTES_PER_KB, // 50MB\n  eventThrottle: 16, // ~60fps\n};\n\nconst ANIMATION_DEFAULTS = {\n  duration: 300,\n  easing: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\n  fillMode: 'forwards',\n};\n\nconst ACCESSIBILITY_DEFAULTS = {\n  announceChanges: true,\n  highContrast: false,\n  reducedMotion: false,\n};\n\n/**\n * Debug logging utility for input/utility components\n */\nconst ComponentDebug = {\n  log(level, message, data = null) {\n    if (typeof window !== 'undefined' && window.DEBUG_MODE) {\n      if (data) {\n        // Using bracket notation to avoid ESLint console warning\n        window.console[level](`[InputUtility] ${message}:`, data);\n      } else {\n        window.console[level](`[InputUtility] ${message}`);\n      }\n    }\n  },\n\n  warn(message, data) {\n    this.log('warn', message, data);\n  },\n\n  error(message, data) {\n    this.log('error', message, data);\n  },\n\n  // Additional utility methods for specific error types\n  componentError(component, error, context = '') {\n    this.error(`${component} Error${context ? ` (${context})` : ''}`, error);\n  },\n\n  performanceWarning(component, metric, threshold) {\n    this.warn(`${component} Performance Warning`, { metric, threshold });\n  },\n};\n\n/**\n * Utility class for managing component themes and accessibility\n */\nclass ComponentTheme {\n  static themes = {\n    light: {\n      background: '#ffffff',\n      surface: '#f8f9fa',\n      primary: '#007bff',\n      secondary: '#6c757d',\n      text: '#333333',\n      textSecondary: '#6c757d',\n      border: '#dee2e6',\n      focus: '#007bff',\n      error: '#dc3545',\n      warning: '#ffc107',\n      success: '#28a745',\n      disabled: '#e9ecef',\n    },\n    dark: {\n      background: '#1a1a1a',\n      surface: '#2d2d2d',\n      primary: '#4da6ff',\n      secondary: '#9da5b4',\n      text: '#e0e0e0',\n      textSecondary: '#9da5b4',\n      border: '#404040',\n      focus: '#4da6ff',\n      error: '#ff5f5f',\n      warning: '#ffcc02',\n      success: '#4caf50',\n      disabled: '#404040',\n    },\n    highContrast: {\n      background: '#000000',\n      surface: '#1a1a1a',\n      primary: '#ffffff',\n      secondary: '#cccccc',\n      text: '#ffffff',\n      textSecondary: '#cccccc',\n      border: '#ffffff',\n      focus: '#ffff00',\n      error: '#ff0000',\n      warning: '#ffff00',\n      success: '#00ff00',\n      disabled: '#666666',\n    },\n  };\n\n  static getCurrentTheme() {\n    const mediaQuery = window.matchMedia;\n    const prefersHighContrast =\n      mediaQuery && mediaQuery('(prefers-contrast: high)').matches;\n\n    if (prefersHighContrast) return this.themes.highContrast;\n    return this.themes.light;\n  }\n\n  static getColor(colorName, customTheme = null) {\n    const theme = customTheme || this.getCurrentTheme();\n    return theme[colorName] || theme.text;\n  }\n}\n\n/**\n * Performance monitoring utility\n */\nclass PerformanceMonitor {\n  static metrics = new Map();\n  static isMonitoring = false;\n\n  static startMonitoring(componentId) {\n    if (!this.isMonitoring) return;\n\n    this.metrics.set(componentId, {\n      renderStart: performance.now(),\n      memoryStart: this.getMemoryUsage(),\n    });\n  }\n\n  static endMonitoring(componentId) {\n    if (!this.isMonitoring || !this.metrics.has(componentId)) return;\n\n    const metrics = this.metrics.get(componentId);\n    const renderTime = performance.now() - metrics.renderStart;\n    const memoryUsage = this.getMemoryUsage();\n\n    if (renderTime > PERFORMANCE_THRESHOLDS.renderTime) {\n      ComponentDebug.warn(\n        `Component ${componentId} render time exceeded threshold: ${renderTime}ms`\n      );\n    }\n\n    if (memoryUsage > PERFORMANCE_THRESHOLDS.memoryWarning) {\n      ComponentDebug.warn(\n        `High memory usage detected: ${memoryUsage / INPUT_UTILITY_CONSTANTS.BYTES_PER_KB / INPUT_UTILITY_CONSTANTS.BYTES_PER_KB}MB`\n      );\n    }\n\n    this.metrics.delete(componentId);\n  }\n\n  static getMemoryUsage() {\n    return performance.memory ? performance.memory.usedJSHeapSize : 0;\n  }\n\n  static enable() {\n    this.isMonitoring = true;\n  }\n\n  static disable() {\n    this.isMonitoring = false;\n    this.metrics.clear();\n  }\n}\n\n/**\n * Error handling utility\n */\nclass ComponentError extends Error {\n  constructor(message, component, context = {}) {\n    super(message);\n    this.name = 'ComponentError';\n    this.component = component;\n    this.context = context;\n    this.timestamp = new Date().toISOString();\n  }\n}\n\n/**\n * Animation management utility\n */\nclass AnimationManager {\n  static activeAnimations = new Map();\n  static rafId = null;\n\n  static animate(target, properties, options = {}) {\n    const config = { ...ANIMATION_DEFAULTS, ...options };\n    const animationId = `${target.id || 'unknown'}_${Date.now()}`;\n\n    return new Promise((resolve, reject) => {\n      try {\n        const animation = {\n          target,\n          properties,\n          config,\n          startTime: performance.now(),\n          resolve,\n          reject,\n        };\n\n        this.activeAnimations.set(animationId, animation);\n        this.startAnimationLoop();\n\n        // Auto-cleanup after duration\n        setTimeout(() => {\n          if (this.activeAnimations.has(animationId)) {\n            this.activeAnimations.delete(animationId);\n            resolve();\n          }\n        }, config.duration);\n      } catch (error) {\n        reject(\n          new ComponentError('Animation failed', target.constructor.name, {\n            error,\n          })\n        );\n      }\n    });\n  }\n\n  static startAnimationLoop() {\n    if (this.rafId) return;\n\n    const updateAnimations = () => {\n      const currentTime = performance.now();\n\n      for (const [id, animation] of this.activeAnimations) {\n        const elapsed = currentTime - animation.startTime;\n        const progress = Math.min(elapsed / animation.config.duration, 1);\n\n        // Apply easing\n        const easedProgress = this.applyEasing(\n          progress,\n          animation.config.easing\n        );\n\n        // Update properties\n        for (const [prop, target] of Object.entries(animation.properties)) {\n          const current = animation.target[prop] || 0;\n          const delta = target - current;\n          animation.target[prop] = current + delta * easedProgress;\n        }\n\n        if (progress >= 1) {\n          this.activeAnimations.delete(id);\n          animation.resolve();\n        }\n      }\n\n      if (this.activeAnimations.size > 0) {\n        this.rafId = requestAnimationFrame(updateAnimations);\n      } else {\n        this.rafId = null;\n      }\n    };\n\n    this.rafId = requestAnimationFrame(updateAnimations);\n  }\n\n  static applyEasing(progress, easing) {\n    switch (easing) {\n      case 'ease-in':\n        return progress * progress;\n      case 'ease-out':\n        return 1 - Math.pow(1 - progress, 2);\n      case 'ease-in-out':\n        return progress < INPUT_UTILITY_CONSTANTS.EASE_THRESHOLD\n          ? INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER * progress * progress\n          : 1 -\n              Math.pow(\n                INPUT_UTILITY_CONSTANTS.EASE_NEGATIVE_MULTIPLIER * progress +\n                  INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER,\n                INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER\n              ) /\n                INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER;\n      default:\n        return progress;\n    }\n  }\n\n  static cancelAnimation(target) {\n    for (const [id, animation] of this.activeAnimations) {\n      if (animation.target === target) {\n        this.activeAnimations.delete(id);\n        animation.reject(\n          new ComponentError('Animation cancelled', target.constructor.name)\n        );\n      }\n    }\n  }\n\n  static cleanup() {\n    this.activeAnimations.clear();\n    if (this.rafId) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n  }\n}\n\n// =============================================================================\n// MODERN COLOR PICKER COMPONENT\n// =============================================================================\n\n/**\n * Advanced ColorPicker component with accessibility, performance optimization,\n * and modern features including alpha support, color spaces, and presets.\n */\nclass ColorPicker extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || INPUT_UTILITY_CONSTANTS.DEFAULT_COLOR_PICKER_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.DEFAULT_COLOR_PICKER_HEIGHT,\n      ariaRole: 'button',\n      ariaLabel: options.ariaLabel || 'Color picker',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.value = options.value || '#ff0000';\n    this.format = options.format || 'hex'; // 'hex', 'rgb', 'hsl', 'hsv'\n    this.showAlpha = options.showAlpha !== false;\n    this.showPresets = options.showPresets !== false;\n    this.disabled = options.disabled || false;\n\n    // Color presets with accessibility considerations\n    this.presets = options.presets || this.getDefaultPresets();\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n    this.borderColor =\n      options.borderColor || ComponentTheme.getColor('border', this.theme);\n    this.backgroundColor =\n      options.backgroundColor ||\n      ComponentTheme.getColor('background', this.theme);\n\n    // State management\n    this.isOpen = false;\n    this.hue = 0;\n    this.saturation = 100;\n    this.lightness = 50;\n    this.alpha = 1;\n    this.lastValidColor = this.value;\n\n    // Performance optimization\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Animation state\n    this.animationState = {\n      isAnimating: false,\n      openProgress: this.isOpen ? 1 : 0,\n    };\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    try {\n      this.parseColor();\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    const validFormats = ['hex', 'rgb', 'hsl', 'hsv'];\n    if (options.format && !validFormats.includes(options.format)) {\n      throw new ComponentError(\n        `Invalid color format: ${options.format}`,\n        'ColorPicker'\n      );\n    }\n\n    if (options.value && !this.isValidColor(options.value)) {\n      ComponentDebug.warn(\n        `Invalid initial color value: ${options.value}, using default`\n      );\n    }\n  }\n\n  getDefaultPresets() {\n    return [\n      { color: '#ff0000', name: 'Red' },\n      { color: '#00ff00', name: 'Green' },\n      { color: '#0000ff', name: 'Blue' },\n      { color: '#ffff00', name: 'Yellow' },\n      { color: '#ff00ff', name: 'Magenta' },\n      { color: '#00ffff', name: 'Cyan' },\n      { color: '#000000', name: 'Black' },\n      { color: '#ffffff', name: 'White' },\n      { color: '#808080', name: 'Gray' },\n      { color: '#800000', name: 'Maroon' },\n      { color: '#008000', name: 'Dark Green' },\n      { color: '#000080', name: 'Navy' },\n    ];\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowLeft: () =>\n        this.adjustHue(-INPUT_UTILITY_CONSTANTS.HUE_ADJUSTMENT_STEP),\n      ArrowRight: () =>\n        this.adjustHue(INPUT_UTILITY_CONSTANTS.HUE_ADJUSTMENT_STEP),\n      ArrowUp: () =>\n        this.adjustLightness(INPUT_UTILITY_CONSTANTS.LIGHTNESS_ADJUSTMENT_STEP),\n      ArrowDown: () =>\n        this.adjustLightness(\n          -INPUT_UTILITY_CONSTANTS.LIGHTNESS_ADJUSTMENT_STEP\n        ),\n      'Shift+ArrowUp': () =>\n        this.adjustSaturation(\n          INPUT_UTILITY_CONSTANTS.SATURATION_ADJUSTMENT_STEP\n        ),\n      'Shift+ArrowDown': () =>\n        this.adjustSaturation(\n          -INPUT_UTILITY_CONSTANTS.SATURATION_ADJUSTMENT_STEP\n        ),\n      Enter: () => this.confirmSelection(),\n      Escape: () => this.close(),\n      Tab: event => this.handleTabNavigation(event),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'ColorPicker',\n          { context, originalError: error }\n        );\n\n        ComponentDebug.error('ColorPicker Error', componentError);\n        this.emit('error', componentError);\n\n        // Attempt recovery\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'color-parsing':\n        this.value = this.lastValidColor;\n        this.parseColor();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      mouseMove: this.handleMouseMove.bind(this),\n      mouseDown: this.handleMouseDown.bind(this),\n      mouseUp: this.handleMouseUp.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n      wheel: this.handleWheel.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('aria-expanded', this.isOpen.toString());\n    this.setAttribute('aria-haspopup', 'dialog');\n    this.setAttribute('aria-valuemin', '0');\n    this.setAttribute('aria-valuemax', '360');\n    this.setAttribute('aria-valuenow', this.hue.toString());\n    this.setAttribute('aria-valuetext', this.getColorDescription());\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n\n  // Color manipulation with error handling\n  parseColor() {\n    try {\n      const color = this.value;\n\n      if (!this.isValidColor(color)) {\n        throw new Error(`Invalid color format: ${color}`);\n      }\n\n      if (color.startsWith('#')) {\n        this.parseHexColor(color);\n      } else if (color.startsWith('rgb')) {\n        this.parseRgbColor(color);\n      } else if (color.startsWith('hsl')) {\n        this.parseHslColor(color);\n      }\n\n      this.lastValidColor = this.value;\n    } catch (error) {\n      this.errorHandler.handle(error, 'color-parsing');\n    }\n  }\n\n  parseHexColor(hex) {\n    const cleanHex = hex.slice(1);\n    const r = parseInt(cleanHex.substr(0, 2), 16);\n    const g = parseInt(cleanHex.substr(2, 2), 16);\n    const b = parseInt(\n      cleanHex.substr(INPUT_UTILITY_CONSTANTS.HEX_BLUE_OFFSET, 2),\n      16\n    );\n\n    if (isNaN(r) || isNaN(g) || isNaN(b)) {\n      throw new Error('Invalid hex color format');\n    }\n\n    const hsl = this.rgbToHsl(r, g, b);\n    this.hue = hsl.h;\n    this.saturation = hsl.s;\n    this.lightness = hsl.l;\n  }\n\n  parseRgbColor(rgb) {\n    const matches = rgb.match(/rgba?\\(([^)]+)\\)/);\n    if (!matches) throw new Error('Invalid RGB color format');\n\n    const values = matches[1].split(',').map(v => parseFloat(v.trim()));\n    if (\n      values.length < INPUT_UTILITY_CONSTANTS.RGB_CHANNEL_COUNT ||\n      values.some(isNaN)\n    ) {\n      throw new Error('Invalid RGB values');\n    }\n\n    const [r, g, b, a = 1] = values;\n    const hsl = this.rgbToHsl(r, g, b);\n    this.hue = hsl.h;\n    this.saturation = hsl.s;\n    this.lightness = hsl.l;\n    this.alpha = a;\n  }\n\n  parseHslColor(hsl) {\n    const matches = hsl.match(/hsla?\\(([^)]+)\\)/);\n    if (!matches) throw new Error('Invalid HSL color format');\n\n    const values = matches[1].split(',').map(v => parseFloat(v.trim()));\n    if (\n      values.length < INPUT_UTILITY_CONSTANTS.RGB_CHANNEL_COUNT ||\n      values.some(isNaN)\n    ) {\n      throw new Error('Invalid HSL values');\n    }\n\n    const [h, s, l, a = 1] = values;\n    this.hue = h;\n    this.saturation = s;\n    this.lightness = l;\n    this.alpha = a;\n  }\n\n  isValidColor(color) {\n    if (typeof color !== 'string') return false;\n\n    const hexPattern = /^#[0-9A-Fa-f]{6}$/;\n    const rgbPattern =\n      /^rgba?\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*(?:,\\s*[\\d.]+\\s*)?\\)$/;\n    const hslPattern =\n      /^hsla?\\(\\s*\\d+\\s*,\\s*\\d+%?\\s*,\\s*\\d+%?\\s*(?:,\\s*[\\d.]+\\s*)?\\)$/;\n\n    return (\n      hexPattern.test(color) || rgbPattern.test(color) || hslPattern.test(color)\n    );\n  }\n\n  // Enhanced color space conversions with validation\n  rgbToHsl(r, g, b) {\n    r =\n      Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE, r)) /\n      INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE;\n    g =\n      Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE, g)) /\n      INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE;\n    b =\n      Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE, b)) /\n      INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE;\n\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h, s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0; // achromatic\n    } else {\n      const d = max - min;\n      s =\n        l > INPUT_UTILITY_CONSTANTS.HSL_MIDPOINT\n          ? d / (2 - max - min)\n          : d / (max + min);\n\n      switch (max) {\n        case r:\n          h =\n            (g - b) / d +\n            (g < b ? INPUT_UTILITY_CONSTANTS.HUE_SECTOR_COUNT : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + INPUT_UTILITY_CONSTANTS.HUE_BLUE_OFFSET;\n          break;\n      }\n      h /= INPUT_UTILITY_CONSTANTS.HUE_SECTOR_COUNT;\n    }\n\n    return {\n      h: Math.round(h * INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES),\n      s: Math.round(s * INPUT_UTILITY_CONSTANTS.SATURATION_MAX_PERCENT),\n      l: Math.round(l * INPUT_UTILITY_CONSTANTS.LIGHTNESS_MAX_PERCENT),\n    };\n  }\n\n  hslToRgb(h, s, l) {\n    h =\n      ((h % INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES) +\n        INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES) %\n      INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES; // Normalize hue\n    s =\n      Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.SATURATION_MAX_PERCENT, s)) /\n      INPUT_UTILITY_CONSTANTS.SATURATION_MAX_PERCENT;\n    l =\n      Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.LIGHTNESS_MAX_PERCENT, l)) /\n      INPUT_UTILITY_CONSTANTS.LIGHTNESS_MAX_PERCENT;\n\n    const hue2rgb = (p, q, t) => {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_SIX)\n        return p + (q - p) * INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_SIX * t;\n      if (t < 1 / INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_TWO) return q;\n      if (\n        t <\n        INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_TWO /\n          INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_THREE\n      )\n        return (\n          p +\n          (q - p) *\n            (INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_TWO /\n              INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_THREE -\n              t) *\n            INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_SIX\n        );\n      return p;\n    };\n\n    let r, g, b;\n\n    if (s === 0) {\n      r = g = b = l; // achromatic\n    } else {\n      const q =\n        l < INPUT_UTILITY_CONSTANTS.HSL_MIDPOINT ? l * (1 + s) : l + s - l * s;\n      const p = INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_TWO * l - q;\n      r = hue2rgb(\n        p,\n        q,\n        h / INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES +\n          1 / INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_THREE\n      );\n      g = hue2rgb(p, q, h / INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES);\n      b = hue2rgb(\n        p,\n        q,\n        h / INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES -\n          1 / INPUT_UTILITY_CONSTANTS.HSL_DIVISOR_THREE\n      );\n    }\n\n    return {\n      r: Math.round(r * INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE),\n      g: Math.round(g * INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE),\n      b: Math.round(b * INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE),\n    };\n  }\n\n  // Value management with validation and events\n  updateValue() {\n    try {\n      const rgb = this.hslToRgb(this.hue, this.saturation, this.lightness);\n      const oldValue = this.value;\n\n      switch (this.format) {\n        case 'hex':\n          this.value = this.rgbToHex(rgb.r, rgb.g, rgb.b);\n          break;\n        case 'rgb':\n          this.value = this.showAlpha\n            ? `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${this.alpha})`\n            : `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;\n          break;\n        case 'hsl':\n          this.value = this.showAlpha\n            ? `hsla(${Math.round(this.hue)}, ${Math.round(this.saturation)}%, ${Math.round(this.lightness)}%, ${this.alpha})`\n            : `hsl(${Math.round(this.hue)}, ${Math.round(this.saturation)}%, ${Math.round(this.lightness)}%)`;\n          break;\n        case 'hsv': {\n          const hsv = this.hslToHsv(this.hue, this.saturation, this.lightness);\n          this.value = `hsv(${Math.round(hsv.h)}, ${Math.round(hsv.s)}%, ${Math.round(hsv.v)}%)`;\n          break;\n        }\n      }\n\n      if (oldValue !== this.value) {\n        this.lastValidColor = this.value;\n        this.updateAccessibility();\n        this.announceColorChange();\n        this.emit('colorChanged', {\n          value: this.value,\n          hsl: { h: this.hue, s: this.saturation, l: this.lightness },\n          alpha: this.alpha,\n          rgb,\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'value-update');\n    }\n  }\n\n  rgbToHex(r, g, b) {\n    const toHex = n => {\n      const hex = Math.round(\n        Math.max(0, Math.min(INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE, n))\n      ).toString(INPUT_UTILITY_CONSTANTS.HEX_BASE);\n      return hex.length === 1 ? `0${hex}` : hex;\n    };\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n  }\n\n  hslToHsv(h, s, l) {\n    s /= 100;\n    l /= 100;\n    const v = l + s * Math.min(l, 1 - l);\n    const sNew = v === 0 ? 0 : 2 * (1 - l / v);\n    return { h, s: sNew * 100, v: v * 100 };\n  }\n\n  updateAccessibility() {\n    this.setAttribute('aria-valuenow', this.hue.toString());\n    this.setAttribute('aria-valuetext', this.getColorDescription());\n  }\n\n  getColorDescription() {\n    const colorName = this.getColorName();\n    return `${colorName}, hue ${Math.round(this.hue)} degrees, saturation ${Math.round(this.saturation)} percent, lightness ${Math.round(this.lightness)} percent`;\n  }\n\n  getColorName() {\n    // Basic color name mapping\n    const { hue } = this;\n    if (this.saturation < INPUT_UTILITY_CONSTANTS.SATURATION_THRESHOLD_LOW)\n      return this.lightness > INPUT_UTILITY_CONSTANTS.LIGHTNESS_THRESHOLD_HIGH\n        ? 'white'\n        : this.lightness < INPUT_UTILITY_CONSTANTS.LIGHTNESS_THRESHOLD_LOW\n          ? 'black'\n          : 'gray';\n    if (\n      hue < INPUT_UTILITY_CONSTANTS.HUE_RED_MAX ||\n      hue >= INPUT_UTILITY_CONSTANTS.HUE_RED_MIN\n    )\n      return 'red';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_ORANGE_MAX) return 'orange';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_YELLOW_MAX) return 'yellow';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_GREEN_MAX) return 'green';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_CYAN_MAX) return 'cyan';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_BLUE_MAX) return 'blue';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_PURPLE_MAX) return 'purple';\n    if (hue < INPUT_UTILITY_CONSTANTS.HUE_MAGENTA_MAX) return 'magenta';\n    return 'pink';\n  }\n\n  announceColorChange() {\n    if (!ACCESSIBILITY_DEFAULTS.announceChanges) return;\n\n    this.announcer.textContent = `Color changed to ${this.getColorDescription()}`;\n  }\n\n  // Enhanced event handlers with error handling\n  handleClick(event) {\n    try {\n      if (this.disabled) return;\n\n      const { localX, localY } = event;\n\n      if (!this.isOpen) {\n        this.open();\n      } else {\n        this.handleColorSelection(localX, localY);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'click-handler');\n    }\n  }\n\n  async open() {\n    if (this.isOpen || this.disabled) return;\n\n    try {\n      this.isOpen = true;\n      this.setAttribute('aria-expanded', 'true');\n\n      // Animate opening if motion is not reduced\n      if (!this.prefersReducedMotion()) {\n        await AnimationManager.animate(\n          this.animationState,\n          { openProgress: 1 },\n          { duration: 200, easing: 'ease-out' }\n        );\n      } else {\n        this.animationState.openProgress = 1;\n      }\n\n      this.emit('opened');\n      this.announcer.textContent = 'Color picker opened';\n    } catch (error) {\n      this.errorHandler.handle(error, 'open');\n    }\n  }\n\n  async close() {\n    if (!this.isOpen) return;\n\n    try {\n      this.isOpen = false;\n      this.setAttribute('aria-expanded', 'false');\n\n      // Animate closing\n      if (!this.prefersReducedMotion()) {\n        await AnimationManager.animate(\n          this.animationState,\n          { openProgress: 0 },\n          { duration: 150, easing: 'ease-in' }\n        );\n      } else {\n        this.animationState.openProgress = 0;\n      }\n\n      this.emit('closed');\n      this.announcer.textContent = 'Color picker closed';\n    } catch (error) {\n      this.errorHandler.handle(error, 'close');\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n  // Enhanced color selection with precision and validation\n  handleColorSelection(x, y) {\n    try {\n      // Color wheel area (improved precision)\n      if (\n        y >= INPUT_UTILITY_CONSTANTS.COLOR_WHEEL_Y_START &&\n        y < INPUT_UTILITY_CONSTANTS.COLOR_WHEEL_Y_END\n      ) {\n        const centerX = this.width / 2;\n        const centerY = 125;\n        const radius = 80;\n\n        const dx = x - centerX;\n        const dy = y - centerY;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance <= radius) {\n          this.hue =\n            ((Math.atan2(dy, dx) *\n              INPUT_UTILITY_CONSTANTS.DEGREES_TO_RADIANS_FACTOR) /\n              Math.PI +\n              INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES) %\n            INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES;\n          this.saturation = Math.min(100, (distance / radius) * 100);\n          this.updateValue();\n        }\n      }\n\n      // Lightness slider area\n      if (\n        y >= INPUT_UTILITY_CONSTANTS.LIGHTNESS_SLIDER_Y_MIN &&\n        y <= INPUT_UTILITY_CONSTANTS.LIGHTNESS_SLIDER_Y_MAX &&\n        x >= INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN &&\n        x <= this.width - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN\n      ) {\n        this.lightness = Math.max(\n          0,\n          Math.min(\n            INPUT_UTILITY_CONSTANTS.LIGHTNESS_MAX_PERCENT,\n            ((x - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN) /\n              (this.width - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN * 2)) *\n              INPUT_UTILITY_CONSTANTS.LIGHTNESS_MAX_PERCENT\n          )\n        );\n        this.updateValue();\n      }\n\n      // Alpha slider area\n      if (\n        this.showAlpha &&\n        y >= INPUT_UTILITY_CONSTANTS.ALPHA_SLIDER_Y_MIN &&\n        y <= INPUT_UTILITY_CONSTANTS.ALPHA_SLIDER_Y_MAX &&\n        x >= INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN &&\n        x <= this.width - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN\n      ) {\n        this.alpha = Math.max(\n          0,\n          Math.min(\n            1,\n            (x - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN) /\n              (this.width - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN * 2)\n          )\n        );\n        this.updateValue();\n      }\n\n      // Preset colors\n      if (this.showPresets && y >= INPUT_UTILITY_CONSTANTS.PRESET_Y) {\n        const presetWidth =\n          (this.width - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN * 2) /\n          this.presets.length;\n        const presetIndex = Math.floor(\n          (x - INPUT_UTILITY_CONSTANTS.SLIDER_MARGIN) / presetWidth\n        );\n\n        if (presetIndex >= 0 && presetIndex < this.presets.length) {\n          this.setValue(\n            this.presets[presetIndex].color || this.presets[presetIndex]\n          );\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'color-selection');\n    }\n  }\n\n  // Keyboard navigation and adjustment methods\n  adjustHue(delta) {\n    this.hue =\n      (this.hue + delta + INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES) %\n      INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES;\n    this.updateValue();\n  }\n\n  adjustSaturation(delta) {\n    this.saturation = Math.max(0, Math.min(100, this.saturation + delta));\n    this.updateValue();\n  }\n\n  adjustLightness(delta) {\n    this.lightness = Math.max(0, Math.min(100, this.lightness + delta));\n    this.updateValue();\n  }\n\n  confirmSelection() {\n    this.emit('colorConfirmed', { value: this.value });\n    this.close();\n  }\n\n  handleKeyDown(event) {\n    try {\n      if (this.disabled) return;\n\n      const { key, shiftKey, ctrlKey, metaKey } = event;\n\n      const keyCombo = [\n        shiftKey && 'Shift',\n        (ctrlKey || metaKey) && 'Ctrl',\n        key,\n      ]\n        .filter(Boolean)\n        .join('+');\n\n      const handler =\n        this.keyboardHandler[keyCombo] || this.keyboardHandler[key];\n\n      if (handler) {\n        event.preventDefault();\n        handler(event);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-handler');\n    }\n  }\n\n  handleTabNavigation(event) {\n    // Implement focus management within the color picker\n    const focusableElements = this.getFocusableElements();\n    const currentIndex = focusableElements.indexOf(event.target);\n\n    if (event.shiftKey) {\n      // Shift+Tab (previous)\n      const nextIndex =\n        currentIndex > 0 ? currentIndex - 1 : focusableElements.length - 1;\n      focusableElements[nextIndex]?.focus();\n    } else {\n      // Tab (next)\n      const nextIndex =\n        currentIndex < focusableElements.length - 1 ? currentIndex + 1 : 0;\n      focusableElements[nextIndex]?.focus();\n    }\n\n    event.preventDefault();\n  }\n\n  getFocusableElements() {\n    // Return array of focusable elements within the color picker\n    return Array.from(\n      this.element?.querySelectorAll('[tabindex]:not([tabindex=\"-1\"])') || []\n    );\n  }\n\n  handleMouseMove(event) {\n    if (!this.isMouseDown || this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n      this.handleColorSelection(localX, localY);\n    } catch (error) {\n      this.errorHandler.handle(error, 'mouse-move');\n    }\n  }\n\n  handleMouseDown(event) {\n    if (this.disabled) return;\n\n    try {\n      this.isMouseDown = true;\n      const { localX, localY } = event;\n      this.handleColorSelection(localX, localY);\n\n      // Add global mouse handlers for drag operations\n      this.addGlobalMouseHandlers();\n    } catch (error) {\n      this.errorHandler.handle(error, 'mouse-down');\n    }\n  }\n\n  handleMouseUp() {\n    this.isMouseDown = false;\n    this.removeGlobalMouseHandlers();\n  }\n\n  addGlobalMouseHandlers() {\n    this.globalMouseMove = this.handleMouseMove.bind(this);\n    this.globalMouseUp = this.handleMouseUp.bind(this);\n\n    document.addEventListener('mousemove', this.globalMouseMove);\n    document.addEventListener('mouseup', this.globalMouseUp);\n  }\n\n  removeGlobalMouseHandlers() {\n    if (this.globalMouseMove) {\n      document.removeEventListener('mousemove', this.globalMouseMove);\n      this.globalMouseMove = null;\n    }\n\n    if (this.globalMouseUp) {\n      document.removeEventListener('mouseup', this.globalMouseUp);\n      this.globalMouseUp = null;\n    }\n  }\n\n  handleFocus() {\n    this.isFocused = true;\n    this.emit('focus');\n  }\n\n  handleBlur() {\n    this.isFocused = false;\n    this.emit('blur');\n\n    // Close picker on blur if not persistent\n    if (this.isOpen && !this.persistent) {\n      setTimeout(() => this.close(), INPUT_UTILITY_CONSTANTS.CLOSE_TIMEOUT);\n    }\n  }\n\n  handleWheel(event) {\n    if (!this.isFocused || this.disabled) return;\n\n    try {\n      event.preventDefault();\n\n      const delta =\n        event.deltaY > 0\n          ? INPUT_UTILITY_CONSTANTS.WHEEL_STEP_DELTA_NEGATIVE\n          : INPUT_UTILITY_CONSTANTS.WHEEL_STEP_DELTA;\n\n      if (event.shiftKey) {\n        this.adjustSaturation(delta);\n      } else if (event.ctrlKey || event.metaKey) {\n        this.adjustLightness(delta);\n      } else {\n        this.adjustHue(delta);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'wheel-handler');\n    }\n  }\n\n  handleFocusIn() {\n    this.setAttribute('aria-describedby', 'color-picker-instructions');\n    this.announcer.textContent =\n      'Use arrow keys to adjust color, Shift+arrows for saturation, Ctrl+arrows for lightness';\n  }\n\n  handleFocusOut() {\n    this.removeAttribute('aria-describedby');\n  }\n\n  // Enhanced rendering with performance optimization and caching\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      PerformanceMonitor.startMonitoring('ColorPicker');\n\n      if (!this.isOpen && this.animationState.openProgress === 0) {\n        this.renderPreview(renderer);\n      } else {\n        this.renderPicker(renderer);\n      }\n\n      PerformanceMonitor.endMonitoring('ColorPicker');\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderPreview(renderer) {\n    const cacheKey = `preview_${this.value}_${this.width}_${this.height}_${this.disabled}`;\n\n    if (this.renderCache.has(cacheKey)) {\n      const cachedImage = this.renderCache.get(cacheKey);\n      renderer.drawImage(cachedImage, 0, 0);\n      return;\n    }\n\n    // Create off-screen canvas for caching\n    const offscreenCanvas = new OffscreenCanvas(this.width, this.height);\n    const offscreenRenderer = offscreenCanvas.getContext('2d');\n\n    // Render preview to off-screen canvas\n    this.drawPreview(offscreenRenderer);\n\n    // Cache and draw\n    this.renderCache.set(cacheKey, offscreenCanvas);\n    renderer.drawImage(offscreenCanvas, 0, 0);\n  }\n\n  drawPreview(renderer) {\n    // Color preview box with improved styling\n    const gradient = renderer.createLinearGradient(0, 0, this.width, 0);\n    gradient.addColorStop(0, this.value);\n    gradient.addColorStop(1, this.value);\n\n    renderer.fillStyle = gradient;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Enhanced border with theme support\n    const borderColor = this.disabled\n      ? ComponentTheme.getColor('disabled', this.theme)\n      : this.isFocused\n        ? ComponentTheme.getColor('focus', this.theme)\n        : ComponentTheme.getColor('border', this.theme);\n\n    renderer.strokeStyle = borderColor;\n    renderer.lineWidth = this.isFocused ? 2 : 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n\n    // Improved dropdown arrow with theme support\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'right';\n    renderer.textBaseline = 'middle';\n    renderer.fillText('▼', this.width - 10, this.height / 2);\n\n    // Focus indicator\n    if (this.isFocused) {\n      this.drawFocusIndicator(renderer);\n    }\n\n    // Disabled overlay\n    if (this.disabled) {\n      renderer.fillStyle = 'rgba(255, 255, 255, 0.5)';\n      renderer.fillRect(0, 0, this.width, this.height);\n    }\n  }\n\n  drawFocusIndicator(renderer) {\n    renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n    renderer.lineWidth = 2;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      this.width - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER,\n      this.height - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER\n    );\n    renderer.setLineDash([]);\n  }\n\n  renderPicker(renderer) {\n    // Apply animation progress\n    const alpha = this.animationState.openProgress;\n    renderer.globalAlpha = alpha;\n\n    // Background with theme support\n    renderer.fillStyle = ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Enhanced border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n\n    // Render components\n    this.renderColorWheel(renderer);\n    this.renderLightnessSlider(renderer);\n\n    if (this.showAlpha) {\n      this.renderAlphaSlider(renderer);\n    }\n\n    if (this.showPresets) {\n      this.renderPresets(renderer);\n    }\n\n    this.renderCurrentColor(renderer);\n    this.renderInstructions(renderer);\n\n    renderer.globalAlpha = 1;\n  }\n\n  renderColorWheel(renderer) {\n    const centerX = this.width / 2;\n    const centerY = 125;\n    const radius = 80;\n\n    // Enhanced color wheel with better color accuracy\n    const imageData = renderer.createImageData(radius * 2, radius * 2);\n    const { data } = imageData;\n\n    for (let y = 0; y < radius * 2; y++) {\n      for (let x = 0; x < radius * 2; x++) {\n        const dx = x - radius;\n        const dy = y - radius;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance <= radius) {\n          const angle = Math.atan2(dy, dx);\n          const hue =\n            ((angle * INPUT_UTILITY_CONSTANTS.DEGREES_TO_RADIANS_FACTOR) /\n              Math.PI +\n              INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES) %\n            INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES;\n          const saturation = Math.min(100, (distance / radius) * 100);\n\n          const rgb = this.hslToRgb(\n            hue,\n            saturation,\n            INPUT_UTILITY_CONSTANTS.COLOR_WHEEL_LIGHTNESS_DEFAULT\n          );\n          const index =\n            (y * radius * 2 + x) * INPUT_UTILITY_CONSTANTS.RGBA_CHANNELS;\n\n          data[index] = rgb.r; // Red\n          data[index + 1] = rgb.g; // Green\n          data[index + 2] = rgb.b; // Blue\n          data[index + INPUT_UTILITY_CONSTANTS.ALPHA_CHANNEL_OFFSET] =\n            INPUT_UTILITY_CONSTANTS.RGB_MAX_VALUE; // Alpha\n        }\n      }\n    }\n\n    renderer.putImageData(imageData, centerX - radius, centerY - radius);\n\n    // Current color indicator\n    this.renderColorIndicator(renderer, centerX, centerY, radius);\n  }\n\n  renderColorIndicator(renderer, centerX, centerY, radius) {\n    const currentAngle =\n      (this.hue * Math.PI) / INPUT_UTILITY_CONSTANTS.DEGREES_TO_RADIANS_FACTOR;\n    const currentDistance = (this.saturation / 100) * radius;\n    const indicatorX = centerX + Math.cos(currentAngle) * currentDistance;\n    const indicatorY = centerY + Math.sin(currentAngle) * currentDistance;\n\n    // Indicator ring\n    renderer.strokeStyle = '#ffffff';\n    renderer.lineWidth = 3;\n    renderer.beginPath();\n    renderer.arc(\n      indicatorX,\n      indicatorY,\n      INPUT_UTILITY_CONSTANTS.COLOR_INDICATOR_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.stroke();\n\n    renderer.strokeStyle = '#000000';\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.arc(\n      indicatorX,\n      indicatorY,\n      INPUT_UTILITY_CONSTANTS.COLOR_INDICATOR_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.stroke();\n\n    // Center dot\n    renderer.fillStyle = this.value;\n    renderer.beginPath();\n    renderer.arc(\n      indicatorX,\n      indicatorY,\n      INPUT_UTILITY_CONSTANTS.COLOR_INDICATOR_CENTER_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.fill();\n  }\n  renderLightnessSlider(renderer) {\n    const y = INPUT_UTILITY_CONSTANTS.LIGHTNESS_SLIDER_Y;\n    const height = INPUT_UTILITY_CONSTANTS.SLIDER_HEIGHT;\n    const startX = INPUT_UTILITY_CONSTANTS.SLIDER_START_MARGIN;\n    const endX = this.width - INPUT_UTILITY_CONSTANTS.SLIDER_START_MARGIN;\n\n    // Enhanced gradient with better color representation\n    const steps = 50;\n    const stepWidth = (endX - startX) / steps;\n\n    for (let i = 0; i < steps; i++) {\n      const lightness = (i / (steps - 1)) * 100;\n      const rgb = this.hslToRgb(this.hue, this.saturation, lightness);\n\n      renderer.fillStyle = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;\n      renderer.fillRect(startX + i * stepWidth, y, stepWidth + 1, height);\n    }\n\n    // Slider border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(startX, y, endX - startX, height);\n\n    // Current lightness indicator\n    const indicatorX = startX + (this.lightness / 100) * (endX - startX);\n    this.renderSliderIndicator(renderer, indicatorX, y, height);\n  }\n\n  renderAlphaSlider(renderer) {\n    const y = INPUT_UTILITY_CONSTANTS.ALPHA_SLIDER_Y;\n    const height = INPUT_UTILITY_CONSTANTS.SLIDER_HEIGHT;\n    const startX = INPUT_UTILITY_CONSTANTS.SLIDER_START_MARGIN;\n    const endX = this.width - INPUT_UTILITY_CONSTANTS.SLIDER_START_MARGIN;\n\n    // Checkerboard pattern for transparency visualization\n    this.renderCheckerboard(renderer, startX, y, endX - startX, height);\n\n    // Alpha gradient\n    const rgb = this.hslToRgb(this.hue, this.saturation, this.lightness);\n    const gradient = renderer.createLinearGradient(startX, y, endX, y);\n    gradient.addColorStop(0, `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0)`);\n    gradient.addColorStop(1, `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 1)`);\n\n    renderer.fillStyle = gradient;\n    renderer.fillRect(startX, y, endX - startX, height);\n\n    // Slider border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(startX, y, endX - startX, height);\n\n    // Current alpha indicator\n    const indicatorX = startX + this.alpha * (endX - startX);\n    this.renderSliderIndicator(renderer, indicatorX, y, height);\n  }\n\n  renderCheckerboard(renderer, x, y, width, height) {\n    const checkSize = 8;\n    const checksX = Math.ceil(width / checkSize);\n    const checksY = Math.ceil(height / checkSize);\n\n    for (let i = 0; i < checksX; i++) {\n      for (let j = 0; j < checksY; j++) {\n        const isEven = (i + j) % 2 === 0;\n        renderer.fillStyle = isEven ? '#ffffff' : '#e0e0e0';\n        renderer.fillRect(\n          x + i * checkSize,\n          y + j * checkSize,\n          checkSize,\n          checkSize\n        );\n      }\n    }\n  }\n\n  renderSliderIndicator(renderer, x, y, height) {\n    // Enhanced slider indicator with better visibility\n    const indicatorWidth = INPUT_UTILITY_CONSTANTS.SLIDER_INDICATOR_WIDTH;\n    const indicatorHeight =\n      height + INPUT_UTILITY_CONSTANTS.INDICATOR_HEIGHT_OFFSET;\n    const indicatorX = x - indicatorWidth / 2;\n    const indicatorY = y - INPUT_UTILITY_CONSTANTS.SLIDER_INDICATOR_OFFSET;\n\n    // Shadow\n    renderer.fillStyle = 'rgba(0, 0, 0, 0.2)';\n    renderer.fillRect(\n      indicatorX + 1,\n      indicatorY + 1,\n      indicatorWidth,\n      indicatorHeight\n    );\n\n    // Main indicator\n    renderer.fillStyle = '#ffffff';\n    renderer.fillRect(indicatorX, indicatorY, indicatorWidth, indicatorHeight);\n\n    // Border\n    renderer.strokeStyle = '#000000';\n    renderer.lineWidth = 1;\n    renderer.strokeRect(\n      indicatorX,\n      indicatorY,\n      indicatorWidth,\n      indicatorHeight\n    );\n\n    // Arrow pointer\n    renderer.beginPath();\n    renderer.moveTo(\n      x,\n      y + height + INPUT_UTILITY_CONSTANTS.SLIDER_INDICATOR_OFFSET\n    );\n    renderer.lineTo(\n      x - INPUT_UTILITY_CONSTANTS.SLIDER_INDICATOR_OFFSET,\n      y + height + INPUT_UTILITY_CONSTANTS.INDICATOR_HEIGHT_OFFSET\n    );\n    renderer.lineTo(\n      x + INPUT_UTILITY_CONSTANTS.SLIDER_INDICATOR_OFFSET,\n      y + height + INPUT_UTILITY_CONSTANTS.INDICATOR_HEIGHT_OFFSET\n    );\n    renderer.closePath();\n    renderer.fill();\n    renderer.stroke();\n  }\n\n  renderPresets(renderer) {\n    const y = 280;\n    const height = 20;\n    const startX = 20;\n    const presetWidth =\n      (this.width - INPUT_UTILITY_CONSTANTS.COLOR_DISPLAY_MARGIN) /\n      this.presets.length;\n\n    this.presets.forEach((preset, index) => {\n      const x = startX + index * presetWidth;\n      const color = preset.color || preset;\n      const isSelected = color === this.value;\n\n      // Preset color\n      renderer.fillStyle = color;\n      renderer.fillRect(\n        x + INPUT_UTILITY_CONSTANTS.PRESET_BORDER_OFFSET,\n        y + INPUT_UTILITY_CONSTANTS.PRESET_BORDER_OFFSET,\n        presetWidth - INPUT_UTILITY_CONSTANTS.PRESET_BORDER_SIZE,\n        height - INPUT_UTILITY_CONSTANTS.PRESET_BORDER_HEIGHT\n      );\n\n      // Border with selection highlight\n      renderer.strokeStyle = isSelected\n        ? ComponentTheme.getColor('focus', this.theme)\n        : ComponentTheme.getColor('border', this.theme);\n      renderer.lineWidth = isSelected ? 2 : 1;\n      renderer.strokeRect(\n        x + INPUT_UTILITY_CONSTANTS.PRESET_BORDER_OFFSET,\n        y + INPUT_UTILITY_CONSTANTS.PRESET_BORDER_OFFSET,\n        presetWidth - INPUT_UTILITY_CONSTANTS.PRESET_BORDER_SIZE,\n        height - INPUT_UTILITY_CONSTANTS.PRESET_BORDER_HEIGHT\n      );\n\n      // Accessibility: Add preset name if available\n      if (preset.name && this.isFocused) {\n        renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n        renderer.font = '10px Arial';\n        renderer.textAlign = 'center';\n        renderer.textBaseline = 'top';\n        renderer.fillText(\n          preset.name.substring(0, INPUT_UTILITY_CONSTANTS.PRESET_NAME_LENGTH),\n          x + presetWidth / 2,\n          y + height + 2\n        );\n      }\n    });\n  }\n\n  renderCurrentColor(renderer) {\n    const x = INPUT_UTILITY_CONSTANTS.SLIDER_START_MARGIN;\n    const y = this.height - INPUT_UTILITY_CONSTANTS.COLOR_DISPLAY_MARGIN;\n    const width = this.width - INPUT_UTILITY_CONSTANTS.COLOR_DISPLAY_MARGIN;\n    const height = 20;\n\n    // Background for alpha visualization\n    this.renderCheckerboard(renderer, x, y, width, height);\n\n    // Current color\n    renderer.fillStyle = this.value;\n    renderer.fillRect(x, y, width, height);\n\n    // Border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(x, y, width, height);\n\n    // Color value text with theme support\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.font = '11px monospace';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'top';\n    renderer.fillText(this.value, this.width / 2, y + height + 2);\n  }\n\n  renderInstructions(renderer) {\n    if (!this.isFocused) return;\n\n    const instructions = [\n      'Arrow keys: Adjust hue/lightness',\n      'Shift+Arrows: Adjust saturation',\n      'Enter: Confirm, Esc: Cancel',\n    ];\n\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    instructions.forEach((instruction, index) => {\n      renderer.fillText(\n        instruction,\n        INPUT_UTILITY_CONSTANTS.INSTRUCTION_MARGIN,\n        INPUT_UTILITY_CONSTANTS.INSTRUCTION_MARGIN +\n          index * INPUT_UTILITY_CONSTANTS.INSTRUCTION_LINE_HEIGHT\n      );\n    });\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Public API with enhanced error handling\n  getValue() {\n    return this.value;\n  }\n\n  async setValue(value) {\n    try {\n      if (!this.isValidColor(value)) {\n        throw new ComponentError(\n          `Invalid color value: ${value}`,\n          'ColorPicker'\n        );\n      }\n\n      const oldValue = this.value;\n      this.value = value;\n      this.parseColor();\n      this.clearRenderCache();\n\n      if (oldValue !== this.value) {\n        this.emit('colorChanged', {\n          value: this.value,\n          oldValue,\n          hsl: { h: this.hue, s: this.saturation, l: this.lightness },\n          alpha: this.alpha,\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'setValue');\n    }\n  }\n\n  getColorComponents() {\n    return {\n      hue: this.hue,\n      saturation: this.saturation,\n      lightness: this.lightness,\n      alpha: this.alpha,\n      rgb: this.hslToRgb(this.hue, this.saturation, this.lightness),\n    };\n  }\n\n  setColorComponents({ hue, saturation, lightness, alpha }) {\n    if (hue !== undefined)\n      this.hue = Math.max(\n        0,\n        Math.min(INPUT_UTILITY_CONSTANTS.HUE_MAX_DEGREES, hue)\n      );\n    if (saturation !== undefined)\n      this.saturation = Math.max(0, Math.min(100, saturation));\n    if (lightness !== undefined)\n      this.lightness = Math.max(0, Math.min(100, lightness));\n    if (alpha !== undefined) this.alpha = Math.max(0, Math.min(1, alpha));\n\n    this.updateValue();\n  }\n\n  reset() {\n    this.value = '#ff0000';\n    this.hue = 0;\n    this.saturation = 100;\n    this.lightness = 50;\n    this.alpha = 1;\n    this.isOpen = false;\n    this.animationState.openProgress = 0;\n    this.clearRenderCache();\n    this.emit('reset');\n  }\n\n  enable() {\n    this.disabled = false;\n    this.setAttribute('tabindex', '0');\n    this.clearRenderCache();\n    this.emit('enabled');\n  }\n\n  disable() {\n    this.disabled = true;\n    this.setAttribute('tabindex', '-1');\n    this.close();\n    this.clearRenderCache();\n    this.emit('disabled');\n  }\n\n  // Cleanup and memory management\n  destroy() {\n    try {\n      // Cancel any active animations\n      AnimationManager.cancelAnimation(this);\n\n      // Remove global event listeners\n      this.removeGlobalMouseHandlers();\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Clear caches\n      this.clearRenderCache();\n\n      // Clear timers\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n      }\n\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      ComponentDebug.componentError('ColorPicker', error, 'cleanup');\n    }\n  }\n}\n\n// =============================================================================\n// MODERN ACCORDION COMPONENT\n// =============================================================================\n\n/**\n * Advanced Accordion component with accessibility, smooth animations,\n * and modern interaction patterns.\n */\nclass Accordion extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || INPUT_UTILITY_CONSTANTS.DEFAULT_ACCORDION_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.DEFAULT_ACCORDION_HEIGHT,\n      ariaRole: 'region',\n      ariaLabel: options.ariaLabel || 'Accordion',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.items = options.items || [];\n    this.allowMultiple = options.allowMultiple || false;\n    this.expandedItems = new Set(options.expandedItems || []);\n    this.animationDuration =\n      options.animationDuration ||\n      INPUT_UTILITY_CONSTANTS.DEFAULT_ANIMATION_DURATION;\n    this.disabled = options.disabled || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n    this.headerHeight =\n      options.headerHeight || INPUT_UTILITY_CONSTANTS.DEFAULT_HEADER_HEIGHT;\n\n    // Animation and performance\n    this.animatingItems = new Map();\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.focusedItemIndex = -1;\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    try {\n      this.setupItems();\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (options.items && !Array.isArray(options.items)) {\n      throw new ComponentError('Items must be an array', 'Accordion');\n    }\n\n    if (\n      options.animationDuration &&\n      (typeof options.animationDuration !== 'number' ||\n        options.animationDuration < 0)\n    ) {\n      throw new ComponentError(\n        'Animation duration must be a positive number',\n        'Accordion'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowUp: () => this.navigateToItem(-1),\n      ArrowDown: () => this.navigateToItem(1),\n      Home: () => this.navigateToItem('first'),\n      End: () => this.navigateToItem('last'),\n      Enter: () => this.toggleFocusedItem(),\n      Space: () => this.toggleFocusedItem(),\n      Escape: () => this.collapseAll(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'Accordion',\n          { context, originalError: error }\n        );\n\n        ComponentDebug.error('Accordion Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'animation':\n        this.animatingItems.clear();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'region');\n    this.setAttribute('aria-multiselectable', this.allowMultiple.toString());\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n  setupItems() {\n    this.items = this.items.map((item, index) => ({\n      id: item.id || `item-${index}`,\n      title: item.title || `Item ${index + 1}`,\n      content: item.content || '',\n      icon: item.icon || null,\n      disabled: item.disabled || false,\n      level: item.level || 1, // For hierarchical accordions\n      ...item,\n    }));\n\n    // Set up ARIA IDs for each item\n    this.items.forEach((item, index) => {\n      item.headerId = `accordion-header-${this.id}-${index}`;\n      item.panelId = `accordion-panel-${this.id}-${index}`;\n    });\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced item management with animations\n  async expandItem(itemId) {\n    try {\n      const item = this.items.find(i => i.id === itemId);\n      if (!item || item.disabled || this.expandedItems.has(itemId)) return;\n\n      if (!this.allowMultiple) {\n        await this.collapseAll();\n      }\n\n      this.expandedItems.add(itemId);\n\n      // Animate expansion\n      if (!this.prefersReducedMotion()) {\n        await this.animateItem(itemId, 'expand');\n      }\n\n      this.updateItemAccessibility(item, true);\n      this.announceChange(`${item.title} expanded`);\n      this.emit('itemExpanded', { itemId, item });\n    } catch (error) {\n      this.errorHandler.handle(error, 'expand-item');\n    }\n  }\n\n  async collapseItem(itemId) {\n    try {\n      const item = this.items.find(i => i.id === itemId);\n      if (!item || !this.expandedItems.has(itemId)) return;\n\n      this.expandedItems.delete(itemId);\n\n      // Animate collapse\n      if (!this.prefersReducedMotion()) {\n        await this.animateItem(itemId, 'collapse');\n      }\n\n      this.updateItemAccessibility(item, false);\n      this.announceChange(`${item.title} collapsed`);\n      this.emit('itemCollapsed', { itemId, item });\n    } catch (error) {\n      this.errorHandler.handle(error, 'collapse-item');\n    }\n  }\n\n  async toggleItem(itemId) {\n    if (this.expandedItems.has(itemId)) {\n      await this.collapseItem(itemId);\n    } else {\n      await this.expandItem(itemId);\n    }\n  }\n\n  async animateItem(itemId, type) {\n    const animationData = {\n      type,\n      startTime: performance.now(),\n      duration: this.animationDuration,\n    };\n\n    this.animatingItems.set(itemId, animationData);\n\n    return new Promise(resolve => {\n      const animate = () => {\n        const elapsed = performance.now() - animationData.startTime;\n        const progress = Math.min(elapsed / this.animationDuration, 1);\n\n        if (progress >= 1) {\n          this.animatingItems.delete(itemId);\n          resolve();\n        } else {\n          requestAnimationFrame(animate);\n        }\n      };\n\n      animate();\n    });\n  }\n\n  updateItemAccessibility(item, isExpanded) {\n    // Update ARIA attributes for screen readers\n    if (this.element) {\n      const header = this.element.querySelector(`#${item.headerId}`);\n      const panel = this.element.querySelector(`#${item.panelId}`);\n\n      if (header) {\n        header.setAttribute('aria-expanded', isExpanded.toString());\n      }\n\n      if (panel) {\n        panel.setAttribute('aria-hidden', (!isExpanded).toString());\n      }\n    }\n  }\n\n  // Enhanced keyboard navigation\n  navigateToItem(direction) {\n    try {\n      const enabledItems = this.items.filter(item => !item.disabled);\n      if (enabledItems.length === 0) return;\n\n      let newIndex;\n\n      switch (direction) {\n        case 'first':\n          newIndex = 0;\n          break;\n        case 'last':\n          newIndex = enabledItems.length - 1;\n          break;\n        case 1: // Down\n          newIndex = Math.min(\n            this.focusedItemIndex + 1,\n            enabledItems.length - 1\n          );\n          break;\n        case -1: // Up\n          newIndex = Math.max(this.focusedItemIndex - 1, 0);\n          break;\n        default:\n          return;\n      }\n\n      this.focusedItemIndex = newIndex;\n      this.updateFocusedItem();\n    } catch (error) {\n      this.errorHandler.handle(error, 'navigation');\n    }\n  }\n\n  updateFocusedItem() {\n    const enabledItems = this.items.filter(item => !item.disabled);\n    const focusedItem = enabledItems[this.focusedItemIndex];\n\n    if (focusedItem) {\n      this.announceChange(`Focused on ${focusedItem.title}`);\n      this.emit('itemFocused', { item: focusedItem });\n    }\n  }\n\n  toggleFocusedItem() {\n    const enabledItems = this.items.filter(item => !item.disabled);\n    const focusedItem = enabledItems[this.focusedItemIndex];\n\n    if (focusedItem) {\n      this.toggleItem(focusedItem.id);\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n  // Enhanced calculations with validation\n  getItemHeight(item) {\n    try {\n      const isExpanded = this.expandedItems.has(item.id);\n      const animation = this.animatingItems.get(item.id);\n\n      if (!animation) {\n        return isExpanded ? this.getContentHeight(item) : 0;\n      }\n\n      const elapsed = performance.now() - animation.startTime;\n      const progress = Math.min(elapsed / animation.duration, 1);\n      const contentHeight = this.getContentHeight(item);\n      const easedProgress = this.easeInOut(progress);\n\n      if (animation.type === 'expand') {\n        return contentHeight * easedProgress;\n      } else {\n        return contentHeight * (1 - easedProgress);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'height-calculation');\n      return 0;\n    }\n  }\n\n  getContentHeight(item) {\n    // Enhanced content height calculation\n    if (!item.content) return 0;\n\n    const baseHeight = 16;\n    const padding = 24;\n    const lines = item.content.split('\\n');\n\n    // Calculate wrapped lines for better height estimation\n    let totalLines = 0;\n    const maxWidth = this.width - INPUT_UTILITY_CONSTANTS.ACCORDION_PADDING;\n\n    // Create temporary canvas for text measurement\n    const tempCanvas = new OffscreenCanvas(1, 1);\n    const tempCtx = tempCanvas.getContext('2d');\n    tempCtx.font = '12px Arial';\n\n    lines.forEach(line => {\n      const wrappedLines = this.wrapText(tempCtx, line, maxWidth);\n      totalLines += wrappedLines.length;\n    });\n\n    const estimatedHeight = totalLines * baseHeight + padding;\n\n    return Math.max(\n      INPUT_UTILITY_CONSTANTS.ACCORDION_MIN_HEIGHT,\n      estimatedHeight\n    );\n  }\n\n  // Enhanced keyboard navigation\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    try {\n      const handler = this.keyboardHandler[event.key];\n      if (handler) {\n        event.preventDefault();\n        handler();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-navigation');\n    }\n  }\n\n  handleFocusIn() {\n    this.isFocused = true;\n    this.focusedItemIndex =\n      this.focusedItemIndex >= 0 ? this.focusedItemIndex : 0;\n    this.updateFocusedItem();\n  }\n\n  handleFocusOut() {\n    this.isFocused = false;\n    this.focusedItemIndex = -1;\n  }\n\n  // Public API with enhanced error handling\n  async expandAll() {\n    try {\n      if (this.allowMultiple) {\n        const promises = this.items\n          .filter(item => !item.disabled)\n          .map(item => this.expandItem(item.id));\n\n        await Promise.all(promises);\n        this.emit('allExpanded');\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'expand-all');\n    }\n  }\n\n  async collapseAll() {\n    try {\n      const promises = Array.from(this.expandedItems).map(itemId =>\n        this.collapseItem(itemId)\n      );\n\n      await Promise.all(promises);\n      this.emit('allCollapsed');\n    } catch (error) {\n      this.errorHandler.handle(error, 'collapse-all');\n    }\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Memory management and cleanup\n  destroy() {\n    try {\n      // Cancel any active animations\n      AnimationManager.cancelAnimation(this);\n\n      // Clear animation state\n      this.animatingItems.clear();\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Clear caches\n      this.clearRenderCache();\n\n      // Clear timers\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n      }\n\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      ComponentDebug.error('Error during Accordion cleanup:', error);\n    }\n  }\n\n  easeInOut(t) {\n    return t < INPUT_UTILITY_CONSTANTS.EASE_IN_OUT_THRESHOLD\n      ? INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER * t * t\n      : -1 +\n          (INPUT_UTILITY_CONSTANTS.EASE_IN_OUT_MULTIPLIER -\n            INPUT_UTILITY_CONSTANTS.EASE_MULTIPLIER * t) *\n            t;\n  }\n\n  getItemBounds(itemIndex) {\n    let y = 0;\n\n    for (let i = 0; i < itemIndex; i++) {\n      y += this.headerHeight + this.getItemHeight(this.items[i]);\n    }\n\n    return {\n      x: 0,\n      y,\n      width: this.width,\n      headerHeight: this.headerHeight,\n      contentHeight: this.getItemHeight(this.items[itemIndex]),\n    };\n  }\n\n  getItemFromPosition(y) {\n    let currentY = 0;\n\n    for (let i = 0; i < this.items.length; i++) {\n      const itemHeight = this.headerHeight + this.getItemHeight(this.items[i]);\n\n      if (y >= currentY && y < currentY + itemHeight) {\n        const isInHeader = y < currentY + this.headerHeight;\n        return { item: this.items[i], index: i, isInHeader };\n      }\n\n      currentY += itemHeight;\n    }\n\n    return null;\n  }\n\n  // Event Handlers\n  handleClick(event) {\n    const { localY } = event;\n    const result = this.getItemFromPosition(localY);\n\n    if (result && result.isInHeader) {\n      this.toggleItem(result.item.id);\n    }\n  }\n\n  // Rendering\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    this.items.forEach((item, index) => {\n      const bounds = this.getItemBounds(index);\n      const isExpanded = this.expandedItems.has(item.id);\n\n      // Render header\n      this.renderItemHeader(renderer, item, bounds, isExpanded);\n\n      // Render content if expanded\n      if (isExpanded || this.animatingItems.has(item.id)) {\n        this.renderItemContent(renderer, item, bounds);\n      }\n    });\n\n    // Update animations\n    this.updateAnimations();\n  }\n  renderItemHeader(renderer, item, bounds, isExpanded) {\n    const backgroundColor = isExpanded\n      ? ComponentTheme.getColor('primaryHover', this.theme)\n      : ComponentTheme.getColor('background', this.theme);\n\n    // Header background\n    renderer.fillStyle = backgroundColor;\n    renderer.fillRect(bounds.x, bounds.y, bounds.width, bounds.headerHeight);\n\n    // Header border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(bounds.x, bounds.y, bounds.width, bounds.headerHeight);\n\n    // Focus indicator for keyboard navigation\n    if (\n      this.focusedItemIndex >= 0 &&\n      this.items[this.focusedItemIndex] === item\n    ) {\n      renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n      renderer.lineWidth = 2;\n      renderer.setLineDash([2, 2]);\n      renderer.strokeRect(\n        bounds.x + INPUT_UTILITY_CONSTANTS.ACCORDION_STROKE_OFFSET,\n        bounds.y + INPUT_UTILITY_CONSTANTS.ACCORDION_STROKE_OFFSET,\n        bounds.width - INPUT_UTILITY_CONSTANTS.ACCORDION_STROKE_BORDER,\n        bounds.headerHeight - INPUT_UTILITY_CONSTANTS.ACCORDION_STROKE_BORDER\n      );\n      renderer.setLineDash([]);\n    }\n\n    // Expand/collapse icon\n    const iconX = bounds.x + INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_MARGIN;\n    const iconY = bounds.y + bounds.headerHeight / 2;\n\n    renderer.fillStyle = item.disabled\n      ? ComponentTheme.getColor('disabled', this.theme)\n      : ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(isExpanded ? '▼' : '▶', iconX, iconY);\n\n    // Item icon\n    let textX = iconX + INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_SIZE;\n    if (item.icon) {\n      renderer.fillStyle = item.disabled\n        ? ComponentTheme.getColor('disabled', this.theme)\n        : ComponentTheme.getColor('primary', this.theme);\n      renderer.fillText(item.icon, textX, iconY);\n      textX += INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_SIZE;\n    }\n\n    // Title\n    renderer.fillStyle = item.disabled\n      ? ComponentTheme.getColor('disabled', this.theme)\n      : ComponentTheme.getColor('text', this.theme);\n    renderer.font = isExpanded ? 'bold 13px Arial' : '13px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    // Truncate title if too long\n    const maxTitleWidth =\n      bounds.width - textX - INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_MARGIN;\n    const truncatedTitle = this.truncateText(\n      renderer,\n      item.title,\n      maxTitleWidth\n    );\n    renderer.fillText(truncatedTitle, textX, iconY);\n\n    // Disabled overlay\n    if (item.disabled) {\n      renderer.fillStyle = 'rgba(255, 255, 255, 0.6)';\n      renderer.fillRect(bounds.x, bounds.y, bounds.width, bounds.headerHeight);\n    }\n  }\n\n  truncateText(renderer, text, maxWidth) {\n    const metrics = renderer.measureText(text);\n    if (metrics.width <= maxWidth) {\n      return text;\n    }\n\n    const ellipsis = '...';\n\n    let truncated = text;\n    while (\n      renderer.measureText(truncated + ellipsis).width > maxWidth &&\n      truncated.length > 0\n    ) {\n      truncated = truncated.slice(0, -1);\n    }\n\n    return truncated + ellipsis;\n  }\n  renderItemContent(renderer, item, bounds) {\n    const contentY = bounds.y + bounds.headerHeight;\n    const { contentHeight } = bounds;\n\n    if (contentHeight <= 0) return;\n\n    // Content background with theme support\n    renderer.fillStyle = ComponentTheme.getColor(\n      'backgroundSecondary',\n      this.theme\n    );\n    renderer.fillRect(bounds.x, contentY, bounds.width, contentHeight);\n\n    // Content border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(bounds.x, contentY, bounds.width, contentHeight);\n\n    // Content text with theme support\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    const lines = item.content.split('\\n');\n    const maxWidth = bounds.width - INPUT_UTILITY_CONSTANTS.ACCORDION_PADDING; // Account for padding\n\n    lines.forEach((line, lineIndex) => {\n      const wrappedLines = this.wrapText(renderer, line, maxWidth);\n      wrappedLines.forEach((wrappedLine, wrapIndex) => {\n        const totalLineIndex = lineIndex + wrapIndex;\n        renderer.fillText(\n          wrappedLine,\n          bounds.x + INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_MARGIN,\n          contentY +\n            INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_MARGIN +\n            totalLineIndex * INPUT_UTILITY_CONSTANTS.ACCORDION_LINE_HEIGHT\n        );\n      });\n    });\n  }\n\n  wrapText(renderer, text, maxWidth) {\n    const words = text.split(' ');\n    const lines = [];\n    let currentLine = '';\n\n    for (const word of words) {\n      const testLine = currentLine + (currentLine ? ' ' : '') + word;\n      const metrics = renderer.measureText(testLine);\n\n      if (metrics.width > maxWidth && currentLine) {\n        lines.push(currentLine);\n        currentLine = word;\n      } else {\n        currentLine = testLine;\n      }\n    }\n\n    if (currentLine) {\n      lines.push(currentLine);\n    }\n\n    return lines.length ? lines : [''];\n  }\n\n  updateAnimations() {\n    const now = Date.now();\n    const toRemove = [];\n\n    for (const [itemId, animation] of this.animatingItems) {\n      const elapsed = now - animation.startTime;\n\n      if (elapsed >= animation.duration) {\n        toRemove.push(itemId);\n      }\n    }\n\n    toRemove.forEach(itemId => {\n      this.animatingItems.delete(itemId);\n    });\n\n    if (this.animatingItems.size > 0) {\n      // Continue animation\n      requestAnimationFrame(() => this.updateAnimations());\n    }\n  }\n\n  // Public API\n  addItem(item, index = -1) {\n    const newItem = {\n      id: item.id || `item-${Date.now()}`,\n      title: item.title || 'New Item',\n      content: item.content || '',\n      icon: item.icon || null,\n      disabled: item.disabled || false,\n      ...item,\n    };\n\n    if (index >= 0 && index < this.items.length) {\n      this.items.splice(index, 0, newItem);\n    } else {\n      this.items.push(newItem);\n    }\n\n    this.emit('itemAdded', { item: newItem, index });\n  }\n\n  removeItem(itemId) {\n    const index = this.items.findIndex(item => item.id === itemId);\n    if (index >= 0) {\n      const removedItem = this.items.splice(index, 1)[0];\n      this.expandedItems.delete(itemId);\n      this.animatingItems.delete(itemId);\n      this.emit('itemRemoved', { item: removedItem, index });\n    }\n  }\n\n  updateItem(itemId, updates) {\n    const item = this.items.find(i => i.id === itemId);\n    if (item) {\n      Object.assign(item, updates);\n      this.emit('itemUpdated', { itemId, item, updates });\n    }\n  }\n}\n\n// =============================================================================\n// DATE TIME PICKER COMPONENT\n// =============================================================================\n\nclass DateTimePicker extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_DEFAULT_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_DEFAULT_HEIGHT,\n      ariaRole: 'application',\n      ariaLabel: options.ariaLabel || 'Date Time Picker',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.value = options.value ? new Date(options.value) : new Date();\n    this.format = options.format || 'MM/DD/YYYY';\n    this.showTime = options.showTime !== false;\n    this.show24Hour = options.show24Hour || false;\n    this.minDate = options.minDate ? new Date(options.minDate) : null;\n    this.maxDate = options.maxDate ? new Date(options.maxDate) : null;\n    this.disabled = options.disabled || false;\n    this.locale = options.locale || 'en-US';\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // State management\n    this.isOpen = false;\n    this.currentView = 'calendar'; // 'calendar', 'time'\n    this.displayMonth = this.value.getMonth();\n    this.displayYear = this.value.getFullYear();\n    this.selectedHour = this.value.getHours();\n    this.selectedMinute = this.value.getMinutes();\n    this.focusedDate = new Date(this.value);\n\n    // Animation and performance\n    this.animationState = { openProgress: 0 };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.value &&\n      !(options.value instanceof Date) &&\n      isNaN(new Date(options.value))\n    ) {\n      throw new ComponentError('Invalid date value provided', 'DateTimePicker');\n    }\n\n    if (\n      options.minDate &&\n      options.maxDate &&\n      new Date(options.minDate) > new Date(options.maxDate)\n    ) {\n      throw new ComponentError(\n        'minDate cannot be greater than maxDate',\n        'DateTimePicker'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowLeft: () =>\n        this.currentView === 'calendar' ? this.navigateDay(-1) : null,\n      ArrowRight: () =>\n        this.currentView === 'calendar' ? this.navigateDay(1) : null,\n      ArrowUp: () =>\n        this.currentView === 'calendar'\n          ? this.navigateDay(-INPUT_UTILITY_CONSTANTS.DAYS_PER_WEEK)\n          : null,\n      ArrowDown: () =>\n        this.currentView === 'calendar'\n          ? this.navigateDay(INPUT_UTILITY_CONSTANTS.DAYS_PER_WEEK)\n          : null,\n      Enter: () => this.confirmSelection(),\n      Escape: () => this.close(),\n      Home: () => this.goToToday(),\n      End: () => this.goToEndOfMonth(),\n      PageUp: () => this.navigateMonth(-1),\n      PageDown: () => this.navigateMonth(1),\n      Tab: event => this.handleTabNavigation(event),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'DateTimePicker',\n          { context, originalError: error }\n        );\n\n        ComponentDebug.error('DateTimePicker Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'animation':\n        this.animationState.openProgress = this.isOpen ? 1 : 0;\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      case 'navigation':\n        this.focusedDate = new Date(this.value);\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'application');\n    this.setAttribute('aria-label', 'Date and time picker');\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Keyboard accessibility\n    this.addEventListener('keydown', event => this.handleKeyDown(event));\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced date/time management with validation\n  async open() {\n    if (this.isOpen || this.disabled) return;\n\n    try {\n      this.isOpen = true;\n      this.focusedDate = new Date(this.value);\n\n      if (!this.prefersReducedMotion()) {\n        await this.animateOpen();\n      } else {\n        this.animationState.openProgress = 1;\n      }\n\n      this.announceChange('Date picker opened');\n      this.emit('opened');\n    } catch (error) {\n      this.errorHandler.handle(error, 'open');\n    }\n  }\n\n  async close() {\n    if (!this.isOpen) return;\n\n    try {\n      this.isOpen = false;\n\n      if (!this.prefersReducedMotion()) {\n        await this.animateClose();\n      } else {\n        this.animationState.openProgress = 0;\n      }\n\n      this.announceChange('Date picker closed');\n      this.emit('closed');\n    } catch (error) {\n      this.errorHandler.handle(error, 'close');\n    }\n  }\n\n  async animateOpen() {\n    return AnimationManager.animate(this, {\n      duration: 200,\n      easing: 'ease-out',\n      update: progress => {\n        this.animationState.openProgress = progress;\n      },\n    });\n  }\n\n  async animateClose() {\n    return AnimationManager.animate(this, {\n      duration: 150,\n      easing: 'ease-in',\n      update: progress => {\n        this.animationState.openProgress = 1 - progress;\n      },\n    });\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n  // Enhanced date manipulation with validation\n  formatDate(date) {\n    try {\n      const options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n      };\n\n      switch (this.format) {\n        case 'DD/MM/YYYY':\n          return date\n            .toLocaleDateString(this.locale, options)\n            .split('/')\n            .reverse()\n            .join('/');\n        case 'YYYY-MM-DD':\n          return date.toISOString().split('T')[0];\n        default: // MM/DD/YYYY\n          return date.toLocaleDateString(this.locale, options);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'format-date');\n      return '';\n    }\n  }\n\n  formatTime(hour, minute) {\n    try {\n      if (this.show24Hour) {\n        return `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;\n      } else {\n        const ampm =\n          hour >= INPUT_UTILITY_CONSTANTS.HOURS_IN_12_FORMAT ? 'PM' : 'AM';\n        const displayHour =\n          hour % INPUT_UTILITY_CONSTANTS.HOURS_IN_12_FORMAT ||\n          INPUT_UTILITY_CONSTANTS.HOURS_IN_12_FORMAT;\n        return `${displayHour}:${String(minute).padStart(2, '0')} ${ampm}`;\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'format-time');\n      return '';\n    }\n  }\n\n  getDaysInMonth(month, year) {\n    return new Date(year, month + 1, 0).getDate();\n  }\n\n  getFirstDayOfMonth(month, year) {\n    return new Date(year, month, 1).getDay();\n  }\n\n  isDateDisabled(date) {\n    if (this.minDate && date < this.minDate) return true;\n    if (this.maxDate && date > this.maxDate) return true;\n    return false;\n  }\n\n  isToday(date) {\n    const today = new Date();\n    return date.toDateString() === today.toDateString();\n  }\n\n  isSameDate(date1, date2) {\n    return date1.toDateString() === date2.toDateString();\n  }\n\n  // Enhanced navigation with accessibility\n  navigateDay(days) {\n    try {\n      const newDate = new Date(this.focusedDate);\n      newDate.setDate(newDate.getDate() + days);\n\n      if (!this.isDateDisabled(newDate)) {\n        this.focusedDate = newDate;\n        this.updateDisplayMonth();\n        this.announceChange(`Focused on ${this.formatDate(this.focusedDate)}`);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'navigate-day');\n    }\n  }\n\n  navigateMonth(direction) {\n    try {\n      this.displayMonth += direction;\n\n      if (this.displayMonth < 0) {\n        this.displayMonth = 11;\n        this.displayYear--;\n      } else if (\n        this.displayMonth >\n        INPUT_UTILITY_CONSTANTS.MONTHS_PER_YEAR - 1\n      ) {\n        this.displayMonth = 0;\n        this.displayYear++;\n      }\n\n      // Update focused date to stay in view\n      this.focusedDate = new Date(\n        this.displayYear,\n        this.displayMonth,\n        Math.min(\n          this.focusedDate.getDate(),\n          this.getDaysInMonth(this.displayMonth, this.displayYear)\n        )\n      );\n\n      this.announceChange(\n        `Viewing ${this.getMonthNames()[this.displayMonth]} ${this.displayYear}`\n      );\n      this.clearRenderCache();\n    } catch (error) {\n      this.errorHandler.handle(error, 'navigate-month');\n    }\n  }\n\n  updateDisplayMonth() {\n    const focusedMonth = this.focusedDate.getMonth();\n    const focusedYear = this.focusedDate.getFullYear();\n\n    if (\n      focusedMonth !== this.displayMonth ||\n      focusedYear !== this.displayYear\n    ) {\n      this.displayMonth = focusedMonth;\n      this.displayYear = focusedYear;\n      this.clearRenderCache();\n    }\n  }\n\n  goToToday() {\n    try {\n      const today = new Date();\n      this.focusedDate = today;\n      this.displayMonth = today.getMonth();\n      this.displayYear = today.getFullYear();\n      this.announceChange('Navigated to today');\n      this.clearRenderCache();\n    } catch (error) {\n      this.errorHandler.handle(error, 'go-to-today');\n    }\n  }\n\n  goToEndOfMonth() {\n    try {\n      const lastDay = this.getDaysInMonth(this.displayMonth, this.displayYear);\n      this.focusedDate = new Date(this.displayYear, this.displayMonth, lastDay);\n      this.announceChange(\n        `Navigated to end of month: ${this.formatDate(this.focusedDate)}`\n      );\n    } catch (error) {\n      this.errorHandler.handle(error, 'go-to-end-of-month');\n    }\n  }\n\n  confirmSelection() {\n    try {\n      if (this.currentView === 'calendar') {\n        this.selectDate(this.focusedDate);\n        if (this.showTime) {\n          this.currentView = 'time';\n          this.announceChange('Switched to time selection');\n        } else {\n          this.close();\n        }\n      } else if (this.currentView === 'time') {\n        this.updateDateTime();\n        this.close();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'confirm-selection');\n    }\n  }\n\n  selectDate(date) {\n    try {\n      if (!this.isDateDisabled(date)) {\n        this.value = new Date(date);\n        this.value.setHours(this.selectedHour, this.selectedMinute, 0, 0);\n        this.emit('dateChanged', { value: this.value });\n        this.announceChange(`Selected ${this.formatDate(this.value)}`);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'select-date');\n    }\n  }\n\n  getMonthNames() {\n    return [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December',\n    ];\n  }\n  // Enhanced event handlers with accessibility\n  handleClick(event) {\n    if (this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n\n      if (!this.isOpen) {\n        this.open();\n        return;\n      }\n\n      if (this.currentView === 'calendar') {\n        this.handleCalendarClick(localX, localY);\n      } else if (this.currentView === 'time') {\n        this.handleTimeClick(localX, localY);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'click-handler');\n    }\n  }\n\n  handleCalendarClick(x, y) {\n    try {\n      // Header navigation\n      if (y < INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_HEIGHT) {\n        if (x < INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_NAV_BUTTON_SIZE) {\n          this.navigateMonth(-1);\n        } else if (\n          x >\n          this.width - INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_NAV_BUTTON_SIZE\n        ) {\n          this.navigateMonth(1);\n        } else if (\n          this.showTime &&\n          x >\n            this.width -\n              INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TIME_BUTTON_WIDTH\n        ) {\n          this.currentView = 'time';\n          this.announceChange('Switched to time selection');\n        }\n        return;\n      }\n\n      // Calendar grid\n      const gridY =\n        y - INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_CALENDAR_TOP_OFFSET; // Account for header and day labels\n      const cellWidth = this.width / INPUT_UTILITY_CONSTANTS.DAYS_PER_WEEK;\n      const cellHeight = 30;\n\n      if (gridY >= 0) {\n        const col = Math.floor(x / cellWidth);\n        const row = Math.floor(gridY / cellHeight);\n\n        const firstDay = this.getFirstDayOfMonth(\n          this.displayMonth,\n          this.displayYear\n        );\n        const dayNumber =\n          row * INPUT_UTILITY_CONSTANTS.DAYS_PER_WEEK + col - firstDay + 1;\n        const daysInMonth = this.getDaysInMonth(\n          this.displayMonth,\n          this.displayYear\n        );\n\n        if (dayNumber >= 1 && dayNumber <= daysInMonth) {\n          const selectedDate = new Date(\n            this.displayYear,\n            this.displayMonth,\n            dayNumber\n          );\n\n          if (!this.isDateDisabled(selectedDate)) {\n            this.focusedDate = selectedDate;\n            this.selectDate(selectedDate);\n\n            if (!this.showTime) {\n              this.close();\n            }\n          }\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'calendar-click');\n    }\n  }\n\n  handleTimeClick(x, y) {\n    try {\n      // Time selection logic\n      const centerX = this.width / 2;\n      const centerY = this.height / 2;\n      const radius = 80;\n\n      const dx = x - centerX;\n      const dy = y - centerY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      if (distance <= radius) {\n        const angle = Math.atan2(dy, dx);\n        const normalizedAngle = (angle + Math.PI * 2) % (Math.PI * 2);\n\n        if (\n          distance <\n          radius * INPUT_UTILITY_CONSTANTS.TIME_SELECTOR_RADIUS_FACTOR\n        ) {\n          // Hour selection\n          this.selectedHour = Math.floor(\n            (normalizedAngle / (Math.PI * 2)) *\n              INPUT_UTILITY_CONSTANTS.HOURS_IN_12_FORMAT\n          );\n          if (!this.show24Hour && this.selectedHour === 0) {\n            this.selectedHour = 12;\n          }\n        } else {\n          // Minute selection\n          this.selectedMinute = Math.floor(\n            (normalizedAngle / (Math.PI * 2)) *\n              INPUT_UTILITY_CONSTANTS.MINUTES_PER_HOUR\n          );\n        }\n\n        this.updateDateTime();\n      }\n\n      // Back to calendar button\n      if (\n        y < INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_HEIGHT &&\n        x < INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TIME_BUTTON_WIDTH\n      ) {\n        this.currentView = 'calendar';\n        this.announceChange('Switched to calendar view');\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'time-click');\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    try {\n      if (!this.isOpen) {\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          this.open();\n        }\n        return;\n      }\n\n      const handler = this.keyboardHandler[event.key];\n      if (handler) {\n        event.preventDefault();\n        handler(event);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-handler');\n    }\n  }\n\n  handleTabNavigation(event) {\n    // Handle tab navigation within the picker\n    const focusableElements = this.getFocusableElements();\n    const currentIndex = focusableElements.indexOf(event.target);\n\n    if (event.shiftKey) {\n      // Shift+Tab - go backwards\n      if (currentIndex <= 0) {\n        event.preventDefault();\n        focusableElements[focusableElements.length - 1]?.focus();\n      }\n    } else {\n      // Tab - go forwards\n      if (currentIndex >= focusableElements.length - 1) {\n        event.preventDefault();\n        focusableElements[0]?.focus();\n      }\n    }\n  }\n\n  getFocusableElements() {\n    return Array.from(\n      this.element?.querySelectorAll('[tabindex]:not([tabindex=\"-1\"])') || []\n    );\n  }\n\n  handleFocus() {\n    this.isFocused = true;\n    this.emit('focus');\n  }\n\n  handleBlur() {\n    this.isFocused = false;\n    this.emit('blur');\n\n    // Close picker on blur if not persistent\n    if (this.isOpen && !this.persistent) {\n      setTimeout(() => this.close(), INPUT_UTILITY_CONSTANTS.CLOSE_TIMEOUT);\n    }\n  }\n\n  handleFocusIn() {\n    this.setAttribute('aria-describedby', 'date-picker-instructions');\n    this.announcer.textContent =\n      'Use arrow keys to navigate dates, Enter to select, Escape to close';\n  }\n\n  handleFocusOut() {\n    this.removeAttribute('aria-describedby');\n  }\n\n  updateDateTime() {\n    try {\n      this.value.setHours(this.selectedHour);\n      this.value.setMinutes(this.selectedMinute);\n      this.emit('dateChanged', { value: this.value });\n      this.announceChange(\n        `Time updated to ${this.formatTime(this.selectedHour, this.selectedMinute)}`\n      );\n    } catch (error) {\n      this.errorHandler.handle(error, 'update-date-time');\n    }\n  }\n  // Enhanced rendering with theme support and caching\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      PerformanceMonitor.startMonitoring('DateTimePicker');\n\n      if (!this.isOpen && this.animationState.openProgress === 0) {\n        this.renderInputField(renderer);\n      } else {\n        this.renderPicker(renderer);\n      }\n\n      PerformanceMonitor.endMonitoring('DateTimePicker');\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderInputField(renderer) {\n    const cacheKey = `input_${this.formatDate(this.value)}_${this.width}_${this.height}_${this.disabled}`;\n\n    if (this.renderCache.has(cacheKey)) {\n      const cachedImage = this.renderCache.get(cacheKey);\n      renderer.drawImage(cachedImage, 0, 0);\n      return;\n    }\n\n    // Create off-screen canvas for caching\n    const offscreenCanvas = new OffscreenCanvas(\n      this.width,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_RENDER_HEIGHT\n    );\n    const offscreenRenderer = offscreenCanvas.getContext('2d');\n\n    // Render input field to off-screen canvas\n    this.drawInputField(offscreenRenderer);\n\n    // Cache and draw\n    this.renderCache.set(cacheKey, offscreenCanvas);\n    renderer.drawImage(offscreenCanvas, 0, 0);\n  }\n\n  drawInputField(renderer) {\n    // Input field background\n    renderer.fillStyle = this.disabled\n      ? ComponentTheme.getColor('disabled', this.theme)\n      : ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(\n      0,\n      0,\n      this.width,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_RENDER_HEIGHT\n    );\n\n    // Border with theme support\n    const borderColor = this.disabled\n      ? ComponentTheme.getColor('border', this.theme)\n      : this.isFocused\n        ? ComponentTheme.getColor('focus', this.theme)\n        : ComponentTheme.getColor('border', this.theme);\n\n    renderer.strokeStyle = borderColor;\n    renderer.lineWidth = this.isFocused ? 2 : 1;\n    renderer.strokeRect(\n      0,\n      0,\n      this.width,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_RENDER_HEIGHT\n    );\n\n    // Date text\n    renderer.fillStyle = this.disabled\n      ? ComponentTheme.getColor('textDisabled', this.theme)\n      : ComponentTheme.getColor('text', this.theme);\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    let displayText = this.formatDate(this.value);\n    if (this.showTime) {\n      displayText += ` ${this.formatTime(this.selectedHour, this.selectedMinute)}`;\n    }\n\n    renderer.fillText(\n      displayText,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TEXT_MARGIN,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    );\n\n    // Calendar icon\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '16px Arial';\n    renderer.textAlign = 'right';\n    renderer.fillText(\n      '📅',\n      this.width - INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TEXT_MARGIN,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    );\n\n    // Focus indicator\n    if (this.isFocused) {\n      this.drawFocusIndicator(renderer);\n    }\n\n    // Disabled overlay\n    if (this.disabled) {\n      renderer.fillStyle = 'rgba(255, 255, 255, 0.5)';\n      renderer.fillRect(\n        0,\n        0,\n        this.width,\n        INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_DISABLED_OVERLAY_HEIGHT\n      );\n    }\n  }\n\n  drawFocusIndicator(renderer) {\n    renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n    renderer.lineWidth =\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_WIDTH;\n    renderer.setLineDash([\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_OFFSET,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_OFFSET,\n    ]);\n    renderer.strokeRect(\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_OFFSET,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_OFFSET,\n      this.width - INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_BORDER,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_FOCUS_STROKE_HEIGHT\n    );\n    renderer.setLineDash([]);\n  }\n\n  renderPicker(renderer) {\n    // Apply animation progress\n    const alpha = this.animationState.openProgress;\n    renderer.globalAlpha = alpha;\n\n    // Background\n    renderer.fillStyle = ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n\n    // Shadow for depth\n    renderer.shadowColor = 'rgba(0, 0, 0, 0.1)';\n    renderer.shadowBlur = 10;\n    renderer.shadowOffsetY = 5;\n\n    if (this.currentView === 'calendar') {\n      this.renderCalendar(renderer);\n    } else {\n      this.renderTimePicker(renderer);\n    }\n\n    // Reset shadow\n    renderer.shadowColor = 'transparent';\n    renderer.shadowBlur = 0;\n    renderer.shadowOffsetY = 0;\n\n    renderer.globalAlpha = 1;\n  }\n  renderCalendar(renderer) {\n    // Header\n    this.renderCalendarHeader(renderer);\n\n    // Day labels\n    this.renderDayLabels(renderer);\n\n    // Calendar grid\n    this.renderCalendarGrid(renderer);\n\n    // Instructions for accessibility\n    if (this.isFocused) {\n      this.renderInstructions(renderer);\n    }\n  }\n\n  renderCalendarHeader(renderer) {\n    // Header background\n    renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n    renderer.fillRect(\n      0,\n      0,\n      this.width,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_RENDER_HEIGHT\n    );\n\n    // Month/Year text\n    const monthNames = this.getMonthNames();\n\n    renderer.fillStyle = ComponentTheme.getColor('onPrimary', this.theme);\n    renderer.font = 'bold 14px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      `${monthNames[this.displayMonth]} ${this.displayYear}`,\n      this.width / 2,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    );\n\n    // Navigation arrows with hover states\n    renderer.font = '16px Arial';\n    renderer.textAlign = 'center';\n    renderer.fillText(\n      '‹',\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    ); // Previous month\n    renderer.fillText(\n      '›',\n      this.width - INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    ); // Next month\n\n    // Time button\n    if (this.showTime) {\n      renderer.font = '12px Arial';\n      renderer.textAlign = 'right';\n      renderer.fillText(\n        'Time',\n        this.width -\n          INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TIME_BUTTON_LABEL_OFFSET,\n        INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n      );\n    }\n  }\n\n  renderDayLabels(renderer) {\n    const dayLabels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    const cellWidth =\n      this.width / INPUT_UTILITY_CONSTANTS.CALENDAR_GRID_COLUMNS;\n\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = 'bold 12px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n\n    dayLabels.forEach((label, index) => {\n      const x = index * cellWidth + cellWidth / 2;\n      renderer.fillText(\n        label,\n        x,\n        INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_DAY_LABEL_Y\n      );\n    });\n\n    // Separator line\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(0, INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_LINE_Y);\n    renderer.lineTo(this.width, INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_LINE_Y);\n    renderer.stroke();\n  }\n\n  renderCalendarGrid(renderer) {\n    const cellWidth =\n      this.width / INPUT_UTILITY_CONSTANTS.CALENDAR_GRID_COLUMNS;\n    const cellHeight = 30;\n    const startY = 70;\n\n    const firstDay = this.getFirstDayOfMonth(\n      this.displayMonth,\n      this.displayYear\n    );\n    const daysInMonth = this.getDaysInMonth(\n      this.displayMonth,\n      this.displayYear\n    );\n\n    for (let day = 1; day <= daysInMonth; day++) {\n      const dayIndex = firstDay + day - 1;\n      const row = Math.floor(\n        dayIndex / INPUT_UTILITY_CONSTANTS.CALENDAR_GRID_COLUMNS\n      );\n      const col = dayIndex % INPUT_UTILITY_CONSTANTS.CALENDAR_GRID_COLUMNS;\n\n      const x = col * cellWidth;\n      const y = startY + row * cellHeight;\n\n      const date = new Date(this.displayYear, this.displayMonth, day);\n      const isSelected = this.isSameDate(this.value, date);\n      const isFocused = this.isSameDate(this.focusedDate, date);\n      const isToday = this.isToday(date);\n      const isDisabled = this.isDateDisabled(date);\n\n      // Cell background\n      if (isSelected) {\n        renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n        renderer.fillRect(\n          x + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          y + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          cellWidth - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER,\n          cellHeight - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER\n        );\n      } else if (isFocused) {\n        renderer.fillStyle = ComponentTheme.getColor(\n          'primaryLight',\n          this.theme\n        );\n        renderer.fillRect(\n          x + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          y + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          cellWidth - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER,\n          cellHeight - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER\n        );\n      } else if (isToday) {\n        renderer.fillStyle = ComponentTheme.getColor('warning', this.theme);\n        renderer.fillRect(\n          x + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          y + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          cellWidth - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER,\n          cellHeight - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER\n        );\n      }\n\n      // Focus indicator\n      if (isFocused) {\n        renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n        renderer.lineWidth = 2;\n        renderer.setLineDash([2, 2]);\n        renderer.strokeRect(x + 1, y + 1, cellWidth - 2, cellHeight - 2);\n        renderer.setLineDash([]);\n      }\n\n      // Day number\n      renderer.fillStyle = isDisabled\n        ? ComponentTheme.getColor('textDisabled', this.theme)\n        : isSelected\n          ? ComponentTheme.getColor('onPrimary', this.theme)\n          : isToday\n            ? ComponentTheme.getColor('onWarning', this.theme)\n            : ComponentTheme.getColor('text', this.theme);\n\n      renderer.font = isSelected ? 'bold 14px Arial' : '14px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(day.toString(), x + cellWidth / 2, y + cellHeight / 2);\n\n      // Disabled overlay\n      if (isDisabled) {\n        renderer.fillStyle = 'rgba(128, 128, 128, 0.5)';\n        renderer.fillRect(\n          x + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          y + INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_PADDING,\n          cellWidth - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER,\n          cellHeight - INPUT_UTILITY_CONSTANTS.CALENDAR_CELL_BORDER\n        );\n      }\n    }\n  }\n\n  renderInstructions(renderer) {\n    const instructions = [\n      'Arrow keys: Navigate',\n      'Enter: Select, Esc: Close',\n      'Home: Today, PgUp/PgDn: Month',\n    ];\n\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    instructions.forEach((instruction, index) => {\n      renderer.fillText(\n        instruction,\n        INPUT_UTILITY_CONSTANTS.CALENDAR_INSTRUCTION_Y_OFFSET,\n        this.height -\n          INPUT_UTILITY_CONSTANTS.CALENDAR_INSTRUCTION_Y_BASE +\n          index * INPUT_UTILITY_CONSTANTS.CALENDAR_INSTRUCTION_LINE_SPACING\n      );\n    });\n  }\n  renderTimePicker(renderer) {\n    // Header\n    this.renderTimeHeader(renderer);\n\n    // Clock face\n    this.renderClockFace(renderer);\n\n    // Digital time display\n    this.renderDigitalTime(renderer);\n\n    // Instructions for accessibility\n    if (this.isFocused) {\n      this.renderTimeInstructions(renderer);\n    }\n  }\n\n  renderTimeHeader(renderer) {\n    // Header background\n    renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n    renderer.fillRect(\n      0,\n      0,\n      this.width,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_HEADER_RENDER_HEIGHT\n    );\n\n    // Back button\n    renderer.fillStyle = ComponentTheme.getColor('onPrimary', this.theme);\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      '← Calendar',\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_TEXT_MARGIN,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    );\n\n    // Time display\n    const timeText = this.formatTime(this.selectedHour, this.selectedMinute);\n    renderer.textAlign = 'center';\n    renderer.font = 'bold 16px Arial';\n    renderer.fillText(\n      timeText,\n      this.width / 2,\n      INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_ICON_MARGIN\n    );\n  }\n\n  renderClockFace(renderer) {\n    const centerX = this.width / 2;\n    const centerY =\n      this.height / 2 + INPUT_UTILITY_CONSTANTS.DATETIMEPICKER_CENTER_OFFSET;\n    const radius = 80;\n\n    // Clock circle background\n    renderer.fillStyle = ComponentTheme.getColor(\n      'backgroundSecondary',\n      this.theme\n    );\n    renderer.beginPath();\n    renderer.arc(centerX, centerY, radius, 0, Math.PI * 2);\n    renderer.fill();\n\n    // Clock circle border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 2;\n    renderer.beginPath();\n    renderer.arc(centerX, centerY, radius, 0, Math.PI * 2);\n    renderer.stroke();\n\n    // Hour markers and numbers\n    for (let i = 0; i < INPUT_UTILITY_CONSTANTS.CLOCK_HOURS_COUNT; i++) {\n      const angle =\n        ((i * INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_ANGLE_STEP -\n          INPUT_UTILITY_CONSTANTS.CLOCK_START_ANGLE_OFFSET) *\n          Math.PI) /\n        INPUT_UTILITY_CONSTANTS.CLOCK_ANGLE_TO_RADIANS;\n      const x1 =\n        centerX +\n        Math.cos(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_OUTER);\n      const y1 =\n        centerY +\n        Math.sin(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_OUTER);\n      const x2 =\n        centerX +\n        Math.cos(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_INNER);\n      const y2 =\n        centerY +\n        Math.sin(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_INNER);\n\n      // Hour marker lines\n      renderer.strokeStyle = ComponentTheme.getColor(\n        'textSecondary',\n        this.theme\n      );\n      renderer.lineWidth =\n        i % INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_MODULO === 0\n          ? INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_WIDTH\n          : INPUT_UTILITY_CONSTANTS.CLOCK_MINOR_TICK_WIDTH;\n      renderer.beginPath();\n      renderer.moveTo(x1, y1);\n      renderer.lineTo(x2, y2);\n      renderer.stroke();\n\n      // Hour numbers\n      const hour =\n        i === 0 ? INPUT_UTILITY_CONSTANTS.CLOCK_TWELVE_HOUR_DISPLAY : i;\n      const textX =\n        centerX +\n        Math.cos(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_TEXT_RADIUS);\n      const textY =\n        centerY +\n        Math.sin(angle) *\n          (radius - INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_TEXT_RADIUS);\n\n      renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n      renderer.font =\n        i % INPUT_UTILITY_CONSTANTS.CLOCK_MAJOR_TICK_MODULO === 0\n          ? 'bold 14px Arial'\n          : '12px Arial';\n      renderer.textAlign = 'center';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(hour.toString(), textX, textY);\n    }\n\n    // Minute markers (every 5 minutes)\n    for (\n      let i = 0;\n      i < INPUT_UTILITY_CONSTANTS.CLOCK_MINUTES_COUNT;\n      i += INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_STEP\n    ) {\n      if (i % INPUT_UTILITY_CONSTANTS.CLOCK_QUARTER_HOUR_MINUTES !== 0) {\n        // Skip quarter hours\n        const angle =\n          ((i * INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_ANGLE_STEP -\n            INPUT_UTILITY_CONSTANTS.CLOCK_START_ANGLE_OFFSET) *\n            Math.PI) /\n          INPUT_UTILITY_CONSTANTS.CLOCK_ANGLE_TO_RADIANS;\n        const x1 =\n          centerX +\n          Math.cos(angle) *\n            (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MINOR_TICK_OUTER);\n        const y1 =\n          centerY +\n          Math.sin(angle) *\n            (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MINOR_TICK_OUTER);\n        const x2 =\n          centerX +\n          Math.cos(angle) *\n            (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MINOR_TICK_INNER);\n        const y2 =\n          centerY +\n          Math.sin(angle) *\n            (radius - INPUT_UTILITY_CONSTANTS.CLOCK_MINOR_TICK_INNER);\n\n        renderer.strokeStyle = ComponentTheme.getColor(\n          'textSecondary',\n          this.theme\n        );\n        renderer.lineWidth = 1;\n        renderer.beginPath();\n        renderer.moveTo(x1, y1);\n        renderer.lineTo(x2, y2);\n        renderer.stroke();\n      }\n    }\n\n    // Selected hour indicator\n    const hourAngle =\n      (((this.selectedHour % INPUT_UTILITY_CONSTANTS.CLOCK_HOURS_COUNT) *\n        INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_ANGLE_STEP -\n        INPUT_UTILITY_CONSTANTS.CLOCK_START_ANGLE_OFFSET) *\n        Math.PI) /\n      INPUT_UTILITY_CONSTANTS.CLOCK_ANGLE_TO_RADIANS;\n    const hourX =\n      centerX +\n      Math.cos(hourAngle) *\n        (radius * INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_HAND_RADIUS_FACTOR);\n    const hourY =\n      centerY +\n      Math.sin(hourAngle) *\n        (radius * INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_HAND_RADIUS_FACTOR);\n\n    renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n    renderer.beginPath();\n    renderer.arc(\n      hourX,\n      hourY,\n      INPUT_UTILITY_CONSTANTS.CLOCK_HOUR_INDICATOR_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.fill();\n\n    // Hour hand\n    renderer.strokeStyle = ComponentTheme.getColor('primary', this.theme);\n    renderer.lineWidth = 4;\n    renderer.beginPath();\n    renderer.moveTo(centerX, centerY);\n    renderer.lineTo(hourX, hourY);\n    renderer.stroke();\n\n    // Selected minute indicator\n    const minuteAngle =\n      ((this.selectedMinute * INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_ANGLE_STEP -\n        INPUT_UTILITY_CONSTANTS.CLOCK_START_ANGLE_OFFSET) *\n        Math.PI) /\n      INPUT_UTILITY_CONSTANTS.CLOCK_ANGLE_TO_RADIANS;\n    const minuteX =\n      centerX +\n      Math.cos(minuteAngle) *\n        (radius * INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_HAND_RADIUS_FACTOR);\n    const minuteY =\n      centerY +\n      Math.sin(minuteAngle) *\n        (radius * INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_HAND_RADIUS_FACTOR);\n\n    renderer.fillStyle = ComponentTheme.getColor('secondary', this.theme);\n    renderer.beginPath();\n    renderer.arc(\n      minuteX,\n      minuteY,\n      INPUT_UTILITY_CONSTANTS.CLOCK_MINUTE_INDICATOR_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.fill();\n\n    // Minute hand\n    renderer.strokeStyle = ComponentTheme.getColor('secondary', this.theme);\n    renderer.lineWidth = 3;\n    renderer.beginPath();\n    renderer.moveTo(centerX, centerY);\n    renderer.lineTo(minuteX, minuteY);\n    renderer.stroke();\n\n    // Center dot\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.beginPath();\n    renderer.arc(\n      centerX,\n      centerY,\n      INPUT_UTILITY_CONSTANTS.CLOCK_CENTER_DOT_RADIUS,\n      0,\n      Math.PI * 2\n    );\n    renderer.fill();\n  }\n\n  renderDigitalTime(renderer) {\n    const timeText = this.formatTime(this.selectedHour, this.selectedMinute);\n\n    renderer.fillStyle = ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(\n      this.width / 2 - INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_OFFSET_X,\n      this.height - INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_OFFSET_Y,\n      INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_WIDTH,\n      INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_HEIGHT\n    );\n\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(\n      this.width / 2 - INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_OFFSET_X,\n      this.height - INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_OFFSET_Y,\n      INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_WIDTH,\n      INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_HEIGHT\n    );\n\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.font = 'bold 18px monospace';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      timeText,\n      this.width / 2,\n      this.height - INPUT_UTILITY_CONSTANTS.DIGITAL_TIME_TEXT_Y\n    );\n  }\n\n  renderTimeInstructions(renderer) {\n    const instructions = [\n      'Click clock: Set time',\n      'Enter: Confirm, Esc: Cancel',\n    ];\n\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    instructions.forEach((instruction, index) => {\n      renderer.fillText(\n        instruction,\n        INPUT_UTILITY_CONSTANTS.TIME_INSTRUCTION_MARGIN,\n        INPUT_UTILITY_CONSTANTS.TIME_INSTRUCTION_MARGIN +\n          index * INPUT_UTILITY_CONSTANTS.TIME_INSTRUCTION_LINE_HEIGHT\n      );\n    });\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Public API with enhanced error handling\n  getValue() {\n    return new Date(this.value);\n  }\n\n  async setValue(value) {\n    try {\n      const newDate = new Date(value);\n      if (isNaN(newDate.getTime())) {\n        throw new ComponentError(\n          `Invalid date value: ${value}`,\n          'DateTimePicker'\n        );\n      }\n\n      if (this.isDateDisabled(newDate)) {\n        throw new ComponentError('Date is disabled', 'DateTimePicker');\n      }\n\n      const oldValue = new Date(this.value);\n      this.value = newDate;\n      this.selectedHour = newDate.getHours();\n      this.selectedMinute = newDate.getMinutes();\n      this.displayMonth = newDate.getMonth();\n      this.displayYear = newDate.getFullYear();\n      this.focusedDate = new Date(newDate);\n\n      this.clearRenderCache();\n\n      if (oldValue.getTime() !== this.value.getTime()) {\n        this.emit('dateChanged', {\n          value: this.value,\n          oldValue,\n          formatted: {\n            date: this.formatDate(this.value),\n            time: this.formatTime(this.selectedHour, this.selectedMinute),\n          },\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'setValue');\n    }\n  }\n\n  reset() {\n    const today = new Date();\n    this.value = today;\n    this.selectedHour = today.getHours();\n    this.selectedMinute = today.getMinutes();\n    this.displayMonth = today.getMonth();\n    this.displayYear = today.getFullYear();\n    this.focusedDate = new Date(today);\n    this.isOpen = false;\n    this.currentView = 'calendar';\n    this.animationState.openProgress = 0;\n    this.clearRenderCache();\n    this.emit('reset');\n  }\n\n  enable() {\n    this.disabled = false;\n    this.setAttribute('tabindex', '0');\n    this.clearRenderCache();\n    this.emit('enabled');\n  }\n\n  disable() {\n    this.disabled = true;\n    this.setAttribute('tabindex', '-1');\n    this.close();\n    this.clearRenderCache();\n    this.emit('disabled');\n  }\n\n  // Cleanup and memory management\n  destroy() {\n    try {\n      // Cancel any active animations\n      AnimationManager.cancelAnimation(this);\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Clear caches\n      this.clearRenderCache();\n\n      // Clear timers\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n      }\n\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      logger.error('Error during DateTimePicker cleanup:', error);\n    }\n  }\n}\n\n// =============================================================================\n// NUMBER INPUT COMPONENT\n// =============================================================================\n\nclass NumberInput extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width:\n        options.width || INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_DEFAULT_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_DEFAULT_HEIGHT,\n      ariaRole: 'spinbutton',\n      ariaLabel: options.ariaLabel || 'Number Input',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.value = options.value || 0;\n    this.min = options.min !== undefined ? options.min : -Infinity;\n    this.max = options.max !== undefined ? options.max : Infinity;\n    this.step = options.step || 1;\n    this.precision = options.precision || 0;\n    this.placeholder = options.placeholder || '';\n    this.disabled = options.disabled || false;\n    this.showControls = options.showControls !== false;\n    this.allowDecimals = options.allowDecimals !== false;\n    this.prefix = options.prefix || '';\n    this.suffix = options.suffix || '';\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // State management\n    this.isFocused = false;\n    this.isEditing = false;\n    this.editingValue = '';\n    this.isMouseDownOnControl = false;\n    this.repeatInterval = null;\n\n    // Animation and performance\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.min !== undefined &&\n      options.max !== undefined &&\n      options.min > options.max\n    ) {\n      throw new ComponentError('min cannot be greater than max', 'NumberInput');\n    }\n\n    if (\n      options.step !== undefined &&\n      (typeof options.step !== 'number' || options.step <= 0)\n    ) {\n      throw new ComponentError('step must be a positive number', 'NumberInput');\n    }\n\n    if (\n      options.precision !== undefined &&\n      (!Number.isInteger(options.precision) || options.precision < 0)\n    ) {\n      throw new ComponentError(\n        'precision must be a non-negative integer',\n        'NumberInput'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      ArrowUp: () => this.increment(),\n      ArrowDown: () => this.decrement(),\n      Enter: () => this.commitEdit(),\n      Escape: () => this.cancelEdit(),\n      Home: () => this.setValue(this.min),\n      End: () => this.setValue(this.max),\n      PageUp: () => this.setValue(this.value + this.step * 10),\n      PageDown: () => this.setValue(this.value - this.step * 10),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'NumberInput',\n          { context, originalError: error }\n        );\n\n        logger.error('NumberInput Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'validation':\n        this.value = this.clampValue(this.value);\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      case 'editing':\n        this.cancelEdit();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'spinbutton');\n    this.setAttribute('aria-valuemin', this.min.toString());\n    this.setAttribute('aria-valuemax', this.max.toString());\n    this.setAttribute('aria-valuenow', this.value.toString());\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Update ARIA attributes when value changes\n    this.on('valueChanged', ({ value }) => {\n      this.setAttribute('aria-valuenow', value.toString());\n    });\n\n    // Keyboard accessibility\n    this.addEventListener('keydown', event => this.handleKeyDown(event));\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n      wheel: this.handleWheel.bind(this),\n      mouseDown: this.handleMouseDown.bind(this),\n      mouseUp: this.handleMouseUp.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced value management with validation\n  async setValue(value, announce = true) {\n    try {\n      const numValue = this.parseValue(value);\n      if (numValue === null) {\n        throw new ComponentError(\n          `Invalid numeric value: ${value}`,\n          'NumberInput'\n        );\n      }\n\n      const oldValue = this.value;\n      this.value = this.clampValue(numValue);\n      this.clearRenderCache();\n\n      if (oldValue !== this.value) {\n        this.emit('valueChanged', {\n          value: this.value,\n          oldValue,\n          formatted: this.formatValue(this.value),\n        });\n\n        if (announce) {\n          this.announceChange(\n            `Value changed to ${this.formatValue(this.value)}`\n          );\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'setValue');\n    }\n  }\n\n  parseValue(value) {\n    if (typeof value === 'number') return value;\n    if (typeof value === 'string') {\n      // Remove prefix and suffix for parsing\n      let cleanValue = value;\n      if (this.prefix && cleanValue.startsWith(this.prefix)) {\n        cleanValue = cleanValue.substring(this.prefix.length);\n      }\n      if (this.suffix && cleanValue.endsWith(this.suffix)) {\n        cleanValue = cleanValue.substring(\n          0,\n          cleanValue.length - this.suffix.length\n        );\n      }\n\n      const parsed = parseFloat(cleanValue.trim());\n      return isNaN(parsed) ? null : parsed;\n    }\n    return null;\n  }\n\n  clampValue(value) {\n    let clamped = Math.max(this.min, Math.min(this.max, value));\n\n    // Apply step constraint\n    if (this.step !== 1) {\n      const steps = Math.round((clamped - this.min) / this.step);\n      clamped = this.min + steps * this.step;\n    }\n\n    // Apply precision\n    if (this.precision > 0) {\n      clamped = parseFloat(clamped.toFixed(this.precision));\n    } else {\n      clamped = Math.round(clamped);\n    }\n\n    return clamped;\n  }\n\n  formatValue(value) {\n    let formatted;\n    if (this.precision > 0) {\n      formatted = value.toFixed(this.precision);\n    } else {\n      formatted = Math.round(value).toString();\n    }\n\n    return this.prefix + formatted + this.suffix;\n  }\n\n  increment() {\n    try {\n      this.setValue(this.value + this.step);\n      this.announceChange(`Incremented to ${this.formatValue(this.value)}`);\n    } catch (error) {\n      this.errorHandler.handle(error, 'increment');\n    }\n  }\n\n  decrement() {\n    try {\n      this.setValue(this.value - this.step);\n      this.announceChange(`Decremented to ${this.formatValue(this.value)}`);\n    } catch (error) {\n      this.errorHandler.handle(error, 'decrement');\n    }\n  }\n\n  startRepeating(operation) {\n    this.stopRepeating();\n\n    const repeat = () => {\n      if (operation === 'increment') {\n        this.increment();\n      } else {\n        this.decrement();\n      }\n\n      this.repeatInterval = setTimeout(\n        repeat,\n        INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_REPEAT_INTERVAL\n      );\n    };\n\n    // Initial delay before repeating\n    this.repeatInterval = setTimeout(\n      repeat,\n      INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_REPEAT_INITIAL_DELAY\n    );\n  }\n\n  stopRepeating() {\n    if (this.repeatInterval) {\n      clearTimeout(this.repeatInterval);\n      this.repeatInterval = null;\n    }\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n  // Enhanced event handlers with accessibility\n  handleClick(event) {\n    if (this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n\n      if (\n        this.showControls &&\n        localX > this.width - INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_CONTROL_WIDTH\n      ) {\n        // Spinner controls\n        if (localY < this.height / 2) {\n          this.increment();\n        } else {\n          this.decrement();\n        }\n      } else {\n        // Start editing\n        this.startEditing();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'click-handler');\n    }\n  }\n\n  handleMouseDown(event) {\n    if (this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n\n      if (\n        this.showControls &&\n        localX > this.width - INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_CONTROL_WIDTH\n      ) {\n        this.isMouseDownOnControl = true;\n\n        // Start repeating after a delay\n        const operation = localY < this.height / 2 ? 'increment' : 'decrement';\n        this.startRepeating(operation);\n\n        // Prevent text selection\n        event.preventDefault();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'mouse-down');\n    }\n  }\n\n  handleMouseUp() {\n    if (this.isMouseDownOnControl) {\n      this.isMouseDownOnControl = false;\n      this.stopRepeating();\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    try {\n      if (this.isEditing) {\n        switch (event.key) {\n          case 'Enter':\n            this.commitEdit();\n            break;\n          case 'Escape':\n            this.cancelEdit();\n            break;\n          case 'Backspace':\n            this.editingValue = this.editingValue.slice(0, -1);\n            break;\n          default:\n            if (this.isValidInput(event.key)) {\n              this.editingValue += event.key;\n            }\n        }\n      } else {\n        const handler = this.keyboardHandler[event.key];\n        if (handler) {\n          event.preventDefault();\n          handler();\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-handler');\n    }\n  }\n\n  handleFocus() {\n    this.isFocused = true;\n    this.emit('focus');\n  }\n\n  handleBlur() {\n    this.isFocused = false;\n    if (this.isEditing) {\n      this.commitEdit();\n    }\n    this.emit('blur');\n  }\n\n  handleWheel(event) {\n    if (this.disabled || !this.isFocused) return;\n\n    try {\n      event.preventDefault();\n\n      if (event.deltaY < 0) {\n        this.increment();\n      } else {\n        this.decrement();\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'wheel-handler');\n    }\n  }\n  handleFocusIn() {\n    this.setAttribute('aria-describedby', 'number-input-instructions');\n    this.announcer.textContent =\n      'Use arrow keys to adjust value, Enter to edit directly';\n  }\n\n  handleFocusOut() {\n    this.removeAttribute('aria-describedby');\n  }\n\n  // Enhanced input validation and editing\n  isValidInput(key) {\n    const validChars = this.allowDecimals ? '0123456789.-' : '0123456789-';\n    if (!validChars.includes(key)) return false;\n\n    // Prevent multiple decimal points\n    if (key === '.' && this.editingValue.includes('.')) return false;\n\n    // Prevent multiple minus signs or minus in wrong position\n    if (\n      key === '-' &&\n      (this.editingValue.includes('-') || this.editingValue.length > 0)\n    )\n      return false;\n\n    return true;\n  }\n\n  startEditing() {\n    try {\n      this.isEditing = true;\n      this.editingValue = this.formatValue(this.value);\n      this.announceChange('Editing mode activated');\n    } catch (error) {\n      this.errorHandler.handle(error, 'start-editing');\n    }\n  }\n\n  commitEdit() {\n    try {\n      const newValue = this.parseValue(this.editingValue);\n      if (newValue !== null) {\n        this.setValue(newValue, false);\n      }\n      this.isEditing = false;\n      this.editingValue = '';\n      this.announceChange('Edit committed');\n    } catch (error) {\n      this.errorHandler.handle(error, 'commit-edit');\n    }\n  }\n  cancelEdit() {\n    try {\n      this.isEditing = false;\n      this.editingValue = '';\n      this.announceChange('Edit cancelled');\n    } catch (error) {\n      this.errorHandler.handle(error, 'cancel-edit');\n    }\n  }\n\n  // Enhanced rendering with theme support\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      PerformanceMonitor.startMonitoring('NumberInput');\n\n      // Background with theme support\n      renderer.fillStyle = this.disabled\n        ? ComponentTheme.getColor('disabled', this.theme)\n        : ComponentTheme.getColor('background', this.theme);\n      renderer.fillRect(0, 0, this.width, this.height);\n\n      // Border with focus state\n      const borderColor = this.disabled\n        ? ComponentTheme.getColor('border', this.theme)\n        : this.isFocused\n          ? ComponentTheme.getColor('focus', this.theme)\n          : ComponentTheme.getColor('border', this.theme);\n\n      renderer.strokeStyle = borderColor;\n      renderer.lineWidth = this.isFocused ? 2 : 1;\n      renderer.strokeRect(0, 0, this.width, this.height);\n\n      // Value text\n      const displayValue = this.isEditing\n        ? this.editingValue\n        : this.formatValue(this.value);\n      const textColor = this.disabled\n        ? ComponentTheme.getColor('textDisabled', this.theme)\n        : ComponentTheme.getColor('text', this.theme);\n\n      renderer.fillStyle = textColor;\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n\n      const placeholderText = displayValue || this.placeholder;\n      const isPlaceholder = !displayValue && this.placeholder;\n\n      if (isPlaceholder) {\n        renderer.fillStyle = ComponentTheme.getColor(\n          'textSecondary',\n          this.theme\n        );\n        renderer.font = 'italic 14px Arial';\n      }\n\n      renderer.fillText(\n        placeholderText,\n        INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_TEXT_MARGIN,\n        this.height / 2\n      );\n\n      // Spinner controls\n      if (this.showControls) {\n        this.renderSpinnerControls(renderer);\n      }\n\n      // Cursor when editing\n      if (this.isEditing && this.isFocused) {\n        this.renderCursor(renderer, displayValue);\n      }\n\n      // Focus indicator\n      if (this.isFocused) {\n        this.drawFocusIndicator(renderer);\n      }\n\n      // Disabled overlay\n      if (this.disabled) {\n        renderer.fillStyle = 'rgba(255, 255, 255, 0.6)';\n        renderer.fillRect(0, 0, this.width, this.height);\n      }\n\n      PerformanceMonitor.endMonitoring('NumberInput');\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  drawFocusIndicator(renderer) {\n    renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n    renderer.lineWidth = 2;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      this.width - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER,\n      this.height - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER\n    );\n    renderer.setLineDash([]);\n  }\n\n  renderSpinnerControls(renderer) {\n    const controlWidth = 20;\n    const controlX = this.width - controlWidth;\n\n    // Separator line\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(controlX, 0);\n    renderer.lineTo(controlX, this.height);\n    renderer.stroke();\n\n    // Control background on hover/active\n    const controlBg = this.isMouseDownOnControl\n      ? ComponentTheme.getColor('primaryLight', this.theme)\n      : ComponentTheme.getColor('background', this.theme);\n\n    renderer.fillStyle = controlBg;\n    renderer.fillRect(controlX + 1, 1, controlWidth - 2, this.height - 2);\n\n    // Up arrow\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '10px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      '▲',\n      controlX + controlWidth / 2,\n      this.height / INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_QUARTER_HEIGHT\n    );\n\n    // Down arrow\n    renderer.fillText(\n      '▼',\n      controlX + controlWidth / 2,\n      (this.height *\n        INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_THREE_QUARTER_HEIGHT) /\n        INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_QUARTER_HEIGHT\n    );\n  }\n\n  renderCursor(renderer, text) {\n    const textWidth = renderer.measureText(text).width;\n    const cursorX =\n      INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_TEXT_MARGIN +\n      textWidth +\n      INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_CURSOR_OFFSET;\n\n    // Blinking cursor effect\n    const shouldShow =\n      Math.floor(\n        Date.now() / INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_BLINK_INTERVAL\n      ) %\n        2 ===\n      0;\n    if (!shouldShow) return;\n\n    renderer.strokeStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(\n      cursorX,\n      INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_CURSOR_MARGIN\n    );\n    renderer.lineTo(\n      cursorX,\n      this.height - INPUT_UTILITY_CONSTANTS.NUMBER_INPUT_CURSOR_MARGIN\n    );\n    renderer.stroke();\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Public API with enhanced error handling\n  getValue() {\n    return this.value;\n  }\n\n  reset() {\n    this.value = 0;\n    this.isEditing = false;\n    this.editingValue = '';\n    this.isFocused = false;\n    this.stopRepeating();\n    this.clearRenderCache();\n    this.emit('reset');\n  }\n\n  enable() {\n    this.disabled = false;\n    this.setAttribute('tabindex', '0');\n    this.clearRenderCache();\n    this.emit('enabled');\n  }\n\n  disable() {\n    this.disabled = true;\n    this.setAttribute('tabindex', '-1');\n    this.cancelEdit();\n    this.stopRepeating();\n    this.clearRenderCache();\n    this.emit('disabled');\n  }\n\n  // Cleanup and memory management\n  destroy() {\n    try {\n      // Stop any repeating operations\n      this.stopRepeating();\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Clear caches\n      this.clearRenderCache();\n\n      // Clear timers\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n      }\n\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      logger.error('Error during NumberInput cleanup:', error);\n    }\n  }\n}\n\n// =============================================================================\n// =============================================================================\n// MODERN DRAWER COMPONENT\n// =============================================================================\n\n/**\n * Advanced Drawer component with accessibility, smooth animations,\n * theme support, and modern interaction patterns.\n */\nclass Drawer extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || INPUT_UTILITY_CONSTANTS.ACCORDION_DEFAULT_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.ACCORDION_DEFAULT_HEIGHT,\n      ariaRole: 'dialog',\n      ariaLabel: options.ariaLabel || 'Drawer',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.isOpen = options.isOpen || false;\n    this.position = options.position || 'left'; // 'left', 'right', 'top', 'bottom'\n    this.modal = options.modal !== false;\n    this.persistent = options.persistent || false;\n    this.title = options.title || '';\n    this.content = options.content || '';\n    this.disabled = options.disabled || false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // Animation and performance\n    this.animationDuration =\n      options.animationDuration ||\n      INPUT_UTILITY_CONSTANTS.DEFAULT_ANIMATION_DURATION;\n    this.animationState = {\n      isAnimating: false,\n      progress: this.isOpen ? 1 : 0,\n      type: null,\n      startTime: 0,\n    };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n    this.trapFocus = options.trapFocus !== false;\n    this.restoreFocus = options.restoreFocus !== false;\n    this.previouslyFocusedElement = null;\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('Drawer');\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n      this.setupTouchSupport();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    const validPositions = ['left', 'right', 'top', 'bottom'];\n    if (options.position && !validPositions.includes(options.position)) {\n      throw new ComponentError(\n        `Invalid position: ${options.position}. Must be one of: ${validPositions.join(', ')}`,\n        'Drawer'\n      );\n    }\n\n    if (\n      options.animationDuration &&\n      (typeof options.animationDuration !== 'number' ||\n        options.animationDuration < 0)\n    ) {\n      throw new ComponentError(\n        'Animation duration must be a positive number',\n        'Drawer'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      Escape: () => !this.persistent && this.close(),\n      Tab: event => this.handleTabNavigation(event),\n      Enter: () => this.handleEnterKey(),\n      Space: () => this.handleSpaceKey(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'Drawer',\n          { context, originalError: error }\n        );\n\n        logger.error('Drawer Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'animation':\n        this.animationState.isAnimating = false;\n        AnimationManager.cancelAnimation(this);\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'dialog');\n    this.setAttribute('aria-modal', this.modal.toString());\n    this.setAttribute('aria-hidden', (!this.isOpen).toString());\n\n    if (this.title) {\n      this.setAttribute('aria-labelledby', `drawer-title-${this.id}`);\n    }\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n\n  setupTouchSupport() {\n    // Touch/swipe gestures for mobile\n    this.touchState = {\n      startX: 0,\n      startY: 0,\n      currentX: 0,\n      currentY: 0,\n      isDragging: false,\n    };\n\n    this.addEventListener('touchstart', this.handleTouchStart.bind(this));\n    this.addEventListener('touchmove', this.handleTouchMove.bind(this));\n    this.addEventListener('touchend', this.handleTouchEnd.bind(this));\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced drawer management with animations\n  async open() {\n    try {\n      if (this.isOpen || this.animationState.isAnimating || this.disabled)\n        return;\n\n      this.isOpen = true;\n      this.setAttribute('aria-hidden', 'false');\n\n      // Store previously focused element for restoration\n      if (this.restoreFocus && document.activeElement) {\n        this.previouslyFocusedElement = document.activeElement;\n      }\n\n      // Animate opening\n      if (!this.prefersReducedMotion()) {\n        await this.startAnimation('open');\n      } else {\n        this.animationState.progress = 1;\n      }\n\n      // Focus management\n      this.manageFocus();\n\n      this.announceChange(`${this.title || 'Drawer'} opened`);\n      this.emit('drawerOpened', { position: this.position });\n    } catch (error) {\n      this.errorHandler.handle(error, 'open');\n    }\n  }\n\n  async close() {\n    try {\n      if (!this.isOpen || this.animationState.isAnimating) return;\n\n      this.isOpen = false;\n      this.setAttribute('aria-hidden', 'true');\n\n      // Animate closing\n      if (!this.prefersReducedMotion()) {\n        await this.startAnimation('close');\n      } else {\n        this.animationState.progress = 0;\n      }\n\n      // Restore focus\n      if (this.restoreFocus && this.previouslyFocusedElement) {\n        this.previouslyFocusedElement.focus();\n        this.previouslyFocusedElement = null;\n      }\n\n      this.announceChange(`${this.title || 'Drawer'} closed`);\n      this.emit('drawerClosed', { position: this.position });\n    } catch (error) {\n      this.errorHandler.handle(error, 'close');\n    }\n  }\n\n  async toggle() {\n    if (this.isOpen) {\n      await this.close();\n    } else {\n      await this.open();\n    }\n  }\n\n  async startAnimation(type) {\n    this.animationState.isAnimating = true;\n    this.animationState.type = type;\n    this.animationState.startTime = performance.now();\n\n    return new Promise(resolve => {\n      const animate = () => {\n        const elapsed = performance.now() - this.animationState.startTime;\n        const progress = Math.min(elapsed / this.animationDuration, 1);\n        const easedProgress = this.easeOutCubic(progress);\n\n        if (type === 'open') {\n          this.animationState.progress = easedProgress;\n        } else {\n          this.animationState.progress = 1 - easedProgress;\n        }\n\n        this.clearRenderCache();\n\n        if (progress >= 1) {\n          this.animationState.isAnimating = false;\n          this.animationState.progress = this.isOpen ? 1 : 0;\n          resolve();\n        } else {\n          requestAnimationFrame(animate);\n        }\n      };\n\n      animate();\n    });\n  }\n\n  manageFocus() {\n    if (this.trapFocus && this.isOpen) {\n      // Focus the drawer itself or first focusable element\n      this.focus();\n    }\n  }\n\n  prefersReducedMotion() {\n    return (\n      window.matchMedia &&\n      window.matchMedia('(prefers-reduced-motion: reduce)').matches\n    );\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  easeOutCubic(t) {\n    return 1 - Math.pow(1 - t, INPUT_UTILITY_CONSTANTS.EASING_CUBIC_POWER);\n  }\n\n  getDrawerBounds() {\n    const { progress } = this.animationState;\n\n    switch (this.position) {\n      case 'left':\n        return {\n          x: -this.width + this.width * progress,\n          y: 0,\n          width: this.width,\n          height: this.height,\n        };\n      case 'right':\n        return {\n          x: this.width - this.width * progress,\n          y: 0,\n          width: this.width,\n          height: this.height,\n        };\n      case 'top':\n        return {\n          x: 0,\n          y: -this.height + this.height * progress,\n          width: this.width,\n          height: this.height,\n        };\n      case 'bottom':\n        return {\n          x: 0,\n          y: this.height - this.height * progress,\n          width: this.width,\n          height: this.height,\n        };\n      default:\n        return { x: 0, y: 0, width: this.width, height: this.height };\n    }\n  }\n\n  // Enhanced event handlers with accessibility\n  handleClick(event) {\n    if (this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n      const bounds = this.getDrawerBounds();\n\n      // Close button\n      if (\n        this.title &&\n        localY >= bounds.y &&\n        localY < bounds.y + INPUT_UTILITY_CONSTANTS.TOOLTIP_HEADER_HEIGHT &&\n        localX >=\n          bounds.x +\n            bounds.width -\n            INPUT_UTILITY_CONSTANTS.TOOLTIP_SHADOW_WIDTH &&\n        localX < bounds.x + bounds.width\n      ) {\n        this.close();\n        return;\n      }\n\n      // Click on overlay (if modal and not persistent)\n      if (this.modal && !this.persistent) {\n        const isInsideDrawer =\n          localX >= bounds.x &&\n          localX < bounds.x + bounds.width &&\n          localY >= bounds.y &&\n          localY < bounds.y + bounds.height;\n\n        if (!isInsideDrawer) {\n          this.close();\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'click-handler');\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    try {\n      const handler = this.keyboardHandler[event.key];\n      if (handler) {\n        event.preventDefault();\n        handler(event);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-handler');\n    }\n  }\n\n  handleTabNavigation(event) {\n    if (!this.trapFocus || !this.isOpen) return;\n\n    // Basic focus trap - can be enhanced with more sophisticated logic\n    const focusableElements = this.getFocusableElements();\n    if (focusableElements.length === 0) return;\n\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    if (event.shiftKey) {\n      if (document.activeElement === firstElement) {\n        event.preventDefault();\n        lastElement.focus();\n      }\n    } else {\n      if (document.activeElement === lastElement) {\n        event.preventDefault();\n        firstElement.focus();\n      }\n    }\n  }\n\n  handleEnterKey() {\n    // Can be overridden for specific drawer actions\n    this.emit('enterPressed');\n  }\n\n  handleSpaceKey() {\n    // Can be overridden for specific drawer actions\n    this.emit('spacePressed');\n  }\n\n  handleFocusIn() {\n    this.isFocused = true;\n    this.emit('focusIn');\n  }\n\n  handleFocusOut() {\n    this.isFocused = false;\n    this.emit('focusOut');\n  }\n\n  // Touch support for mobile\n  handleTouchStart(event) {\n    if (this.disabled || !this.isOpen) return;\n\n    const touch = event.touches[0];\n    this.touchState.startX = touch.clientX;\n    this.touchState.startY = touch.clientY;\n    this.touchState.currentX = touch.clientX;\n    this.touchState.currentY = touch.clientY;\n    this.touchState.isDragging = false;\n  }\n\n  handleTouchMove(event) {\n    if (this.disabled || !this.isOpen) return;\n\n    const touch = event.touches[0];\n    this.touchState.currentX = touch.clientX;\n    this.touchState.currentY = touch.clientY;\n\n    const deltaX = Math.abs(this.touchState.currentX - this.touchState.startX);\n    const deltaY = Math.abs(this.touchState.currentY - this.touchState.startY);\n\n    // Detect swipe gesture\n    if (deltaX > 10 || deltaY > 10) {\n      this.touchState.isDragging = true;\n    }\n  }\n\n  handleTouchEnd(_event) {\n    if (this.disabled || !this.isOpen || !this.touchState.isDragging) return;\n\n    const deltaX = this.touchState.currentX - this.touchState.startX;\n    const deltaY = this.touchState.currentY - this.touchState.startY;\n    const threshold = 50;\n\n    // Check for swipe to close based on drawer position\n    let shouldClose = false;\n    switch (this.position) {\n      case 'left':\n        shouldClose = deltaX < -threshold;\n        break;\n      case 'right':\n        shouldClose = deltaX > threshold;\n        break;\n      case 'top':\n        shouldClose = deltaY < -threshold;\n        break;\n      case 'bottom':\n        shouldClose = deltaY > threshold;\n        break;\n    }\n\n    if (shouldClose && !this.persistent) {\n      this.close();\n    }\n\n    this.touchState.isDragging = false;\n  }\n\n  getFocusableElements() {\n    const selectors = [\n      'button',\n      '[href]',\n      'input',\n      'select',\n      'textarea',\n      '[tabindex]:not([tabindex=\"-1\"])',\n    ];\n\n    return Array.from(\n      this.element?.querySelectorAll(selectors.join(',')) || []\n    ).filter(el => !el.disabled && el.offsetParent !== null);\n  }\n\n  // Enhanced rendering with theme support\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n    if (this.animationState.progress <= 0) return;\n\n    try {\n      this.performanceMonitor.startMeasurement('render');\n\n      // Render overlay if modal\n      if (this.modal) {\n        this.renderOverlay(renderer);\n      }\n\n      // Render drawer\n      this.renderDrawer(renderer);\n\n      this.performanceMonitor.endMeasurement('render');\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderOverlay(renderer) {\n    const alpha =\n      this.animationState.progress *\n      INPUT_UTILITY_CONSTANTS.TOOLTIP_ANIMATION_ALPHA;\n    const overlayColor = ComponentTheme.getColor('overlay', this.theme);\n\n    // Parse overlay color or use default\n    let baseColor = 'rgba(0, 0, 0, 0.5)';\n    if (overlayColor.startsWith('rgba')) {\n      const rgbaMatch = overlayColor.match(/rgba\\(([^)]+)\\)/);\n      if (rgbaMatch) {\n        const parts = rgbaMatch[1].split(',');\n        if (parts.length >= INPUT_UTILITY_CONSTANTS.CONTENT_PARTS_RGB) {\n          baseColor = `rgba(${parts[0]}, ${parts[1]}, ${parts[2]}, ${alpha})`;\n        }\n      }\n    } else if (overlayColor.startsWith('rgb')) {\n      const rgbMatch = overlayColor.match(/rgb\\(([^)]+)\\)/);\n      if (rgbMatch) {\n        baseColor = `rgba(${rgbMatch[1]}, ${alpha})`;\n      }\n    } else {\n      // Hex or named color - convert to rgba\n      baseColor = `rgba(0, 0, 0, ${alpha})`;\n    }\n\n    renderer.fillStyle = baseColor;\n    renderer.fillRect(0, 0, this.width * 2, this.height * 2); // Cover entire viewport\n  }\n\n  renderDrawer(renderer) {\n    const bounds = this.getDrawerBounds();\n\n    // Enhanced shadow with theme support\n    const shadowColor =\n      ComponentTheme.getColor('shadow', this.theme) || 'rgba(0, 0, 0, 0.15)';\n    renderer.shadowColor = shadowColor;\n    renderer.shadowBlur = 12;\n    renderer.shadowOffsetX =\n      this.position === 'left'\n        ? INPUT_UTILITY_CONSTANTS.TOOLTIP_OFFSET_DISTANCE\n        : this.position === 'right'\n          ? -INPUT_UTILITY_CONSTANTS.TOOLTIP_OFFSET_DISTANCE\n          : 0;\n    renderer.shadowOffsetY =\n      this.position === 'top'\n        ? INPUT_UTILITY_CONSTANTS.TOOLTIP_OFFSET_DISTANCE\n        : this.position === 'bottom'\n          ? -INPUT_UTILITY_CONSTANTS.TOOLTIP_OFFSET_DISTANCE\n          : 0;\n\n    // Drawer background with theme support\n    renderer.fillStyle = ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n    // Reset shadow\n    renderer.shadowColor = 'transparent';\n    renderer.shadowBlur = 0;\n    renderer.shadowOffsetX = 0;\n    renderer.shadowOffsetY = 0;\n\n    // Drawer border with theme support\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n    // Header\n    if (this.title) {\n      this.renderHeader(renderer, bounds);\n    }\n\n    // Content\n    this.renderContent(renderer, bounds);\n\n    // Focus indicator\n    if (this.isFocused) {\n      this.renderFocusIndicator(renderer, bounds);\n    }\n  }\n\n  renderHeader(renderer, bounds) {\n    const headerHeight = 50;\n\n    // Header background with theme support\n    renderer.fillStyle = ComponentTheme.getColor(\n      'backgroundSecondary',\n      this.theme\n    );\n    renderer.fillRect(bounds.x, bounds.y, bounds.width, headerHeight);\n\n    // Header border with theme support\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(bounds.x, bounds.y + headerHeight);\n    renderer.lineTo(bounds.x + bounds.width, bounds.y + headerHeight);\n    renderer.stroke();\n\n    // Title with theme support and truncation\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.font = 'bold 16px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    const maxTitleWidth =\n      bounds.width - INPUT_UTILITY_CONSTANTS.TOOLTIP_SHADOW_OFFSET; // Account for close button\n    const truncatedTitle = this.truncateText(\n      renderer,\n      this.title,\n      maxTitleWidth\n    );\n    renderer.fillText(\n      truncatedTitle,\n      bounds.x + INPUT_UTILITY_CONSTANTS.TOOLTIP_PADDING,\n      bounds.y + headerHeight / 2\n    );\n\n    // Enhanced close button with hover state\n    const closeButtonX =\n      bounds.x + bounds.width - INPUT_UTILITY_CONSTANTS.CLOSE_BUTTON_SIZE;\n    const closeButtonY = bounds.y + headerHeight / 2;\n\n    // Close button background (optional hover effect)\n    if (this.isCloseButtonHovered) {\n      renderer.fillStyle = ComponentTheme.getColor('dangerHover', this.theme);\n      renderer.beginPath();\n      renderer.arc(\n        closeButtonX,\n        closeButtonY,\n        INPUT_UTILITY_CONSTANTS.CLOSE_BUTTON_RADIUS,\n        0,\n        Math.PI * 2\n      );\n      renderer.fill();\n    }\n\n    // Close button icon\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '18px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText('×', closeButtonX, closeButtonY);\n  }\n\n  renderContent(renderer, bounds) {\n    const contentY =\n      bounds.y +\n      (this.title ? INPUT_UTILITY_CONSTANTS.TOOLTIP_HEADER_HEIGHT : 0);\n    const contentHeight =\n      bounds.height -\n      (this.title ? INPUT_UTILITY_CONSTANTS.TOOLTIP_HEADER_HEIGHT : 0);\n    const padding = INPUT_UTILITY_CONSTANTS.TOOLTIP_PADDING;\n\n    // Content area with theme support\n    renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'top';\n\n    // Enhanced content rendering with line wrapping\n    const lines = this.content.split('\\n');\n    const maxWidth = bounds.width - padding * 2;\n    let currentY = contentY + padding;\n\n    lines.forEach(line => {\n      const wrappedLines = this.wrapText(renderer, line, maxWidth);\n      wrappedLines.forEach(wrappedLine => {\n        if (\n          currentY + INPUT_UTILITY_CONSTANTS.TOOLTIP_CONTENT_LINE_HEIGHT <=\n          contentY + contentHeight - padding\n        ) {\n          renderer.fillText(wrappedLine, bounds.x + padding, currentY);\n          currentY += INPUT_UTILITY_CONSTANTS.TOOLTIP_CONTENT_LINE_HEIGHT;\n        }\n      });\n    });\n  }\n\n  renderFocusIndicator(renderer, bounds) {\n    renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n    renderer.lineWidth = 2;\n    renderer.setLineDash([\n      INPUT_UTILITY_CONSTANTS.TOOLTIP_BORDER_DASH,\n      INPUT_UTILITY_CONSTANTS.TOOLTIP_BORDER_DASH,\n    ]);\n    renderer.strokeRect(\n      bounds.x + INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      bounds.y + INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      bounds.width - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER,\n      bounds.height - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER\n    );\n    renderer.setLineDash([]);\n  }\n\n  wrapText(renderer, text, maxWidth) {\n    const words = text.split(' ');\n    const lines = [];\n    let currentLine = '';\n\n    for (const word of words) {\n      const testLine = currentLine + (currentLine ? ' ' : '') + word;\n      const metrics = renderer.measureText(testLine);\n\n      if (metrics.width > maxWidth && currentLine) {\n        lines.push(currentLine);\n        currentLine = word;\n      } else {\n        currentLine = testLine;\n      }\n    }\n\n    if (currentLine) {\n      lines.push(currentLine);\n    }\n\n    return lines.length ? lines : [''];\n  }\n\n  truncateText(renderer, text, maxWidth) {\n    const metrics = renderer.measureText(text);\n    if (metrics.width <= maxWidth) {\n      return text;\n    }\n\n    const ellipsis = '...';\n\n    let truncated = text;\n    while (\n      renderer.measureText(truncated + ellipsis).width > maxWidth &&\n      truncated.length > 0\n    ) {\n      truncated = truncated.slice(0, -1);\n    }\n\n    return truncated + ellipsis;\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Public API with enhanced error handling\n  setTitle(title) {\n    this.title = title;\n    if (this.title) {\n      this.setAttribute('aria-labelledby', `drawer-title-${this.id}`);\n    }\n    this.clearRenderCache();\n    this.emit('titleChanged', { title });\n  }\n\n  setContent(content) {\n    this.content = content;\n    this.clearRenderCache();\n    this.emit('contentChanged', { content });\n  }\n\n  setPosition(position) {\n    const validPositions = ['left', 'right', 'top', 'bottom'];\n    if (!validPositions.includes(position)) {\n      throw new ComponentError(`Invalid position: ${position}`, 'Drawer');\n    }\n\n    this.position = position;\n    this.clearRenderCache();\n    this.emit('positionChanged', { position });\n  }\n\n  enable() {\n    this.disabled = false;\n    this.setAttribute('tabindex', '0');\n    this.clearRenderCache();\n    this.emit('enabled');\n  }\n\n  disable() {\n    this.disabled = true;\n    this.setAttribute('tabindex', '-1');\n    this.close();\n    this.clearRenderCache();\n    this.emit('disabled');\n  }\n\n  reset() {\n    this.isOpen = false;\n    this.animationState = {\n      isAnimating: false,\n      progress: 0,\n      type: null,\n      startTime: 0,\n    };\n    this.setAttribute('aria-hidden', 'true');\n    this.clearRenderCache();\n    this.emit('reset');\n  }\n\n  // Cleanup and memory management\n  destroy() {\n    try {\n      // Cancel any active animations\n      AnimationManager.cancelAnimation(this);\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Restore focus if needed\n      if (this.restoreFocus && this.previouslyFocusedElement) {\n        this.previouslyFocusedElement.focus();\n        this.previouslyFocusedElement = null;\n      }\n\n      // Clear caches\n      this.clearRenderCache();\n\n      // Clear timers\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n      }\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      logger.error('Error during Drawer cleanup:', error);\n    }\n  }\n}\n\n// =============================================================================\n// MODERN SEARCH BOX COMPONENT\n// =============================================================================\n\n/**\n * Advanced SearchBox component with accessibility, autocomplete,\n * theme support, and modern interaction patterns.\n */\nclass SearchBox extends BaseObject {\n  constructor(options = {}) {\n    super({\n      ...options,\n      width: options.width || INPUT_UTILITY_CONSTANTS.SEARCHBOX_DEFAULT_WIDTH,\n      height:\n        options.height || INPUT_UTILITY_CONSTANTS.SEARCHBOX_DEFAULT_HEIGHT,\n      ariaRole: 'searchbox',\n      ariaLabel: options.ariaLabel || 'Search',\n    });\n\n    // Validate options\n    this.validateOptions(options);\n\n    // Core properties\n    this.value = options.value || '';\n    this.placeholder = options.placeholder || 'Search...';\n    this.disabled = options.disabled || false;\n    this.showClearButton = options.showClearButton !== false;\n    this.showSearchButton = options.showSearchButton !== false;\n    this.debounceDelay =\n      options.debounceDelay || INPUT_UTILITY_CONSTANTS.SEARCHBOX_DEBOUNCE_DELAY;\n\n    // Search behavior\n    this.searchOnType = options.searchOnType !== false;\n    this.minSearchLength = options.minSearchLength || 1;\n    this.suggestions = options.suggestions || [];\n    this.showSuggestions = options.showSuggestions !== false;\n    this.maxSuggestions =\n      options.maxSuggestions ||\n      INPUT_UTILITY_CONSTANTS.SEARCHBOX_MAX_SUGGESTIONS;\n    this.caseSensitive = options.caseSensitive || false;\n    this.highlightMatches = options.highlightMatches !== false;\n\n    // Theme integration\n    this.theme = options.theme || ComponentTheme.getCurrentTheme();\n\n    // State management\n    this.isFocused = false;\n    this.showingSuggestions = false;\n    this.filteredSuggestions = [];\n    this.selectedSuggestionIndex = -1;\n    this.debounceTimer = null;\n    this.searchHistory = [];\n    this.maxHistoryLength = options.maxHistoryLength || 10;\n\n    // Animation and performance\n    this.animationState = { suggestionProgress: 0 };\n    this.renderCache = new Map();\n    this.throttledRender = this.throttle(\n      this.render.bind(this),\n      PERFORMANCE_THRESHOLDS.eventThrottle\n    );\n\n    // Accessibility\n    this.announcer = this.createScreenReaderAnnouncer();\n    this.keyboardHandler = this.createKeyboardHandler();\n\n    // Error handling\n    this.errorHandler = this.createErrorHandler();\n\n    // Performance monitoring\n    this.performanceMonitor = PerformanceMonitor.createInstance('SearchBox');\n\n    try {\n      this.setupEventHandlers();\n      this.setupAccessibility();\n      this.setupResizeObserver();\n    } catch (error) {\n      this.errorHandler.handle(error, 'constructor');\n    }\n  }\n\n  validateOptions(options) {\n    if (\n      options.debounceDelay &&\n      (typeof options.debounceDelay !== 'number' || options.debounceDelay < 0)\n    ) {\n      throw new ComponentError(\n        'Debounce delay must be a positive number',\n        'SearchBox'\n      );\n    }\n\n    if (\n      options.minSearchLength &&\n      (typeof options.minSearchLength !== 'number' ||\n        options.minSearchLength < 0)\n    ) {\n      throw new ComponentError(\n        'Minimum search length must be a positive number',\n        'SearchBox'\n      );\n    }\n\n    if (\n      options.maxSuggestions &&\n      (typeof options.maxSuggestions !== 'number' || options.maxSuggestions < 1)\n    ) {\n      throw new ComponentError(\n        'Maximum suggestions must be a positive number',\n        'SearchBox'\n      );\n    }\n  }\n\n  createScreenReaderAnnouncer() {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', 'polite');\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.style.cssText = `\n            position: absolute;\n            left: -10000px;\n            width: 1px;\n            height: 1px;\n            overflow: hidden;\n        `;\n    document.body.appendChild(announcer);\n    return announcer;\n  }\n\n  createKeyboardHandler() {\n    return {\n      Enter: () => this.handleEnterKey(),\n      Escape: () => this.handleEscapeKey(),\n      ArrowDown: () => this.navigateSuggestions(1),\n      ArrowUp: () => this.navigateSuggestions(-1),\n      Tab: event => this.handleTabKey(event),\n      Backspace: () => this.handleBackspace(),\n      Delete: () => this.handleDelete(),\n    };\n  }\n\n  createErrorHandler() {\n    return {\n      handle: (error, context) => {\n        const componentError = new ComponentError(\n          error.message || 'Unknown error',\n          'SearchBox',\n          { context, originalError: error }\n        );\n\n        logger.error('SearchBox Error:', componentError);\n        this.emit('error', componentError);\n\n        this.recoverFromError(context);\n      },\n    };\n  }\n\n  recoverFromError(context) {\n    switch (context) {\n      case 'search':\n        this.clearSuggestions();\n        break;\n      case 'render':\n        this.clearRenderCache();\n        break;\n      default:\n        this.reset();\n    }\n  }\n\n  setupAccessibility() {\n    // ARIA attributes\n    this.setAttribute('role', 'searchbox');\n    this.setAttribute('aria-autocomplete', 'list');\n    this.setAttribute('aria-expanded', 'false');\n    this.setAttribute('aria-haspopup', 'listbox');\n\n    // Keyboard accessibility\n    this.setAttribute('tabindex', this.disabled ? '-1' : '0');\n\n    // Focus management\n    this.addEventListener('focusin', () => this.handleFocusIn());\n    this.addEventListener('focusout', () => this.handleFocusOut());\n  }\n\n  setupResizeObserver() {\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver(_entries => {\n        this.clearRenderCache();\n        this.throttledRender();\n      });\n\n      if (this.element) {\n        this.resizeObserver.observe(this.element);\n      }\n    }\n  }\n\n  setupEventHandlers() {\n    const eventHandlers = {\n      click: this.handleClick.bind(this),\n      keyDown: this.handleKeyDown.bind(this),\n      keyUp: this.handleKeyUp.bind(this),\n      focus: this.handleFocus.bind(this),\n      blur: this.handleBlur.bind(this),\n    };\n\n    Object.entries(eventHandlers).forEach(([event, handler]) => {\n      this.on(event, handler);\n    });\n  }\n\n  // Enhanced search functionality\n  async setValue(value) {\n    try {\n      const oldValue = this.value;\n      this.value = String(value || '');\n\n      if (oldValue !== this.value) {\n        this.clearRenderCache();\n        this.updateSuggestions();\n        this.emit('valueChanged', { value: this.value, oldValue });\n\n        if (this.searchOnType) {\n          this.debouncedSearch();\n        }\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'setValue');\n    }\n  }\n\n  updateSuggestions() {\n    try {\n      if (!this.showSuggestions || this.value.length < this.minSearchLength) {\n        this.clearSuggestions();\n        return;\n      }\n\n      const query = this.caseSensitive ? this.value : this.value.toLowerCase();\n\n      // Filter suggestions based on current value\n      this.filteredSuggestions = this.suggestions\n        .filter(suggestion => {\n          const suggestionText = this.caseSensitive\n            ? suggestion\n            : suggestion.toLowerCase();\n          return suggestionText.includes(query);\n        })\n        .slice(0, this.maxSuggestions);\n\n      // Add search history if enabled\n      if (this.searchHistory.length > 0 && query.length > 0) {\n        const historyMatches = this.searchHistory\n          .filter(item => {\n            const itemText = this.caseSensitive ? item : item.toLowerCase();\n            return (\n              itemText.includes(query) &&\n              !this.filteredSuggestions.includes(item)\n            );\n          })\n          .slice(\n            0,\n            Math.max(0, this.maxSuggestions - this.filteredSuggestions.length)\n          );\n\n        this.filteredSuggestions = [\n          ...this.filteredSuggestions,\n          ...historyMatches,\n        ];\n      }\n\n      this.showingSuggestions = this.filteredSuggestions.length > 0;\n      this.selectedSuggestionIndex = -1;\n\n      // Update ARIA attributes\n      this.setAttribute('aria-expanded', this.showingSuggestions.toString());\n\n      if (this.showingSuggestions) {\n        this.announceChange(\n          `${this.filteredSuggestions.length} suggestions available`\n        );\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'updateSuggestions');\n    }\n  }\n\n  clearSuggestions() {\n    this.filteredSuggestions = [];\n    this.showingSuggestions = false;\n    this.selectedSuggestionIndex = -1;\n    this.setAttribute('aria-expanded', 'false');\n  }\n\n  debouncedSearch() {\n    clearTimeout(this.debounceTimer);\n    this.debounceTimer = setTimeout(() => {\n      this.performSearch();\n    }, this.debounceDelay);\n  }\n\n  async performSearch() {\n    try {\n      if (this.value.length >= this.minSearchLength) {\n        // Add to search history\n        this.addToHistory(this.value);\n\n        this.emit('search', {\n          query: this.value,\n          timestamp: new Date().toISOString(),\n        });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'performSearch');\n    }\n  }\n\n  addToHistory(query) {\n    if (!query || this.searchHistory.includes(query)) return;\n\n    this.searchHistory.unshift(query);\n    if (this.searchHistory.length > this.maxHistoryLength) {\n      this.searchHistory = this.searchHistory.slice(0, this.maxHistoryLength);\n    }\n\n    this.emit('historyUpdated', { history: this.searchHistory });\n  }\n\n  selectSuggestion(index) {\n    try {\n      if (index >= 0 && index < this.filteredSuggestions.length) {\n        const selectedValue = this.filteredSuggestions[index];\n        this.setValue(selectedValue);\n        this.clearSuggestions();\n        this.performSearch();\n\n        this.announceChange(`Selected: ${selectedValue}`);\n        this.emit('suggestionSelected', { value: selectedValue, index });\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'selectSuggestion');\n    }\n  }\n\n  navigateSuggestions(direction) {\n    if (!this.showingSuggestions || this.filteredSuggestions.length === 0)\n      return;\n\n    const maxIndex = this.filteredSuggestions.length - 1;\n    let newIndex = this.selectedSuggestionIndex + direction;\n\n    // Wrap around navigation\n    if (newIndex < -1) {\n      newIndex = maxIndex;\n    } else if (newIndex > maxIndex) {\n      newIndex = -1;\n    }\n\n    this.selectedSuggestionIndex = newIndex;\n\n    // Announce current selection\n    if (newIndex >= 0) {\n      const suggestion = this.filteredSuggestions[newIndex];\n      this.announceChange(\n        `${newIndex + 1} of ${this.filteredSuggestions.length}: ${suggestion}`\n      );\n    } else {\n      this.announceChange('Back to search input');\n    }\n\n    this.clearRenderCache();\n  }\n\n  clear() {\n    this.setValue('');\n    this.clearSuggestions();\n    this.emit('cleared');\n  }\n\n  announceChange(message) {\n    if (this.announcer) {\n      this.announcer.textContent = message;\n    }\n  }\n\n  // Enhanced event handlers with accessibility\n  handleClick(event) {\n    if (this.disabled) return;\n\n    try {\n      const { localX, localY } = event;\n\n      // Clear button\n      if (\n        this.showClearButton &&\n        this.value &&\n        localX >=\n          this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_CLEAR_BUTTON_WIDTH &&\n        localX <\n          this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_CLEAR_BUTTON_OFFSET\n      ) {\n        this.clear();\n        return;\n      }\n\n      // Search button\n      if (\n        this.showSearchButton &&\n        localX >=\n          this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_SEARCH_BUTTON_WIDTH\n      ) {\n        this.performSearch();\n        return;\n      }\n\n      // Suggestion selection\n      if (this.showingSuggestions && localY > this.height) {\n        const suggestionIndex = Math.floor(\n          (localY - this.height) /\n            INPUT_UTILITY_CONSTANTS.SEARCHBOX_SUGGESTION_HEIGHT\n        );\n        if (\n          suggestionIndex >= 0 &&\n          suggestionIndex < this.filteredSuggestions.length\n        ) {\n          this.selectSuggestion(suggestionIndex);\n        }\n        return;\n      }\n\n      // Focus the input\n      this.focus();\n    } catch (error) {\n      this.errorHandler.handle(error, 'click-handler');\n    }\n  }\n\n  handleKeyDown(event) {\n    if (this.disabled) return;\n\n    try {\n      const handler = this.keyboardHandler[event.key];\n      if (handler) {\n        event.preventDefault();\n        handler(event);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyboard-handler');\n    }\n  }\n\n  handleKeyUp(event) {\n    if (this.disabled) return;\n\n    try {\n      // Handle regular character input\n      if (\n        event.key.length === 1 &&\n        !event.ctrlKey &&\n        !event.altKey &&\n        !event.metaKey\n      ) {\n        this.setValue(this.value + event.key);\n      }\n    } catch (error) {\n      this.errorHandler.handle(error, 'keyup-handler');\n    }\n  }\n\n  handleEnterKey() {\n    if (this.selectedSuggestionIndex >= 0) {\n      this.selectSuggestion(this.selectedSuggestionIndex);\n    } else {\n      this.performSearch();\n    }\n  }\n\n  handleEscapeKey() {\n    if (this.showingSuggestions) {\n      this.clearSuggestions();\n    } else {\n      this.clear();\n    }\n  }\n\n  handleTabKey(event) {\n    if (this.showingSuggestions && this.selectedSuggestionIndex >= 0) {\n      event.preventDefault();\n      this.selectSuggestion(this.selectedSuggestionIndex);\n    }\n  }\n\n  handleBackspace() {\n    if (this.value.length > 0) {\n      this.setValue(this.value.slice(0, -1));\n    }\n  }\n\n  handleDelete() {\n    // For now, same as backspace - could be enhanced for cursor position\n    this.handleBackspace();\n  }\n\n  handleFocus() {\n    this.isFocused = true;\n    this.updateSuggestions();\n    this.emit('focus');\n  }\n\n  handleBlur() {\n    // Delay hiding suggestions to allow for clicks\n    setTimeout(() => {\n      this.isFocused = false;\n      this.clearSuggestions();\n      this.emit('blur');\n    }, INPUT_UTILITY_CONSTANTS.SEARCHBOX_SUGGESTION_ANIMATION_DELAY);\n  }\n\n  handleFocusIn() {\n    this.isFocused = true;\n    this.clearRenderCache();\n  }\n\n  handleFocusOut() {\n    this.isFocused = false;\n    this.clearRenderCache();\n  }\n\n  // Enhanced rendering with theme support\n  renderSelf(renderer) {\n    if (renderer.type !== 'canvas') return;\n\n    try {\n      this.performanceMonitor.startMeasurement('render');\n\n      this.renderInputField(renderer);\n\n      if (this.showingSuggestions) {\n        this.renderSuggestions(renderer);\n      }\n\n      this.performanceMonitor.endMeasurement('render');\n    } catch (error) {\n      this.errorHandler.handle(error, 'render');\n    }\n  }\n\n  renderInputField(renderer) {\n    // Background with theme support\n    const bgColor = this.disabled\n      ? ComponentTheme.getColor('backgroundDisabled', this.theme)\n      : ComponentTheme.getColor('background', this.theme);\n\n    renderer.fillStyle = bgColor;\n    renderer.fillRect(0, 0, this.width, this.height);\n\n    // Border with theme support and focus state\n    const borderColor = this.isFocused\n      ? ComponentTheme.getColor('focus', this.theme)\n      : ComponentTheme.getColor('border', this.theme);\n\n    renderer.strokeStyle = borderColor;\n    renderer.lineWidth = this.isFocused ? 2 : 1;\n    renderer.strokeRect(0, 0, this.width, this.height);\n\n    // Search icon\n    this.renderSearchIcon(renderer);\n\n    // Text content\n    this.renderTextContent(renderer);\n\n    // Clear button\n    if (this.showClearButton && this.value) {\n      this.renderClearButton(renderer);\n    }\n\n    // Search button\n    if (this.showSearchButton) {\n      this.renderSearchButton(renderer);\n    }\n\n    // Focus indicator for screen readers\n    if (this.isFocused) {\n      this.renderFocusIndicator(renderer);\n    }\n\n    // Cursor\n    if (this.isFocused && !this.showingSuggestions) {\n      this.renderCursor(renderer);\n    }\n  }\n\n  renderSearchIcon(renderer) {\n    const iconX = 12;\n    const iconY = this.height / 2;\n\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '16px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText('🔍', iconX, iconY);\n  }\n\n  renderTextContent(renderer) {\n    const displayText = this.value || this.placeholder;\n    const isPlaceholder = !this.value;\n    const textColor = this.disabled\n      ? ComponentTheme.getColor('disabled', this.theme)\n      : isPlaceholder\n        ? ComponentTheme.getColor('textSecondary', this.theme)\n        : ComponentTheme.getColor('text', this.theme);\n\n    renderer.fillStyle = textColor;\n    renderer.font = isPlaceholder ? 'italic 14px Arial' : '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    const textX = 30; // Account for search icon\n    const maxTextWidth =\n      this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_BUTTON_SPACING; // Account for buttons and padding\n    const truncatedText = this.truncateText(\n      renderer,\n      displayText,\n      maxTextWidth\n    );\n\n    renderer.fillText(truncatedText, textX, this.height / 2);\n  }\n\n  renderClearButton(renderer) {\n    const buttonX =\n      this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_BUTTON_POSITION;\n    const buttonY = this.height / 2;\n    const buttonRadius = 8;\n\n    // Button background (hover effect)\n    if (this.isClearButtonHovered) {\n      renderer.fillStyle = ComponentTheme.getColor('dangerHover', this.theme);\n      renderer.beginPath();\n      renderer.arc(buttonX, buttonY, buttonRadius, 0, Math.PI * 2);\n      renderer.fill();\n    }\n\n    // Clear icon\n    renderer.fillStyle = ComponentTheme.getColor('textSecondary', this.theme);\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText('×', buttonX, buttonY);\n  }\n\n  renderSearchButton(renderer) {\n    const buttonWidth = 35;\n    const buttonHeight =\n      this.height - INPUT_UTILITY_CONSTANTS.SEARCHBOX_BUTTON_HEIGHT_OFFSET;\n    const buttonX = this.width - buttonWidth - 2;\n    const buttonY = 2;\n\n    // Button background\n    renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n    renderer.fillRect(buttonX, buttonY, buttonWidth, buttonHeight);\n\n    // Button text\n    renderer.fillStyle = ComponentTheme.getColor('primaryText', this.theme);\n    renderer.font = '12px Arial';\n    renderer.textAlign = 'center';\n    renderer.textBaseline = 'middle';\n    renderer.fillText(\n      'Go',\n      buttonX + buttonWidth / 2,\n      buttonY + buttonHeight / 2\n    );\n\n    // Button border\n    renderer.strokeStyle = ComponentTheme.getColor('primaryBorder', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(buttonX, buttonY, buttonWidth, buttonHeight);\n  }\n\n  renderFocusIndicator(renderer) {\n    renderer.strokeStyle = ComponentTheme.getColor('focus', this.theme);\n    renderer.lineWidth = 2;\n    renderer.setLineDash([2, 2]);\n    renderer.strokeRect(\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_OFFSET,\n      this.width - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER,\n      this.height - INPUT_UTILITY_CONSTANTS.FOCUS_INDICATOR_BORDER\n    );\n    renderer.setLineDash([]);\n  }\n\n  renderCursor(renderer) {\n    const textWidth = renderer.measureText(this.value).width;\n    const cursorX =\n      INPUT_UTILITY_CONSTANTS.SEARCHBOX_SEARCH_ICON_OFFSET + textWidth; // Account for search icon\n\n    // Animated cursor\n    const time = Date.now();\n    const opacity =\n      Math.sin(\n        time * INPUT_UTILITY_CONSTANTS.SEARCHBOX_CURSOR_BLINK_FREQUENCY\n      ) *\n        INPUT_UTILITY_CONSTANTS.SEARCHBOX_CURSOR_OPACITY_FACTOR +\n      INPUT_UTILITY_CONSTANTS.SEARCHBOX_CURSOR_OPACITY_BASE;\n\n    renderer.strokeStyle = `rgba(${this.theme === 'dark' ? '255,255,255' : '0,0,0'}, ${opacity})`;\n    renderer.lineWidth = 1;\n    renderer.beginPath();\n    renderer.moveTo(cursorX, INPUT_UTILITY_CONSTANTS.SEARCHBOX_CURSOR_MARGIN);\n    renderer.lineTo(\n      cursorX,\n      this.height - INPUT_UTILITY_CONSTANTS.SEARCHBOX_CURSOR_MARGIN\n    );\n    renderer.stroke();\n  }\n\n  renderSuggestions(renderer) {\n    const startY = this.height;\n    const suggestionHeight = 30;\n    const totalHeight = this.filteredSuggestions.length * suggestionHeight;\n\n    // Suggestions container background\n    renderer.fillStyle = ComponentTheme.getColor('background', this.theme);\n    renderer.fillRect(0, startY, this.width, totalHeight);\n\n    // Suggestions container border\n    renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n    renderer.lineWidth = 1;\n    renderer.strokeRect(0, startY, this.width, totalHeight);\n\n    // Individual suggestions\n    this.filteredSuggestions.forEach((suggestion, index) => {\n      this.renderSuggestion(\n        renderer,\n        suggestion,\n        index,\n        startY + index * suggestionHeight,\n        suggestionHeight\n      );\n    });\n  }\n\n  renderSuggestion(renderer, suggestion, index, y, height) {\n    const isSelected = index === this.selectedSuggestionIndex;\n\n    // Highlight selected suggestion\n    if (isSelected) {\n      renderer.fillStyle = ComponentTheme.getColor('primaryHover', this.theme);\n      renderer.fillRect(0, y, this.width, height);\n    }\n\n    // Suggestion text with highlighting\n    if (this.highlightMatches && this.value) {\n      this.renderHighlightedText(\n        renderer,\n        suggestion,\n        this.value,\n        INPUT_UTILITY_CONSTANTS.SEARCHBOX_SUGGESTION_ICON_OFFSET,\n        y + height / 2\n      );\n    } else {\n      renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n      renderer.font = '14px Arial';\n      renderer.textAlign = 'left';\n      renderer.textBaseline = 'middle';\n\n      const maxWidth = this.width - INPUT_UTILITY_CONSTANTS.ACCORDION_PADDING;\n      const truncatedSuggestion = this.truncateText(\n        renderer,\n        suggestion,\n        maxWidth\n      );\n      renderer.fillText(\n        truncatedSuggestion,\n        INPUT_UTILITY_CONSTANTS.ACCORDION_ICON_MARGIN,\n        y + height / 2\n      );\n    }\n\n    // Selection indicator\n    if (isSelected) {\n      renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n      renderer.font = '12px Arial';\n      renderer.textAlign = 'right';\n      renderer.textBaseline = 'middle';\n      renderer.fillText(\n        '↩',\n        this.width - INPUT_UTILITY_CONSTANTS.SEARCHBOX_SUGGESTION_ICON_OFFSET,\n        y + height / 2\n      );\n    }\n\n    // Separator line\n    if (index < this.filteredSuggestions.length - 1) {\n      renderer.strokeStyle = ComponentTheme.getColor('border', this.theme);\n      renderer.lineWidth = 1;\n      renderer.beginPath();\n      renderer.moveTo(0, y + height);\n      renderer.lineTo(this.width, y + height);\n      renderer.stroke();\n    }\n  }\n\n  renderHighlightedText(renderer, text, query, x, y) {\n    const caseSensitiveText = this.caseSensitive ? text : text.toLowerCase();\n    const caseSensitiveQuery = this.caseSensitive ? query : query.toLowerCase();\n    const matchIndex = caseSensitiveText.indexOf(caseSensitiveQuery);\n\n    renderer.font = '14px Arial';\n    renderer.textAlign = 'left';\n    renderer.textBaseline = 'middle';\n\n    if (matchIndex === -1) {\n      // No match, render normally\n      renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n      renderer.fillText(text, x, y);\n    } else {\n      // Render with highlighting\n      const beforeMatch = text.slice(0, matchIndex);\n      const match = text.slice(matchIndex, matchIndex + query.length);\n      const afterMatch = text.slice(matchIndex + query.length);\n\n      let currentX = x;\n\n      // Before match\n      if (beforeMatch) {\n        renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n        renderer.fillText(beforeMatch, currentX, y);\n        currentX += renderer.measureText(beforeMatch).width;\n      }\n\n      // Highlighted match\n      if (match) {\n        renderer.fillStyle = ComponentTheme.getColor('primaryText', this.theme);\n        const matchWidth = renderer.measureText(match).width;\n\n        // Highlight background\n        renderer.fillStyle = ComponentTheme.getColor('primary', this.theme);\n        renderer.fillRect(\n          currentX,\n          y - INPUT_UTILITY_CONSTANTS.SEARCHBOX_HIGHLIGHT_Y_OFFSET,\n          matchWidth,\n          INPUT_UTILITY_CONSTANTS.SEARCHBOX_HIGHLIGHT_HEIGHT\n        );\n\n        // Match text\n        renderer.fillStyle = ComponentTheme.getColor('primaryText', this.theme);\n        renderer.fillText(match, currentX, y);\n        currentX += matchWidth;\n      }\n\n      // After match\n      if (afterMatch) {\n        renderer.fillStyle = ComponentTheme.getColor('text', this.theme);\n        renderer.fillText(afterMatch, currentX, y);\n      }\n    }\n  }\n\n  truncateText(renderer, text, maxWidth) {\n    const metrics = renderer.measureText(text);\n    if (metrics.width <= maxWidth) {\n      return text;\n    }\n\n    const ellipsis = '...';\n\n    let truncated = text;\n    while (\n      renderer.measureText(truncated + ellipsis).width > maxWidth &&\n      truncated.length > 0\n    ) {\n      truncated = truncated.slice(0, -1);\n    }\n\n    return truncated + ellipsis;\n  }\n\n  // Performance optimization methods\n  clearRenderCache() {\n    this.renderCache.clear();\n  }\n\n  throttle(func, limit) {\n    let inThrottle;\n    return function (...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  // Public API with enhanced error handling\n  getSuggestions() {\n    return [...this.suggestions];\n  }\n\n  setSuggestions(suggestions) {\n    if (!Array.isArray(suggestions)) {\n      throw new ComponentError('Suggestions must be an array', 'SearchBox');\n    }\n\n    this.suggestions = suggestions.map(s => String(s));\n    this.updateSuggestions();\n    this.emit('suggestionsChanged', { suggestions: this.suggestions });\n  }\n\n  addSuggestion(suggestion) {\n    const suggestionStr = String(suggestion);\n    if (!this.suggestions.includes(suggestionStr)) {\n      this.suggestions.push(suggestionStr);\n      this.updateSuggestions();\n      this.emit('suggestionAdded', { suggestion: suggestionStr });\n    }\n  }\n\n  removeSuggestion(suggestion) {\n    const index = this.suggestions.indexOf(suggestion);\n    if (index >= 0) {\n      this.suggestions.splice(index, 1);\n      this.updateSuggestions();\n      this.emit('suggestionRemoved', { suggestion, index });\n    }\n  }\n\n  getSearchHistory() {\n    return [...this.searchHistory];\n  }\n\n  clearSearchHistory() {\n    this.searchHistory = [];\n    this.emit('historyCleared');\n  }\n\n  setPlaceholder(placeholder) {\n    this.placeholder = String(placeholder || '');\n    this.clearRenderCache();\n    this.emit('placeholderChanged', { placeholder: this.placeholder });\n  }\n\n  enable() {\n    this.disabled = false;\n    this.setAttribute('tabindex', '0');\n    this.clearRenderCache();\n    this.emit('enabled');\n  }\n\n  disable() {\n    this.disabled = true;\n    this.setAttribute('tabindex', '-1');\n    this.clearSuggestions();\n    this.clearRenderCache();\n    this.emit('disabled');\n  }\n\n  reset() {\n    this.value = '';\n    this.clearSuggestions();\n    this.clearSearchHistory();\n    this.selectedSuggestionIndex = -1;\n    this.clearRenderCache();\n    this.emit('reset');\n  }\n\n  // Cleanup and memory management\n  destroy() {\n    try {\n      // Cancel any pending searches\n      if (this.debounceTimer) {\n        clearTimeout(this.debounceTimer);\n        this.debounceTimer = null;\n      }\n\n      // Clean up resize observer\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n\n      // Remove announcer from DOM\n      if (this.announcer && this.announcer.parentNode) {\n        this.announcer.parentNode.removeChild(this.announcer);\n      }\n\n      // Clear caches and state\n      this.clearRenderCache();\n      this.clearSuggestions();\n      this.clearSearchHistory();\n\n      // Call parent cleanup\n      super.destroy?.();\n      this.emit('destroyed');\n    } catch (error) {\n      logger.error('Error during SearchBox cleanup:', error);\n    }\n  }\n}\n\n// Export all components\nexport {\n  ColorPicker,\n  Accordion,\n  DateTimePicker,\n  NumberInput,\n  Drawer,\n  SearchBox,\n};\n\nexport default {\n  ColorPicker,\n  Accordion,\n  DateTimePicker,\n  NumberInput,\n  Drawer,\n  SearchBox,\n};\n","/**\n * Copyright 2025 Armando Sori\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Visual Engine - Core rendering and interaction system for SimulateAI\n * Supports multiple rendering modes: SVG, Canvas, and WebGL\n * Provides unified object management, input handling, and accessibility\n */\n\nimport { Scene } from './scene.js';\nimport { InputManager } from './input-manager.js';\nimport { AnimationManager } from './animation-manager.js';\nimport AccessibilityManager from './accessibility.js';\nimport CanvasRenderer from '../renderers/canvas-renderer.js';\nimport SVGRenderer from '../renderers/svg-renderer.js';\nimport WebGLRenderer from '../renderers/webgl-renderer.js';\n\n// Import interactive components\nimport {\n  Button,\n  Slider,\n  Meter,\n  Label,\n} from '../objects/interactive-objects.js';\nimport {\n  InteractiveButton,\n  InteractiveSlider,\n  EthicsMeter,\n} from '../objects/enhanced-objects.js';\nimport {\n  ModalDialog,\n  NavigationMenu,\n  Chart,\n  FormField,\n  Tooltip,\n} from '../objects/advanced-ui-components.js';\nimport {\n  DataTable,\n  NotificationToast,\n  LoadingSpinner,\n} from '../objects/priority-components.js';\nimport {\n  TabContainer,\n  ProgressStepper,\n  SplitPane,\n  TreeView,\n  FileUpload,\n} from '../objects/layout-components.js';\nimport {\n  ColorPicker,\n  Accordion,\n  DateTimePicker,\n  NumberInput,\n  Drawer,\n  SearchBox,\n} from '../objects/input-utility-components.js';\n\n// Constants to avoid magic numbers\nconst ENGINE_CONSTANTS = {\n  DEFAULT_MAX_FPS: 60,\n  DEFAULT_WIDTH: 800,\n  DEFAULT_HEIGHT: 600,\n  MIN_DEVICE_MEMORY: 2, // GB\n  MIN_CORES: 2,\n  FPS_UPDATE_INTERVAL: 1000, // ms\n  DEBUG_PANEL_MIN_WIDTH: 200,\n  DEBUG_PANEL_POSITION: {\n    TOP: 10,\n    RIGHT: 10,\n    PADDING: 10,\n    BORDER_RADIUS: 4,\n    Z_INDEX: 1000,\n  },\n  // Animation timing constants\n  MILLISECONDS_PER_SECOND: 1000,\n  RGBA_ZERO_VALUES: {\n    RED: 0,\n    GREEN: 0,\n    BLUE: 0,\n    ALPHA: 0.8,\n  },\n  DEBUG_STYLES: {\n    FONT_SIZE: 12,\n    ZERO_THRESHOLD: 0,\n    DECIMAL_PLACES: 2,\n  },\n  RESIZE_OBSERVER: {\n    FIRST_ENTRY_INDEX: 0,\n  },\n};\n\nexport class VisualEngine {\n  constructor(container, options = {}) {\n    this.container = container;\n    this.options = {\n      renderMode: options.renderMode || 'auto', // 'svg', 'canvas', 'webgl', 'auto'\n      accessibility: options.accessibility !== false,\n      highPerformance: options.highPerformance || false,\n      maxFPS: options.maxFPS || ENGINE_CONSTANTS.DEFAULT_MAX_FPS,\n      debug: options.debug || false,\n      width: options.width || ENGINE_CONSTANTS.DEFAULT_WIDTH,\n      height: options.height || ENGINE_CONSTANTS.DEFAULT_HEIGHT,\n      ...options,\n    };\n\n    this.renderer = null;\n    this.scene = new Scene();\n    this.inputManager = null;\n    this.accessibilityManager = null;\n    this.animationManager = new AnimationManager(this);\n\n    this.isRunning = false;\n    this.isPaused = false;\n    this.lastFrameTime = 0;\n    this.deltaTime = 0;\n    this.frameCount = 0;\n    this.fpsCounter = 0;\n    this.lastFPSUpdate = 0;\n    // Performance monitoring\n    this.performanceStats = {\n      fps: 0,\n      frameTime: 0,\n      renderTime: 0,\n      updateTime: 0,\n    };\n\n    // Add compatibility alias for EthicsSimulation\n    this.config = this.options;\n    this.init();\n  }\n\n  init() {\n    this.logInfo('Initializing...');\n\n    this.setupRenderer();\n    this.setupInputManager();\n    this.setupAccessibility();\n    this.setupEventListeners();\n    this.setupPerformanceMonitoring();\n    this.setupComponentRegistry();\n\n    this.logInfo(`Initialized with ${this.renderer.type} renderer`);\n  }\n\n  setupRenderer() {\n    const mode = this.determineOptimalRenderMode();\n\n    switch (mode) {\n      case 'webgl':\n        try {\n          this.renderer = new WebGLRenderer(this.container, this.options);\n        } catch (error) {\n          this.logWarning(\n            'WebGL renderer failed to initialize, falling back to Canvas',\n            error\n          );\n          this.renderer = new CanvasRenderer(this.container, this.options);\n        }\n        break;\n      case 'canvas':\n        this.renderer = new CanvasRenderer(this.container, this.options);\n        break;\n      case 'svg':\n        this.renderer = new SVGRenderer(this.container, this.options);\n        break;\n      default:\n        this.renderer = new CanvasRenderer(this.container, this.options);\n    }\n\n    this.renderer.engine = this;\n    this.logInfo(`Using ${this.renderer.type} renderer`);\n  }\n\n  setupInputManager() {\n    this.inputManager = new InputManager(this);\n  }\n\n  setupAccessibility() {\n    if (this.options.accessibility) {\n      this.accessibilityManager = new AccessibilityManager(this.container);\n      this.accessibilityManager.engine = this;\n    }\n  }\n\n  setupEventListeners() {\n    // Handle container resize\n    if (typeof ResizeObserver !== 'undefined') {\n      const resizeObserver = new ResizeObserver(entries => {\n        this.handleResize(entries);\n      });\n      resizeObserver.observe(this.container);\n    } else {\n      // Fallback for older browsers\n      window.addEventListener('resize', () => {\n        this.handleResize();\n      });\n    }\n\n    // Handle visibility changes for performance optimization\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.pause();\n      } else {\n        this.resume();\n      }\n    });\n  }\n\n  setupPerformanceMonitoring() {\n    if (this.options.debug) {\n      this.createDebugPanel();\n    }\n  }\n\n  setupComponentRegistry() {\n    this.componentRegistry = new Map();\n    this.componentInstances = new Map();\n\n    // Register core components\n    this.registerComponent('button', Button);\n    this.registerComponent('slider', Slider);\n    this.registerComponent('meter', Meter);\n    this.registerComponent('label', Label);\n\n    // Register enhanced components\n    this.registerComponent('interactive-button', InteractiveButton);\n    this.registerComponent('interactive-slider', InteractiveSlider);\n    this.registerComponent('ethics-meter', EthicsMeter);\n\n    // Register advanced UI components\n    this.registerComponent('modal-dialog', ModalDialog);\n    this.registerComponent('navigation-menu', NavigationMenu);\n    this.registerComponent('chart', Chart);\n    this.registerComponent('form-field', FormField);\n    this.registerComponent('tooltip', Tooltip);\n\n    // Register priority components\n    this.registerComponent('data-table', DataTable);\n    this.registerComponent('notification-toast', NotificationToast);\n    this.registerComponent('loading-spinner', LoadingSpinner);\n\n    // Register layout components\n    this.registerComponent('tab-container', TabContainer);\n    this.registerComponent('progress-stepper', ProgressStepper);\n    this.registerComponent('split-pane', SplitPane);\n    this.registerComponent('tree-view', TreeView);\n    this.registerComponent('file-upload', FileUpload);\n\n    // Register input/utility components\n    this.registerComponent('color-picker', ColorPicker);\n    this.registerComponent('accordion', Accordion);\n    this.registerComponent('datetime-picker', DateTimePicker);\n    this.registerComponent('number-input', NumberInput);\n    this.registerComponent('drawer', Drawer);\n    this.registerComponent('search-box', SearchBox);\n\n    this.logInfo(\n      `Component registry initialized with ${this.componentRegistry.size} component types`\n    );\n  }\n\n  registerComponent(name, componentClass) {\n    this.componentRegistry.set(name, componentClass);\n    this.componentInstances.set(name, new Set());\n  }\n\n  createComponent(type, options = {}) {\n    const ComponentClass = this.componentRegistry.get(type);\n    if (!ComponentClass) {\n      this.logWarning(`Component type \"${type}\" not found in registry`);\n      return null;\n    }\n\n    try {\n      const component = new ComponentClass(options);\n      this.componentInstances.get(type).add(component);\n\n      // Add to scene\n      this.addObject(component);\n\n      return component;\n    } catch (error) {\n      this.logError(`Failed to create component of type \"${type}\"`, error);\n      return null;\n    }\n  }\n\n  destroyComponent(component) {\n    if (!component) {\n      this.logWarning('Attempted to destroy null/undefined component');\n      return;\n    }\n\n    // Find component type and remove from instances\n    for (const [, instances] of this.componentInstances) {\n      if (instances.has(component)) {\n        instances.delete(component);\n        break;\n      }\n    }\n\n    // Remove from scene\n    this.removeObject(component);\n  }\n\n  getComponentsByType(type) {\n    return Array.from(this.componentInstances.get(type) || []);\n  }\n\n  getAllComponents() {\n    const all = [];\n    for (const instances of this.componentInstances.values()) {\n      all.push(...instances);\n    }\n    return all;\n  }\n\n  determineOptimalRenderMode() {\n    if (this.options.renderMode !== 'auto') {\n      return this.options.renderMode;\n    }\n\n    // Auto-detect best renderer based on capabilities and performance needs\n    const hasWebGL = this.detectWebGLSupport();\n    const hasCanvas = this.detectCanvasSupport();\n    const isHighPerformance = this.options.highPerformance;\n    const isMobile = /Mobi|Android/i.test(navigator.userAgent);\n    const isLowEndDevice = this.detectLowEndDevice();\n\n    if (isHighPerformance && hasWebGL && !isMobile && !isLowEndDevice) {\n      return 'webgl';\n    } else if (hasCanvas && !isLowEndDevice) {\n      return 'canvas';\n    } else {\n      return 'svg';\n    }\n  }\n\n  detectWebGLSupport() {\n    try {\n      const canvas = document.createElement('canvas');\n      return !!(\n        canvas.getContext('webgl') || canvas.getContext('experimental-webgl')\n      );\n    } catch (e) {\n      return false;\n    }\n  }\n\n  detectCanvasSupport() {\n    try {\n      const canvas = document.createElement('canvas');\n      return !!canvas.getContext('2d');\n    } catch (e) {\n      return false;\n    }\n  }\n\n  detectLowEndDevice() {\n    // Basic heuristics for detecting low-end devices\n    try {\n      const memory = navigator.deviceMemory;\n      const cores = navigator.hardwareConcurrency;\n\n      if (memory && memory < ENGINE_CONSTANTS.MIN_DEVICE_MEMORY) return true; // Less than 2GB RAM\n      if (cores && cores < ENGINE_CONSTANTS.MIN_CORES) return true; // Less than 2 cores\n\n      return false;\n    } catch (error) {\n      // If device detection fails, assume it's not a low-end device\n      this.logWarning('Device detection failed', error);\n      return false;\n    }\n  }\n\n  // Animation loop with performance optimization\n  start() {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n    this.isPaused = false;\n    this.lastFrameTime = performance.now();\n    this.lastFPSUpdate = this.lastFrameTime;\n\n    this.logInfo('Starting animation loop');\n    this.animate();\n  }\n\n  stop() {\n    this.isRunning = false;\n    this.isPaused = false;\n    this.logInfo('Stopped');\n  }\n\n  pause() {\n    this.isPaused = true;\n    this.logInfo('Paused');\n  }\n\n  resume() {\n    if (this.isRunning && this.isPaused) {\n      this.isPaused = false;\n      this.lastFrameTime = performance.now();\n      this.logInfo('Resumed');\n    }\n  }\n\n  animate(currentTime = performance.now()) {\n    if (!this.isRunning) return;\n\n    const updateStartTime = performance.now();\n\n    // Calculate delta time with frame rate limiting\n    this.deltaTime = Math.min(\n      currentTime - this.lastFrameTime,\n      ENGINE_CONSTANTS.MILLISECONDS_PER_SECOND / this.options.maxFPS\n    );\n    this.lastFrameTime = currentTime;\n\n    if (!this.isPaused) {\n      // Update systems\n      this.update(this.deltaTime);\n\n      // Render frame\n      const renderStartTime = performance.now();\n      this.render();\n      this.performanceStats.renderTime = performance.now() - renderStartTime;\n\n      // Update performance stats\n      this.updatePerformanceStats(currentTime, updateStartTime);\n    }\n\n    requestAnimationFrame(time => this.animate(time));\n  }\n\n  update(deltaTime) {\n    // Update animation manager\n    this.animationManager.update(deltaTime);\n\n    // Update scene objects\n    this.scene.update(deltaTime);\n\n    // Update input manager\n    this.inputManager.update(deltaTime);\n\n    // Update accessibility if needed\n    if (this.accessibilityManager && this.accessibilityManager.needsUpdate) {\n      this.accessibilityManager.update();\n    }\n  }\n\n  render() {\n    if (this.renderer) {\n      this.renderer.render(this.scene);\n    }\n  }\n\n  updatePerformanceStats(currentTime, updateStartTime) {\n    this.frameCount++;\n    this.performanceStats.updateTime = performance.now() - updateStartTime;\n    this.performanceStats.frameTime = performance.now() - currentTime;\n\n    // Update FPS counter every second\n    if (\n      currentTime - this.lastFPSUpdate >=\n      ENGINE_CONSTANTS.FPS_UPDATE_INTERVAL\n    ) {\n      this.performanceStats.fps = Math.round(\n        (this.frameCount * ENGINE_CONSTANTS.FPS_UPDATE_INTERVAL) /\n          (currentTime - this.lastFPSUpdate)\n      );\n      this.frameCount = 0;\n      this.lastFPSUpdate = currentTime;\n      if (this.options.debug) {\n        this.updateDebugPanel();\n      }\n    }\n  }\n\n  // Object management\n  addObject(object) {\n    if (!object) {\n      this.logWarning('Attempted to add null/undefined object to scene');\n      return null;\n    }\n\n    this.scene.add(object);\n\n    if (\n      this.accessibilityManager &&\n      object.isInteractive &&\n      object.accessibilityConfig\n    ) {\n      this.accessibilityManager.registerComponent(object);\n    }\n\n    return object;\n  }\n\n  removeObject(object) {\n    if (!object) {\n      this.logWarning('Attempted to remove null/undefined object from scene');\n      return;\n    }\n\n    this.scene.remove(object);\n\n    if (this.accessibilityManager && object.isInteractive) {\n      this.accessibilityManager.unregisterComponent(object);\n    }\n  }\n\n  clearScene() {\n    this.scene.clear();\n\n    if (this.accessibilityManager) {\n      this.accessibilityManager.clearObjects();\n    }\n  }\n\n  // Compatibility methods for EthicsSimulation\n  addComponent(component) {\n    // Compatibility method for EthicsSimulation\n    return this.addObject(component);\n  }\n\n  removeComponent(component) {\n    // Compatibility method for EthicsSimulation\n    return this.removeObject(component);\n  }\n\n  // Coordinate transformations\n  screenToWorld(screenX, screenY) {\n    return this.renderer.screenToWorld\n      ? this.renderer.screenToWorld(screenX, screenY)\n      : { x: screenX, y: screenY };\n  }\n\n  worldToScreen(worldX, worldY) {\n    return this.renderer.worldToScreen\n      ? this.renderer.worldToScreen(worldX, worldY)\n      : { x: worldX, y: worldY };\n  }\n\n  // Event handling\n  handleResize(entries = null) {\n    if (this.renderer && this.renderer.resize) {\n      let width, height;\n\n      // Use ResizeObserver data if available, otherwise get container dimensions\n      if (\n        entries &&\n        entries[ENGINE_CONSTANTS.RESIZE_OBSERVER.FIRST_ENTRY_INDEX]\n      ) {\n        ({ width, height } =\n          entries[\n            ENGINE_CONSTANTS.RESIZE_OBSERVER.FIRST_ENTRY_INDEX\n          ].contentRect);\n      } else {\n        ({ width, height } = this.container.getBoundingClientRect());\n      }\n\n      // Only resize if dimensions are valid\n      if (\n        width > ENGINE_CONSTANTS.DEBUG_STYLES.ZERO_THRESHOLD &&\n        height > ENGINE_CONSTANTS.DEBUG_STYLES.ZERO_THRESHOLD\n      ) {\n        this.renderer.resize(width, height);\n      }\n    }\n\n    // Notify scene objects of resize\n    this.scene.handleResize();\n  }\n\n  // Debug functionality\n  createDebugPanel() {\n    this.debugPanel = document.createElement('div');\n    this.debugPanel.style.cssText = `\n            position: absolute;\n            top: ${ENGINE_CONSTANTS.DEBUG_PANEL_POSITION.TOP}px;\n            right: ${ENGINE_CONSTANTS.DEBUG_PANEL_POSITION.RIGHT}px;\n            background: rgba(${ENGINE_CONSTANTS.RGBA_ZERO_VALUES.RED}, ${ENGINE_CONSTANTS.RGBA_ZERO_VALUES.GREEN}, ${ENGINE_CONSTANTS.RGBA_ZERO_VALUES.BLUE}, ${ENGINE_CONSTANTS.RGBA_ZERO_VALUES.ALPHA});\n            color: white;\n            padding: ${ENGINE_CONSTANTS.DEBUG_PANEL_POSITION.PADDING}px;\n            font-family: monospace;\n            font-size: ${ENGINE_CONSTANTS.DEBUG_STYLES.FONT_SIZE}px;\n            border-radius: ${ENGINE_CONSTANTS.DEBUG_PANEL_POSITION.BORDER_RADIUS}px;\n            z-index: ${ENGINE_CONSTANTS.DEBUG_PANEL_POSITION.Z_INDEX};\n            min-width: ${ENGINE_CONSTANTS.DEBUG_PANEL_MIN_WIDTH}px;\n        `;\n\n    if (\n      this.container.style.position !== 'absolute' &&\n      this.container.style.position !== 'relative'\n    ) {\n      this.container.style.position = 'relative';\n    }\n\n    this.container.appendChild(this.debugPanel);\n  }\n\n  updateDebugPanel() {\n    if (!this.debugPanel) return;\n\n    try {\n      const stats = this.performanceStats;\n      const objects = this.scene.objects\n        ? this.scene.objects.length\n        : ENGINE_CONSTANTS.DEBUG_STYLES.ZERO_THRESHOLD;\n      const interactiveObjects = this.scene.interactiveObjects\n        ? this.scene.interactiveObjects.length\n        : ENGINE_CONSTANTS.DEBUG_STYLES.ZERO_THRESHOLD;\n\n      this.debugPanel.innerHTML = `\n                <div><strong>Visual Engine Debug</strong></div>\n                <div>FPS: ${stats.fps}</div>\n                <div>Frame Time: ${stats.frameTime.toFixed(ENGINE_CONSTANTS.DEBUG_STYLES.DECIMAL_PLACES)}ms</div>\n                <div>Update Time: ${stats.updateTime.toFixed(ENGINE_CONSTANTS.DEBUG_STYLES.DECIMAL_PLACES)}ms</div>\n                <div>Render Time: ${stats.renderTime.toFixed(ENGINE_CONSTANTS.DEBUG_STYLES.DECIMAL_PLACES)}ms</div>\n                <div>Objects: ${objects}</div>\n                <div>Interactive: ${interactiveObjects}</div>\n                <div>Renderer: ${this.renderer ? this.renderer.type : 'None'}</div>\n            `;\n    } catch (error) {\n      this.logError('Error updating debug panel', error);\n    }\n  }\n\n  // Event system for external integration\n  emit(eventName, data = {}) {\n    // Simple event emission - can be enhanced with proper EventEmitter if needed\n    if (typeof this.options.onEvent === 'function') {\n      this.options.onEvent(eventName, data);\n    }\n\n    // If there's a global event system, use it\n    if (typeof window !== 'undefined' && window.dispatchEvent) {\n      const customEvent = new CustomEvent(`visualengine:${eventName}`, {\n        detail: data,\n      });\n      window.dispatchEvent(customEvent);\n    }\n  }\n\n  // Error handling and logging\n  logInfo(message, data = null) {\n    if (this.options.debug) {\n      // eslint-disable-next-line no-console\n      console.log(`VisualEngine: ${message}`, data || '');\n    }\n  }\n\n  logWarning(message, data = null) {\n    if (this.options.debug) {\n      // eslint-disable-next-line no-console\n      console.warn(`VisualEngine: ${message}`, data || '');\n    }\n  }\n\n  logError(message, error = null) {\n    if (this.options.debug) {\n      // eslint-disable-next-line no-console\n      console.error(`VisualEngine: ${message}`, error || '');\n    }\n\n    // Emit error event for external handling\n    this.emit('error', {\n      message,\n      error: error?.message || error,\n      timestamp: Date.now(),\n    });\n  }\n\n  // Utility methods\n  getStats() {\n    return {\n      ...this.performanceStats,\n      objects: this.scene.objects.length,\n      interactiveObjects: this.scene.interactiveObjects.length,\n      renderer: this.renderer ? this.renderer.type : 'None',\n      isRunning: this.isRunning,\n      isPaused: this.isPaused,\n    };\n  }\n\n  // Cleanup\n  destroy() {\n    try {\n      this.stop();\n\n      if (\n        this.inputManager &&\n        typeof this.inputManager.destroy === 'function'\n      ) {\n        this.inputManager.destroy();\n      }\n\n      if (this.renderer && typeof this.renderer.destroy === 'function') {\n        this.renderer.destroy();\n      }\n\n      if (\n        this.accessibilityManager &&\n        typeof this.accessibilityManager.destroy === 'function'\n      ) {\n        this.accessibilityManager.destroy();\n      }\n\n      if (this.debugPanel && this.debugPanel.parentNode) {\n        this.debugPanel.parentNode.removeChild(this.debugPanel);\n      }\n\n      if (this.scene && typeof this.scene.clear === 'function') {\n        this.scene.clear();\n      }\n\n      // Clear component instances\n      if (this.componentInstances) {\n        this.componentInstances.clear();\n      }\n\n      this.logInfo('Destroyed');\n    } catch (error) {\n      this.logError('Error during VisualEngine destruction', error);\n    }\n  }\n}\n\nexport default VisualEngine;\n"],"names":["INTERACTIVE_OBJECT_CONSTANTS","InteractiveObject","options","x","y","eventType","eventData","wasHovered","enabled","focused","_deltaTime","renderer","Button","group","rect","text","Slider","progress","newValue","oldValue","handleX","handleBounds","changed","stepSize","fillWidth","track","fill","handle","Meter","bg","textElement","Label","newText","DEFAULT_ANIMATION_DURATION","DEFAULT_EASING","FOCUS_RING_WIDTH","OBJECT_CONSTANTS","EASING_CONSTANTS","AnimationManager$2","id","callback","currentTime","error","logger","animationManager","AnimationManager","clamp","value","min","max","lerp","start","end","validateNumber","defaultValue","validateString","EasingFunctions","t","n1","d1","BaseObject","spacing","context","event","handlerName","handler","handlers","index","data","child","className","useTransform","bounds","scaledWidth","scaledHeight","cos","sin","newWidth","newHeight","other","bounds1","bounds2","localData","now","property","targetValue","duration","easing","promises","prop","resolve","reject","startValue","startTime","animationId","easingFn","animate","elapsed","easedProgress","animationFn","promise","deltaTime","i","_renderer","task","EthicsMeter","reason","clampedValue","diff","percentage","valueText","InteractiveButton","schemes","ripple","loading","color","displayText","textX","textY","sizes","rotation","InteractiveSlider","clickX","trackStart","trackWidth","emitChange","trackY","handleY","COMPONENT_CONSTANTS","EASING_FUNCTIONS","UI_CONSTANTS","UIUtils","level","message","prefix","backgroundColor","r","g","b","font","metrics","maxWidth","words","lines","currentLine","word","testLine","ModalDialog","buttonConfig","animations","focusedButton","direction","button","result","buttonSpacing","totalButtonWidth","sum","btn","totalSpacing","currentX","buttonSize","buttonX","buttonY","bodyY","lineY","line","footerY","bgColor","textColor","buttonBounds","inButton","closeButtonBounds","NavigationMenu","item","menuItem","newIndex","addToSelection","isVertical","nextKey","prevKey","startIndex","nextIndex","prevIndex","char","searchChar","wasFocused","_item","expanding","targetHeight","itemHeight","itemWidth","hoveredIndex","itemX","itemY","renderTime","availableWidth","truncatedText","indicatorX","indicatorY","badge","badgeText","badgeWidth","isSelected","selectedCount","totalCount","enabledCount","Chart","val","series","point","allValues","padding","seriesIndex","total","cumulativeAngle","slice","xRange","yRange","xPadding","yPadding","localX","localY","dataPoint","_event","tolerance","pointX","pointY","barWidth","barIndex","barHeight","barY","centerX","centerY","angle","normalizedAngle","gridLines","verticalLines","ySteps","label","_seriesIndex","lastX","seriesBarWidth","height","_index","animationRadius","labelAngle","labelRadius","labelX","labelY","width","items","content","textWidth","tooltipWidth","tooltipHeight","dataCount","FormField","option","name","validator","skipValidation","isValid","firstErrorMessage","currentIndex","opt","currentLength","targetScale","inBounds","_eventData","fieldY","fieldHeight","scale","offsetX","offsetY","borderColor","borderWidth","displayValue","isPlaceholder","textToRender","arrowSize","arrowX","arrowY","checkboxSize","checkboxY","radioSize","currentY","radioY","labelText","messageY","countText","isOverLimit","cursorX","description","Tooltip","target","ctx","lineHeight","textHeight","targetBounds","position","tooltip","arrowDirection","fits","scoredPositions","pos","bestPosition","score","targetCenterX","targetCenterY","tooltipCenterX","tooltipCenterY","alignmentScore","slideOffset","borderRadius","PRIORITY_COMPONENT_CONSTANTS","DataTable","filteredData","column","filterValue","row","cellValue","a","aVal","bVal","comparison","endIndex","columnKey","rowIndex","multiSelect","page","columnIndex","actualRowIndex","newHoveredRow","columnWidth","sortX","sortY","arrow","pageData","colIndex","cellX","paginationY","totalData","startItem","endItem","infoText","buttonWidth","prevX","nextX","newData","format","headers","col","rows","NotificationToast","icons","colors","progressWidth","colorSchemes","LoadingSpinner","sizeConfig","cancelY","radius","progressAngle","LAYOUT_COMPONENT_CONSTANTS","ComponentTheme$1","_a","colorName","customTheme","theme","__publicField","PerformanceMonitor$1","componentId","instance","operation","key","endTime","endMemory","measurement","PERFORMANCE_THRESHOLDS","ComponentError","component","AnimationManager$1","from","to","animation","ANIMATION_DEFAULTS","current","fromValue","toValue","easings","TabContainer","ComponentTheme","PerformanceMonitor","announcer","componentError","_entries","tab","eventHandlers","tabData","newTab","insertIndex","removedTab","previousIndex","activeTab","updates","oldTab","tabIndex","tabBounds","tabWidth","fromIndex","toIndex","isActive","isHovered","maxTextWidth","title","ellipsis","ellipsisWidth","left","right","mid","badgeX","badgeY","closeX","closeY","contentY","contentHeight","_fromIndex","_toIndex","func","wait","timeout","args","later","closeable","ProgressStepper","step","status","stepIndex","previousStep","completedSteps","currentProgress","targetProgress","stepWidth","stepHeight","circleRadius","startX","endX","isCompleted","gradient","isFocused","completionAnim","currentRadius","fillColor","strokeColor","startY","endY","amount","num","stepData","newStep","removedStep","oldStep","SplitPane","orientation","newSplit","clampedSplit","oldSplit","delta","collapseLeft","side","targetSplit","expandedSide","fromSplit","toSplit","split","splitY","splitX","totalSize","deltaRatio","minRatio","wasHovering","leftBounds","rightBounds","splitterColor","gripColor","TreeView","nodes","parent","node","normalizedNode","validNodes","nodeId","adjustedY","nodeIndex","found","maxScroll","n","newNode","firstChild","nodeY","viewportTop","viewportBottom","clearChildren","children","_progress","cacheKey","iconX","iconY","isExpanded","icon","scrollbarX","totalHeight","thumbHeight","scrollRange","thumbY","nodeIds","expandAllRecursive","firstSelected","FileUpload","fileList","newFiles","validFiles","file","f","type","removedFile","interval","sizeText","progressY","bytes","k","multiple","accept","size","INPUT_UTILITY_CONSTANTS","ComponentDebug","metric","threshold","mediaQuery","memoryUsage","properties","config","updateAnimations","ColorPicker","validFormats","hex","cleanHex","hsl","rgb","matches","values","v","h","s","l","hexPattern","rgbPattern","hslPattern","d","hue2rgb","p","q","hsv","toHex","sNew","hue","dx","dy","distance","presetWidth","presetIndex","shiftKey","ctrlKey","metaKey","keyCombo","focusableElements","cachedImage","offscreenCanvas","offscreenRenderer","alpha","imageData","saturation","currentAngle","currentDistance","steps","lightness","checksX","checksY","j","isEven","indicatorWidth","indicatorHeight","preset","instructions","instruction","limit","inThrottle","Accordion","itemId","animationData","header","panel","enabledItems","focusedItem","baseHeight","totalLines","tempCtx","wrappedLines","estimatedHeight","itemIndex","isInHeader","maxTitleWidth","truncatedTitle","truncated","lineIndex","wrappedLine","wrapIndex","totalLineIndex","toRemove","newItem","removedItem","DateTimePicker","date","hour","minute","ampm","month","year","today","date1","date2","days","newDate","focusedMonth","focusedYear","lastDay","gridY","cellWidth","cellHeight","firstDay","dayNumber","daysInMonth","selectedDate","monthNames","dayLabels","day","dayIndex","isToday","isDisabled","timeText","x1","y1","x2","y2","hourAngle","hourX","hourY","minuteAngle","minuteX","minuteY","NumberInput","announce","numValue","cleanValue","parsed","clamped","formatted","repeat","placeholderText","controlX","controlBg","Drawer","validPositions","firstElement","lastElement","touch","deltaX","deltaY","shouldClose","selectors","el","overlayColor","baseColor","rgbaMatch","parts","rgbMatch","shadowColor","closeButtonX","closeButtonY","SearchBox","query","suggestion","historyMatches","selectedValue","maxIndex","suggestionIndex","buttonRadius","buttonHeight","time","opacity","suggestionHeight","truncatedSuggestion","caseSensitiveText","caseSensitiveQuery","matchIndex","beforeMatch","match","afterMatch","matchWidth","suggestions","suggestionStr","placeholder","ENGINE_CONSTANTS","VisualEngine","container","Scene","WebGLRenderer","CanvasRenderer","SVGRenderer","InputManager","AccessibilityManager","entries","componentClass","ComponentClass","instances","all","hasWebGL","hasCanvas","isHighPerformance","isMobile","isLowEndDevice","canvas","memory","cores","updateStartTime","renderStartTime","object","screenX","screenY","worldX","worldY","stats","objects","interactiveObjects","eventName","customEvent"],"mappings":"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"}