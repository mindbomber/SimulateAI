<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scenario Creation Dates & Theming Test</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        min-height: 100vh;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      h1 {
        color: #4a5568;
        text-align: center;
        margin-bottom: 10px;
        font-size: 2.5em;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .subtitle {
        text-align: center;
        color: #666;
        font-size: 1.2em;
        margin-bottom: 30px;
      }

      .test-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .section {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      }

      .section h3 {
        color: #495057;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
        margin-bottom: 15px;
      }

      .category-card,
      .scenario-card {
        background: white;
        border: 2px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        margin: 10px 0;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .category-card:hover,
      .scenario-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      }

      /* Seasonal Themes */
      .winter-theme {
        border-color: #2563eb;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      }

      .winter-theme::before {
        content: "‚ùÑÔ∏è";
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.2em;
      }

      .new-year-theme {
        border-color: #dc2626;
        background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
      }

      .new-year-theme::before {
        content: "üéä";
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.2em;
      }

      .spring-theme {
        border-color: #059669;
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      }

      .spring-theme::before {
        content: "üå∏";
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.2em;
      }

      .summer-theme {
        border-color: #ea580c;
        background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
      }

      .summer-theme::before {
        content: "‚òÄÔ∏è";
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.2em;
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .card-title {
        font-weight: bold;
        font-size: 1.1em;
        margin: 0;
      }

      .card-icon {
        font-size: 1.5em;
      }

      .card-meta {
        font-size: 0.9em;
        color: #666;
        margin: 5px 0;
      }

      .creation-date {
        font-weight: bold;
        color: #007bff;
      }

      .theme-info {
        background: #e3f2fd;
        padding: 8px;
        border-radius: 5px;
        margin: 10px 0;
        font-size: 0.85em;
      }

      .btn {
        background: linear-gradient(45deg, #007bff, #0056b3);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
      }

      .filter-controls {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        text-align: center;
      }

      .filter-controls select {
        padding: 8px 12px;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 16px;
        margin: 0 10px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .stat-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        color: #007bff;
        margin-bottom: 5px;
      }

      .stat-label {
        color: #666;
        font-size: 0.9em;
      }

      .timeline {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .timeline-item {
        border-left: 3px solid #007bff;
        padding-left: 15px;
        margin-bottom: 15px;
        position: relative;
      }

      .timeline-item::before {
        content: "";
        position: absolute;
        left: -8px;
        top: 5px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #007bff;
      }

      .timeline-date {
        font-weight: bold;
        color: #007bff;
        font-size: 0.9em;
      }

      .timeline-content {
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üìÖ Scenario Creation Dates & Theming System</h1>
      <div class="subtitle">
        Demonstrating creation date tracking and seasonal theming for scenarios
        and categories
      </div>

      <!-- Filter Controls -->
      <div class="filter-controls">
        <label for="theme-filter">Filter by Theme:</label>
        <select id="theme-filter" onchange="filterByTheme()">
          <option value="all">All Themes</option>
          <option value="winter-2024">Winter 2024 ‚ùÑÔ∏è</option>
          <option value="new-year-2025">New Year 2025 üéä</option>
          <option value="spring-2025">Spring 2025 üå∏</option>
          <option value="summer-2025">Summer 2025 ‚òÄÔ∏è</option>
        </select>

        <label for="date-filter">Filter by Date Range:</label>
        <select id="date-filter" onchange="filterByDateRange()">
          <option value="all">All Dates</option>
          <option value="december-2024">December 2024</option>
          <option value="january-2025">January 2025</option>
          <option value="recent">Last 30 Days</option>
        </select>

        <button class="btn" onclick="showCreationTimeline()">
          üìà Show Timeline
        </button>
        <button class="btn" onclick="generateStats()">üìä Generate Stats</button>
      </div>

      <!-- Statistics -->
      <div class="stats-grid" id="stats-container">
        <!-- Stats will be populated by JavaScript -->
      </div>

      <!-- Categories and Scenarios -->
      <div class="test-grid">
        <!-- Categories Section -->
        <div class="section">
          <h3>üìÇ Categories with Creation Dates</h3>
          <div id="categories-container">
            <!-- Categories will be populated by JavaScript -->
          </div>
        </div>

        <!-- Scenarios Section -->
        <div class="section">
          <h3>üìù Scenarios with Creation Dates</h3>
          <div id="scenarios-container">
            <!-- Scenarios will be populated by JavaScript -->
          </div>
        </div>

        <!-- Timeline Section -->
        <div class="section">
          <h3>üìà Creation Timeline</h3>
          <div class="timeline" id="timeline-container">
            <!-- Timeline will be populated by JavaScript -->
          </div>
        </div>

        <!-- Theme Preview -->
        <div class="section">
          <h3>üé® Theme Preview</h3>
          <div id="theme-preview">
            <!-- Theme examples will be shown here -->
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      // Import the creation dates module
      import {
        SCENARIO_CREATION_DATES,
        CATEGORY_CREATION_DATES,
        SEASONAL_THEMES,
        getSeasonalTheme,
        getScenarioTheme,
        getCategoryTheme,
        getScenariosInDateRange,
        getScenariosByTheme,
      } from "./src/js/data/scenario-creation-dates.js";

      import { CATEGORIES } from "./src/js/data/scenario-metadata.js";

      let allCategories = [];
      let allScenarios = [];
      let currentFilter = { theme: "all", dateRange: "all" };

      // Initialize the page
      window.addEventListener("DOMContentLoaded", function () {
        console.log("Initializing creation dates test...");

        loadCategoriesAndScenarios();
        generateStats();
        showCreationTimeline();
        displayThemePreview();
      });

      function loadCategoriesAndScenarios() {
        // Load categories
        allCategories = Object.entries(CATEGORIES).map(([id, category]) => ({
          id,
          ...category,
          creationDate: CATEGORY_CREATION_DATES[id],
          theme: getCategoryTheme(id),
        }));

        // Load scenarios (sample from creation dates)
        allScenarios = Object.entries(SCENARIO_CREATION_DATES).map(
          ([id, creationDate]) => ({
            id,
            title: formatScenarioTitle(id),
            creationDate,
            theme: getScenarioTheme(id),
          }),
        );

        displayCategories();
        displayScenarios();
      }

      function formatScenarioTitle(scenarioId) {
        return scenarioId
          .split("-")
          .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
          .join(" ");
      }

      function displayCategories() {
        const container = document.getElementById("categories-container");
        container.innerHTML = "";

        const filteredCategories = filterItems(allCategories);

        filteredCategories.forEach((category) => {
          const categoryCard = createCategoryCard(category);
          container.appendChild(categoryCard);
        });
      }

      function displayScenarios() {
        const container = document.getElementById("scenarios-container");
        container.innerHTML = "";

        const filteredScenarios = filterItems(allScenarios);

        // Show only first 10 for display purposes
        filteredScenarios.slice(0, 10).forEach((scenario) => {
          const scenarioCard = createScenarioCard(scenario);
          container.appendChild(scenarioCard);
        });

        if (filteredScenarios.length > 10) {
          const moreInfo = document.createElement("div");
          moreInfo.className = "card-meta";
          moreInfo.textContent = `... and ${filteredScenarios.length - 10} more scenarios`;
          container.appendChild(moreInfo);
        }
      }

      function createCategoryCard(category) {
        const card = document.createElement("div");
        card.className = "category-card";

        // Apply theme styling
        if (category.theme) {
          card.classList.add(`${category.theme.theme}-theme`);
        }

        card.style.position = "relative";

        const formattedDate = category.creationDate
          ? new Date(category.creationDate).toLocaleDateString()
          : "Unknown";

        card.innerHTML = `
          <div class="card-header">
            <h4 class="card-title">${category.name}</h4>
            <div class="card-icon">${category.icon}</div>
          </div>
          <div class="card-meta">
            <div><strong>Created:</strong> <span class="creation-date">${formattedDate}</span></div>
            <div><strong>ID:</strong> ${category.id}</div>
          </div>
          <p>${category.description}</p>
          ${
            category.theme
              ? `
            <div class="theme-info">
              <strong>Theme:</strong> ${category.theme.name} ${category.theme.icon}
            </div>
          `
              : ""
          }
        `;

        return card;
      }

      function createScenarioCard(scenario) {
        const card = document.createElement("div");
        card.className = "scenario-card";

        // Apply theme styling
        if (scenario.theme) {
          card.classList.add(`${scenario.theme.theme}-theme`);
        }

        card.style.position = "relative";

        const formattedDate = new Date(
          scenario.creationDate,
        ).toLocaleDateString();

        card.innerHTML = `
          <div class="card-header">
            <h4 class="card-title">${scenario.title}</h4>
          </div>
          <div class="card-meta">
            <div><strong>Created:</strong> <span class="creation-date">${formattedDate}</span></div>
            <div><strong>ID:</strong> ${scenario.id}</div>
          </div>
          ${
            scenario.theme
              ? `
            <div class="theme-info">
              <strong>Theme:</strong> ${scenario.theme.name} ${scenario.theme.icon}
            </div>
          `
              : ""
          }
        `;

        return card;
      }

      function filterItems(items) {
        return items.filter((item) => {
          // Theme filter
          if (currentFilter.theme !== "all") {
            if (!item.theme || item.theme.name !== currentFilter.theme) {
              return false;
            }
          }

          // Date range filter
          if (currentFilter.dateRange !== "all") {
            const creationDate = new Date(item.creationDate);
            const now = new Date();

            switch (currentFilter.dateRange) {
              case "december-2024":
                if (
                  creationDate.getMonth() !== 11 ||
                  creationDate.getFullYear() !== 2024
                ) {
                  return false;
                }
                break;
              case "january-2025":
                if (
                  creationDate.getMonth() !== 0 ||
                  creationDate.getFullYear() !== 2025
                ) {
                  return false;
                }
                break;
              case "recent":
                const thirtyDaysAgo = new Date(
                  now.getTime() - 30 * 24 * 60 * 60 * 1000,
                );
                if (creationDate < thirtyDaysAgo) {
                  return false;
                }
                break;
            }
          }

          return true;
        });
      }

      window.filterByTheme = function () {
        currentFilter.theme = document.getElementById("theme-filter").value;
        displayCategories();
        displayScenarios();
      };

      window.filterByDateRange = function () {
        currentFilter.dateRange = document.getElementById("date-filter").value;
        displayCategories();
        displayScenarios();
      };

      window.generateStats = function () {
        const container = document.getElementById("stats-container");

        // Calculate statistics
        const totalCategories = Object.keys(CATEGORY_CREATION_DATES).length;
        const totalScenarios = Object.keys(SCENARIO_CREATION_DATES).length;

        const themeStats = {};
        Object.values(SEASONAL_THEMES).forEach((theme) => {
          themeStats[theme.name] = getScenariosInDateRange(
            theme.dateRange.start,
            theme.dateRange.end,
          ).length;
        });

        container.innerHTML = `
          <div class="stat-card">
            <div class="stat-value">${totalCategories}</div>
            <div class="stat-label">Total Categories</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${totalScenarios}</div>
            <div class="stat-label">Total Scenarios</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${Object.keys(SEASONAL_THEMES).length}</div>
            <div class="stat-label">Seasonal Themes</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${themeStats["winter-2024"] || 0}</div>
            <div class="stat-label">Winter 2024 ‚ùÑÔ∏è</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${themeStats["new-year-2025"] || 0}</div>
            <div class="stat-label">New Year 2025 üéä</div>
          </div>
        `;
      };

      window.showCreationTimeline = function () {
        const container = document.getElementById("timeline-container");

        // Create timeline of creation dates
        const allItems = [
          ...Object.entries(CATEGORY_CREATION_DATES).map(([id, date]) => ({
            type: "category",
            id,
            date,
            name: CATEGORIES[id]?.name || id,
          })),
          ...Object.entries(SCENARIO_CREATION_DATES).map(([id, date]) => ({
            type: "scenario",
            id,
            date,
            name: formatScenarioTitle(id),
          })),
        ];

        // Sort by date
        allItems.sort((a, b) => new Date(a.date) - new Date(b.date));

        // Group by month
        const monthGroups = {};
        allItems.forEach((item) => {
          const monthKey = new Date(item.date).toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
          });
          if (!monthGroups[monthKey]) {
            monthGroups[monthKey] = [];
          }
          monthGroups[monthKey].push(item);
        });

        container.innerHTML = "";
        Object.entries(monthGroups).forEach(([month, items]) => {
          const monthSection = document.createElement("div");
          monthSection.className = "timeline-item";

          monthSection.innerHTML = `
            <div class="timeline-date">${month}</div>
            <div class="timeline-content">
              ${items
                .map(
                  (item) => `
                <div style="margin: 5px 0;">
                  ${item.type === "category" ? "üìÇ" : "üìù"} 
                  <strong>${item.name}</strong>
                  <span style="color: #666; font-size: 0.8em;">(${item.id})</span>
                </div>
              `,
                )
                .join("")}
            </div>
          `;

          container.appendChild(monthSection);
        });
      };

      function displayThemePreview() {
        const container = document.getElementById("theme-preview");

        container.innerHTML = Object.entries(SEASONAL_THEMES)
          .map(
            ([name, theme]) => `
          <div class="category-card ${theme.theme}-theme" style="position: relative; margin: 10px 0;">
            <div class="card-header">
              <h4 class="card-title">${theme.name}</h4>
              <div class="card-icon">${theme.icon}</div>
            </div>
            <div class="card-meta">
              <div><strong>Date Range:</strong> ${new Date(theme.dateRange.start).toLocaleDateString()} - ${new Date(theme.dateRange.end).toLocaleDateString()}</div>
              <div><strong>Style:</strong> ${theme.cardStyle}</div>
            </div>
            <div style="background: ${theme.colors.primary}; color: white; padding: 5px; border-radius: 3px; font-size: 0.8em; margin-top: 10px;">
              Primary Color: ${theme.colors.primary}
            </div>
          </div>
        `,
          )
          .join("");
      }
    </script>
  </body>
</html>
