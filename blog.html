<!--
Copyright 2025 Armando Sori

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4SVB78MBHN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4SVB78MBHN");
    </script>

    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#1a73e8" />
    <meta name="color-scheme" content="light" />
    <title>
      Blog - SimulateAI | Insights & Research on AI Ethics Education
    </title>
    <meta
      name="description"
      content="Discover cutting-edge research, educational insights, and community discussions about AI ethics, simulation-based learning, and responsible technology development"
    />
    <meta
      name="keywords"
      content="AI ethics blog, educational research, simulation learning, responsible AI, ethics education, research insights"
    />
    <meta name="author" content="SimulateAI Educational Platform" />
    <meta name="page-id" content="blog" />

    <!-- SEO Enhancement -->
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1"
    />
    <link rel="canonical" href="https://www.simulateai.io/blog.html" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="blog" />
    <meta
      property="og:title"
      content="Blog - SimulateAI | Insights & Research on AI Ethics Education"
    />
    <meta
      property="og:description"
      content="Discover cutting-edge research, educational insights, and community discussions about AI ethics and simulation-based learning"
    />
    <meta property="og:url" content="https://www.simulateai.io/blog.html" />
    <meta
      property="og:image"
      content="https://www.simulateai.io/src/assets/images/blog-preview.jpg"
    />
    <meta property="og:site_name" content="SimulateAI" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@SimulateAI" />
    <meta name="twitter:title" content="Blog - SimulateAI" />
    <meta
      name="twitter:description"
      content="Insights & Research on AI Ethics Education"
    />
    <meta
      name="twitter:image"
      content="https://www.simulateai.io/src/assets/images/blog-preview.jpg"
    />

    <!-- Accessibility -->
    <meta
      name="accessibility-features"
      content="keyboard-navigation,skip-links,high-contrast,large-text,screen-reader-support"
    />

    <!-- Structured Data for Blog -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "SimulateAI Blog",
        "description": "Research insights and educational content about AI ethics and simulation-based learning",
        "url": "https://www.simulateai.io/blog.html",
        "publisher": {
          "@type": "Organization",
          "name": "SimulateAI",
          "url": "https://www.simulateai.io"
        },
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://www.simulateai.io/blog.html"
        }
      }
    </script>

    <!-- Professional Blog Styles -->
    <link rel="stylesheet" href="src/styles/professional-blog.css" />
    <link rel="stylesheet" href="src/styles/main.css" />
    <link rel="stylesheet" href="src/styles/shared-navigation.css" />
    <link rel="stylesheet" href="src/styles/settings-menu.css" />
    <link rel="stylesheet" href="src/styles/footer.css" />
    <link rel="stylesheet" href="src/styles/accessibility.css" />
    <link rel="stylesheet" href="src/styles/navigation-highlight-fix.css" />

    <!-- Icons and Favicons -->
    <link rel="icon" type="image/svg+xml" href="src/assets/icons/favicon.svg" />
    <link rel="icon" type="image/png" href="src/assets/icons/favicon.png" />
  </head>

  <body class="blog-page" data-page-id="blog">
    <!-- Skip to content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- ARIA live regions for announcements -->
    <div
      id="aria-live-polite"
      aria-live="polite"
      aria-atomic="true"
      class="sr-only"
    ></div>
    <div
      id="aria-live-assertive"
      aria-live="assertive"
      aria-atomic="true"
      class="sr-only"
    ></div>

    <!-- Enhanced Header -->
    <div id="navigation-container">
      <!-- Navigation will be injected here by shared-navigation.js -->
    </div>

    <!-- Professional Blog Header -->
    <header class="blog-header">
      <div class="container">
        <div class="blog-header-content">
          <div class="blog-title-section">
            <h1 class="blog-title">SimulateAI Research Journal</h1>
            <p class="blog-subtitle">
              Advancing AI Ethics Through Thoughtful Discourse
            </p>
          </div>
          <div class="blog-actions">
            <div class="contribute-info">
              <p class="contribute-text">Want to contribute?</p>
              <a href="mailto:research@simulateai.io" class="btn-minimal">
                <span>âœ‰ï¸ Email Us</span>
              </a>
            </div>
            <div
              id="admin-panel-btn"
              class="admin-section"
              style="display: none"
            >
              <button id="admin-dashboard-btn" class="btn-minimal admin-btn">
                <span>ğŸ“ Admin Dashboard</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
      <!-- Minimal Filter Bar -->
      <section class="filter-section">
        <div class="container">
          <div class="filter-bar">
            <div class="search-group">
              <input
                type="search"
                id="blog-search"
                placeholder="Search articles..."
                class="search-input"
                aria-label="Search blog posts"
              />
            </div>

            <div class="filter-groups">
              <!-- Format Filter -->
              <div class="filter-group">
                <label class="filter-label">Format</label>
                <select id="format-filter" class="filter-select">
                  <option value="">All Formats</option>
                  <option value="video">ğŸ¥ Video</option>
                  <option value="ted-talk">ğŸ¥ TED Talk</option>
                  <option value="article">ï¿½ Article</option>
                  <option value="podcast">ğŸ§ Podcast</option>
                  <option value="interview">ğŸ¤ Interview</option>
                  <option value="research-paper">ğŸ“Š Research Paper</option>
                  <option value="longform">ï¿½ Longform</option>
                  <option value="infographic">ï¿½ Infographic</option>
                  <option value="explainer">ğŸ’¡ Explainer</option>
                  <option value="slide-deck">ğŸ“º Slide Deck</option>
                </select>
              </div>

              <!-- Topic Filter -->
              <div class="filter-group">
                <label class="filter-label">Topic</label>
                <select id="topic-filter" class="filter-select">
                  <option value="">All Topics</option>
                  <option value="ai-ethics">ğŸ¤– AI Ethics</option>
                  <option value="user-agency">ï¿½ User Agency</option>
                  <option value="philosophy">ğŸ§  Philosophy</option>
                  <option value="game-theory">ğŸ¯ Game Theory</option>
                  <option value="privacy">ï¿½ Privacy</option>
                  <option value="data-sovereignty">ğŸ‘‘ Data Sovereignty</option>
                  <option value="narrative-design">ğŸ“š Narrative Design</option>
                  <option value="behavioral-research">
                    ğŸ§ª Behavioral Research
                  </option>
                  <option value="cognitive-bias">ğŸ§  Cognitive Bias</option>
                </select>
              </div>

              <!-- Depth Filter -->
              <div class="filter-group">
                <label class="filter-label">Depth</label>
                <select id="depth-filter" class="filter-select">
                  <option value="">All Levels</option>
                  <option value="introductory">ğŸŒ± Introductory</option>
                  <option value="deep-dive">ï¿½ Deep Dive</option>
                  <option value="case-study">ğŸ“‹ Case Study</option>
                  <option value="meta-analysis">ğŸ“Š Meta Analysis</option>
                  <option value="opinion">ï¿½ Opinion</option>
                  <option value="how-to">ğŸ› ï¸ How-To</option>
                  <option value="reflection">ğŸ¤” Reflection</option>
                  <option value="critique">âš¡ Critique</option>
                  <option value="community-voices">ğŸ—£ï¸ Community Voices</option>
                </select>
              </div>

              <!-- Audience Filter -->
              <div class="filter-group">
                <label class="filter-label">Audience</label>
                <select id="audience-filter" class="filter-select">
                  <option value="">All Audiences</option>
                  <option value="researchers">ğŸ”¬ For Researchers</option>
                  <option value="contributors">âœï¸ For Contributors</option>
                  <option value="new-users">ğŸ†• For New Users</option>
                  <option value="youth-ethics">ğŸ‘¨â€ğŸ“ Youth & Ethics</option>
                  <option value="educator-resources">
                    ğŸ“š Educator Resources
                  </option>
                  <option value="cross-cultural">ğŸŒ Cross-Cultural</option>
                </select>
              </div>
            </div>

            <div class="sort-group">
              <select id="sort-filter" class="sort-select">
                <option value="newest">Latest</option>
                <option value="popular">Popular</option>
                <option value="trending">Trending</option>
                <option value="discussed">Most Discussed</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Articles Grid -->
      <section class="articles-section">
        <div class="container">
          <div id="articles-grid" class="articles-grid">
            <!-- Articles will be populated by JavaScript -->
          </div>

          <div class="load-more-section">
            <button id="load-more-btn" class="btn-minimal load-more">
              Load More Articles
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Blog Submission Modal -->
    <div
      id="blog-submission-modal"
      class="modal submission-modal"
      style="display: none"
    >
      <div class="modal-content submission-form-container">
        <div class="modal-header">
          <h2 class="modal-title">
            <span class="title-icon">âœï¸</span>
            Submit Your Research Article
          </h2>
          <button
            class="modal-close"
            id="close-submission-modal"
            aria-label="Close modal"
          >
            <span class="close-icon">Ã—</span>
          </button>
        </div>

        <div class="modal-body">
          <!-- Submission Status Banner -->
          <div
            id="submission-status-banner"
            class="status-banner"
            style="display: none"
          >
            <div class="status-content">
              <span class="status-icon" id="status-icon">â„¹ï¸</span>
              <span class="status-message" id="status-message"></span>
            </div>
          </div>

          <!-- Donor Benefits Info -->
          <div
            id="donor-benefits-info"
            class="info-card donor-benefits"
            style="display: none"
          >
            <div class="info-header">
              <span class="info-icon">ğŸ‘‘</span>
              <h3>Donor Benefits</h3>
            </div>
            <div class="info-content">
              <p>
                As a valued donor, your submissions are automatically approved
                and published immediately.
              </p>
              <ul class="benefits-list">
                <li>âœ… Instant publication</li>
                <li>âœ… Priority placement</li>
                <li>âœ… Enhanced author profile</li>
                <li>âœ… Direct community engagement</li>
              </ul>
            </div>
          </div>

          <!-- Submission Guidelines -->
          <div class="info-card submission-guidelines">
            <div class="info-header">
              <span class="info-icon">ğŸ“‹</span>
              <h3>Submission Guidelines</h3>
            </div>
            <div class="info-content">
              <ul class="guidelines-list">
                <li>
                  ğŸ“ Articles should be well-researched and evidence-based
                </li>
                <li>ğŸ¯ Focus on AI ethics, education, or related topics</li>
                <li>ğŸ“š Include relevant citations and references</li>
                <li>ğŸ” Original content only - no plagiarism</li>
                <li>ğŸ’¬ Maintain respectful and professional tone</li>
                <li>ğŸ‘¤ Complete profile required for all submissions</li>
              </ul>

              <div class="submission-process-info">
                <h4>ğŸ“‹ Review Process</h4>
                <div class="process-steps">
                  <div class="process-step">
                    <span class="step-icon">ğŸ“</span>
                    <div class="step-content">
                      <strong>Regular Users:</strong> Submissions reviewed
                      within 24 hours by our moderation team
                    </div>
                  </div>
                  <div class="process-step donor-step">
                    <span class="step-icon">ğŸ‘‘</span>
                    <div class="step-content">
                      <strong>Donors:</strong>
                      <a href="donate.html" style="color: #1a73e8"
                        >Instant publication</a
                      >
                      without moderation delays
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Submission Form -->
          <form id="blog-submission-form" class="submission-form">
            <div class="form-section">
              <h3 class="section-title">Article Details</h3>

              <div class="form-group">
                <label for="article-title" class="form-label">
                  Article Title <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="article-title"
                  name="title"
                  class="form-input"
                  placeholder="Enter a compelling title for your article"
                  required
                  maxlength="150"
                />
                <div class="input-feedback">
                  <span class="char-count" id="title-char-count">0/150</span>
                </div>
              </div>

              <div class="form-group">
                <label for="article-subtitle" class="form-label">
                  Subtitle/Summary
                </label>
                <input
                  type="text"
                  id="article-subtitle"
                  name="subtitle"
                  class="form-input"
                  placeholder="Brief summary or subtitle (optional)"
                  maxlength="200"
                />
                <div class="input-feedback">
                  <span class="char-count" id="subtitle-char-count">0/200</span>
                </div>
              </div>

              <div class="form-group">
                <label for="article-category" class="form-label">
                  Category <span class="required">*</span>
                </label>
                <select
                  id="article-category"
                  name="category"
                  class="form-select"
                  required
                >
                  <option value="">Select a category</option>
                  <option value="research">ğŸ”¬ Research & Studies</option>
                  <option value="education">ğŸ“š Educational Methods</option>
                  <option value="ethics">âš–ï¸ Ethics & Philosophy</option>
                  <option value="ai-bias">ğŸ¯ AI Bias & Fairness</option>
                  <option value="privacy">ğŸ”’ Privacy & Security</option>
                  <option value="community">ğŸ¤ Community Insights</option>
                  <option value="technology">âš™ï¸ Technology & Tools</option>
                  <option value="policy">ğŸ“‹ Policy & Regulation</option>
                </select>
              </div>

              <div class="form-group">
                <label for="article-tags" class="form-label"> Tags </label>
                <input
                  type="text"
                  id="article-tags"
                  name="tags"
                  class="form-input"
                  placeholder="Add relevant tags (separate with commas)"
                />
                <div class="input-help">
                  <span class="help-text"
                    >Example: machine learning, bias detection, fairness</span
                  >
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Content</h3>

              <div class="form-group">
                <label for="article-excerpt" class="form-label">
                  Excerpt <span class="required">*</span>
                </label>
                <textarea
                  id="article-excerpt"
                  name="excerpt"
                  class="form-textarea"
                  placeholder="Write a compelling excerpt that summarizes your article (2-3 sentences)"
                  required
                  rows="3"
                  maxlength="300"
                ></textarea>
                <div class="input-feedback">
                  <span class="char-count" id="excerpt-char-count">0/300</span>
                </div>
              </div>

              <div class="form-group">
                <label for="article-content" class="form-label">
                  Article Content <span class="required">*</span>
                </label>
                <textarea
                  id="article-content"
                  name="content"
                  class="form-textarea content-editor"
                  placeholder="Write your article here. You can include markdown formatting for better presentation."
                  required
                  rows="15"
                ></textarea>
                <div class="input-help">
                  <span class="help-text">
                    ğŸ’¡ Tip: Use **bold**, *italic*, # headers, and [links](url)
                    for formatting
                  </span>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Author Information</h3>

              <div class="form-group">
                <label for="author-bio" class="form-label"> Author Bio </label>
                <textarea
                  id="author-bio"
                  name="authorBio"
                  class="form-textarea"
                  placeholder="Brief professional bio or credentials (optional)"
                  rows="3"
                  maxlength="250"
                ></textarea>
                <div class="input-feedback">
                  <span class="char-count" id="bio-char-count">0/250</span>
                </div>
              </div>

              <div class="form-group">
                <label for="author-affiliation" class="form-label">
                  Institution/Affiliation
                </label>
                <input
                  type="text"
                  id="author-affiliation"
                  name="affiliation"
                  class="form-input"
                  placeholder="University, organization, or company (optional)"
                />
              </div>
            </div>

            <!-- Terms and Submission -->
            <div class="form-section">
              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input
                    type="checkbox"
                    id="agree-terms"
                    name="agreeTerms"
                    required
                  />
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">
                    I agree to the
                    <a href="#submission-terms" class="link"
                      >submission terms</a
                    >
                    and confirm this is original content
                  </span>
                </label>
              </div>

              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="agree-review" name="agreeReview" />
                  <span class="checkbox-custom"></span>
                  <span class="checkbox-text">
                    I understand my submission may be reviewed before
                    publication
                  </span>
                </label>
              </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
              <button type="button" class="btn btn-outline" id="save-draft-btn">
                <span class="btn-icon">ğŸ’¾</span>
                Save Draft
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                id="submit-article-btn"
              >
                <span class="btn-icon">ğŸ“¤</span>
                <span class="btn-text">Submit Article</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Footer will be inserted by professional-footer.js -->
    <div id="footer-placeholder"></div>

    <!-- Enhanced Write Post Modal -->
    <div
      id="write-post-modal"
      class="modal-overlay"
      style="display: none"
      role="dialog"
      aria-labelledby="write-post-title"
      aria-modal="true"
    >
      <div class="modal-container">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="write-post-title" class="modal-title">
              <span class="title-icon">âœï¸</span>
              Share Your Research & Insights
            </h2>
            <button class="modal-close" aria-label="Close modal">
              &times;
            </button>
          </div>

          <div class="modal-body">
            <div class="contribution-guidelines">
              <div class="guideline-item">
                <span class="guideline-icon">ğŸ”¬</span>
                <span class="guideline-text"
                  >Evidence-based content encouraged</span
                >
              </div>
              <div class="guideline-item">
                <span class="guideline-icon">ğŸ“Š</span>
                <span class="guideline-text"
                  >Data and research citations welcome</span
                >
              </div>
              <div class="guideline-item">
                <span class="guideline-icon">ğŸ¤</span>
                <span class="guideline-text"
                  >Constructive and educational focus</span
                >
              </div>
            </div>

            <form id="write-post-form" class="enhanced-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="post-title" class="form-label">
                    <span class="label-icon">ğŸ“</span>
                    Article Title *
                  </label>
                  <input
                    type="text"
                    id="post-title"
                    class="form-input"
                    required
                    maxlength="200"
                    placeholder="Enter a compelling and descriptive title..."
                    aria-describedby="title-help"
                  />
                  <small id="title-help" class="form-help">
                    Clear, specific titles perform better in search and
                    engagement
                  </small>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="post-category" class="form-label">
                    <span class="label-icon">ğŸ“‚</span>
                    Primary Category *
                  </label>
                  <select id="post-category" class="form-select" required>
                    <option value="">Select primary research area...</option>
                    <option value="research">ğŸ”¬ Research & Studies</option>
                    <option value="education">ğŸ“š Educational Methods</option>
                    <option value="ethics">âš–ï¸ Ethics & Philosophy</option>
                    <option value="ai-bias">ğŸ¯ AI Bias & Fairness</option>
                    <option value="privacy">ğŸ”’ Privacy & Security</option>
                    <option value="community">ğŸ¤ Community Insights</option>
                    <option value="technology">âš™ï¸ Technology & Tools</option>
                    <option value="policy">ğŸ“‹ Policy & Regulation</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="post-type" class="form-label">
                    <span class="label-icon">ğŸ“‹</span>
                    Content Type
                  </label>
                  <select id="post-type" class="form-select">
                    <option value="research">Research Article</option>
                    <option value="tutorial">Tutorial/Guide</option>
                    <option value="case-study">Case Study</option>
                    <option value="opinion">Opinion/Commentary</option>
                    <option value="review">Literature Review</option>
                    <option value="news">News/Updates</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label for="post-summary" class="form-label">
                  <span class="label-icon">ğŸ“‹</span>
                  Executive Summary *
                </label>
                <textarea
                  id="post-summary"
                  class="form-textarea"
                  rows="4"
                  required
                  maxlength="500"
                  placeholder="Provide a compelling summary that captures the key insights, findings, or contributions of your article..."
                  aria-describedby="summary-help"
                ></textarea>
                <small id="summary-help" class="form-help">
                  <span class="help-item"
                    >âœ“ Highlight key findings or insights</span
                  >
                  <span class="help-item"
                    >âœ“ Include your main contribution</span
                  >
                  <span class="help-item">âœ“ Make it engaging for readers</span>
                </small>
              </div>

              <div class="form-group">
                <label for="post-content" class="form-label">
                  <span class="label-icon">ğŸ“„</span>
                  Article Content *
                </label>
                <div class="content-editor">
                  <div class="editor-toolbar">
                    <div class="toolbar-group">
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="bold"
                        title="Bold"
                      >
                        <strong>B</strong>
                      </button>
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="italic"
                        title="Italic"
                      >
                        <em>I</em>
                      </button>
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="link"
                        title="Link"
                      >
                        ğŸ”—
                      </button>
                    </div>
                    <div class="toolbar-group">
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="heading"
                        title="Heading"
                      >
                        H
                      </button>
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="list"
                        title="List"
                      >
                        ğŸ“‹
                      </button>
                      <button
                        type="button"
                        class="toolbar-btn"
                        data-action="quote"
                        title="Quote"
                      >
                        ğŸ’­
                      </button>
                    </div>
                  </div>
                  <textarea
                    id="post-content"
                    class="form-textarea content-textarea"
                    rows="20"
                    required
                    placeholder="Write your article content here...

You can use Markdown formatting:
- **Bold text** and *italic text*
- ## Headings and ### Subheadings
- [Links](https://example.com)
- > Blockquotes for important notes
- `Code snippets` and code blocks
- Lists and numbered lists

For research articles, consider including:
- Introduction and background
- Methodology (if applicable)
- Key findings or insights
- Discussion and implications
- Conclusion and future work
- References and citations"
                  ></textarea>
                </div>
                <div class="content-help">
                  <div class="help-section">
                    <h4>ğŸ“Š Research Article Structure</h4>
                    <ul>
                      <li>Clear introduction with context</li>
                      <li>Methodology or approach</li>
                      <li>Results and key findings</li>
                      <li>Discussion and implications</li>
                      <li>Conclusion and future directions</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="post-tags" class="form-label">
                    <span class="label-icon">ğŸ·ï¸</span>
                    Tags & Keywords
                  </label>
                  <input
                    type="text"
                    id="post-tags"
                    class="form-input"
                    placeholder="ai-ethics, education, bias, fairness (comma-separated)"
                    aria-describedby="tags-help"
                  />
                  <small id="tags-help" class="form-help">
                    Use relevant keywords to help readers discover your content
                  </small>
                </div>

                <div class="form-group">
                  <label for="post-reading-time" class="form-label">
                    <span class="label-icon">â±ï¸</span>
                    Estimated Reading Time
                  </label>
                  <select id="post-reading-time" class="form-select">
                    <option value="2">2-3 minutes (Quick Read)</option>
                    <option value="5" selected>5-7 minutes (Standard)</option>
                    <option value="10">10-15 minutes (In-depth)</option>
                    <option value="20">20+ minutes (Comprehensive)</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="author-options">
                  <h4 class="options-title">
                    <span class="title-icon">ğŸ‘¤</span>
                    Author Information
                  </h4>
                  <div class="checkbox-group">
                    <label class="checkbox-container">
                      <input type="checkbox" id="author-bio" checked />
                      <span class="checkmark"></span>
                      <span class="checkbox-label"
                        >Include author bio and credentials</span
                      >
                    </label>
                    <label class="checkbox-container">
                      <input type="checkbox" id="allow-contact" />
                      <span class="checkmark"></span>
                      <span class="checkbox-label"
                        >Allow readers to contact me about this article</span
                      >
                    </label>
                    <label class="checkbox-container">
                      <input type="checkbox" id="peer-review" />
                      <span class="checkmark"></span>
                      <span class="checkbox-label"
                        >Submit for peer review (research articles)</span
                      >
                    </label>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <div class="primary-actions">
                  <button
                    type="button"
                    class="btn btn-outline"
                    id="save-draft-btn"
                  >
                    <span class="btn-icon">ğŸ’¾</span>
                    <span class="btn-text">Save Draft</span>
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    id="preview-btn"
                  >
                    <span class="btn-icon">ğŸ‘ï¸</span>
                    <span class="btn-text">Preview</span>
                  </button>
                  <button type="submit" class="btn btn-primary">
                    <span class="btn-icon">ğŸš€</span>
                    <span class="btn-text">Publish Article</span>
                  </button>
                </div>
                <div class="secondary-actions">
                  <button
                    type="button"
                    class="btn btn-link"
                    id="guidelines-btn"
                  >
                    ğŸ“‹ View Contribution Guidelines
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Post Detail Modal with Comments -->
    <div
      id="post-detail-modal"
      class="modal-overlay"
      style="display: none"
      role="dialog"
      aria-labelledby="post-detail-title"
      aria-modal="true"
    >
      <div class="modal-container large-modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="post-detail-title" class="modal-title">
              <span class="title-icon">ğŸ“</span>
              <span id="modal-post-title">Blog Post</span>
            </h2>
            <button
              class="modal-close"
              aria-label="Close modal"
              id="close-post-modal"
            >
              &times;
            </button>
          </div>

          <div class="modal-body post-detail-body">
            <!-- Post Content -->
            <article class="post-detail-content">
              <div class="post-detail-header">
                <div class="post-meta">
                  <div class="post-category" id="modal-post-category">
                    ğŸ”¬ Research
                  </div>
                  <time class="post-date" id="modal-post-date">
                    January 15, 2025
                  </time>
                </div>

                <div class="post-author-info">
                  <img
                    src=""
                    alt=""
                    class="author-avatar"
                    id="modal-author-avatar"
                  />
                  <div class="author-details">
                    <span class="author-name" id="modal-author-name"
                      >Dr. Sarah Chen</span
                    >
                    <span class="author-title" id="modal-author-title"
                      >AI Ethics Researcher</span
                    >
                  </div>
                </div>
              </div>

              <div class="post-content" id="modal-post-content">
                <!-- Post content will be inserted here -->
              </div>

              <div class="post-tags" id="modal-post-tags">
                <!-- Tags will be inserted here -->
              </div>

              <div class="post-actions">
                <button class="action-btn like-btn" id="like-post-btn">
                  <span class="action-icon">â¤ï¸</span>
                  <span class="action-count" id="like-count">0</span>
                  <span class="action-text">Like</span>
                </button>
                <button class="action-btn share-btn" id="share-post-btn">
                  <span class="action-icon">ğŸ”—</span>
                  <span class="action-text">Share</span>
                </button>
                <button class="action-btn bookmark-btn" id="bookmark-post-btn">
                  <span class="action-icon">ğŸ”–</span>
                  <span class="action-text">Bookmark</span>
                </button>
              </div>
            </article>

            <!-- Comment System -->
            <div
              id="post-comments"
              class="post-comments-section"
              data-comment-system
              data-post-id=""
            >
              <!-- Comments will be inserted here by the BlogCommentSystem -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading" class="loading-enhanced" aria-hidden="true" role="status">
      <div class="loading-container">
        <div class="loading-spinner" aria-hidden="true"></div>
        <div class="loading-content">
          <p class="loading-text">Loading research articles...</p>
          <p class="loading-subtext">Discovering insights from our community</p>
        </div>
        <div
          class="loading-progress"
          role="progressbar"
          aria-label="Loading progress"
          aria-valuenow="0"
          aria-valuemin="0"
          aria-valuemax="100"
        >
          <div class="progress-bar"></div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="src/js/services/firebase-service.js"></script>
    <script type="module" src="src/js/services/auth-service.js"></script>
    <script type="module" src="src/js/services/blog-service.js"></script>
    <script
      type="module"
      src="src/js/components/notification-toast.js"
    ></script>
    <script type="module" src="src/js/components/modal-utility.js"></script>

    <!-- Enhanced Blog Page Script -->
    <script type="module">
      import AuthService from "./src/js/services/auth-service.js";
      import BlogService from "./src/js/services/blog-service.js";
      import ContributionService from "./src/js/services/contribution-service.js";

      class BlogPage {
        constructor() {
          this.authService = new AuthService();
          this.blogService = new BlogService();
          this.contributionService = new ContributionService();
          this.currentUser = null;
          this.posts = [];
          this.filteredPosts = [];
          this.postsPerPage = 10;
          this.currentPage = 0;
          this.activeFilters = {};
          this.searchQuery = "";
        }

        async init() {
          await this.authService.initialize();
          await this.contributionService.initialize();

          // Set up auth state listener
          this.authService.firebaseService.addAuthStateListener((user) => {
            this.currentUser = user;
            this.updateUIForAuth();
            this.checkAdminAccess(); // Check admin access when auth state changes
          });

          this.setupEventHandlers();
          await this.loadBlogPosts();
        }

        checkAdminAccess() {
          const adminSection = document.getElementById("admin-panel-btn");

          if (
            this.currentUser &&
            this.currentUser.email === "research@simulateai.io"
          ) {
            adminSection.style.display = "block";
          } else {
            adminSection.style.display = "none";
          }
        }

        async updateUIForAuth() {
          const writePostBtn = document.getElementById("write-post-btn");
          const contributionStatus = document.getElementById(
            "contribution-status",
          );

          if (this.currentUser) {
            // Check if user has profile
            if (!this.authService.userProfile) {
              writePostBtn.style.display = "inline-flex";
              writePostBtn.querySelector(".btn-text").textContent =
                "Complete Profile to Post";
              if (contributionStatus) {
                contributionStatus.textContent =
                  "Profile setup required to share content";
              }
              return;
            }

            // Check if user can post
            if (this.canWritePosts()) {
              writePostBtn.style.display = "inline-flex";

              // Update button text and status based on donor status
              const guidelines =
                await this.contributionService.getContributionGuidelines(
                  this.currentUser.uid,
                );

              const btnText = guidelines.autoApproval
                ? "Share & Publish Instantly"
                : "Share Your Research";
              writePostBtn.querySelector(".btn-text").textContent = btnText;

              if (contributionStatus) {
                contributionStatus.textContent = guidelines.autoApproval
                  ? "Instant publication as a valued donor"
                  : "Join our community of contributors";
              }
            } else {
              writePostBtn.style.display = "inline-flex";
              writePostBtn.querySelector(".btn-text").textContent =
                "Setup Required";
              if (contributionStatus) {
                contributionStatus.textContent =
                  "Complete setup to share your expertise";
              }
            }
          } else {
            // User not signed in
            writePostBtn.style.display = "inline-flex";
            writePostBtn.querySelector(".btn-text").textContent =
              "Sign In to Post";
            if (contributionStatus) {
              contributionStatus.textContent =
                "Sign in to share your research and insights";
            }
          }
        }

        canWritePosts() {
          // Check if user is authenticated
          if (!this.currentUser) {
            return false;
          }

          // Check if user has a complete profile
          if (!this.authService.userProfile) {
            return false;
          }

          // Check if contribution service allows contributions
          return this.contributionService.canContribute();
        }

        async loadBlogPosts() {
          try {
            this.showLoading(true);

            // For now, create some sample posts since Firebase collection is empty
            this.posts = await this.getSamplePosts();
            this.filteredPosts = [...this.posts];

            // Note: Article rendering is handled by professional-blog.js
          } catch (error) {
            console.error("Error loading blog posts:", error);
            this.showError("Failed to load blog posts");
          } finally {
            this.showLoading(false);
          }
        }

        async getSamplePosts() {
          // Sample posts for demonstration
          return [
            {
              id: "sample1",
              title: "The Importance of Bias Detection in AI Education",
              summary:
                "Exploring how simulation-based learning helps students understand and identify AI bias in real-world scenarios.",
              content:
                "AI bias is one of the most critical issues in modern artificial intelligence...",
              category: "ai-bias",
              author: {
                name: "SimulateAI Team",
                tier: 3,
                avatar: "/assets/team-avatar.png",
              },
              tags: ["ai-bias", "education", "simulation"],
              createdAt: new Date("2025-01-15"),
              featured: true,
              views: 1250,
              likes: 89,
            },
            {
              id: "sample2",
              title: "Research Update: Student Learning Outcomes",
              summary:
                "Latest findings from our research study on simulation-based AI ethics education effectiveness.",
              content:
                "Our recent research study involving 500+ students shows significant improvements...",
              category: "research",
              author: {
                name: "Dr. Sarah Chen",
                tier: 1,
                avatar: "/assets/researcher-avatar.png",
              },
              tags: ["research", "education", "outcomes"],
              createdAt: new Date("2025-01-12"),
              featured: false,
              views: 834,
              likes: 67,
            },
            {
              id: "sample3",
              title: "Privacy by Design in Educational Technology",
              summary:
                "How we protect student privacy while enabling meaningful AI ethics education.",
              content:
                "Privacy protection is fundamental to our educational approach...",
              category: "privacy",
              author: {
                name: "Alex Rodriguez",
                tier: 2,
                avatar: "/assets/contributor-avatar.png",
              },
              tags: ["privacy", "design", "education"],
              createdAt: new Date("2025-01-10"),
              featured: true,
              views: 945,
              likes: 73,
            },
          ];
        }

        getCategoryEmoji(category) {
          const emojis = {
            research: "ğŸ”¬",
            education: "ğŸ“š",
            ethics: "âš–ï¸",
            "ai-bias": "ğŸ¯",
            privacy: "ğŸ”’",
            community: "ğŸ¤",
          };
          return emojis[category] || "ğŸ“";
        }

        getCategoryName(category) {
          const names = {
            research: "Research",
            education: "Education",
            ethics: "Ethics",
            "ai-bias": "AI Bias",
            privacy: "Privacy",
            community: "Community",
          };
          return names[category] || "General";
        }

        getTierBadge(tier) {
          const badges = {
            0: "",
            1: "ğŸ”¬",
            2: "â­",
            3: "ğŸ‘‘",
          };
          return badges[tier] || "";
        }

        formatDate(date) {
          return date.toLocaleDateString("en-US", {
            year: "numeric",
            month: "short",
            day: "numeric",
          });
        }

        openPost(postId) {
          const post = this.samplePosts.find((p) => p.id === postId);
          if (!post) {
            console.error("Post not found:", postId);
            return;
          }

          // Populate modal with post data
          document.getElementById("modal-post-title").textContent = post.title;
          document.getElementById("modal-post-category").textContent =
            `${this.getCategoryEmoji(post.category)} ${this.getCategoryName(post.category)}`;
          document.getElementById("modal-post-date").textContent =
            this.formatDate(post.createdAt);
          document.getElementById("modal-author-name").textContent =
            post.author.name;
          document.getElementById("modal-author-title").textContent =
            post.author.title || "Community Member";
          document.getElementById("modal-author-avatar").src =
            post.author.avatar;
          document.getElementById("modal-author-avatar").alt = post.author.name;

          // Generate full post content (in a real app, this would come from the server)
          const fullContent = this.generateFullPostContent(post);
          document.getElementById("modal-post-content").innerHTML = fullContent;

          // Add tags
          const tagsContainer = document.getElementById("modal-post-tags");
          tagsContainer.innerHTML = post.tags
            .map((tag) => `<span class="post-tag">#${tag}</span>`)
            .join("");

          // Set up comment system
          const commentsContainer = document.getElementById("post-comments");
          commentsContainer.dataset.postId = postId;

          // Initialize comment system
          import("./src/js/components/blog-comment-system.js").then(
            (module) => {
              const BlogCommentSystem = module.default;
              new BlogCommentSystem(postId, "post-comments");
            },
          );

          // Show modal
          document.getElementById("post-detail-modal").style.display = "flex";
          document.body.style.overflow = "hidden"; // Prevent background scrolling
        }

        generateFullPostContent(post) {
          // This would normally come from your backend
          // For demo purposes, we'll generate some content based on the post
          const content = `
            <p>${post.summary}</p>
            
            <h2>Introduction</h2>
            <p>In this comprehensive analysis, we explore the key concepts and methodologies that are shaping the future of AI ethics education. Our research demonstrates the importance of simulation-based learning in developing critical thinking skills.</p>
            
            <blockquote>
              "Education is the most powerful weapon which you can use to change the world." - Nelson Mandela
            </blockquote>
            
            <h2>Key Findings</h2>
            <p>Our study reveals several important insights about the effectiveness of interactive learning approaches in AI ethics education:</p>
            
            <ul>
              <li>Simulation-based scenarios improve decision-making skills by 40%</li>
              <li>Interactive case studies enhance retention rates by 65%</li>
              <li>Peer discussion forums increase engagement by 80%</li>
            </ul>
            
            <h2>Methodology</h2>
            <p>We employed a mixed-methods approach combining quantitative analysis with qualitative interviews. Our research framework incorporates both traditional academic assessment and innovative peer-review mechanisms.</p>
            
            <h2>Implications</h2>
            <p>The findings suggest that integrating technology-enhanced learning tools with traditional educational approaches creates more effective learning environments. This hybrid model shows particular promise for complex topics like AI ethics.</p>
            
            <h2>Conclusion</h2>
            <p>As we continue to advance our understanding of effective AI ethics education, it becomes clear that innovative pedagogical approaches are essential. We encourage educators and researchers to explore these methodologies in their own contexts.</p>
          `;

          return content;
        }

        closeModal() {
          document.getElementById("post-detail-modal").style.display = "none";
          document.body.style.overflow = "auto"; // Restore scrolling
        }

        setupEventHandlers() {
          // Write post button
          document
            .getElementById("write-post-btn")
            ?.addEventListener("click", () => {
              this.showWritePostModal();
            });

          // Admin dashboard button
          document
            .getElementById("admin-dashboard-btn")
            ?.addEventListener("click", () => {
              window.location.href = "/admin-blog-dashboard.html";
            });

          // New submission modal event handlers
          document
            .getElementById("close-submission-modal")
            ?.addEventListener("click", () => {
              this.hideWritePostModal();
            });

          // Close modal when clicking outside
          document
            .getElementById("blog-submission-modal")
            ?.addEventListener("click", (e) => {
              if (e.target.id === "blog-submission-modal") {
                this.hideWritePostModal();
              }
            });

          // Character counters
          this.setupCharacterCounters();

          // Form submission
          document
            .getElementById("blog-submission-form")
            ?.addEventListener("submit", (e) => {
              e.preventDefault();
              this.handleBlogSubmission();
            });

          // Save draft functionality
          document
            .getElementById("save-draft-btn")
            ?.addEventListener("click", () => {
              this.saveDraft();
            });

          // Filters - Let professional blog script handle filtering
          // No additional filter event handlers needed as professional-blog.js handles this

          // Load more button
          document
            .getElementById("load-more-btn")
            .addEventListener("click", () => {
              this.currentPage++;
              this.renderBlogPosts();
            });

          // Old modal handlers (kept for compatibility)
          document
            .getElementById("write-post-form")
            ?.addEventListener("submit", (e) => {
              e.preventDefault();
              this.handlePostSubmission();
            });

          document
            .querySelector("#write-post-modal .modal-close")
            ?.addEventListener("click", () => {
              this.hideWritePostModal();
            });

          // Post detail modal event handlers
          document
            .querySelector(".modal-close-btn")
            ?.addEventListener("click", () => {
              this.closeModal();
            });

          // Close modal when clicking outside content area
          document
            .getElementById("post-detail-modal")
            ?.addEventListener("click", (e) => {
              if (e.target.id === "post-detail-modal") {
                this.closeModal();
              }
            });

          // Close modal with Escape key
          document.addEventListener("keydown", (e) => {
            const modal = document.getElementById("post-detail-modal");
            if (e.key === "Escape" && modal && modal.style.display === "flex") {
              this.closeModal();
            }
          });
        }

        setupCharacterCounters() {
          const counters = [
            { input: "article-title", counter: "title-char-count", max: 150 },
            {
              input: "article-subtitle",
              counter: "subtitle-char-count",
              max: 200,
            },
            {
              input: "article-excerpt",
              counter: "excerpt-char-count",
              max: 300,
            },
            { input: "author-bio", counter: "bio-char-count", max: 250 },
          ];

          counters.forEach(({ input, counter, max }) => {
            const inputElement = document.getElementById(input);
            const counterElement = document.getElementById(counter);

            if (inputElement && counterElement) {
              inputElement.addEventListener("input", () => {
                const length = inputElement.value.length;
                counterElement.textContent = `${length}/${max}`;

                // Add warning color when approaching limit
                if (length > max * 0.9) {
                  counterElement.style.color = "var(--warning-color)";
                } else if (length === max) {
                  counterElement.style.color = "var(--error-color)";
                } else {
                  counterElement.style.color = "var(--text-muted)";
                }
              });
            }
          });
        }

        matchesAuthorFilter(post, filter) {
          switch (filter) {
            case "team":
              return post.author.name.includes("SimulateAI Team");
            case "community":
              return (
                !post.author.name.includes("SimulateAI Team") &&
                post.author.tier >= 1
              );
            case "research":
              return post.author.tier >= 1;
            default:
              return true;
          }
        }

        async showWritePostModal() {
          // Check authentication first
          if (!this.currentUser) {
            this.showAuthPrompt();
            return;
          }

          // Check if user has a profile
          if (!this.authService.userProfile) {
            this.showProfilePrompt();
            return;
          }

          // Check if user can contribute
          if (!this.contributionService.canContribute()) {
            this.showContributionError();
            return;
          }

          // Show our new enhanced modal
          const modal = document.getElementById("blog-submission-modal");
          modal.classList.add("show");
          document.body.style.overflow = "hidden";

          // Update UI based on donor status
          await this.updateSubmissionModalForUser();
        }

        showAuthPrompt() {
          const message = `
            ğŸ” Sign In Required
            
            To share your research and insights with our community, please sign in to your account.
            
            Don't have an account yet? Sign up to join our community of educators, researchers, and AI ethics enthusiasts.
          `;

          if (confirm(message + "\n\nWould you like to sign in now?")) {
            // Trigger authentication flow
            if (this.authService && this.authService.showLoginModal) {
              this.authService.showLoginModal();
            } else {
              window.location.href = "index.html#auth";
            }
          }
        }

        showProfilePrompt() {
          const message = `
            ğŸ‘¤ Complete Your Profile
            
            To submit blog posts and research articles, you need to complete your profile first. This helps us:
            
            â€¢ Properly attribute your contributions
            â€¢ Connect you with other researchers
            â€¢ Provide appropriate publishing permissions
            â€¢ Build trust within our community
            
            Your profile includes basic information like your name, bio, research interests, and professional background.
          `;

          if (
            confirm(
              message + "\n\nWould you like to complete your profile now?",
            )
          ) {
            window.location.href = "profile.html?setup=true";
          }
        }

        async showContributionError() {
          try {
            const guidelines =
              await this.contributionService.getContributionGuidelines(
                this.currentUser.uid,
              );

            let message = `
              âŒ Unable to Submit Posts
              
              There seems to be an issue with your account that prevents you from submitting posts.
            `;

            if (!guidelines.canContribute) {
              message += `
              
              This could be due to:
              â€¢ Incomplete profile information
              â€¢ Account verification pending
              â€¢ Community guidelines violation
              
              Please check your profile and ensure all required fields are completed.
              `;

              if (
                confirm(message + "\n\nWould you like to review your profile?")
              ) {
                window.location.href = "profile.html";
              }
            }
          } catch (error) {
            console.error("Error getting contribution guidelines:", error);
            alert(
              "Sorry, there was an error checking your contribution status. Please try again later.",
            );
          }
        }

        hideWritePostModal() {
          const modal = document.getElementById("blog-submission-modal");
          modal.classList.remove("show");
          document.body.style.overflow = "auto";
          this.resetSubmissionForm();
        }

        async updateSubmissionModalForUser() {
          const donorBenefits = document.getElementById("donor-benefits-info");
          const statusBanner = document.getElementById(
            "submission-status-banner",
          );
          const statusIcon = document.getElementById("status-icon");
          const statusMessage = document.getElementById("status-message");
          const contributionStatus = document.getElementById(
            "contribution-status",
          );

          if (this.currentUser) {
            const guidelines =
              await this.contributionService.getContributionGuidelines(
                this.currentUser.uid,
              );

            if (guidelines.autoApproval) {
              // Show donor benefits - immediate publication
              donorBenefits.style.display = "block";
              statusBanner.style.display = "flex";
              statusBanner.className = "status-banner success";
              statusIcon.textContent = "ğŸ‘‘";
              statusMessage.textContent =
                "As a valued donor, your article will be published immediately upon submission!";
              contributionStatus.textContent =
                "Instant publication - no moderation required";
            } else {
              // Show regular submission process with donation encouragement
              donorBenefits.style.display = "none";
              statusBanner.style.display = "flex";
              statusBanner.className = "status-banner info";
              statusIcon.textContent = "ğŸ“";
              statusMessage.innerHTML = `
                Your submission will be reviewed by our moderation team before publication (typically within 24 hours).
                <br><br>
                <strong>ğŸ’¡ Did you know?</strong> <a href="donate.html" style="color: #1a73e8; text-decoration: underline;">Donors</a> get instant publication without moderation delays!
              `;
              contributionStatus.textContent =
                "Share your expertise - moderation review required";
            }

            // Update form submit button text based on status
            const submitBtn = document.querySelector(
              '#blog-submission-form button[type="submit"]',
            );
            if (submitBtn) {
              const btnText = submitBtn.querySelector(".btn-text");
              if (btnText) {
                btnText.textContent = guidelines.autoApproval
                  ? "Publish Article Instantly"
                  : "Submit for Review";
              }
            }
          }
        }

        resetSubmissionForm() {
          const form = document.getElementById("blog-submission-form");
          form.reset();

          // Reset character counters
          document.getElementById("title-char-count").textContent = "0/150";
          document.getElementById("subtitle-char-count").textContent = "0/200";
          document.getElementById("excerpt-char-count").textContent = "0/300";
          document.getElementById("bio-char-count").textContent = "0/250";

          // Hide status banners
          document.getElementById("submission-status-banner").style.display =
            "none";
        }

        async handleBlogSubmission() {
          try {
            const submitBtn = document.getElementById("submit-article-btn");
            const btnText = submitBtn.querySelector(".btn-text");
            const originalText = btnText.textContent;

            // Show loading state
            submitBtn.classList.add("loading");
            submitBtn.disabled = true;

            // Collect form data
            const formData = {
              title: document.getElementById("article-title").value.trim(),
              subtitle: document
                .getElementById("article-subtitle")
                .value.trim(),
              category: document.getElementById("article-category").value,
              tags: document.getElementById("article-tags").value.trim(),
              excerpt: document.getElementById("article-excerpt").value.trim(),
              content: document.getElementById("article-content").value.trim(),
              authorBio: document.getElementById("author-bio").value.trim(),
              affiliation: document
                .getElementById("author-affiliation")
                .value.trim(),
              agreeTerms: document.getElementById("agree-terms").checked,
              agreeReview: document.getElementById("agree-review").checked,
            };

            // Validate required fields
            if (
              !formData.title ||
              !formData.category ||
              !formData.excerpt ||
              !formData.content ||
              !formData.agreeTerms
            ) {
              throw new Error(
                "Please fill in all required fields and agree to the terms.",
              );
            }

            // Process tags
            const tagsArray = formData.tags
              ? formData.tags
                  .split(",")
                  .map((tag) => tag.trim())
                  .filter((tag) => tag)
              : [];

            // Create submission object
            const submission = {
              type: "blog",
              title: formData.title,
              subtitle: formData.subtitle,
              excerpt: formData.excerpt,
              content: formData.content,
              category: formData.category,
              tags: tagsArray,
              authorBio: formData.authorBio,
              affiliation: formData.affiliation,
              metadata: {
                wordCount: formData.content.split(/\s+/).length,
                estimatedReadTime: Math.ceil(
                  formData.content.split(/\s+/).length / 200,
                ),
                submissionSource: "blog-page",
              },
            };

            // Submit through ContributionService
            const result =
              await this.contributionService.submitBlogPost(submission);

            // Show success message
            this.showSubmissionSuccess(result);

            // Close modal and refresh
            this.hideWritePostModal();
            await this.loadBlogPosts();
          } catch (error) {
            console.error("Blog submission error:", error);
            this.showSubmissionError(error.message);
          } finally {
            // Reset button state
            const submitBtn = document.getElementById("submit-article-btn");
            const btnText = submitBtn.querySelector(".btn-text");
            submitBtn.classList.remove("loading");
            submitBtn.disabled = false;
            btnText.textContent = "Submit Article";
          }
        }

        showSubmissionSuccess(result) {
          const message = result.autoApproved
            ? "ğŸ‰ Your article has been published successfully!"
            : "âœ… Your article has been submitted for review. You'll receive an email when it's approved.";

          // You could integrate with your notification system here
          alert(message);
        }

        showSubmissionError(message) {
          const errorMessage = `âŒ Submission failed: ${message}`;
          alert(errorMessage);
        }

        async saveDraft() {
          try {
            const formData = {
              title: document.getElementById("article-title").value.trim(),
              subtitle: document
                .getElementById("article-subtitle")
                .value.trim(),
              category: document.getElementById("article-category").value,
              tags: document.getElementById("article-tags").value.trim(),
              excerpt: document.getElementById("article-excerpt").value.trim(),
              content: document.getElementById("article-content").value.trim(),
              authorBio: document.getElementById("author-bio").value.trim(),
              affiliation: document
                .getElementById("author-affiliation")
                .value.trim(),
            };

            // Save to localStorage as draft
            const draftKey = `blog-draft-${Date.now()}`;
            localStorage.setItem(
              draftKey,
              JSON.stringify({
                ...formData,
                savedAt: new Date().toISOString(),
                type: "blog-draft",
              }),
            );

            alert("ğŸ’¾ Draft saved successfully!");
          } catch (error) {
            console.error("Error saving draft:", error);
            alert("âŒ Failed to save draft. Please try again.");
          }
        }

        async handlePostSubmission() {
          try {
            // Get form data
            const title = document.getElementById("post-title").value.trim();
            const summary = document
              .getElementById("post-summary")
              .value.trim();
            const content = document
              .getElementById("post-content")
              .value.trim();
            const category = document.getElementById("post-category").value;
            const tags = document
              .getElementById("post-tags")
              .value.split(",")
              .map((tag) => tag.trim())
              .filter(Boolean);
            const readingTime =
              document.getElementById("post-reading-time").value;

            // Validate required fields
            if (!title || !summary || !content) {
              this.showError("Please fill in all required fields");
              return;
            }

            this.showLoading(true);

            // Submit post through contribution service
            const result = await this.contributionService.submitBlogPost({
              title,
              summary,
              content,
              category,
              tags,
              readingTime: parseInt(readingTime, 10),
              submissionMethod: "blog_form",
            });

            this.showLoading(false);
            this.hideWritePostModal();

            // Show success message based on approval status
            if (result.autoApproved) {
              this.showSuccess(`ğŸ‰ ${result.message} Your post is now live!`);
              // Refresh posts to show the new one
              await this.loadBlogPosts();
            } else {
              this.showSuccess(
                `ğŸ“‹ ${result.message} We'll notify you when it's reviewed.`,
              );
            }

            // Clear form
            document.getElementById("write-post-form").reset();
          } catch (error) {
            this.showLoading(false);
            this.showError(`Failed to submit post: ${error.message}`);
          }
        }

        showLoading(show) {
          document.getElementById("loading").style.display = show
            ? "flex"
            : "none";
        }

        showError(message) {
          // TODO: Use notification toast
          if (window.NotificationToast) {
            window.NotificationToast.show(message, "error");
          } else {
            alert(`Error: ${message}`);
          }
        }

        showSuccess(message) {
          // TODO: Use notification toast
          if (window.NotificationToast) {
            window.NotificationToast.show(message, "success");
          } else {
            alert(message);
          }
        }
      }

      // Initialize blog page and make it globally available
      window.blogPage = new BlogPage();
      window.blogPage.init();
    </script>

    <!-- Enhanced Blog JavaScript -->
    <script type="module" src="src/js/professional-blog.js"></script>

    <!-- Back to Top Component -->
    <script type="module" src="src/js/components/back-to-top.js"></script>

    <!-- Professional Footer Component -->
    <script
      type="module"
      src="src/js/components/professional-footer.js"
    ></script>

    <!-- Shared Navigation Component - Load with slight delay to avoid conflicts -->
    <script type="module">
      // Ensure the page is fully loaded before initializing navigation
      setTimeout(() => {
        import("./src/js/components/shared-navigation.js");
      }, 100);
    </script>
  </body>
</html>
